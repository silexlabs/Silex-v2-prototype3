var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(c,d,e){c=c.split(".");e=e||goog.global;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===d?e=e[f]?e[f]:e[f]={}:e[f]=d};goog.define=function(c,d){var e=d;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,c)&&(e=goog.global.CLOSURE_DEFINES[c]);goog.exportPath_(c,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(c){if(!COMPILED){if(goog.isProvided_(c))throw Error('Namespace "'+c+'" already declared.');delete goog.implicitNamespaces_[c];for(var d=c;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);)goog.implicitNamespaces_[d]=!0}goog.exportPath_(c)};goog.setTestOnly=function(c){if(COMPILED&&!goog.DEBUG)throw c=c||"",Error("Importing test-only code into non-debug environment"+c?": "+c:".");};
COMPILED||(goog.isProvided_=function(c){return!goog.implicitNamespaces_[c]&&!!goog.getObjectByName(c)},goog.implicitNamespaces_={});goog.getObjectByName=function(c,d){for(var e=c.split("."),f=d||goog.global,h;h=e.shift();)if(goog.isDefAndNotNull(f[h]))f=f[h];else return null;return f};goog.globalize=function(c,d){var e=d||goog.global,f;for(f in c)e[f]=c[f]};
goog.addDependency=function(c,d,e){if(goog.DEPENDENCIES_ENABLED){var f;c=c.replace(/\\/g,"/");for(var h=goog.dependencies_,k=0;f=d[k];k++)h.nameToPath[f]=c,c in h.pathToNames||(h.pathToNames[c]={}),h.pathToNames[c][f]=!0;for(f=0;d=e[f];f++)c in h.requires||(h.requires[c]={}),h.requires[c][d]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(c){if(!COMPILED&&!goog.isProvided_(c)){if(goog.ENABLE_DEBUG_LOADER){var d=goog.getPathFromDeps_(c);if(d){goog.included_[d]=!0;goog.writeScripts_();return}}c="goog.require could not find: "+c;goog.global.console&&goog.global.console.error(c);throw Error(c);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(c,d){return c};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(c){c.getInstance=function(){if(c.instance_)return c.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=c);return c.instance_=new c}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var c=goog.global.document;return"undefined"!=typeof c&&"write"in c},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var c=goog.global.document.getElementsByTagName("script"),d=c.length-1;0<=d;--d){var e=c[d].src,f=e.lastIndexOf("?"),f=-1==f?e.length:
f;if("base.js"==e.substr(f-7,7)){goog.basePath=e.substr(0,f-7);break}}},goog.importScript_=function(c){var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[c]&&d(c)&&(goog.dependencies_.written[c]=!0)},goog.writeScriptTag_=function(c){if(goog.inHtmlDocument_()){var d=goog.global.document;if("complete"==d.readyState){if(/\bdeps.js$/.test(c))return!1;throw Error('Cannot write "'+c+'" after document load');}d.write('<script type="text/javascript" src="'+c+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function c(h){if(!(h in f.written)){if(!(h in f.visited)&&(f.visited[h]=!0,h in f.requires))for(var l in f.requires[h])if(!goog.isProvided_(l))if(l in f.nameToPath)c(f.nameToPath[l]);else throw Error("Undefined nameToPath for "+l);h in e||(e[h]=!0,d.push(h))}}var d=[],e={},f=goog.dependencies_,h;for(h in goog.included_)f.written[h]||c(h);for(h=0;h<d.length;h++)if(d[h])goog.importScript_(goog.basePath+d[h]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(c){return c in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[c]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(c){var d=typeof c;if("object"==d)if(c){if(c instanceof Array)return"array";if(c instanceof Object)return d;var e=Object.prototype.toString.call(c);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof c.length&&"undefined"!=typeof c.splice&&"undefined"!=typeof c.propertyIsEnumerable&&!c.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof c.call&&"undefined"!=typeof c.propertyIsEnumerable&&!c.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==d&&"undefined"==typeof c.call)return"object";return d};goog.isDef=function(c){return void 0!==c};goog.isNull=function(c){return null===c};goog.isDefAndNotNull=function(c){return null!=c};goog.isArray=function(c){return"array"==goog.typeOf(c)};goog.isArrayLike=function(c){var d=goog.typeOf(c);return"array"==d||"object"==d&&"number"==typeof c.length};goog.isDateLike=function(c){return goog.isObject(c)&&"function"==typeof c.getFullYear};goog.isString=function(c){return"string"==typeof c};
goog.isBoolean=function(c){return"boolean"==typeof c};goog.isNumber=function(c){return"number"==typeof c};goog.isFunction=function(c){return"function"==goog.typeOf(c)};goog.isObject=function(c){var d=typeof c;return"object"==d&&null!=c||"function"==d};goog.getUid=function(c){return c[goog.UID_PROPERTY_]||(c[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(c){"removeAttribute"in c&&c.removeAttribute(goog.UID_PROPERTY_);try{delete c[goog.UID_PROPERTY_]}catch(d){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(c){var d=goog.typeOf(c);if("object"==d||"array"==d){if(c.clone)return c.clone();var d="array"==d?[]:{},e;for(e in c)d[e]=goog.cloneObject(c[e]);return d}return c};goog.bindNative_=function(c,d,e){return c.call.apply(c.bind,arguments)};
goog.bindJs_=function(c,d,e){if(!c)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,f);return c.apply(d,e)}}return function(){return c.apply(d,arguments)}};goog.bind=function(c,d,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(c,d){var e=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.slice.call(arguments);d.unshift.apply(d,e);return c.apply(this,d)}};goog.mixin=function(c,d){for(var e in d)c[e]=d[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(c){if(goog.global.execScript)goog.global.execScript(c,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(c);else{var d=goog.global.document,e=d.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(d.createTextNode(c));d.body.appendChild(e);
d.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(c,d){var e=function(c){return goog.cssNameMapping_[c]||c},f=function(c){c=c.split("-");for(var d=[],f=0;f<c.length;f++)d.push(e(c[f]));return d.join("-")},f=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:f:function(c){return c};return d?c+"-"+f(d):f(c)};goog.setCssNameMapping=function(c,d){goog.cssNameMapping_=c;goog.cssNameMappingStyle_=d};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(c,d){var e=d||{},f;for(f in e){var h=(""+e[f]).replace(/\$/g,"$$$$");c=c.replace(RegExp("\\{\\$"+f+"\\}","gi"),h)}return c};goog.getMsgWithFallback=function(c,d){return c};goog.exportSymbol=function(c,d,e){goog.exportPath_(c,d,e)};goog.exportProperty=function(c,d,e){c[d]=e};
goog.inherits=function(c,d){function e(){}e.prototype=d.prototype;c.superClass_=d.prototype;c.prototype=new e;c.prototype.constructor=c};
goog.base=function(c,d,e){var f=arguments.callee.caller;if(goog.DEBUG&&!f)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(f.superClass_)return f.superClass_.constructor.apply(c,Array.prototype.slice.call(arguments,1));for(var h=Array.prototype.slice.call(arguments,2),k=!1,l=c.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[d]===f)k=!0;else if(k)return l.prototype[d].apply(c,
h);if(c[d]===f)return c.constructor.prototype[d].apply(c,h);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(c){c.call(goog.global)};var silex={model:{}};silex.model.Selection=function(c,d,e,f,h,k,l,m){this.workspace=c;this.menu=d;this.stage=e;this.pageTool=f;this.propertiesTool=h;this.htmlEditor=k;this.textEditor=l;this.fileExplorer=m;this.component=this.page=this.file=null;this.context=silex.model.Component.CONTEXT_NORMAL};silex.model.Selection.prototype.getPage=function(){return this.page};silex.model.Selection.prototype.setPage=function(c){this.page=c};silex.model.Selection.prototype.getFile=function(){return this.file};
silex.model.Selection.prototype.setFile=function(c){this.file=c};silex.model.Selection.prototype.getComponent=function(){return this.component};silex.model.Selection.prototype.setComponent=function(c){this.component&&this.component.setSelected(!1);(this.component=c)&&this.component.setSelected(!0);this.propertiesTool.setComponent(c)};silex.model.Selection.prototype.getContext=function(){return this.context};silex.model.Selection.prototype.setContext=function(c){this.context=c};goog.debug={};goog.debug.Error=function(c){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";c&&(this.message=String(c))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(c,d){return 0==c.lastIndexOf(d,0)};goog.string.endsWith=function(c,d){var e=c.length-d.length;return 0<=e&&c.indexOf(d,e)==e};goog.string.caseInsensitiveStartsWith=function(c,d){return 0==goog.string.caseInsensitiveCompare(d,c.substr(0,d.length))};goog.string.caseInsensitiveEndsWith=function(c,d){return 0==goog.string.caseInsensitiveCompare(d,c.substr(c.length-d.length,d.length))};
goog.string.caseInsensitiveEquals=function(c,d){return c.toLowerCase()==d.toLowerCase()};goog.string.subs=function(c,d){for(var e=c.split("%s"),f="",h=Array.prototype.slice.call(arguments,1);h.length&&1<e.length;)f+=e.shift()+h.shift();return f+e.join("%s")};goog.string.collapseWhitespace=function(c){return c.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(c){return/^[\s\xa0]*$/.test(c)};goog.string.isEmptySafe=function(c){return goog.string.isEmpty(goog.string.makeSafe(c))};
goog.string.isBreakingWhitespace=function(c){return!/[^\t\n\r ]/.test(c)};goog.string.isAlpha=function(c){return!/[^a-zA-Z]/.test(c)};goog.string.isNumeric=function(c){return!/[^0-9]/.test(c)};goog.string.isAlphaNumeric=function(c){return!/[^a-zA-Z0-9]/.test(c)};goog.string.isSpace=function(c){return" "==c};goog.string.isUnicodeChar=function(c){return 1==c.length&&" "<=c&&"~">=c||"\u0080"<=c&&"\ufffd">=c};goog.string.stripNewlines=function(c){return c.replace(/(\r\n|\r|\n)+/g," ")};
goog.string.canonicalizeNewlines=function(c){return c.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(c){return c.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(c){return c.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(c){return c.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(c){return c.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
goog.string.trimLeft=function(c){return c.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(c){return c.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(c,d){var e=String(c).toLowerCase(),f=String(d).toLowerCase();return e<f?-1:e==f?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(c,d){if(c==d)return 0;if(!c)return-1;if(!d)return 1;for(var e=c.toLowerCase().match(goog.string.numerateCompareRegExp_),f=d.toLowerCase().match(goog.string.numerateCompareRegExp_),h=Math.min(e.length,f.length),k=0;k<h;k++){var l=e[k],m=f[k];if(l!=m)return e=parseInt(l,10),!isNaN(e)&&(f=parseInt(m,10),!isNaN(f)&&e-f)?e-f:l<m?-1:1}return e.length!=f.length?e.length-f.length:c<d?-1:1};goog.string.urlEncode=function(c){return encodeURIComponent(String(c))};
goog.string.urlDecode=function(c){return decodeURIComponent(c.replace(/\+/g," "))};goog.string.newLineToBr=function(c,d){return c.replace(/(\r\n|\r|\n)/g,d?"<br />":"<br>")};
goog.string.htmlEscape=function(c,d){if(d)return c.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");if(!goog.string.allRe_.test(c))return c;-1!=c.indexOf("&")&&(c=c.replace(goog.string.amperRe_,"&amp;"));-1!=c.indexOf("<")&&(c=c.replace(goog.string.ltRe_,"&lt;"));-1!=c.indexOf(">")&&(c=c.replace(goog.string.gtRe_,"&gt;"));-1!=c.indexOf('"')&&(c=c.replace(goog.string.quotRe_,"&quot;"));return c};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(c){return goog.string.contains(c,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(c):goog.string.unescapePureXmlEntities_(c):c};
goog.string.unescapeEntitiesUsingDom_=function(c){var d={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},e=document.createElement("div");return c.replace(goog.string.HTML_ENTITY_PATTERN_,function(c,h){var k=d[c];if(k)return k;if("#"==h.charAt(0)){var l=Number("0"+h.substr(1));isNaN(l)||(k=String.fromCharCode(l))}k||(e.innerHTML=c+" ",k=e.firstChild.nodeValue.slice(0,-1));return d[c]=k})};
goog.string.unescapePureXmlEntities_=function(c){return c.replace(/&([^;]+);/g,function(c,e){switch(e){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==e.charAt(0)){var f=Number("0"+e.substr(1));if(!isNaN(f))return String.fromCharCode(f)}return c}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(c,d){return goog.string.newLineToBr(c.replace(/  /g," &#160;"),d)};
goog.string.stripQuotes=function(c,d){for(var e=d.length,f=0;f<e;f++){var h=1==e?d:d.charAt(f);if(c.charAt(0)==h&&c.charAt(c.length-1)==h)return c.substring(1,c.length-1)}return c};goog.string.truncate=function(c,d,e){e&&(c=goog.string.unescapeEntities(c));c.length>d&&(c=c.substring(0,d-3)+"...");e&&(c=goog.string.htmlEscape(c));return c};
goog.string.truncateMiddle=function(c,d,e,f){e&&(c=goog.string.unescapeEntities(c));if(f&&c.length>d){f>d&&(f=d);var h=c.length-f;c=c.substring(0,d-f)+"..."+c.substring(h)}else c.length>d&&(f=Math.floor(d/2),h=c.length-f,c=c.substring(0,f+d%2)+"..."+c.substring(h));e&&(c=goog.string.htmlEscape(c));return c};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(c){c=String(c);if(c.quote)return c.quote();for(var d=['"'],e=0;e<c.length;e++){var f=c.charAt(e),h=f.charCodeAt(0);d[e+1]=goog.string.specialEscapeChars_[f]||(31<h&&127>h?f:goog.string.escapeChar(f))}d.push('"');return d.join("")};goog.string.escapeString=function(c){for(var d=[],e=0;e<c.length;e++)d[e]=goog.string.escapeChar(c.charAt(e));return d.join("")};
goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[c];if(c in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c];var d=c,e=c.charCodeAt(0);if(31<e&&127>e)d=c;else{if(256>e){if(d="\\x",16>e||256<e)d+="0"}else d="\\u",4096>e&&(d+="0");d+=e.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=d};goog.string.toMap=function(c){for(var d={},e=0;e<c.length;e++)d[c.charAt(e)]=!0;return d};
goog.string.contains=function(c,d){return-1!=c.indexOf(d)};goog.string.countOf=function(c,d){return c&&d?c.split(d).length-1:0};goog.string.removeAt=function(c,d,e){var f=c;0<=d&&(d<c.length&&0<e)&&(f=c.substr(0,d)+c.substr(d+e,c.length-d-e));return f};goog.string.remove=function(c,d){var e=RegExp(goog.string.regExpEscape(d),"");return c.replace(e,"")};goog.string.removeAll=function(c,d){var e=RegExp(goog.string.regExpEscape(d),"g");return c.replace(e,"")};
goog.string.regExpEscape=function(c){return String(c).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(c,d){return Array(d+1).join(c)};goog.string.padNumber=function(c,d,e){c=goog.isDef(e)?c.toFixed(e):String(c);e=c.indexOf(".");-1==e&&(e=c.length);return goog.string.repeat("0",Math.max(0,d-e))+c};goog.string.makeSafe=function(c){return null==c?"":String(c)};goog.string.buildString=function(c){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(c,d){for(var e=0,f=goog.string.trim(String(c)).split("."),h=goog.string.trim(String(d)).split("."),k=Math.max(f.length,h.length),l=0;0==e&&l<k;l++){var m=f[l]||"",n=h[l]||"",p=RegExp("(\\d*)(\\D*)","g"),s=RegExp("(\\d*)(\\D*)","g");do{var q=p.exec(m)||["","",""],t=s.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;var e=0==q[1].length?0:parseInt(q[1],10),u=0==t[1].length?0:parseInt(t[1],10),e=goog.string.compareElements_(e,u)||goog.string.compareElements_(0==
q[2].length,0==t[2].length)||goog.string.compareElements_(q[2],t[2])}while(0==e)}return e};goog.string.compareElements_=function(c,d){return c<d?-1:c>d?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(c){for(var d=0,e=0;e<c.length;++e)d=31*d+c.charCodeAt(e),d%=goog.string.HASHCODE_MAX_;return d};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(c){var d=Number(c);return 0==d&&goog.string.isEmpty(c)?NaN:d};goog.string.isLowerCamelCase=function(c){return/^[a-z]+([A-Z][a-z]*)*$/.test(c)};goog.string.isUpperCamelCase=function(c){return/^([A-Z][a-z]*)+$/.test(c)};goog.string.toCamelCase=function(c){return String(c).replace(/\-([a-z])/g,function(c,e){return e.toUpperCase()})};goog.string.toSelectorCase=function(c){return String(c).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(c,d){var e=goog.isString(d)?goog.string.regExpEscape(d):"\\s";return c.replace(RegExp("(^"+(e?"|["+e+"]+":"")+")([a-z])","g"),function(c,d,e){return d+e.toUpperCase()})};goog.string.parseInt=function(c){isFinite(c)&&(c=String(c));return goog.isString(c)?/^\s*-?0x/i.test(c)?parseInt(c,16):parseInt(c,10):NaN};goog.string.splitLimit=function(c,d,e){c=c.split(d);for(var f=[];0<e&&c.length;)f.push(c.shift()),e--;c.length&&f.push(c.join(d));return f};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(c,d){d.unshift(c);goog.debug.Error.call(this,goog.string.subs.apply(null,d));d.shift();this.messagePattern=c};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(c,d,e,f){var h="Assertion failed";if(e)var h=h+(": "+e),k=f;else c&&(h+=": "+c,k=d);throw new goog.asserts.AssertionError(""+h,k||[]);};
goog.asserts.assert=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!c&&goog.asserts.doAssertFailure_("",null,d,Array.prototype.slice.call(arguments,2));return c};goog.asserts.fail=function(c,d){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(c?": "+c:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(c)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};goog.asserts.assertString=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isString(c)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};
goog.asserts.assertFunction=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(c)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};goog.asserts.assertObject=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(c)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};
goog.asserts.assertArray=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(c)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};goog.asserts.assertBoolean=function(c,d,e){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(c)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(c),c],d,Array.prototype.slice.call(arguments,2));return c};
goog.asserts.assertInstanceof=function(c,d,e,f){!goog.asserts.ENABLE_ASSERTS||c instanceof d||goog.asserts.doAssertFailure_("instanceof check failed.",null,e,Array.prototype.slice.call(arguments,3));return c};goog.asserts.assertObjectPrototypeIsIntact=function(){for(var c in Object.prototype)goog.asserts.fail(c+" should not be enumerable in Object.prototype.")};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.peek=function(c){return c[c.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(c,d,e)}:function(c,d,e){e=null==e?0:0>e?Math.max(0,c.length+e):e;if(goog.isString(c))return goog.isString(d)&&1==d.length?c.indexOf(d,e):-1;for(;e<c.length;e++)if(e in c&&c[e]===d)return e;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(c,d,null==e?c.length-1:e)}:function(c,d,e){e=null==e?c.length-1:e;0>e&&(e=Math.max(0,c.length+e));if(goog.isString(c))return goog.isString(d)&&1==d.length?c.lastIndexOf(d,e):-1;for(;0<=e;e--)if(e in c&&c[e]===d)return e;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(c,d,e){goog.asserts.assert(null!=c.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(c,d,e)}:function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,k=0;k<f;k++)k in h&&d.call(e,h[k],k,c)};goog.array.forEachRight=function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,f=f-1;0<=f;--f)f in h&&d.call(e,h[f],f,c)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(c,d,e)}:function(c,d,e){for(var f=c.length,h=[],k=0,l=goog.isString(c)?c.split(""):c,m=0;m<f;m++)if(m in l){var n=l[m];d.call(e,n,m,c)&&(h[k++]=n)}return h};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.map.call(c,d,e)}:function(c,d,e){for(var f=c.length,h=Array(f),k=goog.isString(c)?c.split(""):c,l=0;l<f;l++)l in k&&(h[l]=d.call(e,k[l],l,c));return h};goog.array.reduce=function(c,d,e,f){if(c.reduce)return f?c.reduce(goog.bind(d,f),e):c.reduce(d,e);var h=e;goog.array.forEach(c,function(e,l){h=d.call(f,h,e,l,c)});return h};
goog.array.reduceRight=function(c,d,e,f){if(c.reduceRight)return f?c.reduceRight(goog.bind(d,f),e):c.reduceRight(d,e);var h=e;goog.array.forEachRight(c,function(e,l){h=d.call(f,h,e,l,c)});return h};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.some.call(c,d,e)}:function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,k=0;k<f;k++)if(k in h&&d.call(e,h[k],k,c))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(c,d,e){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.every.call(c,d,e)}:function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,k=0;k<f;k++)if(k in h&&!d.call(e,h[k],k,c))return!1;return!0};goog.array.count=function(c,d,e){var f=0;goog.array.forEach(c,function(c,k,l){d.call(e,c,k,l)&&++f},e);return f};
goog.array.find=function(c,d,e){d=goog.array.findIndex(c,d,e);return 0>d?null:goog.isString(c)?c.charAt(d):c[d]};goog.array.findIndex=function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,k=0;k<f;k++)if(k in h&&d.call(e,h[k],k,c))return k;return-1};goog.array.findRight=function(c,d,e){d=goog.array.findIndexRight(c,d,e);return 0>d?null:goog.isString(c)?c.charAt(d):c[d]};
goog.array.findIndexRight=function(c,d,e){for(var f=c.length,h=goog.isString(c)?c.split(""):c,f=f-1;0<=f;f--)if(f in h&&d.call(e,h[f],f,c))return f;return-1};goog.array.contains=function(c,d){return 0<=goog.array.indexOf(c,d)};goog.array.isEmpty=function(c){return 0==c.length};goog.array.clear=function(c){if(!goog.isArray(c))for(var d=c.length-1;0<=d;d--)delete c[d];c.length=0};goog.array.insert=function(c,d){goog.array.contains(c,d)||c.push(d)};
goog.array.insertAt=function(c,d,e){goog.array.splice(c,e,0,d)};goog.array.insertArrayAt=function(c,d,e){goog.partial(goog.array.splice,c,e,0).apply(null,d)};goog.array.insertBefore=function(c,d,e){var f;2==arguments.length||0>(f=goog.array.indexOf(c,e))?c.push(d):goog.array.insertAt(c,d,f)};goog.array.remove=function(c,d){var e=goog.array.indexOf(c,d),f;(f=0<=e)&&goog.array.removeAt(c,e);return f};
goog.array.removeAt=function(c,d){goog.asserts.assert(null!=c.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(c,d,1).length};goog.array.removeIf=function(c,d,e){d=goog.array.findIndex(c,d,e);return 0<=d?(goog.array.removeAt(c,d),!0):!1};goog.array.concat=function(c){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(c){var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];return e}return[]};goog.array.clone=goog.array.toArray;
goog.array.extend=function(c,d){for(var e=1;e<arguments.length;e++){var f=arguments[e],h;if(goog.isArray(f)||(h=goog.isArrayLike(f))&&Object.prototype.hasOwnProperty.call(f,"callee"))c.push.apply(c,f);else if(h)for(var k=c.length,l=f.length,m=0;m<l;m++)c[k+m]=f[m];else c.push(f)}};goog.array.splice=function(c,d,e,f){goog.asserts.assert(null!=c.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(c,goog.array.slice(arguments,1))};
goog.array.slice=function(c,d,e){goog.asserts.assert(null!=c.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(c,d):goog.array.ARRAY_PROTOTYPE_.slice.call(c,d,e)};goog.array.removeDuplicates=function(c,d){for(var e=d||c,f={},h=0,k=0;k<c.length;){var l=c[k++],m=goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l;Object.prototype.hasOwnProperty.call(f,m)||(f[m]=!0,e[h++]=l)}e.length=h};
goog.array.binarySearch=function(c,d,e){return goog.array.binarySearch_(c,e||goog.array.defaultCompare,!1,d)};goog.array.binarySelect=function(c,d,e){return goog.array.binarySearch_(c,d,!0,void 0,e)};goog.array.binarySearch_=function(c,d,e,f,h){for(var k=0,l=c.length,m;k<l;){var n=k+l>>1,p;p=e?d.call(h,c[n],n,c):d(f,c[n]);0<p?k=n+1:(l=n,m=!p)}return m?k:~k};goog.array.sort=function(c,d){goog.asserts.assert(null!=c.length);goog.array.ARRAY_PROTOTYPE_.sort.call(c,d||goog.array.defaultCompare)};
goog.array.stableSort=function(c,d){for(var e=0;e<c.length;e++)c[e]={index:e,value:c[e]};var f=d||goog.array.defaultCompare;goog.array.sort(c,function(c,d){return f(c.value,d.value)||c.index-d.index});for(e=0;e<c.length;e++)c[e]=c[e].value};goog.array.sortObjectsByKey=function(c,d,e){var f=e||goog.array.defaultCompare;goog.array.sort(c,function(c,e){return f(c[d],e[d])})};
goog.array.isSorted=function(c,d,e){d=d||goog.array.defaultCompare;for(var f=1;f<c.length;f++){var h=d(c[f-1],c[f]);if(0<h||0==h&&e)return!1}return!0};goog.array.equals=function(c,d,e){if(!goog.isArrayLike(c)||!goog.isArrayLike(d)||c.length!=d.length)return!1;var f=c.length;e=e||goog.array.defaultCompareEquality;for(var h=0;h<f;h++)if(!e(c[h],d[h]))return!1;return!0};goog.array.compare=function(c,d,e){return goog.array.equals(c,d,e)};
goog.array.compare3=function(c,d,e){e=e||goog.array.defaultCompare;for(var f=Math.min(c.length,d.length),h=0;h<f;h++){var k=e(c[h],d[h]);if(0!=k)return k}return goog.array.defaultCompare(c.length,d.length)};goog.array.defaultCompare=function(c,d){return c>d?1:c<d?-1:0};goog.array.defaultCompareEquality=function(c,d){return c===d};goog.array.binaryInsert=function(c,d,e){e=goog.array.binarySearch(c,d,e);return 0>e?(goog.array.insertAt(c,d,-(e+1)),!0):!1};
goog.array.binaryRemove=function(c,d,e){d=goog.array.binarySearch(c,d,e);return 0<=d?goog.array.removeAt(c,d):!1};goog.array.bucket=function(c,d,e){for(var f={},h=0;h<c.length;h++){var k=c[h],l=d.call(e,k,h,c);goog.isDef(l)&&(f[l]||(f[l]=[])).push(k)}return f};goog.array.toObject=function(c,d,e){var f={};goog.array.forEach(c,function(h,k){f[d.call(e,h,k,c)]=h});return f};
goog.array.range=function(c,d,e){var f=[],h=0,k=c;e=e||1;void 0!==d&&(h=c,k=d);if(0>e*(k-h))return[];if(0<e)for(c=h;c<k;c+=e)f.push(c);else for(c=h;c>k;c+=e)f.push(c);return f};goog.array.repeat=function(c,d){for(var e=[],f=0;f<d;f++)e[f]=c;return e};goog.array.flatten=function(c){for(var d=[],e=0;e<arguments.length;e++){var f=arguments[e];goog.isArray(f)?d.push.apply(d,goog.array.flatten.apply(null,f)):d.push(f)}return d};
goog.array.rotate=function(c,d){goog.asserts.assert(null!=c.length);c.length&&(d%=c.length,0<d?goog.array.ARRAY_PROTOTYPE_.unshift.apply(c,c.splice(-d,d)):0>d&&goog.array.ARRAY_PROTOTYPE_.push.apply(c,c.splice(0,-d)));return c};goog.array.moveItem=function(c,d,e){goog.asserts.assert(0<=d&&d<c.length);goog.asserts.assert(0<=e&&e<c.length);d=goog.array.ARRAY_PROTOTYPE_.splice.call(c,d,1);goog.array.ARRAY_PROTOTYPE_.splice.call(c,e,0,d[0])};
goog.array.zip=function(c){if(!arguments.length)return[];for(var d=[],e=0;;e++){for(var f=[],h=0;h<arguments.length;h++){var k=arguments[h];if(e>=k.length)return d;f.push(k[e])}d.push(f)}};goog.array.shuffle=function(c,d){for(var e=d||Math.random,f=c.length-1;0<f;f--){var h=Math.floor(e()*(f+1)),k=c[f];c[f]=c[h];c[h]=k}};goog.dom={};goog.dom.classes={};goog.dom.classes.set=function(c,d){c.className=d};goog.dom.classes.get=function(c){c=c.className;return goog.isString(c)&&c.match(/\S+/g)||[]};goog.dom.classes.add=function(c,d){var e=goog.dom.classes.get(c),f=goog.array.slice(arguments,1),h=e.length+f.length;goog.dom.classes.add_(e,f);goog.dom.classes.set(c,e.join(" "));return e.length==h};
goog.dom.classes.remove=function(c,d){var e=goog.dom.classes.get(c),f=goog.array.slice(arguments,1),h=goog.dom.classes.getDifference_(e,f);goog.dom.classes.set(c,h.join(" "));return h.length==e.length-f.length};goog.dom.classes.add_=function(c,d){for(var e=0;e<d.length;e++)goog.array.contains(c,d[e])||c.push(d[e])};goog.dom.classes.getDifference_=function(c,d){return goog.array.filter(c,function(c){return!goog.array.contains(d,c)})};
goog.dom.classes.swap=function(c,d,e){for(var f=goog.dom.classes.get(c),h=!1,k=0;k<f.length;k++)f[k]==d&&(goog.array.splice(f,k--,1),h=!0);h&&(f.push(e),goog.dom.classes.set(c,f.join(" ")));return h};goog.dom.classes.addRemove=function(c,d,e){var f=goog.dom.classes.get(c);goog.isString(d)?goog.array.remove(f,d):goog.isArray(d)&&(f=goog.dom.classes.getDifference_(f,d));goog.isString(e)&&!goog.array.contains(f,e)?f.push(e):goog.isArray(e)&&goog.dom.classes.add_(f,e);goog.dom.classes.set(c,f.join(" "))};
goog.dom.classes.has=function(c,d){return goog.array.contains(goog.dom.classes.get(c),d)};goog.dom.classes.enable=function(c,d,e){e?goog.dom.classes.add(c,d):goog.dom.classes.remove(c,d)};goog.dom.classes.toggle=function(c,d){var e=!goog.dom.classes.has(c,d);goog.dom.classes.enable(c,d,e);return e};goog.object={};goog.object.forEach=function(c,d,e){for(var f in c)d.call(e,c[f],f,c)};goog.object.filter=function(c,d,e){var f={},h;for(h in c)d.call(e,c[h],h,c)&&(f[h]=c[h]);return f};goog.object.map=function(c,d,e){var f={},h;for(h in c)f[h]=d.call(e,c[h],h,c);return f};goog.object.some=function(c,d,e){for(var f in c)if(d.call(e,c[f],f,c))return!0;return!1};goog.object.every=function(c,d,e){for(var f in c)if(!d.call(e,c[f],f,c))return!1;return!0};
goog.object.getCount=function(c){var d=0,e;for(e in c)d++;return d};goog.object.getAnyKey=function(c){for(var d in c)return d};goog.object.getAnyValue=function(c){for(var d in c)return c[d]};goog.object.contains=function(c,d){return goog.object.containsValue(c,d)};goog.object.getValues=function(c){var d=[],e=0,f;for(f in c)d[e++]=c[f];return d};goog.object.getKeys=function(c){var d=[],e=0,f;for(f in c)d[e++]=f;return d};
goog.object.getValueByKeys=function(c,d){for(var e=goog.isArrayLike(d),f=e?d:arguments,e=e?0:1;e<f.length&&(c=c[f[e]],goog.isDef(c));e++);return c};goog.object.containsKey=function(c,d){return d in c};goog.object.containsValue=function(c,d){for(var e in c)if(c[e]==d)return!0;return!1};goog.object.findKey=function(c,d,e){for(var f in c)if(d.call(e,c[f],f,c))return f};goog.object.findValue=function(c,d,e){return(d=goog.object.findKey(c,d,e))&&c[d]};
goog.object.isEmpty=function(c){for(var d in c)return!1;return!0};goog.object.clear=function(c){for(var d in c)delete c[d]};goog.object.remove=function(c,d){var e;(e=d in c)&&delete c[d];return e};goog.object.add=function(c,d,e){if(d in c)throw Error('The object already contains the key "'+d+'"');goog.object.set(c,d,e)};goog.object.get=function(c,d,e){return d in c?c[d]:e};goog.object.set=function(c,d,e){c[d]=e};goog.object.setIfUndefined=function(c,d,e){return d in c?c[d]:c[d]=e};
goog.object.clone=function(c){var d={},e;for(e in c)d[e]=c[e];return d};goog.object.unsafeClone=function(c){var d=goog.typeOf(c);if("object"==d||"array"==d){if(c.clone)return c.clone();var d="array"==d?[]:{},e;for(e in c)d[e]=goog.object.unsafeClone(c[e]);return d}return c};goog.object.transpose=function(c){var d={},e;for(e in c)d[c[e]]=e;return d};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.object.extend=function(c,d){for(var e,f,h=1;h<arguments.length;h++){f=arguments[h];for(e in f)c[e]=f[e];for(var k=0;k<goog.object.PROTOTYPE_FIELDS_.length;k++)e=goog.object.PROTOTYPE_FIELDS_[k],Object.prototype.hasOwnProperty.call(f,e)&&(c[e]=f[e])}};
goog.object.create=function(c){var d=arguments.length;if(1==d&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(d%2)throw Error("Uneven number of arguments");for(var e={},f=0;f<d;f+=2)e[arguments[f]]=arguments[f+1];return e};goog.object.createSet=function(c){var d=arguments.length;if(1==d&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var e={},f=0;f<d;f++)e[arguments[f]]=!0;return e};
goog.object.createImmutableView=function(c){var d=c;Object.isFrozen&&!Object.isFrozen(c)&&(d=Object.create(c),Object.freeze(d));return d};goog.object.isImmutableView=function(c){return!!Object.isFrozen&&Object.isFrozen(c)};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",
DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",
NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",
TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var c;if(!goog.userAgent.BROWSER_KNOWN_&&(c=goog.userAgent.getUserAgentString())){var d=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=goog.string.startsWith(c,"Opera");goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&(goog.string.contains(c,"MSIE")||goog.string.contains(c,"Trident"));
goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&goog.string.contains(c,"WebKit");goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&goog.string.contains(c,"Mobile");goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&!goog.userAgent.detectedIe_&&"Gecko"==d.product}};goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;
goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var c=goog.userAgent.getNavigator();return c&&c.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;
goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var c=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!c&&
goog.string.contains(c,"Android");goog.userAgent.detectedIPhone_=!!c&&goog.string.contains(c,"iPhone");goog.userAgent.detectedIPad_=!!c&&goog.string.contains(c,"iPad")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;
goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_;goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_;
goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_;
goog.userAgent.determineVersion_=function(){var c="",d;goog.userAgent.OPERA&&goog.global.opera?(c=goog.global.opera.version,c="function"==typeof c?c():c):(goog.userAgent.GECKO?d=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?d=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(d=/WebKit\/(\S+)/),d&&(c=(c=d.exec(goog.userAgent.getUserAgentString()))?c[1]:""));return goog.userAgent.IE&&(d=goog.userAgent.getDocumentMode_(),d>parseFloat(c))?String(d):c};
goog.userAgent.getDocumentMode_=function(){var c=goog.global.document;return c?c.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(c,d){return goog.string.compareVersions(c,d)};goog.userAgent.isVersionOrHigherCache_={};
goog.userAgent.isVersionOrHigher=function(c){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[c]||(goog.userAgent.isVersionOrHigherCache_[c]=0<=goog.string.compareVersions(goog.userAgent.VERSION,c))};goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher;goog.userAgent.isDocumentModeOrHigher=function(c){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=c};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;
goog.userAgent.DOCUMENT_MODE=function(){var c=goog.global.document;return c&&goog.userAgent.IE?goog.userAgent.getDocumentMode_()||("CSS1Compat"==c.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}();goog.math={};goog.math.Size=function(c,d){this.width=c;this.height=d};goog.math.Size.equals=function(c,d){return c==d?!0:c&&d?c.width==d.width&&c.height==d.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(c){return this.width<=c.width&&this.height<=c.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(c,d){var e=goog.isNumber(d)?d:c;this.width*=c;this.height*=e;return this};
goog.math.Size.prototype.scaleToFit=function(c){c=this.aspectRatio()>c.aspectRatio()?c.width/this.width:c.height/this.height;return this.scale(c)};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.math.randomInt=function(c){return Math.floor(Math.random()*c)};goog.math.uniformRandom=function(c,d){return c+Math.random()*(d-c)};goog.math.clamp=function(c,d,e){return Math.min(Math.max(c,d),e)};goog.math.modulo=function(c,d){var e=c%d;return 0>e*d?e+d:e};goog.math.lerp=function(c,d,e){return c+e*(d-c)};goog.math.nearlyEquals=function(c,d,e){return Math.abs(c-d)<=(e||1E-6)};goog.math.standardAngle=function(c){return goog.math.modulo(c,360)};
goog.math.toRadians=function(c){return c*Math.PI/180};goog.math.toDegrees=function(c){return 180*c/Math.PI};goog.math.angleDx=function(c,d){return d*Math.cos(goog.math.toRadians(c))};goog.math.angleDy=function(c,d){return d*Math.sin(goog.math.toRadians(c))};goog.math.angle=function(c,d,e,f){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(f-d,e-c)))};goog.math.angleDifference=function(c,d){var e=goog.math.standardAngle(d)-goog.math.standardAngle(c);180<e?e-=360:-180>=e&&(e=360+e);return e};
goog.math.sign=function(c){return 0==c?0:0>c?-1:1};goog.math.longestCommonSubsequence=function(c,d,e,f){e=e||function(c,d){return c==d};f=f||function(d,e){return c[d]};for(var h=c.length,k=d.length,l=[],m=0;m<h+1;m++)l[m]=[],l[m][0]=0;for(var n=0;n<k+1;n++)l[0][n]=0;for(m=1;m<=h;m++)for(n=1;n<=k;n++)e(c[m-1],d[n-1])?l[m][n]=l[m-1][n-1]+1:l[m][n]=Math.max(l[m-1][n],l[m][n-1]);for(var p=[],m=h,n=k;0<m&&0<n;)e(c[m-1],d[n-1])?(p.unshift(f(m-1,n-1)),m--,n--):l[m-1][n]>l[m][n-1]?m--:n--;return p};
goog.math.sum=function(c){return goog.array.reduce(arguments,function(c,e){return c+e},0)};goog.math.average=function(c){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.standardDeviation=function(c){var d=arguments.length;if(2>d)return 0;var e=goog.math.average.apply(null,arguments),d=goog.math.sum.apply(null,goog.array.map(arguments,function(c){return Math.pow(c-e,2)}))/(d-1);return Math.sqrt(d)};goog.math.isInt=function(c){return isFinite(c)&&0==c%1};
goog.math.isFiniteNumber=function(c){return isFinite(c)&&!isNaN(c)};goog.math.safeFloor=function(c,d){goog.asserts.assert(!goog.isDef(d)||0<d);return Math.floor(c+(d||2E-15))};goog.math.safeCeil=function(c,d){goog.asserts.assert(!goog.isDef(d)||0<d);return Math.ceil(c-(d||2E-15))};goog.math.Coordinate=function(c,d){this.x=goog.isDef(c)?c:0;this.y=goog.isDef(d)?d:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(c,d){return c==d?!0:c&&d?c.x==d.x&&c.y==d.y:!1};goog.math.Coordinate.distance=function(c,d){var e=c.x-d.x,f=c.y-d.y;return Math.sqrt(e*e+f*f)};
goog.math.Coordinate.magnitude=function(c){return Math.sqrt(c.x*c.x+c.y*c.y)};goog.math.Coordinate.azimuth=function(c){return goog.math.angle(0,0,c.x,c.y)};goog.math.Coordinate.squaredDistance=function(c,d){var e=c.x-d.x,f=c.y-d.y;return e*e+f*f};goog.math.Coordinate.difference=function(c,d){return new goog.math.Coordinate(c.x-d.x,c.y-d.y)};goog.math.Coordinate.sum=function(c,d){return new goog.math.Coordinate(c.x+d.x,c.y+d.y)};
goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(c,d){c instanceof goog.math.Coordinate?(this.x+=c.x,this.y+=c.y):(this.x+=c,goog.isNumber(d)&&(this.y+=d));return this};
goog.math.Coordinate.prototype.scale=function(c,d){var e=goog.isNumber(d)?d:c;this.x*=c;this.y*=e;return this};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(c){return c?new goog.dom.DomHelper(goog.dom.getOwnerDocument(c)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};
goog.dom.getDocument=function(){return document};goog.dom.getElement=function(c){return goog.isString(c)?document.getElementById(c):c};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(c,d,e){return goog.dom.getElementsByTagNameAndClass_(document,c,d,e)};
goog.dom.getElementsByClass=function(c,d){var e=d||document;return goog.dom.canUseQuerySelector_(e)?e.querySelectorAll("."+c):e.getElementsByClassName?e.getElementsByClassName(c):goog.dom.getElementsByTagNameAndClass_(document,"*",c,d)};goog.dom.getElementByClass=function(c,d){var e=d||document,f=null;return(f=goog.dom.canUseQuerySelector_(e)?e.querySelector("."+c):goog.dom.getElementsByClass(c,d)[0])||null};goog.dom.canUseQuerySelector_=function(c){return!(!c.querySelectorAll||!c.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(c,d,e,f){c=f||c;d=d&&"*"!=d?d.toUpperCase():"";if(goog.dom.canUseQuerySelector_(c)&&(d||e))return c.querySelectorAll(d+(e?"."+e:""));if(e&&c.getElementsByClassName){c=c.getElementsByClassName(e);if(d){f={};for(var h=0,k=0,l;l=c[k];k++)d==l.nodeName&&(f[h++]=l);f.length=h;return f}return c}c=c.getElementsByTagName(d||"*");if(e){f={};for(k=h=0;l=c[k];k++)d=l.className,"function"==typeof d.split&&goog.array.contains(d.split(/\s+/),e)&&(f[h++]=l);f.length=
h;return f}return c};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(c,d){goog.object.forEach(d,function(d,f){"style"==f?c.style.cssText=d:"class"==f?c.className=d:"for"==f?c.htmlFor=d:f in goog.dom.DIRECT_ATTRIBUTE_MAP_?c.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[f],d):goog.string.startsWith(f,"aria-")||goog.string.startsWith(f,"data-")?c.setAttribute(f,d):c[f]=d})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(c){return goog.dom.getViewportSize_(c||window)};goog.dom.getViewportSize_=function(c){c=c.document;c=goog.dom.isCss1CompatMode_(c)?c.documentElement:c.body;return new goog.math.Size(c.clientWidth,c.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(c){var d=c.document,e=0;if(d){c=goog.dom.getViewportSize_(c).height;var e=d.body,f=d.documentElement;if(goog.dom.isCss1CompatMode_(d)&&f.scrollHeight)e=f.scrollHeight!=c?f.scrollHeight:f.offsetHeight;else{var d=f.scrollHeight,h=f.offsetHeight;f.clientHeight!=h&&(d=e.scrollHeight,h=e.offsetHeight);e=d>c?d>h?d:h:d<h?d:h}}return e};
goog.dom.getPageScroll=function(c){return goog.dom.getDomHelper((c||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};
goog.dom.getDocumentScroll_=function(c){var d=goog.dom.getDocumentScrollElement_(c);c=goog.dom.getWindow_(c);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&c.pageYOffset!=d.scrollTop?new goog.math.Coordinate(d.scrollLeft,d.scrollTop):new goog.math.Coordinate(c.pageXOffset||d.scrollLeft,c.pageYOffset||d.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(c){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(c)?c.documentElement:c.body};goog.dom.getWindow=function(c){return c?goog.dom.getWindow_(c):window};goog.dom.getWindow_=function(c){return c.parentWindow||c.defaultView};goog.dom.createDom=function(c,d,e){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(c,d){var e=d[0],f=d[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&f&&(f.name||f.type)){e=["<",e];f.name&&e.push(' name="',goog.string.htmlEscape(f.name),'"');if(f.type){e.push(' type="',goog.string.htmlEscape(f.type),'"');var h={};goog.object.extend(h,f);delete h.type;f=h}e.push(">");e=e.join("")}e=c.createElement(e);f&&(goog.isString(f)?e.className=f:goog.isArray(f)?goog.dom.classes.add.apply(null,[e].concat(f)):goog.dom.setProperties(e,f));2<d.length&&
goog.dom.append_(c,e,d,2);return e};goog.dom.append_=function(c,d,e,f){function h(e){e&&d.appendChild(goog.isString(e)?c.createTextNode(e):e)}for(;f<e.length;f++){var k=e[f];goog.isArrayLike(k)&&!goog.dom.isNodeLike(k)?goog.array.forEach(goog.dom.isNodeList(k)?goog.array.toArray(k):k,h):h(k)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(c){return document.createElement(c)};goog.dom.createTextNode=function(c){return document.createTextNode(String(c))};
goog.dom.createTable=function(c,d,e){return goog.dom.createTable_(document,c,d,!!e)};goog.dom.createTable_=function(c,d,e,f){for(var h=["<tr>"],k=0;k<e;k++)h.push(f?"<td>&nbsp;</td>":"<td></td>");h.push("</tr>");h=h.join("");e=["<table>"];for(k=0;k<d;k++)e.push(h);e.push("</table>");c=c.createElement(goog.dom.TagName.DIV);c.innerHTML=e.join("");return c.removeChild(c.firstChild)};goog.dom.htmlToDocumentFragment=function(c){return goog.dom.htmlToDocumentFragment_(document,c)};
goog.dom.htmlToDocumentFragment_=function(c,d){var e=c.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(e.innerHTML="<br>"+d,e.removeChild(e.firstChild)):e.innerHTML=d;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(var f=c.createDocumentFragment();e.firstChild;)f.appendChild(e.firstChild);return f};goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};
goog.dom.isCss1CompatMode_=function(c){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==c.compatMode};goog.dom.canHaveChildren=function(c){if(c.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(c.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0};
goog.dom.appendChild=function(c,d){c.appendChild(d)};goog.dom.append=function(c,d){goog.dom.append_(goog.dom.getOwnerDocument(c),c,arguments,1)};goog.dom.removeChildren=function(c){for(var d;d=c.firstChild;)c.removeChild(d)};goog.dom.insertSiblingBefore=function(c,d){d.parentNode&&d.parentNode.insertBefore(c,d)};goog.dom.insertSiblingAfter=function(c,d){d.parentNode&&d.parentNode.insertBefore(c,d.nextSibling)};goog.dom.insertChildAt=function(c,d,e){c.insertBefore(d,c.childNodes[e]||null)};
goog.dom.removeNode=function(c){return c&&c.parentNode?c.parentNode.removeChild(c):null};goog.dom.replaceNode=function(c,d){var e=d.parentNode;e&&e.replaceChild(c,d)};goog.dom.flattenElement=function(c){var d,e=c.parentNode;if(e&&e.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(c.removeNode)return c.removeNode(!1);for(;d=c.firstChild;)e.insertBefore(d,c);return goog.dom.removeNode(c)}};
goog.dom.getChildren=function(c){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=c.children?c.children:goog.array.filter(c.childNodes,function(c){return c.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(c){return void 0!=c.firstElementChild?c.firstElementChild:goog.dom.getNextElementNode_(c.firstChild,!0)};goog.dom.getLastElementChild=function(c){return void 0!=c.lastElementChild?c.lastElementChild:goog.dom.getNextElementNode_(c.lastChild,!1)};
goog.dom.getNextElementSibling=function(c){return void 0!=c.nextElementSibling?c.nextElementSibling:goog.dom.getNextElementNode_(c.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(c){return void 0!=c.previousElementSibling?c.previousElementSibling:goog.dom.getNextElementNode_(c.previousSibling,!1)};goog.dom.getNextElementNode_=function(c,d){for(;c&&c.nodeType!=goog.dom.NodeType.ELEMENT;)c=d?c.nextSibling:c.previousSibling;return c};
goog.dom.getNextNode=function(c){if(!c)return null;if(c.firstChild)return c.firstChild;for(;c&&!c.nextSibling;)c=c.parentNode;return c?c.nextSibling:null};goog.dom.getPreviousNode=function(c){if(!c)return null;if(!c.previousSibling)return c.parentNode;for(c=c.previousSibling;c&&c.lastChild;)c=c.lastChild;return c};goog.dom.isNodeLike=function(c){return goog.isObject(c)&&0<c.nodeType};goog.dom.isElement=function(c){return goog.isObject(c)&&c.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(c){return goog.isObject(c)&&c.window==c};goog.dom.getParentElement=function(c){if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&c instanceof goog.global.SVGElement))return c.parentElement;c=c.parentNode;return goog.dom.isElement(c)?c:null};
goog.dom.contains=function(c,d){if(c.contains&&d.nodeType==goog.dom.NodeType.ELEMENT)return c==d||c.contains(d);if("undefined"!=typeof c.compareDocumentPosition)return c==d||Boolean(c.compareDocumentPosition(d)&16);for(;d&&c!=d;)d=d.parentNode;return d==c};
goog.dom.compareNodeOrder=function(c,d){if(c==d)return 0;if(c.compareDocumentPosition)return c.compareDocumentPosition(d)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(c.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(d.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in c||c.parentNode&&"sourceIndex"in c.parentNode){var e=c.nodeType==goog.dom.NodeType.ELEMENT,f=d.nodeType==goog.dom.NodeType.ELEMENT;if(e&&f)return c.sourceIndex-d.sourceIndex;var h=c.parentNode,
k=d.parentNode;return h==k?goog.dom.compareSiblingOrder_(c,d):!e&&goog.dom.contains(h,d)?-1*goog.dom.compareParentsDescendantNodeIe_(c,d):!f&&goog.dom.contains(k,c)?goog.dom.compareParentsDescendantNodeIe_(d,c):(e?c.sourceIndex:h.sourceIndex)-(f?d.sourceIndex:k.sourceIndex)}f=goog.dom.getOwnerDocument(c);e=f.createRange();e.selectNode(c);e.collapse(!0);f=f.createRange();f.selectNode(d);f.collapse(!0);return e.compareBoundaryPoints(goog.global.Range.START_TO_END,f)};
goog.dom.compareParentsDescendantNodeIe_=function(c,d){var e=c.parentNode;if(e==d)return-1;for(var f=d;f.parentNode!=e;)f=f.parentNode;return goog.dom.compareSiblingOrder_(f,c)};goog.dom.compareSiblingOrder_=function(c,d){for(var e=d;e=e.previousSibling;)if(e==c)return-1;return 1};
goog.dom.findCommonAncestor=function(c){var d,e=arguments.length;if(!e)return null;if(1==e)return arguments[0];var f=[],h=Infinity;for(d=0;d<e;d++){for(var k=[],l=arguments[d];l;)k.unshift(l),l=l.parentNode;f.push(k);h=Math.min(h,k.length)}k=null;for(d=0;d<h;d++){for(var l=f[0][d],m=1;m<e;m++)if(l!=f[m][d])return k;k=l}return k};goog.dom.getOwnerDocument=function(c){return c.nodeType==goog.dom.NodeType.DOCUMENT?c:c.ownerDocument||c.document};
goog.dom.getFrameContentDocument=function(c){return c.contentDocument||c.contentWindow.document};goog.dom.getFrameContentWindow=function(c){return c.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(c))};
goog.dom.setTextContent=function(c,d){if("textContent"in c)c.textContent=d;else if(c.firstChild&&c.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data=d}else{goog.dom.removeChildren(c);var e=goog.dom.getOwnerDocument(c);c.appendChild(e.createTextNode(String(d)))}};goog.dom.getOuterHtml=function(c){if("outerHTML"in c)return c.outerHTML;var d=goog.dom.getOwnerDocument(c).createElement("div");d.appendChild(c.cloneNode(!0));return d.innerHTML};
goog.dom.findNode=function(c,d){var e=[];return goog.dom.findNodes_(c,d,e,!0)?e[0]:void 0};goog.dom.findNodes=function(c,d){var e=[];goog.dom.findNodes_(c,d,e,!1);return e};goog.dom.findNodes_=function(c,d,e,f){if(null!=c)for(c=c.firstChild;c;){if(d(c)&&(e.push(c),f)||goog.dom.findNodes_(c,d,e,f))return!0;c=c.nextSibling}return!1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};
goog.dom.isFocusableTabIndex=function(c){var d=c.getAttributeNode("tabindex");return d&&d.specified?(c=c.tabIndex,goog.isNumber(c)&&0<=c&&32768>c):!1};goog.dom.setFocusableTabIndex=function(c,d){d?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex"))};
goog.dom.getTextContent=function(c){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in c)c=goog.string.canonicalizeNewlines(c.innerText);else{var d=[];goog.dom.getTextContent_(c,d,!0);c=d.join("")}c=c.replace(/ \xAD /g," ").replace(/\xAD/g,"");c=c.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(c=c.replace(/ +/g," "));" "!=c&&(c=c.replace(/^\s*/,""));return c};goog.dom.getRawTextContent=function(c){var d=[];goog.dom.getTextContent_(c,d,!1);return d.join("")};
goog.dom.getTextContent_=function(c,d,e){if(!(c.nodeName in goog.dom.TAGS_TO_IGNORE_))if(c.nodeType==goog.dom.NodeType.TEXT)e?d.push(String(c.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(c.nodeValue);else if(c.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d.push(goog.dom.PREDEFINED_TAG_VALUES_[c.nodeName]);else for(c=c.firstChild;c;)goog.dom.getTextContent_(c,d,e),c=c.nextSibling};goog.dom.getNodeTextLength=function(c){return goog.dom.getTextContent(c).length};
goog.dom.getNodeTextOffset=function(c,d){for(var e=d||goog.dom.getOwnerDocument(c).body,f=[];c&&c!=e;){for(var h=c;h=h.previousSibling;)f.unshift(goog.dom.getTextContent(h));c=c.parentNode}return goog.string.trimLeft(f.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(c,d,e){c=[c];for(var f=0,h=null;0<c.length&&f<d;)if(h=c.pop(),!(h.nodeName in goog.dom.TAGS_TO_IGNORE_))if(h.nodeType==goog.dom.NodeType.TEXT)var k=h.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),f=f+k.length;else if(h.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)f+=goog.dom.PREDEFINED_TAG_VALUES_[h.nodeName].length;else for(k=h.childNodes.length-1;0<=k;k--)c.push(h.childNodes[k]);goog.isObject(e)&&(e.remainder=h?h.nodeValue.length+d-f-1:0,e.node=h);return h};
goog.dom.isNodeList=function(c){if(c&&"number"==typeof c.length){if(goog.isObject(c))return"function"==typeof c.item||"string"==typeof c.item;if(goog.isFunction(c))return"function"==typeof c.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(c,d,e){if(!d&&!e)return null;var f=d?d.toUpperCase():null;return goog.dom.getAncestor(c,function(c){return(!f||c.nodeName==f)&&(!e||goog.dom.classes.has(c,e))},!0)};
goog.dom.getAncestorByClass=function(c,d){return goog.dom.getAncestorByTagNameAndClass(c,null,d)};goog.dom.getAncestor=function(c,d,e,f){e||(c=c.parentNode);e=null==f;for(var h=0;c&&(e||h<=f);){if(d(c))return c;c=c.parentNode;h++}return null};goog.dom.getActiveElement=function(c){try{return c&&c.activeElement}catch(d){}return null};goog.dom.DomHelper=function(c){this.document_=c||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;
goog.dom.DomHelper.prototype.setDocument=function(c){this.document_=c};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(c){return goog.isString(c)?this.document_.getElementById(c):c};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(c,d,e){return goog.dom.getElementsByTagNameAndClass_(this.document_,c,d,e)};
goog.dom.DomHelper.prototype.getElementsByClass=function(c,d){return goog.dom.getElementsByClass(c,d||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(c,d){return goog.dom.getElementByClass(c,d||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(c){return goog.dom.getViewportSize(c||this.getWindow())};
goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(c,d,e){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(c){return this.document_.createElement(c)};goog.dom.DomHelper.prototype.createTextNode=function(c){return this.document_.createTextNode(String(c))};
goog.dom.DomHelper.prototype.createTable=function(c,d,e){return goog.dom.createTable_(this.document_,c,d,!!e)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(c){return goog.dom.htmlToDocumentFragment_(this.document_,c)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};
goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(c){return goog.dom.getActiveElement(c||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;
goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;
goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;
goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;
goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;
goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;
goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.math.Box=function(c,d,e,f){this.top=c;this.right=d;this.bottom=e;this.left=f};goog.math.Box.boundingBox=function(c){for(var d=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),e=1;e<arguments.length;e++){var f=arguments[e];d.top=Math.min(d.top,f.y);d.right=Math.max(d.right,f.x);d.bottom=Math.max(d.bottom,f.y);d.left=Math.min(d.left,f.x)}return d};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(c){return goog.math.Box.contains(this,c)};goog.math.Box.prototype.expand=function(c,d,e,f){goog.isObject(c)?(this.top-=c.top,this.right+=c.right,this.bottom+=c.bottom,this.left-=c.left):(this.top-=c,this.right+=d,this.bottom+=e,this.left-=f);return this};
goog.math.Box.prototype.expandToInclude=function(c){this.left=Math.min(this.left,c.left);this.top=Math.min(this.top,c.top);this.right=Math.max(this.right,c.right);this.bottom=Math.max(this.bottom,c.bottom)};goog.math.Box.equals=function(c,d){return c==d?!0:c&&d?c.top==d.top&&c.right==d.right&&c.bottom==d.bottom&&c.left==d.left:!1};
goog.math.Box.contains=function(c,d){return c&&d?d instanceof goog.math.Box?d.left>=c.left&&d.right<=c.right&&d.top>=c.top&&d.bottom<=c.bottom:d.x>=c.left&&d.x<=c.right&&d.y>=c.top&&d.y<=c.bottom:!1};goog.math.Box.relativePositionX=function(c,d){return d.x<c.left?d.x-c.left:d.x>c.right?d.x-c.right:0};goog.math.Box.relativePositionY=function(c,d){return d.y<c.top?d.y-c.top:d.y>c.bottom?d.y-c.bottom:0};
goog.math.Box.distance=function(c,d){var e=goog.math.Box.relativePositionX(c,d),f=goog.math.Box.relativePositionY(c,d);return Math.sqrt(e*e+f*f)};goog.math.Box.intersects=function(c,d){return c.left<=d.right&&d.left<=c.right&&c.top<=d.bottom&&d.top<=c.bottom};goog.math.Box.intersectsWithPadding=function(c,d,e){return c.left<=d.right+e&&d.left<=c.right+e&&c.top<=d.bottom+e&&d.top<=c.bottom+e};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(c,d){c instanceof goog.math.Coordinate?(this.left+=c.x,this.right+=c.x,this.top+=c.y,this.bottom+=c.y):(this.left+=c,this.right+=c,goog.isNumber(d)&&(this.top+=d,this.bottom+=d));return this};
goog.math.Box.prototype.scale=function(c,d){var e=goog.isNumber(d)?d:c;this.left*=c;this.right*=c;this.top*=e;this.bottom*=e;return this};goog.math.Rect=function(c,d,e,f){this.left=c;this.top=d;this.width=e;this.height=f};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(c){return new goog.math.Rect(c.left,c.top,c.right-c.left,c.bottom-c.top)};
goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(c,d){return c==d?!0:c&&d?c.left==d.left&&c.width==d.width&&c.top==d.top&&c.height==d.height:!1};
goog.math.Rect.prototype.intersection=function(c){var d=Math.max(this.left,c.left),e=Math.min(this.left+this.width,c.left+c.width);if(d<=e){var f=Math.max(this.top,c.top);c=Math.min(this.top+this.height,c.top+c.height);if(f<=c)return this.left=d,this.top=f,this.width=e-d,this.height=c-f,!0}return!1};
goog.math.Rect.intersection=function(c,d){var e=Math.max(c.left,d.left),f=Math.min(c.left+c.width,d.left+d.width);if(e<=f){var h=Math.max(c.top,d.top),k=Math.min(c.top+c.height,d.top+d.height);if(h<=k)return new goog.math.Rect(e,h,f-e,k-h)}return null};goog.math.Rect.intersects=function(c,d){return c.left<=d.left+d.width&&d.left<=c.left+c.width&&c.top<=d.top+d.height&&d.top<=c.top+c.height};goog.math.Rect.prototype.intersects=function(c){return goog.math.Rect.intersects(this,c)};
goog.math.Rect.difference=function(c,d){var e=goog.math.Rect.intersection(c,d);if(!e||!e.height||!e.width)return[c.clone()];var e=[],f=c.top,h=c.height,k=c.left+c.width,l=c.top+c.height,m=d.left+d.width,n=d.top+d.height;d.top>c.top&&(e.push(new goog.math.Rect(c.left,c.top,c.width,d.top-c.top)),f=d.top,h-=d.top-c.top);n<l&&(e.push(new goog.math.Rect(c.left,n,c.width,l-n)),h=n-f);d.left>c.left&&e.push(new goog.math.Rect(c.left,f,d.left-c.left,h));m<k&&e.push(new goog.math.Rect(m,f,k-m,h));return e};
goog.math.Rect.prototype.difference=function(c){return goog.math.Rect.difference(this,c)};goog.math.Rect.prototype.boundingRect=function(c){var d=Math.max(this.left+this.width,c.left+c.width),e=Math.max(this.top+this.height,c.top+c.height);this.left=Math.min(this.left,c.left);this.top=Math.min(this.top,c.top);this.width=d-this.left;this.height=e-this.top};goog.math.Rect.boundingRect=function(c,d){if(!c||!d)return null;var e=c.clone();e.boundingRect(d);return e};
goog.math.Rect.prototype.contains=function(c){return c instanceof goog.math.Rect?this.left<=c.left&&this.left+this.width>=c.left+c.width&&this.top<=c.top&&this.top+this.height>=c.top+c.height:c.x>=this.left&&c.x<=this.left+this.width&&c.y>=this.top&&c.y<=this.top+this.height};goog.math.Rect.prototype.squaredDistance=function(c){var d=c.x<this.left?this.left-c.x:Math.max(c.x-(this.left+this.width),0);c=c.y<this.top?this.top-c.y:Math.max(c.y-(this.top+this.height),0);return d*d+c*c};
goog.math.Rect.prototype.distance=function(c){return Math.sqrt(this.squaredDistance(c))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(c,d){c instanceof goog.math.Coordinate?(this.left+=c.x,this.top+=c.y):(this.left+=c,goog.isNumber(d)&&(this.top+=d));return this};goog.math.Rect.prototype.scale=function(c,d){var e=goog.isNumber(d)?d:c;this.left*=c;this.width*=c;this.top*=e;this.height*=e;return this};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};goog.style={};goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS=!1;goog.style.setStyle=function(c,d,e){goog.isString(d)?goog.style.setStyle_(c,e,d):goog.object.forEach(d,goog.partial(goog.style.setStyle_,c))};goog.style.setStyle_=function(c,d,e){(e=goog.style.getVendorJsStyleName_(c,e))&&(c.style[e]=d)};goog.style.getVendorJsStyleName_=function(c,d){var e=goog.string.toCamelCase(d);if(void 0===c.style[e]){var f=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(d);if(void 0!==c.style[f])return f}return e};
goog.style.getVendorStyleName_=function(c,d){var e=goog.string.toCamelCase(d);return void 0===c.style[e]&&(e=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(d),void 0!==c.style[e])?goog.dom.vendor.getVendorPrefix()+"-"+d:d};goog.style.getStyle=function(c,d){var e=c.style[goog.string.toCamelCase(d)];return"undefined"!==typeof e?e:c.style[goog.style.getVendorJsStyleName_(c,d)]||""};
goog.style.getComputedStyle=function(c,d){var e=goog.dom.getOwnerDocument(c);return e.defaultView&&e.defaultView.getComputedStyle&&(e=e.defaultView.getComputedStyle(c,null))?e[d]||e.getPropertyValue(d)||"":""};goog.style.getCascadedStyle=function(c,d){return c.currentStyle?c.currentStyle[d]:null};goog.style.getStyle_=function(c,d){return goog.style.getComputedStyle(c,d)||goog.style.getCascadedStyle(c,d)||c.style&&c.style[d]};
goog.style.getComputedPosition=function(c){return goog.style.getStyle_(c,"position")};goog.style.getBackgroundColor=function(c){return goog.style.getStyle_(c,"backgroundColor")};goog.style.getComputedOverflowX=function(c){return goog.style.getStyle_(c,"overflowX")};goog.style.getComputedOverflowY=function(c){return goog.style.getStyle_(c,"overflowY")};goog.style.getComputedZIndex=function(c){return goog.style.getStyle_(c,"zIndex")};
goog.style.getComputedTextAlign=function(c){return goog.style.getStyle_(c,"textAlign")};goog.style.getComputedCursor=function(c){return goog.style.getStyle_(c,"cursor")};goog.style.setPosition=function(c,d,e){var f,h=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersionOrHigher("1.9");d instanceof goog.math.Coordinate?(f=d.x,d=d.y):(f=d,d=e);c.style.left=goog.style.getPixelStyleValue_(f,h);c.style.top=goog.style.getPixelStyleValue_(d,h)};
goog.style.getPosition=function(c){return new goog.math.Coordinate(c.offsetLeft,c.offsetTop)};goog.style.getClientViewportElement=function(c){c=c?goog.dom.getOwnerDocument(c):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(c).isCss1CompatMode()?c.documentElement:c.body};goog.style.getViewportPageOffset=function(c){var d=c.body;c=c.documentElement;return new goog.math.Coordinate(d.scrollLeft||c.scrollLeft,d.scrollTop||c.scrollTop)};
goog.style.getBoundingClientRect_=function(c){var d;try{d=c.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}goog.userAgent.IE&&(c=c.ownerDocument,d.left-=c.documentElement.clientLeft+c.body.clientLeft,d.top-=c.documentElement.clientTop+c.body.clientTop);return d};
goog.style.getOffsetParent=function(c){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return c.offsetParent;var d=goog.dom.getOwnerDocument(c),e=goog.style.getStyle_(c,"position"),f="fixed"==e||"absolute"==e;for(c=c.parentNode;c&&c!=d;c=c.parentNode)if(e=goog.style.getStyle_(c,"position"),f=f&&"static"==e&&c!=d.documentElement&&c!=d.body,!f&&(c.scrollWidth>c.clientWidth||c.scrollHeight>c.clientHeight||"fixed"==e||"absolute"==e||"relative"==e))return c;return null};
goog.style.getVisibleRectForElement=function(c){for(var d=new goog.math.Box(0,Infinity,Infinity,0),e=goog.dom.getDomHelper(c),f=e.getDocument().body,h=e.getDocument().documentElement,k=e.getDocumentScrollElement();c=goog.style.getOffsetParent(c);)if(!(goog.userAgent.IE&&0==c.clientWidth||goog.userAgent.WEBKIT&&0==c.clientHeight&&c==f||c==f||c==h||"visible"==goog.style.getStyle_(c,"overflow"))){var l=goog.style.getPageOffset(c),m=goog.style.getClientLeftTop(c);l.x+=m.x;l.y+=m.y;d.top=Math.max(d.top,
l.y);d.right=Math.min(d.right,l.x+c.clientWidth);d.bottom=Math.min(d.bottom,l.y+c.clientHeight);d.left=Math.max(d.left,l.x)}f=k.scrollLeft;k=k.scrollTop;d.left=Math.max(d.left,f);d.top=Math.max(d.top,k);e=e.getViewportSize();d.right=Math.min(d.right,f+e.width);d.bottom=Math.min(d.bottom,k+e.height);return 0<=d.top&&0<=d.left&&d.bottom>d.top&&d.right>d.left?d:null};
goog.style.getContainerOffsetToScrollInto=function(c,d,e){var f=goog.style.getPageOffset(c),h=goog.style.getPageOffset(d),k=goog.style.getBorderBox(d),l=f.x-h.x-k.left,f=f.y-h.y-k.top,h=d.clientWidth-c.offsetWidth;c=d.clientHeight-c.offsetHeight;k=d.scrollLeft;d=d.scrollTop;e?(k+=l-h/2,d+=f-c/2):(k+=Math.min(l,Math.max(l-h,0)),d+=Math.min(f,Math.max(f-c,0)));return new goog.math.Coordinate(k,d)};
goog.style.scrollIntoContainerView=function(c,d,e){c=goog.style.getContainerOffsetToScrollInto(c,d,e);d.scrollLeft=c.x;d.scrollTop=c.y};
goog.style.getClientLeftTop=function(c){if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("1.9")){var d=parseFloat(goog.style.getComputedStyle(c,"borderLeftWidth"));if(goog.style.isRightToLeft(c))var e=c.offsetWidth-c.clientWidth-d-parseFloat(goog.style.getComputedStyle(c,"borderRightWidth")),d=d+e;return new goog.math.Coordinate(d,parseFloat(goog.style.getComputedStyle(c,"borderTopWidth")))}return new goog.math.Coordinate(c.clientLeft,c.clientTop)};
goog.style.getPageOffset=function(c){var d,e=goog.dom.getOwnerDocument(c),f=goog.style.getStyle_(c,"position");goog.asserts.assertObject(c,"Parameter is required");var h=!goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS&&goog.userAgent.GECKO&&e.getBoxObjectFor&&!c.getBoundingClientRect&&"absolute"==f&&(d=e.getBoxObjectFor(c))&&(0>d.screenX||0>d.screenY),k=new goog.math.Coordinate(0,0),l=goog.style.getClientViewportElement(e);if(c==l)return k;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||
c.getBoundingClientRect)d=goog.style.getBoundingClientRect_(c),c=goog.dom.getDomHelper(e).getDocumentScroll(),k.x=d.left+c.x,k.y=d.top+c.y;else if(e.getBoxObjectFor&&!h)d=e.getBoxObjectFor(c),c=e.getBoxObjectFor(l),k.x=d.screenX-c.screenX,k.y=d.screenY-c.screenY;else{d=c;do{k.x+=d.offsetLeft;k.y+=d.offsetTop;d!=c&&(k.x+=d.clientLeft||0,k.y+=d.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(d)){k.x+=e.body.scrollLeft;k.y+=e.body.scrollTop;break}d=d.offsetParent}while(d&&
d!=c);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==f)k.y-=e.body.offsetTop;for(d=c;(d=goog.style.getOffsetParent(d))&&d!=e.body&&d!=l;)k.x-=d.scrollLeft,goog.userAgent.OPERA&&"TR"==d.tagName||(k.y-=d.scrollTop)}return k};goog.style.getPageOffsetLeft=function(c){return goog.style.getPageOffset(c).x};goog.style.getPageOffsetTop=function(c){return goog.style.getPageOffset(c).y};
goog.style.getFramedPageOffset=function(c,d){var e=new goog.math.Coordinate(0,0),f=goog.dom.getWindow(goog.dom.getOwnerDocument(c)),h=c;do{var k=f==d?goog.style.getPageOffset(h):goog.style.getClientPositionForElement_(goog.asserts.assert(h));e.x+=k.x;e.y+=k.y}while(f&&f!=d&&(h=f.frameElement)&&(f=f.parent));return e};
goog.style.translateRectForAnotherFrame=function(c,d,e){if(d.getDocument()!=e.getDocument()){var f=d.getDocument().body;e=goog.style.getFramedPageOffset(f,e.getWindow());e=goog.math.Coordinate.difference(e,goog.style.getPageOffset(f));goog.userAgent.IE&&!d.isCss1CompatMode()&&(e=goog.math.Coordinate.difference(e,d.getDocumentScroll()));c.left+=e.x;c.top+=e.y}};
goog.style.getRelativePosition=function(c,d){var e=goog.style.getClientPosition(c),f=goog.style.getClientPosition(d);return new goog.math.Coordinate(e.x-f.x,e.y-f.y)};
goog.style.getClientPositionForElement_=function(c){var d;if(goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS||c.getBoundingClientRect)d=goog.style.getBoundingClientRect_(c),d=new goog.math.Coordinate(d.left,d.top);else{d=goog.dom.getDomHelper(c).getDocumentScroll();var e=goog.style.getPageOffset(c);d=new goog.math.Coordinate(e.x-d.x,e.y-d.y)}return goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(12)?goog.math.Coordinate.sum(d,goog.style.getCssTranslation(c)):d};
goog.style.getClientPosition=function(c){goog.asserts.assert(c);if(c.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(c);var d=goog.isFunction(c.getBrowserEvent),e=c;c.targetTouches?e=c.targetTouches[0]:d&&c.getBrowserEvent().targetTouches&&(e=c.getBrowserEvent().targetTouches[0]);return new goog.math.Coordinate(e.clientX,e.clientY)};
goog.style.setPageOffset=function(c,d,e){var f=goog.style.getPageOffset(c);d instanceof goog.math.Coordinate&&(e=d.y,d=d.x);goog.style.setPosition(c,c.offsetLeft+(d-f.x),c.offsetTop+(e-f.y))};goog.style.setSize=function(c,d,e){if(d instanceof goog.math.Size)e=d.height,d=d.width;else if(void 0==e)throw Error("missing height argument");goog.style.setWidth(c,d);goog.style.setHeight(c,e)};goog.style.getPixelStyleValue_=function(c,d){"number"==typeof c&&(c=(d?Math.round(c):c)+"px");return c};
goog.style.setHeight=function(c,d){c.style.height=goog.style.getPixelStyleValue_(d,!0)};goog.style.setWidth=function(c,d){c.style.width=goog.style.getPixelStyleValue_(d,!0)};goog.style.getSize=function(c){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,c)};
goog.style.evaluateWithTemporaryDisplay_=function(c,d){if("none"!=goog.style.getStyle_(d,"display"))return c(d);var e=d.style,f=e.display,h=e.visibility,k=e.position;e.visibility="hidden";e.position="absolute";e.display="inline";var l=c(d);e.display=f;e.position=k;e.visibility=h;return l};
goog.style.getSizeWithDisplay_=function(c){var d=c.offsetWidth,e=c.offsetHeight,f=goog.userAgent.WEBKIT&&!d&&!e;return goog.isDef(d)&&!f||!c.getBoundingClientRect?new goog.math.Size(d,e):(c=goog.style.getBoundingClientRect_(c),new goog.math.Size(c.right-c.left,c.bottom-c.top))};goog.style.getTransformedSize=function(c){if(!c.getBoundingClientRect)return null;c=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,c);return new goog.math.Size(c.right-c.left,c.bottom-c.top)};
goog.style.getBounds=function(c){var d=goog.style.getPageOffset(c);c=goog.style.getSize(c);return new goog.math.Rect(d.x,d.y,c.width,c.height)};goog.style.toCamelCase=function(c){return goog.string.toCamelCase(String(c))};goog.style.toSelectorCase=function(c){return goog.string.toSelectorCase(c)};
goog.style.getOpacity=function(c){var d=c.style;c="";"opacity"in d?c=d.opacity:"MozOpacity"in d?c=d.MozOpacity:"filter"in d&&(d=d.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(c=String(d[1]/100));return""==c?c:Number(c)};goog.style.setOpacity=function(c,d){var e=c.style;"opacity"in e?e.opacity=d:"MozOpacity"in e?e.MozOpacity=d:"filter"in e&&(e.filter=""===d?"":"alpha(opacity="+100*d+")")};
goog.style.setTransparentBackgroundImage=function(c,d){var e=c.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?e.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'", sizingMethod="crop")':(e.backgroundImage="url("+d+")",e.backgroundPosition="top left",e.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(c){c=c.style;"filter"in c?c.filter="":c.backgroundImage="none"};
goog.style.showElement=function(c,d){goog.style.setElementShown(c,d)};goog.style.setElementShown=function(c,d){c.style.display=d?"":"none"};goog.style.isElementShown=function(c){return"none"!=c.style.display};
goog.style.installStyles=function(c,d){var e=goog.dom.getDomHelper(d),f=null;if(goog.userAgent.IE)f=e.getDocument().createStyleSheet(),goog.style.setStyles(f,c);else{var h=e.getElementsByTagNameAndClass("head")[0];h||(f=e.getElementsByTagNameAndClass("body")[0],h=e.createDom("head"),f.parentNode.insertBefore(h,f));f=e.createDom("style");goog.style.setStyles(f,c);e.appendChild(h,f)}return f};goog.style.uninstallStyles=function(c){goog.dom.removeNode(c.ownerNode||c.owningElement||c)};
goog.style.setStyles=function(c,d){goog.userAgent.IE?c.cssText=d:c.innerHTML=d};goog.style.setPreWrap=function(c){c=c.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(c.whiteSpace="pre",c.wordWrap="break-word"):c.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(c){c=c.style;c.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(c.zoom="1",c.display="inline"):c.display=goog.userAgent.GECKO?goog.userAgent.isVersionOrHigher("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(c){return"rtl"==goog.style.getStyle_(c,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;
goog.style.isUnselectable=function(c){return goog.style.unselectableStyle_?"none"==c.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==c.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(c,d,e){e=e?null:c.getElementsByTagName("*");var f=goog.style.unselectableStyle_;if(f){if(d=d?"none":"",c.style[f]=d,e){c=0;for(var h;h=e[c];c++)h.style[f]=d}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(d=d?"on":"",c.setAttribute("unselectable",d),e)for(c=0;h=e[c];c++)h.setAttribute("unselectable",d)};goog.style.getBorderBoxSize=function(c){return new goog.math.Size(c.offsetWidth,c.offsetHeight)};
goog.style.setBorderBoxSize=function(c,d){var e=goog.dom.getOwnerDocument(c),f=goog.dom.getDomHelper(e).isCss1CompatMode();if(!goog.userAgent.IE||f&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(c,d,"border-box");else if(e=c.style,f){var f=goog.style.getPaddingBox(c),h=goog.style.getBorderBox(c);e.pixelWidth=d.width-h.left-f.left-f.right-h.right;e.pixelHeight=d.height-h.top-f.top-f.bottom-h.bottom}else e.pixelWidth=d.width,e.pixelHeight=d.height};
goog.style.getContentBoxSize=function(c){var d=goog.dom.getOwnerDocument(c),e=goog.userAgent.IE&&c.currentStyle;if(e&&goog.dom.getDomHelper(d).isCss1CompatMode()&&"auto"!=e.width&&"auto"!=e.height&&!e.boxSizing)return d=goog.style.getIePixelValue_(c,e.width,"width","pixelWidth"),c=goog.style.getIePixelValue_(c,e.height,"height","pixelHeight"),new goog.math.Size(d,c);e=goog.style.getBorderBoxSize(c);d=goog.style.getPaddingBox(c);c=goog.style.getBorderBox(c);return new goog.math.Size(e.width-c.left-
d.left-d.right-c.right,e.height-c.top-d.top-d.bottom-c.bottom)};
goog.style.setContentBoxSize=function(c,d){var e=goog.dom.getOwnerDocument(c),f=goog.dom.getDomHelper(e).isCss1CompatMode();if(!goog.userAgent.IE||f&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(c,d,"content-box");else if(e=c.style,f)e.pixelWidth=d.width,e.pixelHeight=d.height;else{var f=goog.style.getPaddingBox(c),h=goog.style.getBorderBox(c);e.pixelWidth=d.width+h.left+f.left+f.right+h.right;e.pixelHeight=d.height+h.top+f.top+f.bottom+h.bottom}};
goog.style.setBoxSizingSize_=function(c,d,e){c=c.style;goog.userAgent.GECKO?c.MozBoxSizing=e:goog.userAgent.WEBKIT?c.WebkitBoxSizing=e:c.boxSizing=e;c.width=Math.max(d.width,0)+"px";c.height=Math.max(d.height,0)+"px"};goog.style.getIePixelValue_=function(c,d,e,f){if(/^\d+px?$/.test(d))return parseInt(d,10);var h=c.style[e],k=c.runtimeStyle[e];c.runtimeStyle[e]=c.currentStyle[e];c.style[e]=d;d=c.style[f];c.style[e]=h;c.runtimeStyle[e]=k;return d};
goog.style.getIePixelDistance_=function(c,d){var e=goog.style.getCascadedStyle(c,d);return e?goog.style.getIePixelValue_(c,e,"left","pixelLeft"):0};
goog.style.getBox_=function(c,d){if(goog.userAgent.IE){var e=goog.style.getIePixelDistance_(c,d+"Left"),f=goog.style.getIePixelDistance_(c,d+"Right"),h=goog.style.getIePixelDistance_(c,d+"Top"),k=goog.style.getIePixelDistance_(c,d+"Bottom");return new goog.math.Box(h,f,k,e)}e=goog.style.getComputedStyle(c,d+"Left");f=goog.style.getComputedStyle(c,d+"Right");h=goog.style.getComputedStyle(c,d+"Top");k=goog.style.getComputedStyle(c,d+"Bottom");return new goog.math.Box(parseFloat(h),parseFloat(f),parseFloat(k),
parseFloat(e))};goog.style.getPaddingBox=function(c){return goog.style.getBox_(c,"padding")};goog.style.getMarginBox=function(c){return goog.style.getBox_(c,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};
goog.style.getIePixelBorder_=function(c,d){if("none"==goog.style.getCascadedStyle(c,d+"Style"))return 0;var e=goog.style.getCascadedStyle(c,d+"Width");return e in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[e]:goog.style.getIePixelValue_(c,e,"left","pixelLeft")};
goog.style.getBorderBox=function(c){if(goog.userAgent.IE){var d=goog.style.getIePixelBorder_(c,"borderLeft"),e=goog.style.getIePixelBorder_(c,"borderRight"),f=goog.style.getIePixelBorder_(c,"borderTop");c=goog.style.getIePixelBorder_(c,"borderBottom");return new goog.math.Box(f,e,c,d)}d=goog.style.getComputedStyle(c,"borderLeftWidth");e=goog.style.getComputedStyle(c,"borderRightWidth");f=goog.style.getComputedStyle(c,"borderTopWidth");c=goog.style.getComputedStyle(c,"borderBottomWidth");return new goog.math.Box(parseFloat(f),
parseFloat(e),parseFloat(c),parseFloat(d))};goog.style.getFontFamily=function(c){var d=goog.dom.getOwnerDocument(c),e="";if(d.body.createTextRange){d=d.body.createTextRange();d.moveToElementText(c);try{e=d.queryCommandValue("FontName")}catch(f){e=""}}e||(e=goog.style.getStyle_(c,"fontFamily"));c=e.split(",");1<c.length&&(e=c[0]);return goog.string.stripQuotes(e,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(c){return(c=c.match(goog.style.lengthUnitRegex_))&&c[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(c){var d=goog.style.getStyle_(c,"fontSize"),e=goog.style.getLengthUnits(d);if(d&&"px"==e)return parseInt(d,10);if(goog.userAgent.IE){if(e in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(c,d,"left","pixelLeft");if(c.parentNode&&c.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&e in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return c=c.parentNode,e=goog.style.getStyle_(c,"fontSize"),goog.style.getIePixelValue_(c,d==e?"1em":d,"left","pixelLeft")}e=
goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(c,e);d=e.offsetHeight;goog.dom.removeNode(e);return d};goog.style.parseStyleAttribute=function(c){var d={};goog.array.forEach(c.split(/\s*;\s*/),function(c){var f=c.split(/\s*:\s*/);console.warn("BUGGUY parseStyleAttribute, replace by silex closure-patches.js",c,f);2==f.length&&(d[goog.string.toCamelCase(f[0].toLowerCase())]=f[1])});return d};
goog.style.toStyleAttribute=function(c){var d=[];goog.object.forEach(c,function(c,f){d.push(goog.string.toSelectorCase(f),":",c,";")});return d.join("")};goog.style.setFloat=function(c,d){c.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=d};goog.style.getFloat=function(c){return c.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(c){var d=goog.dom.createElement("div");c&&(d.className=c);d.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";c=goog.dom.createElement("div");goog.style.setSize(c,"200px","200px");d.appendChild(c);goog.dom.appendChild(goog.dom.getDocument().body,d);c=d.offsetWidth-d.clientWidth;goog.dom.removeNode(d);return c};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;
goog.style.getCssTranslation=function(c){var d;goog.userAgent.IE?d="-ms-transform":goog.userAgent.WEBKIT?d="-webkit-transform":goog.userAgent.OPERA?d="-o-transform":goog.userAgent.GECKO&&(d="-moz-transform");var e;d&&(e=goog.style.getStyle_(c,d));e||(e=goog.style.getStyle_(c,"transform"));return e?(c=e.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(c[1]),parseFloat(c[2])):new goog.math.Coordinate(0,0):new goog.math.Coordinate(0,0)};goog.events={};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(c){c.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(c){return!(!c||!c[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(c,d,e,f,h,k){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=c;this.proxy=d;this.src=e;this.type=f;this.capture=!!h;this.handler=k;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||
goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(c){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=c;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var d=goog.debug.entryPointRegistry.monitors_,e=0;e<d.length;e++)c(goog.bind(d[e].wrap,d[e]))};
goog.debug.entryPointRegistry.monitorAll=function(c){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var d=goog.bind(c.wrap,c),e=0;e<goog.debug.entryPointRegistry.refList_.length;e++)goog.debug.entryPointRegistry.refList_[e](d);goog.debug.entryPointRegistry.monitors_.push(c)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(c){var d=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(c==d[d.length-1],"Only the most recent monitor can be unwrapped.");c=goog.bind(c.unwrap,c);for(var e=0;e<goog.debug.entryPointRegistry.refList_.length;e++)goog.debug.entryPointRegistry.refList_[e](c);d.length--};goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",
PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",
MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",
RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive"};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var c=[],d;for(d in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(d)&&c.push(goog.Disposable.instances_[Number(d)]);return c};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var c=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(c))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[c]}};
goog.Disposable.prototype.registerDisposable=function(c){this.addOnDisposeCallback(goog.partial(goog.dispose,c))};goog.Disposable.prototype.addOnDisposeCallback=function(c,d){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]);this.onDisposeCallbacks_.push(goog.bind(c,d))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};
goog.Disposable.isDisposed=function(c){return c&&"function"==typeof c.isDisposed?c.isDisposed():!1};goog.dispose=function(c){c&&"function"==typeof c.dispose&&c.dispose()};goog.disposeAll=function(c){for(var d=0,e=arguments.length;d<e;++d){var f=arguments[d];goog.isArrayLike(f)?goog.disposeAll.apply(null,f):goog.dispose(f)}};goog.events.Event=function(c,d){this.type=c;this.currentTarget=this.target=d};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.propagationStopped_=!1;goog.events.Event.prototype.defaultPrevented=!1;goog.events.Event.prototype.returnValue_=!0;goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};
goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(c){c.stopPropagation()};goog.events.Event.preventDefault=function(c){c.preventDefault()};goog.reflect={};goog.reflect.object=function(c,d){return d};goog.reflect.sinkValue=function(c){goog.reflect.sinkValue[" "](c);return c};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(c,d){try{return goog.reflect.sinkValue(c[d]),!0}catch(e){}return!1};goog.events.BrowserEvent=function(c,d){c&&this.init(c,d)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;
goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=!1;goog.events.BrowserEvent.prototype.altKey=!1;goog.events.BrowserEvent.prototype.shiftKey=!1;goog.events.BrowserEvent.prototype.metaKey=!1;
goog.events.BrowserEvent.prototype.platformModifierKey=!1;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(c,d){var e=this.type=c.type;goog.events.Event.call(this,e);this.target=c.target||c.srcElement;this.currentTarget=d;var f=c.relatedTarget;f?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(f,"nodeName")||(f=null)):e==goog.events.EventType.MOUSEOVER?f=c.fromElement:e==goog.events.EventType.MOUSEOUT&&(f=c.toElement);this.relatedTarget=f;this.offsetX=goog.userAgent.WEBKIT||void 0!==c.offsetX?c.offsetX:c.layerX;this.offsetY=goog.userAgent.WEBKIT||void 0!==
c.offsetY?c.offsetY:c.layerY;this.clientX=void 0!==c.clientX?c.clientX:c.pageX;this.clientY=void 0!==c.clientY?c.clientY:c.pageY;this.screenX=c.screenX||0;this.screenY=c.screenY||0;this.button=c.button;this.keyCode=c.keyCode||0;this.charCode=c.charCode||("keypress"==e?c.keyCode:0);this.ctrlKey=c.ctrlKey;this.altKey=c.altKey;this.shiftKey=c.shiftKey;this.metaKey=c.metaKey;this.platformModifierKey=goog.userAgent.MAC?c.metaKey:c.ctrlKey;this.state=c.state;this.event_=c;c.defaultPrevented&&this.preventDefault();
delete this.propagationStopped_};goog.events.BrowserEvent.prototype.isButton=function(c){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==c:"click"==this.type?c==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[c])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var c=this.event_;if(c.preventDefault)c.preventDefault();else if(c.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(c.ctrlKey||112<=c.keyCode&&123>=c.keyCode)c.keyCode=-1}catch(d){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";goog.events.listen=function(c,d,e,f,h){if(goog.isArray(d)){for(var k=0;k<d.length;k++)goog.events.listen(c,d[k],e,f,h);return null}e=goog.events.wrapListener_(e);return goog.events.Listenable.isImplementedBy(c)?c.listen(d,e,f,h):goog.events.listen_(c,d,e,!1,f,h)};
goog.events.listen_=function(c,d,e,f,h,k){if(!d)throw Error("Invalid event type");h=!!h;var l=goog.events.listenerTree_;d in l||(l[d]={count_:0});l=l[d];h in l||(l[h]={count_:0},l.count_++);var l=l[h],m=goog.getUid(c),n;if(l[m]){n=l[m];for(var p=0;p<n.length;p++)if(l=n[p],l.listener==e&&l.handler==k){if(l.removed)break;f||(n[p].callOnce=!1);return n[p]}}else n=l[m]=[],l.count_++;p=goog.events.getProxy();l=new goog.events.Listener(e,p,c,d,h,k);l.callOnce=f;p.src=c;p.listener=l;n.push(l);goog.events.sources_[m]||
(goog.events.sources_[m]=[]);goog.events.sources_[m].push(l);c.addEventListener?c.addEventListener(d,p,h):c.attachEvent(goog.events.getOnString_(d),p);return goog.events.listeners_[l.key]=l};goog.events.getProxy=function(){var c=goog.events.handleBrowserEvent_,d=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(e){return c.call(d.src,d.listener,e)}:function(e){e=c.call(d.src,d.listener,e);if(!e)return e};return d};
goog.events.listenOnce=function(c,d,e,f,h){if(goog.isArray(d)){for(var k=0;k<d.length;k++)goog.events.listenOnce(c,d[k],e,f,h);return null}e=goog.events.wrapListener_(e);return goog.events.Listenable.isImplementedBy(c)?c.listenOnce(d,e,f,h):goog.events.listen_(c,d,e,!0,f,h)};goog.events.listenWithWrapper=function(c,d,e,f,h){d.listen(c,e,f,h)};
goog.events.unlisten=function(c,d,e,f,h){if(goog.isArray(d)){for(var k=0;k<d.length;k++)goog.events.unlisten(c,d[k],e,f,h);return null}e=goog.events.wrapListener_(e);if(goog.events.Listenable.isImplementedBy(c))return c.unlisten(d,e,f,h);f=!!f;c=goog.events.getListeners_(c,d,f);if(!c)return!1;for(k=0;k<c.length;k++)if(c[k].listener==e&&c[k].capture==f&&c[k].handler==h)return goog.events.unlistenByKey(c[k]);return!1};
goog.events.unlistenByKey=function(c){if(goog.isNumber(c)||!c||c.removed)return!1;var d=c.src;if(goog.events.Listenable.isImplementedBy(d))return d.unlistenByKey(c);var e=c.type,f=c.proxy,h=c.capture;d.removeEventListener?d.removeEventListener(e,f,h):d.detachEvent&&d.detachEvent(goog.events.getOnString_(e),f);d=goog.getUid(d);goog.events.sources_[d]&&(f=goog.events.sources_[d],goog.array.remove(f,c),0==f.length&&delete goog.events.sources_[d]);c.markAsRemoved();if(f=goog.events.listenerTree_[e][h][d])goog.array.remove(f,
c),0==f.length&&(delete goog.events.listenerTree_[e][h][d],goog.events.listenerTree_[e][h].count_--),0==goog.events.listenerTree_[e][h].count_&&(delete goog.events.listenerTree_[e][h],goog.events.listenerTree_[e].count_--),0==goog.events.listenerTree_[e].count_&&delete goog.events.listenerTree_[e];delete goog.events.listeners_[c.key];return!0};goog.events.unlistenWithWrapper=function(c,d,e,f,h){d.unlisten(c,e,f,h)};
goog.events.removeAll=function(c,d){var e=0,f=null==d;if(null!=c){if(c&&goog.events.Listenable.isImplementedBy(c))return c.removeAllListeners(d);var h=goog.getUid(c);if(goog.events.sources_[h])for(var h=goog.events.sources_[h],k=h.length-1;0<=k;k--){var l=h[k];if(f||d==l.type)goog.events.unlistenByKey(l),e++}}else goog.object.forEach(goog.events.listeners_,function(c){goog.events.unlistenByKey(c);e++});return e};
goog.events.removeAllNativeListeners=function(){var c=0;goog.object.forEach(goog.events.listeners_,function(d){goog.events.unlistenByKey(d);c++});return c};goog.events.getListeners=function(c,d,e){return goog.events.Listenable.isImplementedBy(c)?c.getListeners(d,e):goog.events.getListeners_(c,d,e)||[]};goog.events.getListeners_=function(c,d,e){var f=goog.events.listenerTree_;return d in f&&(f=f[d],e in f&&(f=f[e],c=goog.getUid(c),f[c]))?f[c]:null};
goog.events.getListener=function(c,d,e,f,h){f=!!f;e=goog.events.wrapListener_(e);if(goog.events.Listenable.isImplementedBy(c))return c.getListener(d,e,f,h);if(c=goog.events.getListeners_(c,d,f))for(d=0;d<c.length;d++)if(!c[d].removed&&c[d].listener==e&&c[d].capture==f&&c[d].handler==h)return c[d];return null};
goog.events.hasListener=function(c,d,e){if(goog.events.Listenable.isImplementedBy(c))return c.hasListener(d,e);c=goog.getUid(c);var f=goog.events.sources_[c];if(f){var h=goog.isDef(d),k=goog.isDef(e);return h&&k?(f=goog.events.listenerTree_[d],!!f&&!!f[e]&&c in f[e]):h||k?goog.array.some(f,function(c){return h&&c.type==d||k&&c.capture==e}):!0}return!1};goog.events.expose=function(c){var d=[],e;for(e in c)c[e]&&c[e].id?d.push(e+" = "+c[e]+" ("+c[e].id+")"):d.push(e+" = "+c[e]);return d.join("\n")};
goog.events.getOnString_=function(c){return c in goog.events.onStringMap_?goog.events.onStringMap_[c]:goog.events.onStringMap_[c]=goog.events.onString_+c};goog.events.fireListeners=function(c,d,e,f){if(goog.events.Listenable.isImplementedBy(c))return c.fireListeners(d,e,f);var h=goog.events.listenerTree_;return d in h&&(h=h[d],e in h)?goog.events.fireListeners_(h[e],c,d,e,f):!0};
goog.events.fireListeners_=function(c,d,e,f,h){e=1;d=goog.getUid(d);if(c[d])for(c=goog.array.clone(c[d]),d=0;d<c.length;d++)(f=c[d])&&!f.removed&&(e&=!1!==goog.events.fireListener(f,h));return Boolean(e)};goog.events.fireListener=function(c,d){var e=c.listener,f=c.handler||c.src;c.callOnce&&goog.events.unlistenByKey(c);return e.call(f,d)};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(c,d){goog.asserts.assert(goog.events.Listenable.isImplementedBy(c),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return c.dispatchEvent(d)};goog.events.protectBrowserEventEntryPoint=function(c){goog.events.handleBrowserEvent_=c.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(c,d){if(c.removed)return!0;var e=c.type,f=goog.events.listenerTree_;if(!(e in f))return!0;var f=f[e],h,k;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){h=d||goog.getObjectByName("window.event");var l=!0 in f,m=!1 in f;if(l){if(goog.events.isMarkedIeEvent_(h))return!0;goog.events.markIeEvent_(h)}var n=new goog.events.BrowserEvent;n.init(h,this);h=!0;try{if(l){for(var p=[],s=n.currentTarget;s;s=s.parentNode)p.push(s);k=f[!0];for(var q=p.length-1;!n.propagationStopped_&&
0<=q;q--)n.currentTarget=p[q],h&=goog.events.fireListeners_(k,p[q],e,!0,n);if(m)for(k=f[!1],q=0;!n.propagationStopped_&&q<p.length;q++)n.currentTarget=p[q],h&=goog.events.fireListeners_(k,p[q],e,!1,n)}else h=goog.events.fireListener(c,n)}finally{p&&(p.length=0)}return h}e=new goog.events.BrowserEvent(d,this);return h=goog.events.fireListener(c,e)};goog.events.markIeEvent_=function(c){var d=!1;if(0==c.keyCode)try{c.keyCode=-1;return}catch(e){d=!0}if(d||void 0==c.returnValue)c.returnValue=!0};
goog.events.isMarkedIeEvent_=function(c){return 0>c.keyCode||void 0!=c.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(c){return c+"_"+goog.events.uniqueIdCounter_++};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener_=function(c){goog.asserts.assert(c,"Listener can not be null.");if(goog.isFunction(c))return c;goog.asserts.assert(c.handleEvent,"An object listener must have handleEvent method.");return c[goog.events.LISTENER_WRAPPER_PROP_]||(c[goog.events.LISTENER_WRAPPER_PROP_]=function(d){return c.handleEvent(d)})};goog.debug.entryPointRegistry.register(function(c){goog.events.handleBrowserEvent_=c(goog.events.handleBrowserEvent_)});goog.events.EventHandler=function(c){goog.Disposable.call(this);this.handler_=c;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(c,d,e,f,h){goog.isArray(d)||(goog.events.EventHandler.typeArray_[0]=d,d=goog.events.EventHandler.typeArray_);for(var k=0;k<d.length;k++){var l=goog.events.listen(c,d[k],e||this,f||!1,h||this.handler_||this);if(goog.DEBUG&&!l)break;this.keys_[l.key]=l}return this};
goog.events.EventHandler.prototype.listenOnce=function(c,d,e,f,h){if(goog.isArray(d))for(var k=0;k<d.length;k++)this.listenOnce(c,d[k],e,f,h);else c=goog.events.listenOnce(c,d,e||this,f,h||this.handler_||this),this.keys_[c.key]=c;return this};goog.events.EventHandler.prototype.listenWithWrapper=function(c,d,e,f,h){d.listen(c,e,f,h||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.getListenerCount=function(){var c=0,d;for(d in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,d)&&c++;return c};goog.events.EventHandler.prototype.unlisten=function(c,d,e,f,h){if(goog.isArray(d))for(var k=0;k<d.length;k++)this.unlisten(c,d[k],e,f,h);else if(c=goog.events.getListener(c,d,e||this,f,h||this.handler_||this))goog.events.unlistenByKey(c),delete this.keys_[c.key];return this};
goog.events.EventHandler.prototype.unlistenWithWrapper=function(c,d,e,f,h){d.unlisten(c,e,f,h||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,goog.events.unlistenByKey);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};
goog.events.EventHandler.prototype.handleEvent=function(c){throw Error("EventHandler.handleEvent not implemented");};goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();goog.events.ListenerMap=function(c){this.src=c;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var c=0,d;for(d in this.listeners)c+=this.listeners[d].length;return c};
goog.events.ListenerMap.prototype.add=function(c,d,e,f,h){var k=this.listeners[c];k||(k=this.listeners[c]=[],this.typeCount_++);var l=goog.events.ListenerMap.findListenerIndex_(k,d,f,h);-1<l?(c=k[l],e||(c.callOnce=!1)):(c=new goog.events.Listener(d,null,this.src,c,!!f,h),c.callOnce=e,k.push(c));return c};
goog.events.ListenerMap.prototype.remove=function(c,d,e,f){if(!(c in this.listeners))return!1;var h=this.listeners[c];d=goog.events.ListenerMap.findListenerIndex_(h,d,e,f);return-1<d?(h[d].markAsRemoved(),goog.array.removeAt(h,d),0==h.length&&(delete this.listeners[c],this.typeCount_--),!0):!1};
goog.events.ListenerMap.prototype.removeByKey=function(c){var d=c.type;if(!(d in this.listeners))return!1;var e=goog.array.remove(this.listeners[d],c);e&&(c.markAsRemoved(),0==this.listeners[d].length&&(delete this.listeners[d],this.typeCount_--));return e};goog.events.ListenerMap.prototype.removeAll=function(c){var d=0,e;for(e in this.listeners)if(!c||e==c){for(var f=this.listeners[e],h=0;h<f.length;h++)++d,f[h].removed=!0;delete this.listeners[e];this.typeCount_--}return d};
goog.events.ListenerMap.prototype.getListeners=function(c,d){var e=this.listeners[c],f=[];if(e)for(var h=0;h<e.length;++h){var k=e[h];k.capture==d&&f.push(k)}return f};goog.events.ListenerMap.prototype.getListener=function(c,d,e,f){c=this.listeners[c];var h=-1;c&&(h=goog.events.ListenerMap.findListenerIndex_(c,d,e,f));return-1<h?c[h]:null};
goog.events.ListenerMap.prototype.hasListener=function(c,d){var e=goog.isDef(c),f=goog.isDef(d);return goog.object.some(this.listeners,function(h,k){for(var l=0;l<h.length;++l)if(!(e&&h[l].type!=c||f&&h[l].capture!=d))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(c,d,e,f){for(var h=0;h<c.length;++h){var k=c[h];if(!k.removed&&k.listener==d&&k.capture==!!e&&k.handler==f)return h}return-1};goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(c){this.parentEventTarget_=c};goog.events.EventTarget.prototype.addEventListener=function(c,d,e,f){goog.events.listen(this,c,d,e,f)};goog.events.EventTarget.prototype.removeEventListener=function(c,d,e,f){goog.events.unlisten(this,c,d,e,f)};
goog.events.EventTarget.prototype.dispatchEvent=function(c){this.assertInitialized_();var d,e=this.getParentEventTarget();if(e){d=[];for(var f=1;e;e=e.getParentEventTarget())d.push(e),goog.asserts.assert(++f<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,c,d)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(c,d,e,f){this.assertInitialized_();return this.eventTargetListeners_.add(c,d,!1,e,f)};goog.events.EventTarget.prototype.listenOnce=function(c,d,e,f){return this.eventTargetListeners_.add(c,d,!0,e,f)};
goog.events.EventTarget.prototype.unlisten=function(c,d,e,f){return this.eventTargetListeners_.remove(c,d,e,f)};goog.events.EventTarget.prototype.unlistenByKey=function(c){return this.eventTargetListeners_.removeByKey(c)};goog.events.EventTarget.prototype.removeAllListeners=function(c){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(c):0};
goog.events.EventTarget.prototype.fireListeners=function(c,d,e){c=this.eventTargetListeners_.listeners[c];if(!c)return!0;c=goog.array.clone(c);for(var f=!0,h=0;h<c.length;++h){var k=c[h];if(k&&!k.removed&&k.capture==d){var l=k.listener,m=k.handler||k.src;k.callOnce&&this.unlistenByKey(k);f=!1!==l.call(m,e)&&f}}return f&&!1!=e.returnValue_};goog.events.EventTarget.prototype.getListeners=function(c,d){return this.eventTargetListeners_.getListeners(c,d)};
goog.events.EventTarget.prototype.getListener=function(c,d,e,f){return this.eventTargetListeners_.getListener(c,d,e,f)};goog.events.EventTarget.prototype.hasListener=function(c,d){return this.eventTargetListeners_.hasListener(c,d)};goog.events.EventTarget.prototype.setTargetForTesting=function(c){this.actualEventTarget_=c};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(c,d,e){var f=d.type||d;if(goog.isString(d))d=new goog.events.Event(d,c);else if(d instanceof goog.events.Event)d.target=d.target||c;else{var h=d;d=new goog.events.Event(f,c);goog.object.extend(d,h)}var h=!0,k;if(e)for(var l=e.length-1;!d.propagationStopped_&&0<=l;l--)k=d.currentTarget=e[l],h=k.fireListeners(f,!0,d)&&h;d.propagationStopped_||(k=d.currentTarget=c,h=k.fireListeners(f,!0,d)&&h,d.propagationStopped_||(h=k.fireListeners(f,!1,d)&&h));
if(e)for(l=0;!d.propagationStopped_&&l<e.length;l++)k=d.currentTarget=e[l],h=k.fireListeners(f,!1,d)&&h;return h};goog.ui.Component=function(c){goog.events.EventTarget.call(this);this.dom_=c||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(c,d){switch(c){case goog.ui.Component.State.DISABLED:return d?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return d?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return d?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return d?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return d?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return d?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return d?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(c){goog.ui.Component.defaultRightToLeft_=c};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.inDocument_=!1;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=!1;
goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(c){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,c,this));this.id_=c};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var c=this.element_;goog.asserts.assert(c,"Can not call getElementStrict before rendering/decorating.");return c};goog.ui.Component.prototype.setElementInternal=function(c){this.element_=c};goog.ui.Component.prototype.getElementsByClass=function(c){return this.element_?this.dom_.getElementsByClass(c,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(c){return this.element_?this.dom_.getElementByClass(c,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(c){var d=this.getElementByClass(c);goog.asserts.assert(d,"Expected element in component with class: %s",c);return d};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};
goog.ui.Component.prototype.setParent=function(c){if(this==c)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(c&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=c)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=c;goog.ui.Component.superClass_.setParentEventTarget.call(this,c)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(c){if(this.parent_&&this.parent_!=c)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,c)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(c){this.render_(c)};
goog.ui.Component.prototype.renderBefore=function(c){this.render_(c.parentNode,c)};goog.ui.Component.prototype.render_=function(c,d){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();c?c.insertBefore(this.element_,d||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(c){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(c&&this.canDecorate(c)){this.wasDecorated_=!0;var d=goog.dom.getOwnerDocument(c);this.dom_&&this.dom_.getDocument()==d||(this.dom_=goog.dom.getDomHelper(c));this.decorateInternal(c);goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(d,c)||this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(c){return!0};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(c){this.element_=c};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(c){!c.isInDocument()&&c.getElement()&&c.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(c){c.isInDocument()&&c.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(c){c.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(c){return this.getId()+"."+c};goog.ui.Component.prototype.makeIds=function(c){var d={},e;for(e in c)d[e]=this.makeId(c[e]);return d};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(c){this.model_=c};goog.ui.Component.prototype.getFragmentFromId=function(c){return c.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(c){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(c))};goog.ui.Component.prototype.addChild=function(c,d){this.addChildAt(c,this.getChildCount(),d)};
goog.ui.Component.prototype.addChildAt=function(c,d,e){if(c.inDocument_&&(e||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>d||d>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);c.getParent()==this?(goog.object.set(this.childIndex_,c.getId(),c),goog.array.remove(this.children_,c)):goog.object.add(this.childIndex_,c.getId(),c);c.setParent(this);goog.array.insertAt(this.children_,
c,d);c.inDocument_&&this.inDocument_&&c.getParent()==this?(e=this.getContentElement(),e.insertBefore(c.getElement(),e.childNodes[d]||null)):e?(this.element_||this.createDom(),d=this.getChildAt(d+1),c.render_(this.getContentElement(),d?d.element_:null)):this.inDocument_&&(!c.inDocument_&&c.element_&&c.element_.parentNode&&c.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT)&&c.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};
goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(c){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=c};goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};
goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var c=[];this.forEachChild(function(d){c.push(d.getId())});return c};goog.ui.Component.prototype.getChild=function(c){return this.childIndex_&&c?goog.object.get(this.childIndex_,c)||null:null};goog.ui.Component.prototype.getChildAt=function(c){return this.children_?this.children_[c]||null:null};
goog.ui.Component.prototype.forEachChild=function(c,d){this.children_&&goog.array.forEach(this.children_,c,d)};goog.ui.Component.prototype.indexOfChild=function(c){return this.children_&&c?goog.array.indexOf(this.children_,c):-1};
goog.ui.Component.prototype.removeChild=function(c,d){if(c){var e=goog.isString(c)?c:c.getId();c=this.getChild(e);e&&c&&(goog.object.remove(this.childIndex_,e),goog.array.remove(this.children_,c),d&&(c.exitDocument(),c.element_&&goog.dom.removeNode(c.element_)),c.setParent(null))}if(!c)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return c};goog.ui.Component.prototype.removeChildAt=function(c,d){return this.removeChild(this.getChildAt(c),d)};
goog.ui.Component.prototype.removeChildren=function(c){for(var d=[];this.hasChildren();)d.push(this.removeChildAt(0,c));return d};goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",
PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};
goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};
goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,
"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false"));return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=[goog.dom.TagName.A,goog.dom.TagName.AREA,goog.dom.TagName.BUTTON,goog.dom.TagName.HEAD,goog.dom.TagName.INPUT,goog.dom.TagName.LINK,goog.dom.TagName.MENU,goog.dom.TagName.META,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.PROGRESS,goog.dom.TagName.STYLE,goog.dom.TagName.SELECT,goog.dom.TagName.SOURCE,goog.dom.TagName.TEXTAREA,goog.dom.TagName.TITLE,goog.dom.TagName.TRACK];
goog.a11y.aria.setRole=function(c,d){d?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,d),"No such ARIA role "+d),c.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,d)):goog.a11y.aria.removeRole(c)};goog.a11y.aria.getRole=function(c){return c.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(c){c.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(c,d,e){goog.isArrayLike(e)&&(e=e.join(" "));var f=goog.a11y.aria.getAriaAttributeName_(d);""===e||void 0==e?(e=goog.a11y.aria.datatables.getDefaultValuesMap(),d in e?c.setAttribute(f,e[d]):c.removeAttribute(f)):c.setAttribute(f,e)};goog.a11y.aria.removeState=function(c,d){c.removeAttribute(goog.a11y.aria.getAriaAttributeName_(d))};goog.a11y.aria.getState=function(c,d){var e=c.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));return null==e||void 0==e?"":String(e)};
goog.a11y.aria.getActiveDescendant=function(c){var d=goog.a11y.aria.getState(c,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(c).getElementById(d)};goog.a11y.aria.setActiveDescendant=function(c,d){var e="";d&&(e=d.id,goog.asserts.assert(e,"The active element should have an id."));goog.a11y.aria.setState(c,goog.a11y.aria.State.ACTIVEDESCENDANT,e)};goog.a11y.aria.getLabel=function(c){return goog.a11y.aria.getState(c,goog.a11y.aria.State.LABEL)};
goog.a11y.aria.setLabel=function(c,d){goog.a11y.aria.setState(c,goog.a11y.aria.State.LABEL,d)};goog.a11y.aria.assertRoleIsSetInternalUtil=function(c,d){if(!goog.array.contains(goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_,c.tagName)){var e=goog.a11y.aria.getRole(c);goog.asserts.assert(null!=e,"The element ARIA role cannot be null.");goog.asserts.assert(goog.array.contains(d,e),'Non existing or incorrect role set for element.The role set is "'+e+'". The role should be any of "'+d+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}};
goog.a11y.aria.getBooleanStateInternalUtil=function(c,d){var e=goog.a11y.aria.getState(c,d);return"true"==e?!0:"false"==e?!1:null};goog.a11y.aria.getNumberStateInternalUtil=function(c,d){var e=goog.a11y.aria.getState(c,d);return goog.string.isNumeric(e)?goog.string.toNumber(e):null};goog.a11y.aria.getStringArrayStateInternalUtil=function(c,d){var e=c.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));return goog.a11y.aria.splitStringOnWhitespace_(e)};
goog.a11y.aria.getStringStateInternalUtil=function(c,d){return goog.a11y.aria.getState(c,d)||null};goog.a11y.aria.splitStringOnWhitespace_=function(c){return c?c.split(/\s+/):[]};goog.a11y.aria.getAriaAttributeName_=function(c){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(c,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,c),"No such ARIA attribute "+c));return goog.a11y.aria.ARIA_PREFIX_+c};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(c){for(var d;c;){d=goog.getUid(c);if(d=goog.ui.registry.defaultRenderers_[d])break;c=c.superClass_?c.superClass_.constructor:null}return d?goog.isFunction(d.getInstance)?d.getInstance():new d:null};
goog.ui.registry.setDefaultRenderer=function(c,d){if(!goog.isFunction(c))throw Error("Invalid component class "+c);if(!goog.isFunction(d))throw Error("Invalid renderer class "+d);var e=goog.getUid(c);goog.ui.registry.defaultRenderers_[e]=d};goog.ui.registry.getDecoratorByClassName=function(c){return c in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[c]():null};
goog.ui.registry.setDecoratorByClassName=function(c,d){if(!c)throw Error("Invalid class name "+c);if(!goog.isFunction(d))throw Error("Invalid decorator function "+d);goog.ui.registry.decoratorFunctions_[c]=d};goog.ui.registry.getDecorator=function(c){for(var d=goog.dom.classes.get(c),e=0,f=d.length;e<f;e++)if(c=goog.ui.registry.getDecoratorByClassName(d[e]))return c;return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};
goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.ContainerRenderer=function(){};goog.addSingletonGetter(goog.ui.ContainerRenderer);goog.ui.ContainerRenderer.getCustomRenderer=function(c,d){var e=new c;e.getCssClass=function(){return d};return e};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(c,d){c&&(c.tabIndex=d?0:-1)};
goog.ui.ContainerRenderer.prototype.createDom=function(c){return c.getDomHelper().createDom("div",this.getClassNames(c).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(c){return c};goog.ui.ContainerRenderer.prototype.canDecorate=function(c){return"DIV"==c.tagName};
goog.ui.ContainerRenderer.prototype.decorate=function(c,d){d.id&&c.setId(d.id);var e=this.getCssClass(),f=!1,h=goog.dom.classes.get(d);h&&goog.array.forEach(h,function(d){d==e?f=!0:d&&this.setStateFromClassName(c,d,e)},this);f||goog.dom.classes.add(d,e);this.decorateChildren(c,this.getContentElement(d));return d};
goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(c,d,e){d==e+"-disabled"?c.setEnabled(!1):d==e+"-horizontal"?c.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):d==e+"-vertical"&&c.setOrientation(goog.ui.Container.Orientation.VERTICAL)};
goog.ui.ContainerRenderer.prototype.decorateChildren=function(c,d,e){if(d){e=e||d.firstChild;for(var f;e&&e.parentNode==d;){f=e.nextSibling;if(e.nodeType==goog.dom.NodeType.ELEMENT){var h=this.getDecoratorForChild(e);h&&(h.setElementInternal(e),c.isEnabled()||h.setEnabled(!1),c.addChild(h),h.decorate(e))}else e.nodeValue&&""!=goog.string.trim(e.nodeValue)||d.removeChild(e);e=f}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(c){return goog.ui.registry.getDecorator(c)};
goog.ui.ContainerRenderer.prototype.initializeDom=function(c){c=c.getElement();goog.asserts.assert(c,"The container DOM element cannot be null.");goog.style.setUnselectable(c,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(c.hideFocus=!0);var d=this.getAriaRole();d&&goog.a11y.aria.setRole(c,d)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(c){return c.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};
goog.ui.ContainerRenderer.prototype.getClassNames=function(c){var d=this.getCssClass(),e=c.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL,e=[d,e?d+"-horizontal":d+"-vertical"];c.isEnabled()||e.push(d+"-disabled");return e};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,
X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,
SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(c){if(c.altKey&&!c.ctrlKey||c.metaKey||c.keyCode>=goog.events.KeyCodes.F1&&c.keyCode<=goog.events.KeyCodes.F12)return!1;switch(c.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return c.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||c.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(c,d,e,f,h){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&h)return goog.events.KeyCodes.isCharacterKey(c);if(h&&!f||!e&&(d==goog.events.KeyCodes.CTRL||d==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&d==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&f&&e)switch(c){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&
f&&d==c)return!1;switch(c){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(c)};
goog.events.KeyCodes.isCharacterKey=function(c){if(c>=goog.events.KeyCodes.ZERO&&c<=goog.events.KeyCodes.NINE||c>=goog.events.KeyCodes.NUM_ZERO&&c<=goog.events.KeyCodes.NUM_MULTIPLY||c>=goog.events.KeyCodes.A&&c<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==c)return!0;switch(c){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(c){switch(c){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return c}};goog.events.KeyHandler=function(c,d){goog.events.EventTarget.call(this);c&&this.attach(c,d)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(c){goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!c.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!c.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!c.metaKey)&&(this.keyCode_=this.lastKey_=-1);-1==this.lastKey_&&(c.ctrlKey&&c.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:c.altKey&&c.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:c.metaKey&&
c.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(c.keyCode,this.lastKey_,c.shiftKey,c.ctrlKey,c.altKey)?this.handleEvent(c):(this.keyCode_=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(c.keyCode):c.keyCode,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=c.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(c){this.resetState();this.altKey_=c.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(c){var d=c.getBrowserEvent(),e,f,h=d.altKey;goog.userAgent.IE&&c.type==goog.events.EventType.KEYPRESS?(e=this.keyCode_,f=e!=goog.events.KeyCodes.ENTER&&e!=goog.events.KeyCodes.ESC?d.keyCode:0):goog.userAgent.WEBKIT&&c.type==goog.events.EventType.KEYPRESS?(e=this.keyCode_,f=0<=d.charCode&&63232>d.charCode&&goog.events.KeyCodes.isCharacterKey(e)?d.charCode:0):goog.userAgent.OPERA?(e=this.keyCode_,f=goog.events.KeyCodes.isCharacterKey(e)?d.keyCode:
0):(e=d.keyCode||this.keyCode_,f=d.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(h=this.altKey_),goog.userAgent.MAC&&(f==goog.events.KeyCodes.QUESTION_MARK&&e==goog.events.KeyCodes.WIN_KEY)&&(e=goog.events.KeyCodes.SLASH));var k=e,l=d.keyIdentifier;e?63232<=e&&e in goog.events.KeyHandler.safariKey_?k=goog.events.KeyHandler.safariKey_[e]:25==e&&c.shiftKey&&(k=9):l&&l in goog.events.KeyHandler.keyIdentifier_&&(k=goog.events.KeyHandler.keyIdentifier_[l]);c=k==this.lastKey_;this.lastKey_=
k;d=new goog.events.KeyEvent(k,f,c,d);d.altKey=h;this.dispatchEvent(d)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(c,d){this.keyUpKey_&&this.detach();this.element_=c;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,d);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,d,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,d,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(c,d,e,f){goog.events.BrowserEvent.call(this,f);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=c;this.charCode=d;this.repeat=e};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(c,d){var e=new c;e.getCssClass=function(){return d};return e};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];goog.ui.ControlRenderer.prototype.getAriaRole=function(){};
goog.ui.ControlRenderer.prototype.createDom=function(c){var d=c.getDomHelper().createDom("div",this.getClassNames(c).join(" "),c.getContent());this.setAriaStates(c,d);return d};goog.ui.ControlRenderer.prototype.getContentElement=function(c){return c};
goog.ui.ControlRenderer.prototype.enableClassName=function(c,d,e){if(c=c.getElement?c.getElement():c)if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var f=this.getAppliedCombinedClassNames_(goog.dom.classes.get(c),d);f.push(d);goog.partial(e?goog.dom.classes.add:goog.dom.classes.remove,c).apply(null,f)}else goog.dom.classes.enable(c,d,e)};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(c,d,e){this.enableClassName(c,d,e)};
goog.ui.ControlRenderer.prototype.canDecorate=function(c){return!0};
goog.ui.ControlRenderer.prototype.decorate=function(c,d){d.id&&c.setId(d.id);var e=this.getContentElement(d);e&&e.firstChild?c.setContentInternal(e.firstChild.nextSibling?goog.array.clone(e.childNodes):e.firstChild):c.setContentInternal(null);var f=0,h=this.getCssClass(),k=this.getStructuralCssClass(),l=!1,m=!1,e=!1,n=goog.dom.classes.get(d);goog.array.forEach(n,function(c){l||c!=h?m||c!=k?f|=this.getStateFromClass(c):m=!0:(l=!0,k==h&&(m=!0))},this);c.setStateInternal(f);l||(n.push(h),k==h&&(m=!0));
m||n.push(k);var p=c.getExtraClassNames();p&&n.push.apply(n,p);if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var s=this.getAppliedCombinedClassNames_(n);0<s.length&&(n.push.apply(n,s),e=!0)}l&&m&&!p&&!e||goog.dom.classes.set(d,n.join(" "));this.setAriaStates(c,d);return d};goog.ui.ControlRenderer.prototype.initializeDom=function(c){c.isRightToLeft()&&this.setRightToLeft(c.getElement(),!0);c.isEnabled()&&this.setFocusable(c,c.isVisible())};
goog.ui.ControlRenderer.prototype.setAriaRole=function(c,d){var e=d||this.getAriaRole();e&&(goog.asserts.assert(c,"The element passed as a first parameter cannot be null."),goog.a11y.aria.setRole(c,e))};
goog.ui.ControlRenderer.prototype.setAriaStates=function(c,d){goog.asserts.assert(c);goog.asserts.assert(d);c.isVisible()||goog.a11y.aria.setState(d,goog.a11y.aria.State.HIDDEN,!c.isVisible());c.isEnabled()||this.updateAriaState(d,goog.ui.Component.State.DISABLED,!c.isEnabled());c.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(d,goog.ui.Component.State.SELECTED,c.isSelected());c.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(d,goog.ui.Component.State.CHECKED,
c.isChecked());c.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(d,goog.ui.Component.State.OPENED,c.isOpen())};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(c,d){goog.style.setUnselectable(c,!d,!goog.userAgent.IE&&!goog.userAgent.OPERA)};goog.ui.ControlRenderer.prototype.setRightToLeft=function(c,d){this.enableClassName(c,this.getStructuralCssClass()+"-rtl",d)};
goog.ui.ControlRenderer.prototype.isFocusable=function(c){var d;return c.isSupportedState(goog.ui.Component.State.FOCUSED)&&(d=c.getKeyEventTarget())?goog.dom.isFocusableTabIndex(d):!1};goog.ui.ControlRenderer.prototype.setFocusable=function(c,d){var e;if(c.isSupportedState(goog.ui.Component.State.FOCUSED)&&(e=c.getKeyEventTarget())){if(!d&&c.isFocused()){try{e.blur()}catch(f){}c.isFocused()&&c.handleBlur(null)}goog.dom.isFocusableTabIndex(e)!=d&&goog.dom.setFocusableTabIndex(e,d)}};
goog.ui.ControlRenderer.prototype.setVisible=function(c,d){goog.style.setElementShown(c,d);c&&goog.a11y.aria.setState(c,goog.a11y.aria.State.HIDDEN,!d)};goog.ui.ControlRenderer.prototype.setState=function(c,d,e){var f=c.getElement();if(f){var h=this.getClassForState(d);h&&this.enableClassName(c,h,e);this.updateAriaState(f,d,e)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(c,d,e){goog.ui.ControlRenderer.ARIA_STATE_MAP_||(goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED));if(d=goog.ui.ControlRenderer.ARIA_STATE_MAP_[d])goog.asserts.assert(c,"The element passed as a first parameter cannot be null."),
goog.a11y.aria.setState(c,d,e)};goog.ui.ControlRenderer.prototype.setContent=function(c,d){var e=this.getContentElement(c);if(e&&(goog.dom.removeChildren(e),d))if(goog.isString(d))goog.dom.setTextContent(e,d);else{var f=function(c){if(c){var d=goog.dom.getOwnerDocument(e);e.appendChild(goog.isString(c)?d.createTextNode(c):c)}};goog.isArray(d)?goog.array.forEach(d,f):!goog.isArrayLike(d)||"nodeType"in d?f(d):goog.array.forEach(goog.array.clone(d),f)}};
goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(c){return c.getElement()};goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(c){var d=this.getCssClass(),e=[d],f=this.getStructuralCssClass();f!=d&&e.push(f);d=this.getClassNamesForState(c.getState());e.push.apply(e,d);(c=c.getExtraClassNames())&&e.push.apply(e,c);goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&e.push.apply(e,this.getAppliedCombinedClassNames_(e));return e};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(c,d){var e=[];d&&(c=c.concat([d]));goog.array.forEach(this.getIe6ClassCombinations(),function(f){!goog.array.every(f,goog.partial(goog.array.contains,c))||d&&!goog.array.contains(f,d)||e.push(f.join("_"))});return e};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(c){for(var d=[];c;){var e=c&-c;d.push(this.getClassForState(e));c&=~e}return d};
goog.ui.ControlRenderer.prototype.getClassForState=function(c){this.classByState_||this.createClassByStateMap_();return this.classByState_[c]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(c){this.stateByClass_||this.createStateByClassMap_();c=parseInt(this.stateByClass_[c],10);return isNaN(c)?0:c};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var c=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,c+"-disabled",goog.ui.Component.State.HOVER,c+"-hover",goog.ui.Component.State.ACTIVE,c+"-active",goog.ui.Component.State.SELECTED,c+"-selected",goog.ui.Component.State.CHECKED,c+"-checked",goog.ui.Component.State.FOCUSED,c+"-focused",goog.ui.Component.State.OPENED,c+"-open")};
goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.decorate=function(c){var d=goog.ui.registry.getDecorator(c);d&&d.decorate(c);return d};goog.ui.Control=function(c,d,e){goog.ui.Component.call(this,e);this.renderer_=d||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(c)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;
goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;
goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(c){this.isInDocument()&&c!=this.handleMouseEvents_&&this.enableMouseEventHandling_(c);this.handleMouseEvents_=c};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};
goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(c){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null);this.renderer_=c};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(c){c&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,c)||this.extraClassNames_.push(c):this.extraClassNames_=[c],this.renderer_.enableExtraClassName(this,c,!0))};goog.ui.Control.prototype.removeClassName=function(c){c&&(this.extraClassNames_&&goog.array.remove(this.extraClassNames_,c))&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,c,!1))};
goog.ui.Control.prototype.enableClassName=function(c,d){d?this.addClassName(c):this.removeClassName(c)};goog.ui.Control.prototype.createDom=function(){var c=this.renderer_.createDom(this);this.setElementInternal(c);this.renderer_.setAriaRole(c,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(c,!1);this.isVisible()||this.renderer_.setVisible(c,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Control.prototype.setPreferredAriaRole=function(c){this.preferredAriaRole_=c};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(c){return this.renderer_.canDecorate(c)};
goog.ui.Control.prototype.decorateInternal=function(c){c=this.renderer_.decorate(this,c);this.setElementInternal(c);this.renderer_.setAriaRole(c,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(c,!1);this.visible_="none"!=c.style.display};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var c=this.getKeyEventTarget();if(c){var d=this.getKeyHandler();d.attach(c);this.getHandler().listen(d,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(c,goog.events.EventType.FOCUS,
this.handleFocus).listen(c,goog.events.EventType.BLUR,this.handleBlur)}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(c){var d=this.getHandler(),e=this.getElement();c?(d.listen(e,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(e,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(e,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(e,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&d.listen(e,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&d.listen(e,
goog.events.EventType.DBLCLICK,this.handleDblClick)):(d.unlisten(e,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(e,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(e,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(e,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&d.unlisten(e,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&d.unlisten(e,goog.events.EventType.DBLCLICK,this.handleDblClick))};
goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};
goog.ui.Control.prototype.setContent=function(c){this.renderer_.setContent(this.getElement(),c);this.setContentInternal(c)};goog.ui.Control.prototype.setContentInternal=function(c){this.content_=c};goog.ui.Control.prototype.getCaption=function(){var c=this.getContent();if(!c)return"";c=goog.isString(c)?c:goog.isArray(c)?goog.array.map(c,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(c);return goog.string.collapseBreakingSpaces(c)};goog.ui.Control.prototype.setCaption=function(c){this.setContent(c)};
goog.ui.Control.prototype.setRightToLeft=function(c){goog.ui.Control.superClass_.setRightToLeft.call(this,c);var d=this.getElement();d&&this.renderer_.setRightToLeft(d,c)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(c){this.allowTextSelection_=c;var d=this.getElement();d&&this.renderer_.setAllowTextSelection(d,c)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};
goog.ui.Control.prototype.setVisible=function(c,d){if(d||this.visible_!=c&&this.dispatchEvent(c?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var e=this.getElement();e&&this.renderer_.setVisible(e,c);this.isEnabled()&&this.renderer_.setFocusable(this,c);this.visible_=c;return!0}return!1};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var c=this.getParent();return!!c&&"function"==typeof c.isEnabled&&!c.isEnabled()};goog.ui.Control.prototype.setEnabled=function(c){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!c)&&(c||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,c),this.setState(goog.ui.Component.State.DISABLED,!c))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};
goog.ui.Control.prototype.setHighlighted=function(c){this.isTransitionAllowed(goog.ui.Component.State.HOVER,c)&&this.setState(goog.ui.Component.State.HOVER,c)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(c){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,c)&&this.setState(goog.ui.Component.State.ACTIVE,c)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};
goog.ui.Control.prototype.setSelected=function(c){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,c)&&this.setState(goog.ui.Component.State.SELECTED,c)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(c){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,c)&&this.setState(goog.ui.Component.State.CHECKED,c)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};
goog.ui.Control.prototype.setFocused=function(c){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,c)&&this.setState(goog.ui.Component.State.FOCUSED,c)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(c){this.isTransitionAllowed(goog.ui.Component.State.OPENED,c)&&this.setState(goog.ui.Component.State.OPENED,c)};goog.ui.Control.prototype.getState=function(){return this.state_};
goog.ui.Control.prototype.hasState=function(c){return!!(this.state_&c)};goog.ui.Control.prototype.setState=function(c,d){this.isSupportedState(c)&&d!=this.hasState(c)&&(this.renderer_.setState(this,c,d),this.state_=d?this.state_|c:this.state_&~c)};goog.ui.Control.prototype.setStateInternal=function(c){this.state_=c};goog.ui.Control.prototype.isSupportedState=function(c){return!!(this.supportedStates_&c)};
goog.ui.Control.prototype.setSupportedState=function(c,d){if(this.isInDocument()&&this.hasState(c)&&!d)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!d&&this.hasState(c)&&this.setState(c,!1);this.supportedStates_=d?this.supportedStates_|c:this.supportedStates_&~c};goog.ui.Control.prototype.isAutoState=function(c){return!!(this.autoStates_&c)&&this.isSupportedState(c)};goog.ui.Control.prototype.setAutoStates=function(c,d){this.autoStates_=d?this.autoStates_|c:this.autoStates_&~c};
goog.ui.Control.prototype.isDispatchTransitionEvents=function(c){return!!(this.statesWithTransitionEvents_&c)&&this.isSupportedState(c)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(c,d){this.statesWithTransitionEvents_=d?this.statesWithTransitionEvents_|c:this.statesWithTransitionEvents_&~c};
goog.ui.Control.prototype.isTransitionAllowed=function(c,d){return this.isSupportedState(c)&&this.hasState(c)!=d&&(!(this.statesWithTransitionEvents_&c)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(c,d)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(c){!goog.ui.Control.isMouseEventWithinElement_(c,this.getElement())&&(this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER))&&this.setHighlighted(!0)};
goog.ui.Control.prototype.handleMouseOut=function(c){!goog.ui.Control.isMouseEventWithinElement_(c,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.prototype.handleContextMenu=goog.nullFunction;goog.ui.Control.isMouseEventWithinElement_=function(c,d){return!!c.relatedTarget&&goog.dom.contains(d,c.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(c){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),c.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&c.isMouseActionButton()&&c.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(c){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&(this.performActionInternal(c)&&this.isAutoState(goog.ui.Component.State.ACTIVE))&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(c){this.isEnabled()&&this.performActionInternal(c)};
goog.ui.Control.prototype.performActionInternal=function(c){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var d=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);c&&(d.altKey=c.altKey,d.ctrlKey=c.ctrlKey,d.metaKey=c.metaKey,d.shiftKey=c.shiftKey,d.platformModifierKey=c.platformModifierKey);return this.dispatchEvent(d)};
goog.ui.Control.prototype.handleFocus=function(c){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(c){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(c){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(c)?(c.preventDefault(),c.stopPropagation(),!0):!1};
goog.ui.Control.prototype.handleKeyEventInternal=function(c){return c.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(c)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.ui.Container=function(c,d,e){goog.ui.Component.call(this,e);this.renderer_=d||goog.ui.ContainerRenderer.getInstance();this.orientation_=c||this.renderer_.getDefaultOrientation()};goog.inherits(goog.ui.Container,goog.ui.Component);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;goog.ui.Container.prototype.keyHandler_=null;
goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;goog.ui.Container.prototype.openFollowsHighlight_=!0;
goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};
goog.ui.Container.prototype.setKeyEventTarget=function(c){if(this.focusable_){var d=this.getKeyEventTarget(),e=this.isInDocument();this.keyEventTarget_=c;var f=this.getKeyEventTarget();e&&(this.keyEventTarget_=d,this.enableFocusHandling_(!1),this.keyEventTarget_=c,this.getKeyHandler().attach(f),this.enableFocusHandling_(!0))}else throw Error("Can't set key event target for container that doesn't support keyboard focus!");};
goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(c){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=c};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};
goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(c){return this.renderer_.canDecorate(c)};goog.ui.Container.prototype.decorateInternal=function(c){this.setElementInternal(this.renderer_.decorate(this,c));"none"==c.style.display&&(this.visible_=!1)};
goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(c){c.isInDocument()&&this.registerChildId_(c)},this);var c=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,
goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(c),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(c,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents);this.isFocusable()&&this.enableFocusHandling_(!0)};
goog.ui.Container.prototype.enableFocusHandling_=function(c){var d=this.getHandler(),e=this.getKeyEventTarget();c?d.listen(e,goog.events.EventType.FOCUS,this.handleFocus).listen(e,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):d.unlisten(e,goog.events.EventType.FOCUS,this.handleFocus).unlisten(e,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};
goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};
goog.ui.Container.prototype.handleEnterItem=function(c){return!0};
goog.ui.Container.prototype.handleHighlightItem=function(c){var d=this.indexOfChild(c.target);if(-1<d&&d!=this.highlightedIndex_){var e=this.getHighlighted();e&&e.setHighlighted(!1);this.highlightedIndex_=d;e=this.getHighlighted();this.isMouseButtonPressed()&&e.setActive(!0);this.openFollowsHighlight_&&(this.openItem_&&e!=this.openItem_)&&(e.isSupportedState(goog.ui.Component.State.OPENED)?e.setOpen(!0):this.openItem_.setOpen(!1))}d=this.getElement();goog.asserts.assert(d,"The DOM element for the container cannot be null.");
null!=c.target.getElement()&&goog.a11y.aria.setState(d,goog.a11y.aria.State.ACTIVEDESCENDANT,c.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(c){c.target==this.getHighlighted()&&(this.highlightedIndex_=-1);c=this.getElement();goog.asserts.assert(c,"The DOM element for the container cannot be null.");goog.a11y.aria.removeState(c,goog.a11y.aria.State.ACTIVEDESCENDANT)};
goog.ui.Container.prototype.handleOpenItem=function(c){(c=c.target)&&(c!=this.openItem_&&c.getParent()==this)&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=c)};goog.ui.Container.prototype.handleCloseItem=function(c){c.target==this.openItem_&&(this.openItem_=null)};goog.ui.Container.prototype.handleMouseDown=function(c){this.enabled_&&this.setMouseButtonPressed(!0);var d=this.getKeyEventTarget();d&&goog.dom.isFocusableTabIndex(d)?d.focus():c.preventDefault()};
goog.ui.Container.prototype.handleDocumentMouseUp=function(c){this.setMouseButtonPressed(!1)};goog.ui.Container.prototype.handleChildMouseEvents=function(c){var d=this.getOwnerControl(c.target);if(d)switch(c.type){case goog.events.EventType.MOUSEDOWN:d.handleMouseDown(c);break;case goog.events.EventType.MOUSEUP:d.handleMouseUp(c);break;case goog.events.EventType.MOUSEOVER:d.handleMouseOver(c);break;case goog.events.EventType.MOUSEOUT:d.handleMouseOut(c);break;case goog.events.EventType.CONTEXTMENU:d.handleContextMenu(c)}};
goog.ui.Container.prototype.getOwnerControl=function(c){if(this.childElementIdMap_)for(var d=this.getElement();c&&c!==d;){var e=c.id;if(e in this.childElementIdMap_)return this.childElementIdMap_[e];c=c.parentNode}return null};goog.ui.Container.prototype.handleFocus=function(c){};goog.ui.Container.prototype.handleBlur=function(c){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};
goog.ui.Container.prototype.handleKeyEvent=function(c){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(c)?(c.preventDefault(),c.stopPropagation(),!0):!1};
goog.ui.Container.prototype.handleKeyEventInternal=function(c){var d=this.getHighlighted();if(d&&"function"==typeof d.handleKeyEvent&&d.handleKeyEvent(c)||this.openItem_&&this.openItem_!=d&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(c))return!0;if(c.shiftKey||c.ctrlKey||c.metaKey||c.altKey)return!1;switch(c.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable())this.getKeyEventTarget().blur();else return!1;break;case goog.events.KeyCodes.HOME:this.highlightFirst();
break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightNext():this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightNext();else return!1;
break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightPrevious():this.highlightNext();else return!1;break;default:return!1}return!0};goog.ui.Container.prototype.registerChildId_=function(c){var d=c.getElement(),d=d.id||(d.id=c.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[d]=c};
goog.ui.Container.prototype.addChild=function(c,d){goog.asserts.assertInstanceof(c,goog.ui.Control,"The child of a container must be a control");goog.ui.Container.superClass_.addChild.call(this,c,d)};
goog.ui.Container.prototype.addChildAt=function(c,d,e){c.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);c.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);!this.isFocusable()&&this.isFocusableChildrenAllowed()||c.setSupportedState(goog.ui.Component.State.FOCUSED,!1);c.setHandleMouseEvents(!1);goog.ui.Container.superClass_.addChildAt.call(this,c,d,e);c.isInDocument()&&this.isInDocument()&&this.registerChildId_(c);d<=this.highlightedIndex_&&this.highlightedIndex_++};
goog.ui.Container.prototype.removeChild=function(c,d){if(c=goog.isString(c)?this.getChild(c):c){var e=this.indexOfChild(c);-1!=e&&(e==this.highlightedIndex_?c.setHighlighted(!1):e<this.highlightedIndex_&&this.highlightedIndex_--);(e=c.getElement())&&(e.id&&this.childElementIdMap_)&&goog.object.remove(this.childElementIdMap_,e.id)}c=goog.ui.Container.superClass_.removeChild.call(this,c,d);c.setHandleMouseEvents(!0);return c};goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};
goog.ui.Container.prototype.setOrientation=function(c){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=c};goog.ui.Container.prototype.isVisible=function(){return this.visible_};
goog.ui.Container.prototype.setVisible=function(c,d){if(d||this.visible_!=c&&this.dispatchEvent(c?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=c;var e=this.getElement();e&&(goog.style.setElementShown(e,c),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),d||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return!0}return!1};
goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};
goog.ui.Container.prototype.setEnabled=function(c){this.enabled_!=c&&this.dispatchEvent(c?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(c?(this.enabled_=!0,this.forEachChild(function(c){c.wasDisabled?delete c.wasDisabled:c.setEnabled(!0)})):(this.forEachChild(function(c){c.isEnabled()?c.setEnabled(!1):c.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),c&&this.visible_))};
goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(c){c!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(c);this.focusable_=c;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),c)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};
goog.ui.Container.prototype.setFocusableChildrenAllowed=function(c){this.allowFocusableChildren_=c};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(c){this.openFollowsHighlight_=c};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};
goog.ui.Container.prototype.setHighlightedIndex=function(c){(c=this.getChildAt(c))?c.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(c){this.setHighlightedIndex(this.indexOfChild(c))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};
goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(c,d){return(c+1)%d},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(c,d){c--;return 0>c?d-1:c},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(c,d){return(c+1)%d},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(c,d){c--;return 0>c?d-1:c},this.highlightedIndex_)};
goog.ui.Container.prototype.highlightHelper=function(c,d){for(var e=0>d?this.indexOfChild(this.openItem_):d,f=this.getChildCount(),e=c.call(this,e,f),h=0;h<=f;){var k=this.getChildAt(e);if(k&&this.canHighlightItem(k))return this.setHighlightedIndexFromKeyEvent(e),!0;h++;e=c.call(this,e,f)}return!1};goog.ui.Container.prototype.canHighlightItem=function(c){return c.isVisible()&&c.isEnabled()&&c.isSupportedState(goog.ui.Component.State.HOVER)};
goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(c){this.setHighlightedIndex(c)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(c){this.mouseButtonPressed_=c};goog.ui.MenuBarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.MenuBarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuBarRenderer);goog.ui.MenuBarRenderer.CSS_CLASS="goog-menubar";goog.ui.MenuBarRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENUBAR};goog.ui.MenuBarRenderer.prototype.getCssClass=function(){return goog.ui.MenuBarRenderer.CSS_CLASS};goog.ui.MenuBarRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.HORIZONTAL};goog.ui.menuBar={};goog.ui.menuBar.create=function(c,d){return new goog.ui.Container(null,c?c:goog.ui.MenuBarRenderer.getInstance(),d)};goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this);this.classNameCache_=[]};goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuItemRenderer);goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem";goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2};
goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(c){var d=this.classNameCache_[c];if(!d){switch(c){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:d=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:d=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:d=this.getStructuralCssClass()+"-content"}this.classNameCache_[c]=d}return d};
goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM};goog.ui.MenuItemRenderer.prototype.createDom=function(c){var d=c.getDomHelper().createDom("div",this.getClassNames(c).join(" "),this.createContent(c.getContent(),c.getDomHelper()));this.setEnableCheckBoxStructure(c,d,c.isSupportedState(goog.ui.Component.State.SELECTED)||c.isSupportedState(goog.ui.Component.State.CHECKED));this.setAriaStates(c,d);return d};
goog.ui.MenuItemRenderer.prototype.getContentElement=function(c){return c&&c.firstChild};goog.ui.MenuItemRenderer.prototype.decorate=function(c,d){this.hasContentStructure(d)||d.appendChild(this.createContent(d.childNodes,c.getDomHelper()));goog.dom.classes.has(d,"goog-option")&&(c.setCheckable(!0),this.setCheckable(c,d,!0));return goog.ui.MenuItemRenderer.superClass_.decorate.call(this,c,d)};
goog.ui.MenuItemRenderer.prototype.setContent=function(c,d){var e=this.getContentElement(c),f=this.hasCheckBoxStructure(c)?e.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,c,d);f&&!this.hasCheckBoxStructure(c)&&e.insertBefore(f,e.firstChild||null)};
goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(c){c=goog.dom.getFirstElementChild(c);var d=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!c&&goog.dom.classes.has(c,d)};goog.ui.MenuItemRenderer.prototype.createContent=function(c,d){var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return d.createDom("div",e,c)};
goog.ui.MenuItemRenderer.prototype.setSelectable=function(c,d,e){d&&(goog.a11y.aria.setRole(d,e?goog.a11y.aria.Role.MENU_ITEM_RADIO:this.getAriaRole()),this.setEnableCheckBoxStructure(c,d,e))};goog.ui.MenuItemRenderer.prototype.setCheckable=function(c,d,e){d&&(goog.a11y.aria.setRole(d,e?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.getAriaRole()),this.setEnableCheckBoxStructure(c,d,e))};
goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(c){if(c=this.getContentElement(c)){c=c.firstChild;var d=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!c&&goog.dom.classes.has(c,d)}return!1};
goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(c,d,e){e!=this.hasCheckBoxStructure(d)&&(goog.dom.classes.enable(d,"goog-option",e),d=this.getContentElement(d),e?(e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),d.insertBefore(c.getDomHelper().createDom("div",e),d.firstChild||null)):d.removeChild(d.firstChild))};
goog.ui.MenuItemRenderer.prototype.getClassForState=function(c){switch(c){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,c)}};
goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(c){var d=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(c){case "goog-option-selected":return goog.ui.Component.State.CHECKED;case d:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,c)}};goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS};goog.ui.MenuItem=function(c,d,e,f){goog.ui.Control.call(this,c,f||goog.ui.MenuItemRenderer.getInstance(),e);this.setValue(d)};goog.inherits(goog.ui.MenuItem,goog.ui.Control);goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator";goog.ui.MenuItem.ACCELERATOR_CLASS_="goog-menuitem-accel";goog.ui.MenuItem.prototype.getValue=function(){var c=this.getModel();return null!=c?c:this.getCaption()};goog.ui.MenuItem.prototype.setValue=function(c){this.setModel(c)};
goog.ui.MenuItem.prototype.setSelectable=function(c){this.setSupportedState(goog.ui.Component.State.SELECTED,c);this.isChecked()&&!c&&this.setChecked(!1);var d=this.getElement();d&&this.getRenderer().setSelectable(this,d,c)};goog.ui.MenuItem.prototype.setCheckable=function(c){this.setSupportedState(goog.ui.Component.State.CHECKED,c);var d=this.getElement();d&&this.getRenderer().setCheckable(this,d,c)};
goog.ui.MenuItem.prototype.getCaption=function(){var c=this.getContent();if(goog.isArray(c)){var d=goog.ui.MenuItem.ACCELERATOR_CLASS_,e=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,c=goog.array.map(c,function(c){var h=goog.dom.classes.get(c);return goog.array.contains(h,d)||goog.array.contains(h,e)?"":goog.dom.getRawTextContent(c)}).join("");return goog.string.collapseBreakingSpaces(c)}return goog.ui.MenuItem.superClass_.getCaption.call(this)};
goog.ui.MenuItem.prototype.handleMouseUp=function(c){var d=this.getParent();if(d){var e=d.openingCoords;d.openingCoords=null;if(e&&goog.isNumber(c.clientX)&&(d=new goog.math.Coordinate(c.clientX,c.clientY),goog.math.Coordinate.equals(e,d)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,c)};goog.ui.MenuItem.prototype.handleKeyEventInternal=function(c){return c.keyCode==this.getMnemonic()&&this.performActionInternal(c)?!0:goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,c)};
goog.ui.MenuItem.prototype.setMnemonic=function(c){this.mnemonicKey_=c};goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)});goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(c){return c.getDomHelper().createDom("div",this.getCssClass())};
goog.ui.MenuSeparatorRenderer.prototype.decorate=function(c,d){d.id&&c.setId(d.id);if("HR"==d.tagName){var e=d;d=this.createDom(c);goog.dom.insertSiblingBefore(d,e);goog.dom.removeNode(e)}else goog.dom.classes.add(d,this.getCssClass());return d};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(c,d){};goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(c,d){goog.ui.Control.call(this,null,c||goog.ui.MenuSeparatorRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.Separator,goog.ui.Control);
goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var c=this.getElement();goog.asserts.assert(c,"The DOM element for the separator cannot be null.");goog.a11y.aria.setRole(c,"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuRenderer);goog.ui.MenuRenderer.CSS_CLASS="goog-menu";goog.ui.MenuRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU};goog.ui.MenuRenderer.prototype.canDecorate=function(c){return"UL"==c.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,c)};
goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(c){return"HR"==c.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,c)};goog.ui.MenuRenderer.prototype.containsElement=function(c,d){return goog.dom.contains(c.getElement(),d)};goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS};
goog.ui.MenuRenderer.prototype.initializeDom=function(c){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,c);c=c.getElement();goog.asserts.assert(c,"The menu DOM element cannot be null.");goog.a11y.aria.setState(c,goog.a11y.aria.State.HASPOPUP,"true")};goog.ui.MenuSeparator=function(c){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),c)};goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuHeaderRenderer);goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader";goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS};goog.ui.MenuHeader=function(c,d,e){goog.ui.Control.call(this,c,e||goog.ui.MenuHeaderRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.MenuHeader,goog.ui.Control);
goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)});goog.ui.Menu=function(c,d){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,d||goog.ui.MenuRenderer.getInstance(),c);this.setFocusable(!1)};goog.inherits(goog.ui.Menu,goog.ui.Container);goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE};goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS;goog.ui.Menu.prototype.allowAutoFocus_=!0;
goog.ui.Menu.prototype.allowHighlightDisabled_=!1;goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()};goog.ui.Menu.prototype.containsElement=function(c){if(this.getRenderer().containsElement(this,c))return!0;for(var d=0,e=this.getChildCount();d<e;d++){var f=this.getChildAt(d);if("function"==typeof f.containsElement&&f.containsElement(c))return!0}return!1};goog.ui.Menu.prototype.addItem=function(c){this.addChild(c,!0)};
goog.ui.Menu.prototype.addItemAt=function(c,d){this.addChildAt(c,d,!0)};goog.ui.Menu.prototype.removeItem=function(c){(c=this.removeChild(c,!0))&&c.dispose()};goog.ui.Menu.prototype.removeItemAt=function(c){(c=this.removeChildAt(c,!0))&&c.dispose()};goog.ui.Menu.prototype.getItemAt=function(c){return this.getChildAt(c)};goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()};goog.ui.Menu.prototype.getItems=function(){var c=[];this.forEachChild(function(d){c.push(d)});return c};
goog.ui.Menu.prototype.setPosition=function(c,d){var e=this.isVisible();e||goog.style.setElementShown(this.getElement(),!0);goog.style.setPageOffset(this.getElement(),c,d);e||goog.style.setElementShown(this.getElement(),!1)};goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null};goog.ui.Menu.prototype.setAllowAutoFocus=function(c){(this.allowAutoFocus_=c)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_};
goog.ui.Menu.prototype.setAllowHighlightDisabled=function(c){this.allowHighlightDisabled_=c};goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_};goog.ui.Menu.prototype.setVisible=function(c,d,e){(d=goog.ui.Menu.superClass_.setVisible.call(this,c,d))&&(c&&this.isInDocument()&&this.allowAutoFocus_)&&this.getKeyEventTarget().focus();c&&e&&goog.isNumber(e.clientX)?this.openingCoords=new goog.math.Coordinate(e.clientX,e.clientY):this.openingCoords=null;return d};
goog.ui.Menu.prototype.handleEnterItem=function(c){this.allowAutoFocus_&&this.getKeyEventTarget().focus();return goog.ui.Menu.superClass_.handleEnterItem.call(this,c)};goog.ui.Menu.prototype.highlightNextPrefix=function(c){var d=RegExp("^"+goog.string.regExpEscape(c),"i");return this.highlightHelper(function(c,f){var h=0>c?0:c,k=!1;do{++c;c==f&&(c=0,k=!0);var l=this.getChildAt(c).getCaption();if(l&&l.match(d))return c}while(!k||c!=h);return this.getHighlightedIndex()},this.getHighlightedIndex())};
goog.ui.Menu.prototype.canHighlightItem=function(c){return(this.allowHighlightDisabled_||c.isEnabled())&&c.isVisible()&&c.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Menu.prototype.decorateInternal=function(c){this.decorateContent(c);goog.ui.Menu.superClass_.decorateInternal.call(this,c)};
goog.ui.Menu.prototype.handleKeyEventInternal=function(c){var d=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,c);d||this.forEachChild(function(e){!d&&(e.getMnemonic&&e.getMnemonic()==c.keyCode)&&(this.isEnabled()&&this.setHighlighted(e),d=e.handleKeyEvent(c))},this);return d};goog.ui.Menu.prototype.setHighlightedIndex=function(c){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,c);(c=this.getChildAt(c))&&goog.style.scrollIntoContainerView(c.getElement(),this.getElement())};
goog.ui.Menu.prototype.decorateContent=function(c){var d=this.getRenderer();c=this.getDomHelper().getElementsByTagNameAndClass("div",d.getCssClass()+"-content",c);for(var e=c.length,f=0;f<e;f++)d.decorateChildren(this,c[f])};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(c){var d=goog.style.isRightToLeft(c);return d&&goog.userAgent.GECKO?-c.scrollLeft:!d||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(c)?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft};
goog.style.bidi.getOffsetStart=function(c){var d=c.offsetLeft,e=c.offsetParent;e||"fixed"!=goog.style.getComputedPosition(c)||(e=goog.dom.getOwnerDocument(c).documentElement);if(!e)return d;if(goog.userAgent.GECKO)var f=goog.style.getBorderBox(e),d=d+f.left;else goog.userAgent.isDocumentModeOrHigher(8)&&(f=goog.style.getBorderBox(e),d-=f.left);return goog.style.isRightToLeft(e)?e.clientWidth-(d+c.offsetWidth):d};
goog.style.bidi.setScrollOffset=function(c,d){d=Math.max(d,0);goog.style.isRightToLeft(c)?goog.userAgent.GECKO?c.scrollLeft=-d:goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")?c.scrollLeft=d:c.scrollLeft=c.scrollWidth-d-c.clientWidth:c.scrollLeft=d};goog.style.bidi.setPosition=function(c,d,e,f){goog.isNull(e)||(c.style.top=e+"px");f?(c.style.right=d+"px",c.style.left=""):(c.style.left=d+"px",c.style.right="")};goog.positioning={};goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;
goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(c,d,e,f,h,k,l,m,n){goog.asserts.assert(e);var p=goog.positioning.getOffsetParentPageOffset(e),s=goog.positioning.getVisiblePart_(c);goog.style.translateRectForAnotherFrame(s,goog.dom.getDomHelper(c),goog.dom.getDomHelper(e));c=goog.positioning.getEffectiveCorner(c,d);s=new goog.math.Coordinate(c&goog.positioning.CornerBit.RIGHT?s.left+s.width:s.left,c&goog.positioning.CornerBit.BOTTOM?s.top+s.height:s.top);s=goog.math.Coordinate.difference(s,p);h&&(s.x+=
(c&goog.positioning.CornerBit.RIGHT?-1:1)*h.x,s.y+=(c&goog.positioning.CornerBit.BOTTOM?-1:1)*h.y);var q;if(l)if(n)q=n;else if(q=goog.style.getVisibleRectForElement(e))q.top-=p.y,q.right-=p.x,q.bottom-=p.y,q.left-=p.x;return goog.positioning.positionAtCoordinate(s,e,f,k,q,l,m)};
goog.positioning.getOffsetParentPageOffset=function(c){var d;if(c=c.offsetParent){var e=c.tagName==goog.dom.TagName.HTML||c.tagName==goog.dom.TagName.BODY;e&&"static"==goog.style.getComputedPosition(c)||(d=goog.style.getPageOffset(c),e||(d=goog.math.Coordinate.difference(d,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(c),c.scrollTop))))}return d||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(c){var d=goog.style.getBounds(c);(c=goog.style.getVisibleRectForElement(c))&&d.intersection(goog.math.Rect.createFromBox(c));return d};
goog.positioning.positionAtCoordinate=function(c,d,e,f,h,k,l){c=c.clone();var m=goog.positioning.OverflowStatus.NONE;e=goog.positioning.getEffectiveCorner(d,e);var n=goog.style.getSize(d);l=l?l.clone():n.clone();if(f||e!=goog.positioning.Corner.TOP_LEFT)e&goog.positioning.CornerBit.RIGHT?c.x-=l.width+(f?f.right:0):f&&(c.x+=f.left),e&goog.positioning.CornerBit.BOTTOM?c.y-=l.height+(f?f.bottom:0):f&&(c.y+=f.top);if(k&&(m=h?goog.positioning.adjustForViewport_(c,l,h,k):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,
m&goog.positioning.OverflowStatus.FAILED))return m;goog.style.setPosition(d,c);goog.math.Size.equals(n,l)||goog.style.setBorderBoxSize(d,l);return m};
goog.positioning.adjustForViewport_=function(c,d,e,f){var h=goog.positioning.OverflowStatus.NONE,k=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,l=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(f&k)==k&&(c.x<e.left||c.x>=e.right)&&(f&=~goog.positioning.Overflow.ADJUST_X);(f&l)==l&&(c.y<e.top||c.y>=e.bottom)&&(f&=~goog.positioning.Overflow.ADJUST_Y);c.x<e.left&&f&goog.positioning.Overflow.ADJUST_X&&(c.x=e.left,h|=goog.positioning.OverflowStatus.ADJUSTED_X);c.x<e.left&&(c.x+d.width>e.right&&
f&goog.positioning.Overflow.RESIZE_WIDTH)&&(d.width=Math.max(d.width-(c.x+d.width-e.right),0),h|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);c.x+d.width>e.right&&f&goog.positioning.Overflow.ADJUST_X&&(c.x=Math.max(e.right-d.width,e.left),h|=goog.positioning.OverflowStatus.ADJUSTED_X);f&goog.positioning.Overflow.FAIL_X&&(h|=(c.x<e.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(c.x+d.width>e.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));c.y<e.top&&f&goog.positioning.Overflow.ADJUST_Y&&
(c.y=e.top,h|=goog.positioning.OverflowStatus.ADJUSTED_Y);c.y<=e.top&&(c.y+d.height<e.bottom&&f&goog.positioning.Overflow.RESIZE_HEIGHT)&&(d.height=Math.max(d.height-(e.top-c.y),0),c.y=e.top,h|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);c.y>=e.top&&(c.y+d.height>e.bottom&&f&goog.positioning.Overflow.RESIZE_HEIGHT)&&(d.height=Math.max(d.height-(c.y+d.height-e.bottom),0),h|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);c.y+d.height>e.bottom&&f&goog.positioning.Overflow.ADJUST_Y&&(c.y=Math.max(e.bottom-
d.height,e.top),h|=goog.positioning.OverflowStatus.ADJUSTED_Y);f&goog.positioning.Overflow.FAIL_Y&&(h|=(c.y<e.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(c.y+d.height>e.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return h};goog.positioning.getEffectiveCorner=function(c,d){return(d&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(c)?d^goog.positioning.CornerBit.RIGHT:d)&~goog.positioning.CornerBit.FLIP_RTL};
goog.positioning.flipCornerHorizontal=function(c){return c^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(c){return c^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(c){return c^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.Timer=function(c,d){goog.events.EventTarget.call(this);this.interval_=c||1;this.timerObject_=d||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=0.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(c){this.interval_=c;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};
goog.Timer.prototype.tick_=function(){if(this.enabled){var c=goog.now()-this.last_;0<c&&c<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-c):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};
goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";
goog.Timer.callOnce=function(c,d,e){if(goog.isFunction(c))e&&(c=goog.bind(c,e));else if(c&&"function"==typeof c.handleEvent)c=goog.bind(c.handleEvent,c);else throw Error("Invalid listener argument");return d>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(c,d||0)};goog.Timer.clear=function(c){goog.Timer.defaultTimerObject.clearTimeout(c)};goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_CAMINO=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;
goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_CAMINO||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;
goog.userAgent.product.init_=function(){goog.userAgent.product.detectedFirefox_=!1;goog.userAgent.product.detectedCamino_=!1;goog.userAgent.product.detectedIphone_=!1;goog.userAgent.product.detectedIpad_=!1;goog.userAgent.product.detectedAndroid_=!1;goog.userAgent.product.detectedChrome_=!1;goog.userAgent.product.detectedSafari_=!1;var c=goog.userAgent.getUserAgentString();c&&(-1!=c.indexOf("Firefox")?goog.userAgent.product.detectedFirefox_=!0:-1!=c.indexOf("Camino")?goog.userAgent.product.detectedCamino_=
!0:-1!=c.indexOf("iPhone")||-1!=c.indexOf("iPod")?goog.userAgent.product.detectedIphone_=!0:-1!=c.indexOf("iPad")?goog.userAgent.product.detectedIpad_=!0:-1!=c.indexOf("Android")?goog.userAgent.product.detectedAndroid_=!0:-1!=c.indexOf("Chrome")?goog.userAgent.product.detectedChrome_=!0:-1!=c.indexOf("Safari")&&(goog.userAgent.product.detectedSafari_=!0))};goog.userAgent.product.PRODUCT_KNOWN_||goog.userAgent.product.init_();goog.userAgent.product.OPERA=goog.userAgent.OPERA;
goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.userAgent.product.detectedFirefox_;goog.userAgent.product.CAMINO=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CAMINO:goog.userAgent.product.detectedCamino_;goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.detectedIphone_;
goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.userAgent.product.detectedIpad_;goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.userAgent.product.detectedAndroid_;goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.userAgent.product.detectedChrome_;
goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.detectedSafari_;goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(c,d,e,f){};goog.positioning.AnchoredPosition=function(c,d,e){this.element=c;this.corner=d;this.overflow_=e};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(c,d,e,f){goog.positioning.positionAtAnchor(this.element,this.corner,c,d,void 0,e,this.overflow_)};goog.positioning.AnchoredViewportPosition=function(c,d,e,f){goog.positioning.AnchoredPosition.call(this,c,d);this.lastResortOverflow_=e?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=f||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_};
goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(c){this.overflowConstraint_=c};goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(c){this.lastResortOverflow_=c};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(c,d,e,f){var h=goog.positioning.positionAtAnchor(this.element,this.corner,c,d,null,e,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,f,this.overflowConstraint_);if(h&goog.positioning.OverflowStatus.FAILED){var k=this.adjustCorner(h,this.corner);d=this.adjustCorner(h,d);h=goog.positioning.positionAtAnchor(this.element,k,c,d,null,e,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,f,this.overflowConstraint_);
h&goog.positioning.OverflowStatus.FAILED&&(k=this.adjustCorner(h,k),d=this.adjustCorner(h,d),goog.positioning.positionAtAnchor(this.element,k,c,d,null,e,this.getLastResortOverflow(),f,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(c,d){c&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(d=goog.positioning.flipCornerHorizontal(d));c&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(d=goog.positioning.flipCornerVertical(d));return d};goog.positioning.MenuAnchoredPosition=function(c,d,e,f){goog.positioning.AnchoredViewportPosition.call(this,c,d,e||f);(e||f)&&this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(f?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))};goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition);goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3};goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.ButtonRenderer);goog.ui.ButtonRenderer.CSS_CLASS="goog-button";goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};
goog.ui.ButtonRenderer.prototype.updateAriaState=function(c,d,e){switch(d){case goog.ui.Component.State.SELECTED:case goog.ui.Component.State.CHECKED:goog.asserts.assert(c,"The button DOM element cannot be null.");goog.a11y.aria.setState(c,goog.a11y.aria.State.PRESSED,e);break;default:case goog.ui.Component.State.OPENED:case goog.ui.Component.State.DISABLED:goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,c,d,e)}};
goog.ui.ButtonRenderer.prototype.createDom=function(c){var d=goog.ui.ButtonRenderer.superClass_.createDom.call(this,c);this.setTooltip(d,c.getTooltip());var e=c.getValue();e&&this.setValue(d,e);c.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(d,goog.ui.Component.State.CHECKED,c.isChecked());return d};
goog.ui.ButtonRenderer.prototype.decorate=function(c,d){d=goog.ui.ButtonRenderer.superClass_.decorate.call(this,c,d);c.setValueInternal(this.getValue(d));c.setTooltipInternal(this.getTooltip(d));c.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(d,goog.ui.Component.State.CHECKED,c.isChecked());return d};goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.getTooltip=function(c){return c.title};
goog.ui.ButtonRenderer.prototype.setTooltip=function(c,d){c&&d&&(c.title=d)};goog.ui.ButtonRenderer.prototype.setCollapsed=function(c,d){var e=c.isRightToLeft(),f=this.getStructuralCssClass()+"-collapse-left",h=this.getStructuralCssClass()+"-collapse-right";c.enableClassName(e?h:f,!!(d&goog.ui.ButtonSide.START));c.enableClassName(e?f:h,!!(d&goog.ui.ButtonSide.END))};goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS};goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.NativeButtonRenderer);goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){};
goog.ui.NativeButtonRenderer.prototype.createDom=function(c){this.setUpNativeButton_(c);return c.getDomHelper().createDom("button",{"class":this.getClassNames(c).join(" "),disabled:!c.isEnabled(),title:c.getTooltip()||"",value:c.getValue()||""},c.getCaption()||"")};goog.ui.NativeButtonRenderer.prototype.canDecorate=function(c){return"BUTTON"==c.tagName||"INPUT"==c.tagName&&("button"==c.type||"submit"==c.type||"reset"==c.type)};
goog.ui.NativeButtonRenderer.prototype.decorate=function(c,d){this.setUpNativeButton_(c);d.disabled&&goog.dom.classes.add(d,this.getClassForState(goog.ui.Component.State.DISABLED));return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,c,d)};goog.ui.NativeButtonRenderer.prototype.initializeDom=function(c){c.getHandler().listen(c.getElement(),goog.events.EventType.CLICK,c.performActionInternal)};goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction;
goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.isFocusable=function(c){return c.isEnabled()};goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setState=function(c,d,e){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,c,d,e);(c=c.getElement())&&d==goog.ui.Component.State.DISABLED&&(c.disabled=e)};goog.ui.NativeButtonRenderer.prototype.getValue=function(c){return c.value};
goog.ui.NativeButtonRenderer.prototype.setValue=function(c,d){c&&(c.value=d)};goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(c){c.setHandleMouseEvents(!1);c.setAutoStates(goog.ui.Component.State.ALL,!1);c.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.Button=function(c,d,e){goog.ui.Control.call(this,c,d||goog.ui.NativeButtonRenderer.getInstance(),e)};goog.inherits(goog.ui.Button,goog.ui.Control);goog.ui.Button.Side=goog.ui.ButtonSide;goog.ui.Button.prototype.getValue=function(){return this.value_};goog.ui.Button.prototype.setValue=function(c){this.value_=c;this.getRenderer().setValue(this.getElement(),c)};goog.ui.Button.prototype.setValueInternal=function(c){this.value_=c};goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_};
goog.ui.Button.prototype.setTooltip=function(c){this.tooltip_=c;this.getRenderer().setTooltip(this.getElement(),c)};goog.ui.Button.prototype.setTooltipInternal=function(c){this.tooltip_=c};goog.ui.Button.prototype.setCollapsed=function(c){this.getRenderer().setCollapsed(this,c)};goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this);delete this.value_;delete this.tooltip_};
goog.ui.Button.prototype.enterDocument=function(){goog.ui.Button.superClass_.enterDocument.call(this);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var c=this.getKeyEventTarget();c&&this.getHandler().listen(c,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}};
goog.ui.Button.prototype.handleKeyEventInternal=function(c){return c.keyCode==goog.events.KeyCodes.ENTER&&c.type==goog.events.KeyHandler.EventType.KEY||c.keyCode==goog.events.KeyCodes.SPACE&&c.type==goog.events.EventType.KEYUP?this.performActionInternal(c):c.keyCode==goog.events.KeyCodes.SPACE};goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)});goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block";goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.CustomButtonRenderer);goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button";
goog.ui.CustomButtonRenderer.prototype.createDom=function(c){var d=this.getClassNames(c),d={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+d.join(" ")},d=c.getDomHelper().createDom("div",d,this.createButton(c.getContent(),c.getDomHelper()));this.setTooltip(d,c.getTooltip());this.setAriaStates(c,d);return d};goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.CustomButtonRenderer.prototype.getContentElement=function(c){return c&&c.firstChild.firstChild};
goog.ui.CustomButtonRenderer.prototype.createButton=function(c,d){return d.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-outer-box"),d.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-inner-box"),c))};goog.ui.CustomButtonRenderer.prototype.canDecorate=function(c){return"DIV"==c.tagName};
goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(c,d){var e=c.getDomHelper().getFirstElementChild(d),f=this.getCssClass()+"-outer-box";return e&&goog.dom.classes.has(e,f)&&(e=c.getDomHelper().getFirstElementChild(e),f=this.getCssClass()+"-inner-box",e&&goog.dom.classes.has(e,f))?!0:!1};
goog.ui.CustomButtonRenderer.prototype.decorate=function(c,d){goog.ui.CustomButtonRenderer.trimTextNodes_(d,!0);goog.ui.CustomButtonRenderer.trimTextNodes_(d,!1);this.hasBoxStructure(c,d)||d.appendChild(this.createButton(d.childNodes,c.getDomHelper()));goog.dom.classes.add(d,goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass());return goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,c,d)};goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS};
goog.ui.CustomButtonRenderer.trimTextNodes_=function(c,d){if(c)for(var e=d?c.firstChild:c.lastChild,f;e&&e.parentNode==c;){f=d?e.nextSibling:e.previousSibling;if(e.nodeType==goog.dom.NodeType.TEXT){var h=e.nodeValue;if(""==goog.string.trim(h))c.removeChild(e);else{e.nodeValue=d?goog.string.trimLeft(h):goog.string.trimRight(h);break}}else break;e=f}};goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.MenuButtonRenderer);goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button";goog.ui.MenuButtonRenderer.WRAPPER_PROP_="__goog_wrapper_div";
goog.userAgent.GECKO&&(goog.ui.MenuButtonRenderer.prototype.setContent=function(c,d){var e=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,c&&c.firstChild);e&&goog.dom.replaceNode(this.createCaption(d,goog.dom.getDomHelper(c)),e)});goog.ui.MenuButtonRenderer.prototype.getContentElement=function(c){c=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,c&&c.firstChild);goog.userAgent.GECKO&&(c&&c[goog.ui.MenuButtonRenderer.WRAPPER_PROP_])&&(c=c.firstChild);return c};
goog.ui.MenuButtonRenderer.prototype.updateAriaState=function(c,d,e){goog.asserts.assert(c,"The menu button DOM element cannot be null.");goog.asserts.assert(goog.string.isEmpty(goog.a11y.aria.getState(c,goog.a11y.aria.State.EXPANDED)),"Menu buttons do not support the ARIA expanded attribute. Please use ARIA disabled instead."+goog.a11y.aria.getState(c,goog.a11y.aria.State.EXPANDED).length);d!=goog.ui.Component.State.OPENED&&goog.ui.MenuButtonRenderer.superClass_.updateAriaState.call(this,c,d,e)};
goog.ui.MenuButtonRenderer.prototype.decorate=function(c,d){var e=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,d)[0];if(e){goog.style.setElementShown(e,!1);goog.dom.appendChild(goog.dom.getOwnerDocument(e).body,e);var f=new goog.ui.Menu;f.decorate(e);c.setMenu(f)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,c,d)};
goog.ui.MenuButtonRenderer.prototype.createButton=function(c,d){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(c,d),this.createDropdown(d)],d)};goog.ui.MenuButtonRenderer.prototype.createCaption=function(c,d){return goog.ui.MenuButtonRenderer.wrapCaption(c,this.getCssClass(),d)};goog.ui.MenuButtonRenderer.wrapCaption=function(c,d,e){return e.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(d+"-caption"),c)};
goog.ui.MenuButtonRenderer.prototype.createDropdown=function(c){return c.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS};goog.ui.MenuButton=function(c,d,e,f){goog.ui.Button.call(this,c,e||goog.ui.MenuButtonRenderer.getInstance(),f);this.setSupportedState(goog.ui.Component.State.OPENED,!0);this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START);d&&this.setMenu(d);this.menuMargin_=null;this.timer_=new goog.Timer(500);!goog.userAgent.product.IPHONE&&!goog.userAgent.product.IPAD||goog.userAgent.isVersionOrHigher("533.17.9")||this.setFocusablePopupMenu(!0)};
goog.inherits(goog.ui.MenuButton,goog.ui.Button);goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1;goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1;goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this);this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!this.menu_)};
goog.ui.MenuButton.prototype.exitDocument=function(){goog.ui.MenuButton.superClass_.exitDocument.call(this);if(this.menu_){this.setOpen(!1);this.menu_.exitDocument();this.attachMenuEventListeners_(this.menu_,!1);var c=this.menu_.getElement();c&&goog.dom.removeNode(c)}};goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this);this.menu_&&(this.menu_.dispose(),delete this.menu_);delete this.positionElement_;this.timer_.dispose()};
goog.ui.MenuButton.prototype.handleMouseDown=function(c){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,c);this.isActive()&&(this.setOpen(!this.isOpen(),c),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))};goog.ui.MenuButton.prototype.handleMouseUp=function(c){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,c);this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)};goog.ui.MenuButton.prototype.performActionInternal=function(c){this.setActive(!1);return!0};
goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(c){this.menu_&&(this.menu_.isVisible()&&!this.containsElement(c.target))&&this.setOpen(!1)};goog.ui.MenuButton.prototype.containsElement=function(c){return c&&goog.dom.contains(this.getElement(),c)||this.menu_&&this.menu_.containsElement(c)||!1};
goog.ui.MenuButton.prototype.handleKeyEventInternal=function(c){if(c.keyCode==goog.events.KeyCodes.SPACE){if(c.preventDefault(),c.type!=goog.events.EventType.KEYUP)return!0}else if(c.type!=goog.events.KeyHandler.EventType.KEY)return!1;if(this.menu_&&this.menu_.isVisible()){var d=this.menu_.handleKeyEvent(c);return c.keyCode==goog.events.KeyCodes.ESC?(this.setOpen(!1),!0):d}return c.keyCode==goog.events.KeyCodes.DOWN||c.keyCode==goog.events.KeyCodes.UP||c.keyCode==goog.events.KeyCodes.SPACE||c.keyCode==
goog.events.KeyCodes.ENTER?(this.setOpen(!0),!0):!1};goog.ui.MenuButton.prototype.handleMenuAction=function(c){this.setOpen(!1)};goog.ui.MenuButton.prototype.handleMenuBlur=function(c){this.isActive()||this.setOpen(!1)};goog.ui.MenuButton.prototype.handleBlur=function(c){this.isFocusablePopupMenu()||this.setOpen(!1);goog.ui.MenuButton.superClass_.handleBlur.call(this,c)};
goog.ui.MenuButton.prototype.getMenu=function(){this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper()));return this.menu_||null};
goog.ui.MenuButton.prototype.setMenu=function(c){var d=this.menu_;c!=d&&(d&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(d,!1),delete this.menu_),this.isInDocument()&&goog.a11y.aria.setState(this.getElementStrict(),goog.a11y.aria.State.HASPOPUP,!!c),c&&(this.menu_=c,c.setParent(this),c.setVisible(!1),c.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(c,!0)));return d};
goog.ui.MenuButton.prototype.setMenuPosition=function(c){c&&(this.menuPosition_=c,this.positionElement_=c.element)};goog.ui.MenuButton.prototype.setPositionElement=function(c){this.positionElement_=c;this.positionMenu()};goog.ui.MenuButton.prototype.setMenuMargin=function(c){this.menuMargin_=c};goog.ui.MenuButton.prototype.addItem=function(c){this.getMenu().addChild(c,!0)};goog.ui.MenuButton.prototype.addItemAt=function(c,d){this.getMenu().addChildAt(c,d,!0)};
goog.ui.MenuButton.prototype.removeItem=function(c){(c=this.getMenu().removeChild(c,!0))&&c.dispose()};goog.ui.MenuButton.prototype.removeItemAt=function(c){(c=this.getMenu().removeChildAt(c,!0))&&c.dispose()};goog.ui.MenuButton.prototype.getItemAt=function(c){return this.menu_?this.menu_.getChildAt(c):null};goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0};
goog.ui.MenuButton.prototype.setVisible=function(c,d){var e=goog.ui.MenuButton.superClass_.setVisible.call(this,c,d);e&&!this.isVisible()&&this.setOpen(!1);return e};goog.ui.MenuButton.prototype.setEnabled=function(c){goog.ui.MenuButton.superClass_.setEnabled.call(this,c);this.isEnabled()||this.setOpen(!1)};goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var c=this.menuPosition_.corner;return c==goog.positioning.Corner.BOTTOM_START||c==goog.positioning.Corner.TOP_START};
goog.ui.MenuButton.prototype.setAlignMenuToStart=function(c){this.menuPosition_.corner=c?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END};goog.ui.MenuButton.prototype.setScrollOnOverflow=function(c){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(c?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))};
goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)};goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_};goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(c){this.isFocusablePopupMenu_=c};goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(c){this.renderMenuAsSibling_=c};
goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)};goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)};
goog.ui.MenuButton.prototype.setOpen=function(c,d){goog.ui.MenuButton.superClass_.setOpen.call(this,c);if(this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==c){if(c)this.menu_.isInDocument()||(this.renderMenuAsSibling_?this.menu_.render(this.getElement().parentNode):this.menu_.render()),this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement()),this.buttonRect_=goog.style.getBounds(this.getElement()),this.positionMenu(),this.menu_.setHighlightedIndex(-1);else{this.setActive(!1);
this.menu_.setMouseButtonPressed(!1);var e=this.getElement();e&&goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,"");goog.isDefAndNotNull(this.originalSize_)&&(this.originalSize_=void 0,(e=this.menu_.getElement())&&goog.style.setSize(e,"",""))}this.menu_.setVisible(c,!1,d);this.isDisposed()||this.attachPopupListeners_(c)}};goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0};
goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var c=this.positionElement_||this.getElement(),d=this.menuPosition_;this.menuPosition_.element=c;c=this.menu_.getElement();this.menu_.isVisible()||(c.style.visibility="hidden",goog.style.setElementShown(c,!0));!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(c));var e=goog.positioning.flipCornerVertical(d.corner);d.reposition(c,e,this.menuMargin_,this.originalSize_);this.menu_.isVisible()||
(goog.style.setElementShown(c,!1),c.style.visibility="visible")}};goog.ui.MenuButton.prototype.onTick_=function(c){c=goog.style.getBounds(this.getElement());var d=goog.style.getVisibleRectForElement(this.getElement());goog.math.Rect.equals(this.buttonRect_,c)&&goog.math.Box.equals(this.viewportBox_,d)||(this.buttonRect_=c,this.viewportBox_=d,this.positionMenu())};
goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(c,d){var e=this.getHandler(),f=d?e.listen:e.unlisten;f.call(e,c,goog.ui.Component.EventType.ACTION,this.handleMenuAction);f.call(e,c,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem);f.call(e,c,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)};
goog.ui.MenuButton.prototype.handleHighlightItem=function(c){var d=this.getElement();goog.asserts.assert(d,"The menu button DOM element cannot be null.");null!=c.target.getElement()&&goog.a11y.aria.setState(d,goog.a11y.aria.State.ACTIVEDESCENDANT,c.target.getElement().id)};
goog.ui.MenuButton.prototype.handleUnHighlightItem=function(c){this.menu_.getHighlighted()||(c=this.getElement(),goog.asserts.assert(c,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(c,goog.a11y.aria.State.ACTIVEDESCENDANT,""))};
goog.ui.MenuButton.prototype.attachPopupListeners_=function(c){var d=this.getHandler(),e=c?d.listen:d.unlisten;e.call(d,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0);this.isFocusablePopupMenu()&&e.call(d,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur);e.call(d,this.timer_,goog.Timer.TICK,this.onTick_);c?this.timer_.start():this.timer_.stop()};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)});silex.view={};silex.view.Menu=function(c,d){this.element=c;silex.Helper.loadTemplateFile("templates/menu.html",c,function(){this.buildMenu(c);d&&d()},this)};
silex.view.Menu.prototype.buildMenu=function(c){this.menu=goog.ui.menuBar.create();var d="File Edit View Insert Tools Help".split(" "),e=[[{label:"New File",id:"file.new"},{label:"Open File...",id:"file.open"},{label:"Save File",id:"file.save"},{label:"Save As...",id:"file.saveas"},null,{label:"Close File",id:"file.close"}],[{label:"Delete selection",id:"edit.delete.selection"},null,{label:"Rename page",id:"edit.rename.page"},{label:"Delete page",id:"edit.delete.page"}],[{label:"View in new window",
id:"view.file"},null,{label:"Open text editor",id:"view.open.textEditor"},{label:"Open file browser",id:"view.open.fileExplorer"}],[{label:"Text box",id:"insert.text"},{label:"Image...",id:"insert.image"},{label:"Container",id:"insert.container"},null,{label:"HTML box",id:"insert.html"},null,{label:"New page",id:"insert.page"}],[{label:"Apollo mode",id:"tools.advanced.activate",checkable:!0},{label:"Debug mode",id:"tools.debug.activate",checkable:!0}],[{label:"Forums",id:"help.forums"},{label:"About Silex",
id:"help.about"},{label:"About Silex Labs",id:"help.aboutSilexLabs"},null,{label:"Silex Labs news letter",id:"help.newsLetter"},{label:"Google+",id:"help.googlPlus"},{label:"Twitter",id:"help.twitter"},{label:"Facebook",id:"help.facebook"},null,{label:"Fork me!",id:"help.forkMe"}]];for(i in d){var f=new goog.ui.Menu;goog.array.forEach(e[i],function(c){var d;if(c){var e=c.id;d=new goog.ui.MenuItem(c.label);d.setId(e);c.checkable&&d.setCheckable(!0)}else d=new goog.ui.MenuSeparator;d.setDispatchTransitionEvents(goog.ui.Component.State.ALL,
!0);f.addItem(d)});var h=new goog.ui.MenuButton(d[i],f);h.setDispatchTransitionEvents(goog.ui.Component.State.ALL,!0);this.menu.addChild(h,!0)}this.menu.render(c);goog.events.listen(this.menu,goog.ui.Component.EventType.ACTION,function(c){this.onMenuEvent(c)},!1,this);goog.events.listen(goog.dom.getElementByClass("website-name"),goog.events.EventType.CLICK,function(c){this.onMenuEvent(c)},!1,this)};
silex.view.Menu.prototype.onMenuEvent=function(c){if(this.onStatus&&c&&c.target)if(goog.dom.classes.has(c.target,"website-name")){if(this.onStatus)this.onStatus({type:"title.changed"})}else this.onStatus({type:c.target.getId()})};silex.view.Menu.prototype.setWebsiteName=function(c){goog.dom.getElementByClass("website-name").innerHTML=c};silex.view.Menu.prototype.getWebsiteName=function(){return goog.dom.getElementByClass("website-name").innerHTML};silex.view.propertiesTool={};silex.view.propertiesTool.PropertyPane=function(c,d,e,f,h){this.element=c;this.propertyChanged=d;this.editText=f;this.editHTML=e;this.selectImage=h;this.buildUi()};
silex.view.propertiesTool.PropertyPane.prototype.buildUi=function(){var c=goog.dom.getElementByClass("lock-btn"),d=goog.dom.getElementByClass("unlock-btn");c&&goog.events.listen(c,goog.events.EventType.CLICK,this.lock,!1,this);d&&goog.events.listen(d,goog.events.EventType.CLICK,this.unlock,!1,this);this.leftInput=goog.dom.getElementByClass("left-input");goog.events.listen(this.leftInput,"change",this.onPositionChanged,!1,this);this.widthInput=goog.dom.getElementByClass("width-input");goog.events.listen(this.widthInput,
"change",this.onPositionChanged,!1,this);this.bottomInput=goog.dom.getElementByClass("bottom-input");goog.events.listen(this.bottomInput,"change",this.onPositionChanged,!1,this);this.topInput=goog.dom.getElementByClass("top-input");goog.events.listen(this.topInput,"change",this.onPositionChanged,!1,this);this.heightInput=goog.dom.getElementByClass("height-input");goog.events.listen(this.heightInput,"change",this.onPositionChanged,!1,this);this.rightInput=goog.dom.getElementByClass("right-input");
goog.events.listen(this.rightInput,"change",this.onPositionChanged,!1,this);this.zIndexInput=goog.dom.getElementByClass("z-index-input");goog.events.listen(this.zIndexInput,"change",this.onPositionChanged,!1,this)};silex.view.propertiesTool.PropertyPane.prototype.hasLockedParent=function(){for(var c=this.component.element.parentNode;c&&!goog.dom.classes.has(c,"locked-style");)c=c.parentNode;return c&&goog.dom.classes.has(c,"locked-style")?!0:!1};
silex.view.propertiesTool.PropertyPane.prototype.lock=function(c){this.hasLockedParent()?alert("unlock the parent in order to lock / unlock this component."):this.component.setLocked(!0)};silex.view.propertiesTool.PropertyPane.prototype.unlock=function(c){this.hasLockedParent()?alert("unlock the parent in order to lock / unlock this component."):this.component.setLocked(!1)};
silex.view.propertiesTool.PropertyPane.prototype.onPositionChanged=function(c){this.component&&(!this.isRedraw&&goog.dom.classes.has(this.component.element,"editable-style"))&&(c={},this.leftInput.value&&""!=this.leftInput.value&&(c.left=this.leftInput.value+"px"),this.widthInput.value&&""!=this.widthInput.value&&(c.width=this.widthInput.value+"px"),this.bottomInput.value&&""!=this.bottomInput.value&&(c.bottom=this.bottomInput.value+"px"),this.topInput.value&&""!=this.topInput.value&&(c.top=this.topInput.value+
"px"),this.heightInput.value&&""!=this.heightInput.value&&(c.height=this.heightInput.value+"px"),this.rightInput.value&&""!=this.rightInput.value&&(c.right=this.rightInput.value+"px"),this.zIndexInput.value&&""!=this.zIndexInput.value&&(c.zIndex=this.zIndexInput.value),this.component.setBoundingBox(c));this.redraw()};silex.view.propertiesTool.PropertyPane.prototype.setComponent=function(c){this.component=c;this.redraw()};silex.view.propertiesTool.PropertyPane.prototype.getBaseUrl=function(){return this.baseUrl};
silex.view.propertiesTool.PropertyPane.prototype.setBaseUrl=function(c){this.baseUrl=c;this.redraw()};silex.view.propertiesTool.PropertyPane.prototype.setImage=function(c){this.baseUrl?this.component.setImageSrc(silex.Helper.getAbsolutePath(c,this.baseUrl)):this.component.setImageSrc(c);this.redraw()};
silex.view.propertiesTool.PropertyPane.prototype.redraw=function(){if(this.component&&!this.isRedraw){this.isRedraw=!0;var c=null;this.component.type==silex.model.Component.SUBTYPE_IMAGE&&(c=this.baseUrl?silex.Helper.getRelativePath(this.component.getImageSrc(),this.baseUrl):this.component.getImageSrc());var d=goog.dom.getElementByClass("edition-container",this.element);if(this.component){var e=goog.dom.getElementByClass("edition-template",this.element).innerHTML;silex.Helper.resolveTemplate(d,e,
{htmlEditor:this.component.type==silex.model.Component.SUBTYPE_HTML,textEditor:this.component.type==silex.model.Component.SUBTYPE_TEXT,imageUrl:c});if(c=goog.dom.getElementByClass("html-editor-button",d))e=new goog.ui.CustomButton,e.decorate(c),goog.events.listen(c,goog.events.EventType.CLICK,this.editHTML,!1);if(c=goog.dom.getElementByClass("text-editor-button",d))e=new goog.ui.CustomButton,e.decorate(c),goog.events.listen(c,goog.events.EventType.CLICK,this.editText,!1);if(this.component.type==silex.model.Component.SUBTYPE_IMAGE){if(c=
goog.dom.getElementByClass("image-url-button",d))e=new goog.ui.CustomButton,e.decorate(c),goog.events.listen(c,goog.events.EventType.CLICK,this.selectImage,!1);var f=goog.dom.getElementByClass("image-url-input",d);f&&goog.events.listen(f,"change",function(c){this.component&&!this.isRedraw&&this.component.type==silex.model.Component.SUBTYPE_IMAGE&&this.setImage(f.value)},!1,this)}goog.dom.classes.has(this.component.element,"editable-style")?(d=this.component.getBoundingBox(),this.leftInput.value=null!=
d.left?d.left.substr(0,d.left.indexOf("px")):"",this.widthInput.value=null!=d.width?d.width.substr(0,d.width.indexOf("px")):"",this.bottomInput.value=null!=d.bottom?d.bottom.substr(0,d.bottom.indexOf("px")):"",this.topInput.value=null!=d.top?d.top.substr(0,d.top.indexOf("px")):"",this.heightInput.value=null!=d.height?d.height.substr(0,d.height.indexOf("px")):"",this.rightInput.value=null!=d.right?d.right.substr(0,d.right.indexOf("px")):"",this.zIndexInput.value=null!=d.zIndex?d.zIndex:""):(this.leftInput.value=
"",this.widthInput.value="",this.bottomInput.value="",this.topInput.value="",this.heightInput.value="",this.rightInput.value="",this.zIndexInput.value="")}else d&&(d.innerHTML="");this.isRedraw=!1}};silex.view.Stage=function(c,d){this.element=c;this.headElement=goog.dom.createElement("div");silex.Helper.loadTemplateFile("templates/stage.html",c,function(){this.bodyElement=goog.dom.getElementByClass("silex-stage-body",this.element);d&&d();$(this.bodyElement).pageable({useDeeplink:!1});$(this.bodyElement).editable({isContainer:!0,isResizable:!1,isDroppable:!0,isDraggable:!1})},this);goog.events.listen(this.element,"mousedown",function(c){if(this.onStatus)this.onStatus({type:"select",element:c.target});
this.isDragging=!0},!1,this);goog.events.listen(document.body,"mouseup",function(c){if(this.isDragging){if(this.onStatus)this.onStatus({type:"change"});this.isDragging=!1}},!1,this);goog.events.listen(this.element,"dragstop",function(c){if(this.onStatus)this.onStatus({type:"change"});this.isDragging=!1},!1,this);goog.events.listen(this.element,"resize",function(c){if(this.onStatus)this.onStatus({type:"change"});this.isDragging=!1},!1,this);goog.events.listen(this.element,goog.events.EventType.DBLCLICK,
function(c){if(this.onStatus)this.onStatus({type:"edit"})},!1,this)};silex.view.Stage.prototype.getPagesNamesFromDom=function(){var c=[];$('meta[name="page"]',this.headElement).each(function(){c.push(this.getAttribute("content"))});return c};
silex.view.Stage.prototype.removePage=function(c){$('meta[name="page"]',this.headElement).each(function(){this.getAttribute("content")==c.name&&$(this).remove()});$('*[data-silex-href="#'+c.name+'"]').each(function(){this.removeAttribute("data-silex-href")});$("."+c.name).each(function(){$(this).removeClass(c.name);0>=silex.model.Page.getPagesForElement(this).length&&$(this).removeClass(silex.model.Page.PAGE_CLASS)})};
silex.view.Stage.prototype.addPage=function(c){var d=goog.dom.createElement("meta");d.name="page";d.content=c.name;goog.dom.appendChild(this.headElement,d)};silex.view.Stage.prototype.renamePage=function(c,d){$('meta[name="page"]',this.headElement).each(function(){this.getAttribute("content")==c.name&&this.setAttribute("content",d)});$('*[data-silex-href="#'+c.name+'"]').each(function(){this.setAttribute("data-silex-href","#"+d)});$("."+c.name).each(function(){$(this).removeClass(c.name);$(this).addClass(d)})};
silex.view.Stage.prototype.openPage=function(c){$(this.bodyElement).pageable({currentPage:c.name})};silex.view.Stage.prototype.setBody=function(c){""!=c&&console.warn("warning: you are supposed to use stageComponent.setHtml");this.bodyElement.innerHTML=c};silex.view.Stage.prototype.getBody=function(){return this.bodyElement.innerHTML};silex.view.Stage.prototype.setHead=function(c){this.headElement.innerHTML=c};silex.view.Stage.prototype.getHead=function(){return this.headElement.innerHTML};
silex.view.Stage.prototype.setBodyStyle=function(c){this.bodyElement.setAttribute("data-style-normal",c);this.bodyElement.setAttribute("style",c)};silex.view.Stage.prototype.getBodyStyle=function(){return this.bodyElement.getAttribute("data-style-normal")};silex.Controller=function(c,d,e,f,h,k,l,m,n,p){this.logger=new silex.Logger("silex.Controller",!0);this.workspace=c;this.menu=d;this.stage=e;this.pageTool=f;this.propertiesTool=h;this.textEditor=l;this.htmlEditor=k;this.fileExplorer=m;this.file=n;this.selection=p;this.selection.setComponent(this.file.getStageComponent());this.menu.onStatus=goog.bind(this.menuCallback,this);this.stage.onStatus=goog.bind(this.stageCallback,this);this.pageTool.onStatus=goog.bind(this.pageToolCallback,this);this.propertiesTool.onStatus=
goog.bind(this.propertiesToolCallback,this);this.htmlEditor.onStatus=goog.bind(this.htmlEditorCallback,this);this.textEditor.onStatus=goog.bind(this.textEditorCallback,this)};
silex.Controller.prototype.menuCallback=function(c){switch(c.type){case "title.changed":(c=window.prompt("What is the name of your website?",this.menu.getWebsiteName()))&&this.file.setTitle(c);break;case "file.new":this.file.newFile();break;case "file.saveas":this.file.saveAs();break;case "file.save":null==this.file.getBlob()?this.file.saveAs():this.file.save();break;case "file.open":this.file.open(goog.bind(function(){this.selection.setComponent(this.file.getStageComponent())},this));break;case "file.close":this.file.close(goog.bind(function(){this.selection.setComponent(null)},
this));break;case "view.file":this.file.view();break;case "tools.advanced.activate":goog.dom.classes.has(document.body,"advanced-mode-on")?(goog.dom.classes.remove(document.body,"advanced-mode-on"),goog.dom.classes.add(document.body,"advanced-mode-off")):(goog.dom.classes.add(document.body,"advanced-mode-on"),goog.dom.classes.remove(document.body,"advanced-mode-off"));break;case "tools.debug.activate":this.logger.getLevel()!=silex.Logger.ALL?this.logger.setLevel(silex.Logger.ALL):this.logger.setLevel(silex.Logger.OFF);
break;case "view.open.fileExplorer":this.fileExplorer.openDialog();this.workspace.invalidate();break;case "view.open.textEditor":this.editComponent();break;case "insert.page":this.createPage();break;case "insert.text":c=this.file.getStageComponent().addText();this.selection.getPage().addComponent(c);this.selection.setComponent(c);break;case "insert.html":c=this.file.getStageComponent().addHtml();this.selection.getPage().addComponent(c);this.selection.setComponent(c);break;case "insert.image":this.fileExplorer.openDialog(goog.bind(function(c){c=
this.file.getStageComponent().addImage(c.url);this.selection.getPage().addComponent(c);this.selection.setComponent(c)},this),["image/*","text/plain"]);this.workspace.invalidate();break;case "insert.container":c=this.file.getStageComponent().addContainer();this.selection.getPage().addComponent(c);this.selection.setComponent(c);break;case "edit.delete.selection":this.file.getStageComponent().remove(this.selection.getComponent());this.selection.setComponent(this.file.getStageComponent());break;case "edit.delete.page":this.removePage(this.selection.getPage());
break;case "edit.rename.page":this.renamePage(this.selection.getPage());break;case "help.about":window.open("http://www.silexlabs.org/silex/");break;case "help.aboutSilexLabs":window.open("http://www.silexlabs.org/silexlabs/");break;case "help.forums":window.open("http://www.silexlabs.org/groups/silex/hierarchy");break;case "help.newsLetter":window.open("http://feedburner.google.com/fb/a/mailverify?uri=SilexLabsBlogEn");break;case "help.googlPlus":window.open("https://plus.google.com/communities/107373636457908189681");
break;case "help.twitter":window.open("http://twitter.com/silexlabs");break;case "help.facebook":window.open("http://www.facebook.com/silexlabs");break;case "help.forkMe":window.open("https://bitbucket.org/lexoyo/silex")}};
silex.Controller.prototype.stageCallback=function(c){this.logger.info("stageCallback ",c);switch(c.type){case "select":var d=this.selection.getComponent();d&&d.setContext(silex.model.Component.CONTEXT_NORMAL);c.element?(this.selection.setComponent(new silex.model.Component(c.element,this.selection.getContext())),this.selection.getComponent().setContext(this.selection.getContext())):this.selection.setComponent(this.file.getStageComponent());break;case "change":this.selection.getComponent().setBoundingBox(this.selection.getComponent().getBoundingBox());
this.propertiesTool.redraw();break;case "edit":this.editComponent()}};silex.Controller.prototype.pageToolCallback=function(c){switch(c.type){case "changed":this.selection.setPage(c.page);c.page&&c.page.open();break;case "delete":this.removePage(c.page);break;case "rename":this.renamePage(c.page)}};silex.Controller.prototype.renamePage=function(c){var d=this.getUserInputPageName(c.name);d&&c.rename(d);this.selection.getPage().open()};
silex.Controller.prototype.removePage=function(c){window.confirm('I am about to delete the page "'+c.name+'", are you sure?')&&c.detach()};silex.Controller.prototype.getUserInputPageName=function(c){var d=window.prompt("Enter a name for your page!",c);if(d&&0<d.length){d=d.replace(/\ /g,"-").replace(/\./g,"-").replace(/'/g,"-").replace(/"/g,"-").toLowerCase();c=silex.model.Page.getPages();var e=null;goog.array.forEach(c,function(c){c.name==d&&(e=c)},this);if(e)e.open();else return d}return null};
silex.Controller.prototype.createPage=function(){var c=this.getUserInputPageName("My new page name");c&&(c=new silex.model.Page(c,this.workspace,this.menu,this.stage,this.pageTool,this.propertiesTool,this.textEditor,this.fileExplorer),c.attach(),this.selection.setPage(c),c.open())};
silex.Controller.prototype.propertiesToolCallback=function(c){switch(c.type){case "editHTML":this.editComponent();break;case "editText":this.editComponent();break;case "selectBgImage":this.fileExplorer.openDialog(goog.bind(function(c){this.propertiesTool.setBgImage(c.url)},this),["image/*","text/plain"]);this.workspace.invalidate();break;case "selectImage":this.editComponent();break;case "contextChanged":this.selection.setContext(c.context);this.selection.getComponent().setContext(c.context);break;
case "styleChanged":this.selection.getComponent().setStyle(c.style,c.context)}};silex.Controller.prototype.htmlEditorCallback=function(c){switch(c.type){case "changed":this.selection.getComponent().setHtml(c.content)}};silex.Controller.prototype.textEditorCallback=function(c){switch(c.type){case "changed":this.selection.getComponent().setHtml(c.content)}};
silex.Controller.prototype.editComponent=function(){var c=this.selection.getComponent();switch(c.type){case silex.model.Component.SUBTYPE_TEXT:this.textEditor.openEditor(c.getHtml());break;case silex.model.Component.SUBTYPE_HTML:this.htmlEditor.openEditor(c.getHtml());break;case silex.model.Component.SUBTYPE_IMAGE:this.fileExplorer.openDialog(goog.bind(function(c){this.propertiesTool.setImage(c.url)},this),["image/*","text/plain"]),this.workspace.invalidate()}};goog.async={};goog.async.Delay=function(c,d,e){goog.Disposable.call(this);this.listener_=c;this.interval_=d||0;this.handler_=e;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(c){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(c)?c:this.interval_)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};
goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};silex.view.FileExplorer=function(c,d){var e=this;this.element=c;goog.style.setStyle(this.element,"display","none");d&&(new goog.async.Delay(function(){d();e.init()},10)).start();goog.events.listen(goog.dom.getElementByClass("close-btn",this.element),goog.events.EventType.CLICK,function(){this.closeEditor()},!1,this)};silex.view.FileExplorer.CONTAINER_TYPE="modal";silex.view.FileExplorer.SERVICES=["DROPBOX","GOOGLE_DRIVE","EVERNOTE","FTP"];
silex.view.FileExplorer.prototype.init=function(){this.filePicker=silex.service.CloudStorage.getInstance().filePicker};silex.view.FileExplorer.prototype.openDialog=function(c,d){d||(d=["image/*","text/plain"]);this.filePicker.pick(goog.bind(function(d){this.closeEditor();d.url=d.url.replace("https://","http://");(new goog.async.Delay(function(){c&&c(d)},10,this)).start()},this),function(c){console.error(c)});this.openEditor()};
silex.view.FileExplorer.prototype.saveAsDialog=function(c,d){d||(d={mimetype:"text/html"});console.log("saveAsDialog ",d);this.filePicker.exportFile("http://google.com/",d,goog.bind(function(d){this.closeEditor();d.url=d.url.replace("https://","http://");(new goog.async.Delay(function(){c&&c(d)},10,this)).start()},this),function(c){console.error(c)});this.openEditor()};
silex.view.FileExplorer.prototype.openEditor=function(){var c=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(c,"display","inherit");goog.style.setStyle(this.element,"display",null);goog.events.listen(c,goog.events.EventType.CLICK,this.closeEditor,!0,this)};
silex.view.FileExplorer.prototype.closeEditor=function(){var c=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(c,"display","none");goog.style.setStyle(this.element,"display","none");goog.events.unlisten(c,goog.events.EventType.CLICK,this.closeEditor,!0,this)};silex.model.Component=function(c,d){this.logger=new silex.Logger("silex.model.Component",!0);this.isEditable=!1;this.element=this.getFirstEditableParent(c);this.type=silex.model.Component.getType(this.element);null==d&&(d=silex.model.Component.CONTEXT_NORMAL);this.setContext(d)};silex.model.Component.CONTEXT_NORMAL="normal";silex.model.Component.CONTEXT_HOVER="hover";silex.model.Component.CONTEXT_PRESSED="pressed";silex.model.Component.TYPE_CONTAINER="container";
silex.model.Component.TYPE_ELEMENT="element";silex.model.Component.SUBTYPE_IMAGE="image";silex.model.Component.SUBTYPE_TEXT="text";silex.model.Component.SUBTYPE_HTML="html";silex.model.Component.getType=function(c){var d=c.getAttribute("data-silex-type");c=c.getAttribute("data-silex-sub-type");switch(d){case silex.model.Component.TYPE_CONTAINER:return d;case silex.model.Component.TYPE_ELEMENT:return c}throw"Could not determine the type of this element.";};
silex.model.Component.prototype.getBackgroundElement=function(){var c=goog.dom.getElementsByClass("background",this.element);return 0<c.length?c[0]:this.element};silex.model.Component.prototype.getContext=function(){return this.context};silex.model.Component.prototype.setContext=function(c){this.context=c;this.setStyle(this.getStyle(c),c)};
silex.model.Component.prototype.getStyle=function(c){null==c&&(c=this.context);c=this.element.getAttribute("data-style-"+c);null==c&&(c="");c=silex.Helper.stringToStyle(c);c.top=void 0;c.left=void 0;c.width=void 0;c.height=void 0;c.bottom=void 0;c.right=void 0;c.zIndex=void 0;c.position=void 0;return c};
silex.model.Component.prototype.setStyle=function(c,d){null==c&&(c={});null==d&&(d=this.context);var e="";goog.object.forEach(c,function(c,d,f){c&&("none"==c?c=null:e+=goog.string.toSelectorCase(d)+": "+c+"; ",goog.style.setStyle(this.element,d,c))},this);if(d==silex.model.Component.CONTEXT_NORMAL)var f=this.getBoundingBox(),e=e+("top: "+f.top+"; "),e=e+("left: "+f.left+"; "),e=e+("width: "+f.width+"; "),e=e+("height: "+f.height+"; "),e=e+("bottom: "+f.bottom+"; "),e=e+("right: "+f.right+"; "),e=
e+("z-index: "+f.zIndex+"; "),e=e+"position: absolute; ";this.element.setAttribute("data-style-"+d,e)};silex.model.Component.prototype.getBoundingBox=function(){return{top:goog.style.getStyle(this.element,"top"),left:goog.style.getStyle(this.element,"left"),width:goog.style.getStyle(this.element,"width"),height:goog.style.getStyle(this.element,"height"),bottom:goog.style.getStyle(this.element,"bottom"),right:goog.style.getStyle(this.element,"right"),zIndex:goog.style.getStyle(this.element,"zIndex")}};
silex.model.Component.prototype.setBoundingBox=function(c){goog.style.setStyle(this.element,"position","absolute");c.top?goog.style.setStyle(this.element,"top",c.top):goog.style.setStyle(this.element,"top",null);c.left?goog.style.setStyle(this.element,"left",c.left):goog.style.setStyle(this.element,"left",null);c.width?goog.style.setStyle(this.element,"width",c.width):goog.style.setStyle(this.element,"width",null);c.height?goog.style.setStyle(this.element,"height",c.height):goog.style.setStyle(this.element,
"height",null);c.bottom?goog.style.setStyle(this.element,"bottom",c.bottom):goog.style.setStyle(this.element,"bottom",null);c.right?goog.style.setStyle(this.element,"right",c.right):goog.style.setStyle(this.element,"right",null);c.zIndex?goog.style.setStyle(this.element,"zIndex",c.zIndex):goog.style.setStyle(this.element,"zIndex",null);var d=this.element.getAttribute("data-style-"+silex.model.Component.CONTEXT_NORMAL);null==d&&(d="");d=silex.Helper.stringToStyle(d);d.top=c.top;d.left=c.left;d.width=
c.width;d.height=c.height;d.bottom=c.bottom;d.right=c.right;d.zIndex=c.zIndex;d=silex.Helper.styleToString(d);this.element.setAttribute("data-style-"+silex.model.Component.CONTEXT_NORMAL,d)};
silex.model.Component.prototype.getImageSrc=function(){if(this.type==silex.model.Component.SUBTYPE_IMAGE){var c=goog.dom.getElementsByTagNameAndClass("img",null,this.element)[0];if(null!=c)return c.getAttribute("src");this.logger.error("The image element inside the component could not be found. Canot get the source.")}else this.logger.error("The component is not an image, canot get the source.");return""};
silex.model.Component.prototype.setImageSrc=function(c){if(this.type==silex.model.Component.SUBTYPE_IMAGE){var d=goog.dom.getElementsByTagNameAndClass("img",null,this.element)[0];if(null!=d)return d.setAttribute("src",c);this.logger.error("The image element inside the component could not be found. Canot set the source.")}else this.logger.error("The component is not an image, canot set the source.")};
silex.model.Component.prototype.getHtml=function(c){this.applyStateToAllComponents("normal");this.setEditable(!1);var d=this.element.cloneNode(!0);this.setEditable(!0);c&&this.absolute2relative(c,d);return d.innerHTML};silex.model.Component.prototype.setHtml=function(c,d){this.setEditable(!1);this.element.innerHTML=c;d?this.relative2absolute(d):this.logger.warn("setHtml without base url, the URLs could not be converted to absolute");this.setEditable(!0)};
silex.model.Component.prototype.getFirstEditableParent=function(c){for(var d=c;d&&d.getAttribute&&!this.getEditable(d);)d=d.parentNode;if(d&&d.getAttribute&&this.getEditable(d))return d;this.logger.warn("The component has no editable parent.");return c};silex.model.Component.prototype.getLocked=function(c){null==c&&(c=this.element);return $(c).hasClass("locked-style")};
silex.model.Component.prototype.setLocked=function(c,d){null==d&&(d=this.element);c?$(d).hasClass("locked-style")||$(d).addClass("locked-style"):$(d).hasClass("locked-style")&&$(d).removeClass("locked-style");this.setEditable(!c,d)};silex.model.Component.prototype.getEditable=function(c){null==c&&(c=this.element);return $(c).hasClass("editable-style")};
silex.model.Component.prototype.setEditable=function(c,d){null==d&&(d=this.element);if(c){if($('.editable-style[data-silex-type="container"]',d).each(function(){$(this).hasClass("locked-style")||$(this).editable({isContainer:!0})}),$('.editable-style[data-silex-type="element"]',d).editable(),this.getEditable(d)){if($(this).hasClass("locked-style"))return;d.getAttribute("data-silex-type")==silex.model.Component.TYPE_CONTAINER?$(d).editable({isContainer:!0}):$(d).editable()}}else $('[data-silex-type="container"]',
d).editable("destroy"),$('[data-silex-type="element"]',d).editable("destroy"),this.getEditable(d)&&$(d).editable("destroy"),$(d).find(".ui-resizable").removeClass("ui-resizable"),$(d).find(".ui-draggable").removeClass("ui-draggable"),$(d).find(".ui-droppable").removeClass("ui-droppable"),$(d).find("[aria-disabled]").removeAttr("aria-disabled"),$(d).find(".ui-resizable-handle").remove();this.isEditable=c};
silex.model.Component.prototype.absolute2relative=function(c,d){if(null==c)throw"The base URL is needed in order to convert paths to relative";null==d&&(d=this.element);$(d).find("[src],[href]").each(function(){var d="src",f=this.getAttribute(d);null==f&&(d="href",f=this.getAttribute(d));this.setAttribute(d,silex.Helper.getRelativePath(f,c))});$(d).find("[data-silex-type]").each(function(){console.log($(this).css("background-image"),this);if($(this).css("background-image")){console.log("has a bg image");
var d=$(this).css("background-image");$(this).css("background-image",silex.Helper.getRelativePath(d,c))}})};silex.model.Component.prototype.relative2absolute=function(c,d){null==d&&(d=this.element);$(this.element).find("[src],[href]").each(function(){var d="src",f=this.getAttribute(d);null==f&&(d="href",f=this.getAttribute(d));this.setAttribute(d,silex.Helper.getAbsolutePath(f,c))})};
silex.model.Component.prototype.applyStateToAllComponents=function(c){$("[data-style-normal]").each(function(){var d=this.getAttribute("data-style-"+c);null!=d?this.setAttribute("style",d):this.setAttribute("style",this.getAttribute("data-style-normal"))})};
silex.model.Component.prototype.addContainer=function(){if(this.type!=silex.model.Component.TYPE_CONTAINER)throw"Canot create a child component for this component because it is not of type "+silex.model.Component.TYPE_CONTAINER;var c=goog.dom.createElement("div");c.className="editable-style";c.setAttribute("data-silex-type",silex.model.Component.TYPE_CONTAINER);var d=this.getBackgroundElement();goog.dom.appendChild(d,c);this.setEditable(!0,c);c=new silex.model.Component(c);c.setBoundingBox({left:"100px",
top:"100px",height:"100px",width:"100px"});c.setStyle({backgroundColor:"rgba(255, 255, 255, 1)"},silex.model.Component.CONTEXT_NORMAL);return c};
silex.model.Component.prototype.addText=function(){if(this.type!=silex.model.Component.TYPE_CONTAINER)throw"Canot create a child component for this component because it is not of type "+silex.model.Component.TYPE_CONTAINER;var c=goog.dom.createElement("div");c.className="editable-style";c.setAttribute("data-silex-type",silex.model.Component.TYPE_ELEMENT);c.setAttribute("data-silex-sub-type",silex.model.Component.SUBTYPE_TEXT);c.innerHTML="New text box";var d=this.getBackgroundElement();goog.dom.appendChild(d,
c);this.setEditable(!0,c);c=new silex.model.Component(c);c.setBoundingBox({left:"100px",top:"100px",height:"100px",width:"100px"});c.setStyle({backgroundColor:"rgba(255, 255, 255, 1)"},silex.model.Component.CONTEXT_NORMAL);return c};
silex.model.Component.prototype.addHtml=function(){if(this.type!=silex.model.Component.TYPE_CONTAINER)throw"Canot create a child component for this component because it is not of type "+silex.model.Component.TYPE_CONTAINER;var c=goog.dom.createElement("div");c.className="editable-style";c.setAttribute("data-silex-type",silex.model.Component.TYPE_ELEMENT);c.setAttribute("data-silex-sub-type",silex.model.Component.SUBTYPE_HTML);c.innerHTML="<p>New HTML box</p>";var d=this.getBackgroundElement();goog.dom.appendChild(d,
c);this.setEditable(!0,c);c=new silex.model.Component(c);c.setBoundingBox({left:"100px",top:"100px",height:"100px",width:"100px"});c.setStyle({backgroundColor:"rgba(255, 255, 255, 1)"},silex.model.Component.CONTEXT_NORMAL);return c};
silex.model.Component.prototype.addImage=function(c){if(this.type!=silex.model.Component.TYPE_CONTAINER)throw"Canot create a child component for this component because it is not of type "+silex.model.Component.TYPE_CONTAINER;null==c&&this.logger.error("No URL provided for the image component");var d=goog.dom.createElement("div");d.className="editable-style";d.setAttribute("data-silex-type",silex.model.Component.TYPE_ELEMENT);d.setAttribute("data-silex-sub-type",silex.model.Component.SUBTYPE_IMAGE);
var e=goog.dom.createElement("img");goog.style.setStyle(e,"width","100%");goog.style.setStyle(e,"height","100%");var f=this.getBackgroundElement();goog.dom.appendChild(f,d);goog.dom.appendChild(d,e);var h=new silex.model.Component(d),k={left:"100px",top:"100px"};h.setBoundingBox(k);e.setAttribute("src",c);e.onload=function(c){k.width=e.offsetWidth+"px";k.height=e.offsetHeight+"px";h.setBoundingBox(k);h.setEditable(!0,d)};return h};
silex.model.Component.prototype.remove=function(c){if(!goog.dom.contains(this.element,c.element))throw"Canot remove this component because it is not my children.";goog.dom.removeNode(c.element)};silex.model.Component.prototype.removeLink=function(){this.element.removeAttribute("data-silex-href")};silex.model.Component.prototype.setLink=function(c){this.element.setAttribute("data-silex-href",c)};silex.model.Component.prototype.getLink=function(){return this.element.getAttribute("data-silex-href")};
silex.model.Component.prototype.setSelected=function(c){c?goog.dom.classes.add(this.element,"silex-selected"):goog.dom.classes.remove(this.element,"silex-selected")};silex.model.Component.prototype.getSelected=function(){return goog.dom.classes.has(this.element,"silex-selected")};goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(c,d,e,f,h,k,l){var m="";c&&(m+=c+":");e&&(m+="//",d&&(m+=d+"@"),m+=e,f&&(m+=":"+f));h&&(m+=h);k&&(m+="?"+k);l&&(m+="#"+l);return m};goog.uri.utils.splitRe_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(c){goog.uri.utils.phishingProtection_();return c.match(goog.uri.utils.splitRe_)};goog.uri.utils.needsPhishingProtection_=goog.userAgent.WEBKIT;
goog.uri.utils.phishingProtection_=function(){if(goog.uri.utils.needsPhishingProtection_){goog.uri.utils.needsPhishingProtection_=!1;var c=goog.global.location;if(c){var d=c.href;if(d&&(d=goog.uri.utils.getDomain(d))&&d!=c.hostname)throw goog.uri.utils.needsPhishingProtection_=!0,Error();}}};goog.uri.utils.decodeIfPossible_=function(c){return c&&decodeURIComponent(c)};goog.uri.utils.getComponentByIndex_=function(c,d){return goog.uri.utils.split(d)[c]||null};
goog.uri.utils.getScheme=function(c){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,c)};goog.uri.utils.getEffectiveScheme=function(c){c=goog.uri.utils.getScheme(c);!c&&self.location&&(c=self.location.protocol,c=c.substr(0,c.length-1));return c?c.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(c){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,c)};goog.uri.utils.getUserInfo=function(c){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(c))};
goog.uri.utils.getDomainEncoded=function(c){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,c)};goog.uri.utils.getDomain=function(c){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(c))};goog.uri.utils.getPort=function(c){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,c))||null};goog.uri.utils.getPathEncoded=function(c){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,c)};
goog.uri.utils.getPath=function(c){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(c))};goog.uri.utils.getQueryData=function(c){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,c)};goog.uri.utils.getFragmentEncoded=function(c){var d=c.indexOf("#");return 0>d?null:c.substr(d+1)};goog.uri.utils.setFragmentEncoded=function(c,d){return goog.uri.utils.removeFragment(c)+(d?"#"+d:"")};goog.uri.utils.getFragment=function(c){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(c))};
goog.uri.utils.getHost=function(c){c=goog.uri.utils.split(c);return goog.uri.utils.buildFromEncodedParts(c[goog.uri.utils.ComponentIndex.SCHEME],c[goog.uri.utils.ComponentIndex.USER_INFO],c[goog.uri.utils.ComponentIndex.DOMAIN],c[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(c){c=goog.uri.utils.split(c);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,c[goog.uri.utils.ComponentIndex.PATH],c[goog.uri.utils.ComponentIndex.QUERY_DATA],c[goog.uri.utils.ComponentIndex.FRAGMENT])};
goog.uri.utils.removeFragment=function(c){var d=c.indexOf("#");return 0>d?c:c.substr(0,d)};goog.uri.utils.haveSameDomain=function(c,d){var e=goog.uri.utils.split(c),f=goog.uri.utils.split(d);return e[goog.uri.utils.ComponentIndex.DOMAIN]==f[goog.uri.utils.ComponentIndex.DOMAIN]&&e[goog.uri.utils.ComponentIndex.SCHEME]==f[goog.uri.utils.ComponentIndex.SCHEME]&&e[goog.uri.utils.ComponentIndex.PORT]==f[goog.uri.utils.ComponentIndex.PORT]};
goog.uri.utils.assertNoFragmentsOrQueries_=function(c){if(goog.DEBUG&&(0<=c.indexOf("#")||0<=c.indexOf("?")))throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+c+"]");};goog.uri.utils.appendQueryData_=function(c){if(c[1]){var d=c[0],e=d.indexOf("#");0<=e&&(c.push(d.substr(e)),c[0]=d=d.substr(0,e));e=d.indexOf("?");0>e?c[1]="?":e==d.length-1&&(c[1]=void 0)}return c.join("")};
goog.uri.utils.appendKeyValuePairs_=function(c,d,e){if(goog.isArray(d)){goog.asserts.assertArray(d);for(var f=0;f<d.length;f++)goog.uri.utils.appendKeyValuePairs_(c,String(d[f]),e)}else null!=d&&e.push("&",c,""===d?"":"=",goog.string.urlEncode(d))};goog.uri.utils.buildQueryDataBuffer_=function(c,d,e){goog.asserts.assert(0==Math.max(d.length-(e||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");for(e=e||0;e<d.length;e+=2)goog.uri.utils.appendKeyValuePairs_(d[e],d[e+1],c);return c};
goog.uri.utils.buildQueryData=function(c,d){var e=goog.uri.utils.buildQueryDataBuffer_([],c,d);e[0]="";return e.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(c,d){for(var e in d)goog.uri.utils.appendKeyValuePairs_(e,d[e],c);return c};goog.uri.utils.buildQueryDataFromMap=function(c){c=goog.uri.utils.buildQueryDataBufferFromMap_([],c);c[0]="";return c.join("")};
goog.uri.utils.appendParams=function(c,d){return goog.uri.utils.appendQueryData_(2==arguments.length?goog.uri.utils.buildQueryDataBuffer_([c],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([c],arguments,1))};goog.uri.utils.appendParamsFromMap=function(c,d){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([c],d))};goog.uri.utils.appendParam=function(c,d,e){c=[c,"&",d];goog.isDefAndNotNull(e)&&c.push("=",goog.string.urlEncode(e));return goog.uri.utils.appendQueryData_(c)};
goog.uri.utils.findParam_=function(c,d,e,f){for(var h=e.length;0<=(d=c.indexOf(e,d))&&d<f;){var k=c.charCodeAt(d-1);if(k==goog.uri.utils.CharCode_.AMPERSAND||k==goog.uri.utils.CharCode_.QUESTION)if(k=c.charCodeAt(d+h),!k||k==goog.uri.utils.CharCode_.EQUAL||k==goog.uri.utils.CharCode_.AMPERSAND||k==goog.uri.utils.CharCode_.HASH)return d;d+=h+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(c,d){return 0<=goog.uri.utils.findParam_(c,0,d,c.search(goog.uri.utils.hashOrEndRe_))};
goog.uri.utils.getParamValue=function(c,d){var e=c.search(goog.uri.utils.hashOrEndRe_),f=goog.uri.utils.findParam_(c,0,d,e);if(0>f)return null;var h=c.indexOf("&",f);if(0>h||h>e)h=e;f+=d.length+1;return goog.string.urlDecode(c.substr(f,h-f))};goog.uri.utils.getParamValues=function(c,d){for(var e=c.search(goog.uri.utils.hashOrEndRe_),f=0,h,k=[];0<=(h=goog.uri.utils.findParam_(c,f,d,e));){f=c.indexOf("&",h);if(0>f||f>e)f=e;h+=d.length+1;k.push(goog.string.urlDecode(c.substr(h,f-h)))}return k};
goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(c,d){for(var e=c.search(goog.uri.utils.hashOrEndRe_),f=0,h,k=[];0<=(h=goog.uri.utils.findParam_(c,f,d,e));)k.push(c.substring(f,h)),f=Math.min(c.indexOf("&",h)+1||e,e);k.push(c.substr(f));return k.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(c,d,e){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(c,d),d,e)};
goog.uri.utils.appendPath=function(c,d){goog.uri.utils.assertNoFragmentsOrQueries_(c);goog.string.endsWith(c,"/")&&(c=c.substr(0,c.length-1));goog.string.startsWith(d,"/")&&(d=d.substr(1));return goog.string.buildString(c,"/",d)};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(c){return goog.uri.utils.setParam(c,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(c){return this};
goog.iter.toIterator=function(c){if(c instanceof goog.iter.Iterator)return c;if("function"==typeof c.__iterator__)return c.__iterator__(!1);if(goog.isArrayLike(c)){var d=0,e=new goog.iter.Iterator;e.next=function(){for(;;){if(d>=c.length)throw goog.iter.StopIteration;if(d in c)return c[d++];d++}};return e}throw Error("Not implemented");};
goog.iter.forEach=function(c,d,e){if(goog.isArrayLike(c))try{goog.array.forEach(c,d,e)}catch(f){if(f!==goog.iter.StopIteration)throw f;}else{c=goog.iter.toIterator(c);try{for(;;)d.call(e,c.next(),void 0,c)}catch(h){if(h!==goog.iter.StopIteration)throw h;}}};goog.iter.filter=function(c,d,e){var f=goog.iter.toIterator(c);c=new goog.iter.Iterator;c.next=function(){for(;;){var c=f.next();if(d.call(e,c,void 0,f))return c}};return c};
goog.iter.range=function(c,d,e){var f=0,h=c,k=e||1;1<arguments.length&&(f=c,h=d);if(0==k)throw Error("Range step argument must not be zero");var l=new goog.iter.Iterator;l.next=function(){if(0<k&&f>=h||0>k&&f<=h)throw goog.iter.StopIteration;var c=f;f+=k;return c};return l};goog.iter.join=function(c,d){return goog.iter.toArray(c).join(d)};goog.iter.map=function(c,d,e){var f=goog.iter.toIterator(c);c=new goog.iter.Iterator;c.next=function(){for(;;){var c=f.next();return d.call(e,c,void 0,f)}};return c};
goog.iter.reduce=function(c,d,e,f){var h=e;goog.iter.forEach(c,function(c){h=d.call(f,h,c)});return h};goog.iter.some=function(c,d,e){c=goog.iter.toIterator(c);try{for(;;)if(d.call(e,c.next(),void 0,c))return!0}catch(f){if(f!==goog.iter.StopIteration)throw f;}return!1};goog.iter.every=function(c,d,e){c=goog.iter.toIterator(c);try{for(;;)if(!d.call(e,c.next(),void 0,c))return!1}catch(f){if(f!==goog.iter.StopIteration)throw f;}return!0};
goog.iter.chain=function(c){var d=arguments,e=d.length,f=0,h=new goog.iter.Iterator;h.next=function(){try{if(f>=e)throw goog.iter.StopIteration;return goog.iter.toIterator(d[f]).next()}catch(c){if(c!==goog.iter.StopIteration||f>=e)throw c;f++;return this.next()}};return h};goog.iter.dropWhile=function(c,d,e){var f=goog.iter.toIterator(c);c=new goog.iter.Iterator;var h=!0;c.next=function(){for(;;){var c=f.next();if(!h||!d.call(e,c,void 0,f))return h=!1,c}};return c};
goog.iter.takeWhile=function(c,d,e){var f=goog.iter.toIterator(c);c=new goog.iter.Iterator;var h=!0;c.next=function(){for(;;)if(h){var c=f.next();if(d.call(e,c,void 0,f))return c;h=!1}else throw goog.iter.StopIteration;};return c};goog.iter.toArray=function(c){if(goog.isArrayLike(c))return goog.array.toArray(c);c=goog.iter.toIterator(c);var d=[];goog.iter.forEach(c,function(c){d.push(c)});return d};
goog.iter.equals=function(c,d){c=goog.iter.toIterator(c);d=goog.iter.toIterator(d);var e,f;try{for(;;){e=f=!1;var h=c.next();e=!0;var k=d.next();f=!0;if(h!=k)break}}catch(l){if(l!==goog.iter.StopIteration)throw l;if(e&&!f)return!1;if(!f)try{d.next()}catch(m){if(m!==goog.iter.StopIteration)throw m;return!0}}return!1};goog.iter.nextOrValue=function(c,d){try{return goog.iter.toIterator(c).next()}catch(e){if(e!=goog.iter.StopIteration)throw e;return d}};
goog.iter.product=function(c){if(goog.array.some(arguments,function(c){return!c.length})||!arguments.length)return new goog.iter.Iterator;var d=new goog.iter.Iterator,e=arguments,f=goog.array.repeat(0,e.length);d.next=function(){if(f){for(var c=goog.array.map(f,function(c,d){return e[d][c]}),d=f.length-1;0<=d;d--){goog.asserts.assert(f);if(f[d]<e[d].length-1){f[d]++;break}if(0==d){f=null;break}f[d]=0}return c}throw goog.iter.StopIteration;};return d};
goog.iter.cycle=function(c){var d=goog.iter.toIterator(c),e=[],f=0;c=new goog.iter.Iterator;var h=!1;c.next=function(){var c=null;if(!h)try{return c=d.next(),e.push(c),c}catch(l){if(l!=goog.iter.StopIteration||goog.array.isEmpty(e))throw l;h=!0}c=e[f];f=(f+1)%e.length;return c};return c};goog.structs={};goog.structs.Map=function(c,d){this.map_={};this.keys_=[];var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var f=0;f<e;f+=2)this.set(arguments[f],arguments[f+1])}else c&&this.addAll(c)};goog.structs.Map.prototype.count_=0;goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};
goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var c=[],d=0;d<this.keys_.length;d++)c.push(this.map_[this.keys_[d]]);return c};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(c){return goog.structs.Map.hasKey_(this.map_,c)};
goog.structs.Map.prototype.containsValue=function(c){for(var d=0;d<this.keys_.length;d++){var e=this.keys_[d];if(goog.structs.Map.hasKey_(this.map_,e)&&this.map_[e]==c)return!0}return!1};goog.structs.Map.prototype.equals=function(c,d){if(this===c)return!0;if(this.count_!=c.getCount())return!1;var e=d||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var f,h=0;f=this.keys_[h];h++)if(!e(this.get(f),c.get(f)))return!1;return!0};goog.structs.Map.defaultEquals=function(c,d){return c===d};
goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(c){return goog.structs.Map.hasKey_(this.map_,c)?(delete this.map_[c],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var c=0,d=0;c<this.keys_.length;){var e=this.keys_[c];goog.structs.Map.hasKey_(this.map_,e)&&(this.keys_[d++]=e);c++}this.keys_.length=d}if(this.count_!=this.keys_.length){for(var f={},d=c=0;c<this.keys_.length;)e=this.keys_[c],goog.structs.Map.hasKey_(f,e)||(this.keys_[d++]=e,f[e]=1),c++;this.keys_.length=d}};
goog.structs.Map.prototype.get=function(c,d){return goog.structs.Map.hasKey_(this.map_,c)?this.map_[c]:d};goog.structs.Map.prototype.set=function(c,d){goog.structs.Map.hasKey_(this.map_,c)||(this.count_++,this.keys_.push(c),this.version_++);this.map_[c]=d};goog.structs.Map.prototype.addAll=function(c){var d;c instanceof goog.structs.Map?(d=c.getKeys(),c=c.getValues()):(d=goog.object.getKeys(c),c=goog.object.getValues(c));for(var e=0;e<d.length;e++)this.set(d[e],c[e])};
goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var c=new goog.structs.Map,d=0;d<this.keys_.length;d++){var e=this.keys_[d];c.set(this.map_[e],e)}return c};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var c={},d=0;d<this.keys_.length;d++){var e=this.keys_[d];c[e]=this.map_[e]}return c};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};
goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(c){this.cleanupKeysArray_();var d=0,e=this.keys_,f=this.map_,h=this.version_,k=this,l=new goog.iter.Iterator;l.next=function(){for(;;){if(h!=k.version_)throw Error("The map has changed since the iterator was created");if(d>=e.length)throw goog.iter.StopIteration;var l=e[d++];return c?l:f[l]}};return l};
goog.structs.Map.hasKey_=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)};goog.structs.getCount=function(c){return"function"==typeof c.getCount?c.getCount():goog.isArrayLike(c)||goog.isString(c)?c.length:goog.object.getCount(c)};goog.structs.getValues=function(c){if("function"==typeof c.getValues)return c.getValues();if(goog.isString(c))return c.split("");if(goog.isArrayLike(c)){for(var d=[],e=c.length,f=0;f<e;f++)d.push(c[f]);return d}return goog.object.getValues(c)};
goog.structs.getKeys=function(c){if("function"==typeof c.getKeys)return c.getKeys();if("function"!=typeof c.getValues){if(goog.isArrayLike(c)||goog.isString(c)){var d=[];c=c.length;for(var e=0;e<c;e++)d.push(e);return d}return goog.object.getKeys(c)}};goog.structs.contains=function(c,d){return"function"==typeof c.contains?c.contains(d):"function"==typeof c.containsValue?c.containsValue(d):goog.isArrayLike(c)||goog.isString(c)?goog.array.contains(c,d):goog.object.containsValue(c,d)};
goog.structs.isEmpty=function(c){return"function"==typeof c.isEmpty?c.isEmpty():goog.isArrayLike(c)||goog.isString(c)?goog.array.isEmpty(c):goog.object.isEmpty(c)};goog.structs.clear=function(c){"function"==typeof c.clear?c.clear():goog.isArrayLike(c)?goog.array.clear(c):goog.object.clear(c)};
goog.structs.forEach=function(c,d,e){if("function"==typeof c.forEach)c.forEach(d,e);else if(goog.isArrayLike(c)||goog.isString(c))goog.array.forEach(c,d,e);else for(var f=goog.structs.getKeys(c),h=goog.structs.getValues(c),k=h.length,l=0;l<k;l++)d.call(e,h[l],f&&f[l],c)};
goog.structs.filter=function(c,d,e){if("function"==typeof c.filter)return c.filter(d,e);if(goog.isArrayLike(c)||goog.isString(c))return goog.array.filter(c,d,e);var f,h=goog.structs.getKeys(c),k=goog.structs.getValues(c),l=k.length;if(h){f={};for(var m=0;m<l;m++)d.call(e,k[m],h[m],c)&&(f[h[m]]=k[m])}else for(f=[],m=0;m<l;m++)d.call(e,k[m],void 0,c)&&f.push(k[m]);return f};
goog.structs.map=function(c,d,e){if("function"==typeof c.map)return c.map(d,e);if(goog.isArrayLike(c)||goog.isString(c))return goog.array.map(c,d,e);var f,h=goog.structs.getKeys(c),k=goog.structs.getValues(c),l=k.length;if(h){f={};for(var m=0;m<l;m++)f[h[m]]=d.call(e,k[m],h[m],c)}else for(f=[],m=0;m<l;m++)f[m]=d.call(e,k[m],void 0,c);return f};
goog.structs.some=function(c,d,e){if("function"==typeof c.some)return c.some(d,e);if(goog.isArrayLike(c)||goog.isString(c))return goog.array.some(c,d,e);for(var f=goog.structs.getKeys(c),h=goog.structs.getValues(c),k=h.length,l=0;l<k;l++)if(d.call(e,h[l],f&&f[l],c))return!0;return!1};
goog.structs.every=function(c,d,e){if("function"==typeof c.every)return c.every(d,e);if(goog.isArrayLike(c)||goog.isString(c))return goog.array.every(c,d,e);for(var f=goog.structs.getKeys(c),h=goog.structs.getValues(c),k=h.length,l=0;l<k;l++)if(!d.call(e,h[l],f&&f[l],c))return!1;return!0};goog.Uri=function(c,d){var e;c instanceof goog.Uri?(this.ignoreCase_=goog.isDef(d)?d:c.getIgnoreCase(),this.setScheme(c.getScheme()),this.setUserInfo(c.getUserInfo()),this.setDomain(c.getDomain()),this.setPort(c.getPort()),this.setPath(c.getPath()),this.setQueryData(c.getQueryData().clone()),this.setFragment(c.getFragment())):c&&(e=goog.uri.utils.split(String(c)))?(this.ignoreCase_=!!d,this.setScheme(e[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(e[goog.uri.utils.ComponentIndex.USER_INFO]||
"",!0),this.setDomain(e[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(e[goog.uri.utils.ComponentIndex.PORT]),this.setPath(e[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(e[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(e[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!d,this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_))};goog.Uri.preserveParameterTypesCompatibilityFlag=!1;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;
goog.Uri.prototype.scheme_="";goog.Uri.prototype.userInfo_="";goog.Uri.prototype.domain_="";goog.Uri.prototype.port_=null;goog.Uri.prototype.path_="";goog.Uri.prototype.fragment_="";goog.Uri.prototype.isReadOnly_=!1;goog.Uri.prototype.ignoreCase_=!1;
goog.Uri.prototype.toString=function(){var c=[],d=this.getScheme();d&&c.push(goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInSchemeOrUserInfo_),":");if(d=this.getDomain()){c.push("//");var e=this.getUserInfo();e&&c.push(goog.Uri.encodeSpecialChars_(e,goog.Uri.reDisallowedInSchemeOrUserInfo_),"@");c.push(goog.string.urlEncode(d));d=this.getPort();null!=d&&c.push(":",String(d))}if(d=this.getPath())this.hasDomain()&&"/"!=d.charAt(0)&&c.push("/"),c.push(goog.Uri.encodeSpecialChars_(d,"/"==d.charAt(0)?
goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_));(d=this.getEncodedQuery())&&c.push("?",d);(d=this.getFragment())&&c.push("#",goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInFragment_));return c.join("")};
goog.Uri.prototype.resolve=function(c){var d=this.clone(),e=c.hasScheme();e?d.setScheme(c.getScheme()):e=c.hasUserInfo();e?d.setUserInfo(c.getUserInfo()):e=c.hasDomain();e?d.setDomain(c.getDomain()):e=c.hasPort();var f=c.getPath();if(e)d.setPort(c.getPort());else if(e=c.hasPath()){if("/"!=f.charAt(0))if(this.hasDomain()&&!this.hasPath())f="/"+f;else{var h=d.getPath().lastIndexOf("/");-1!=h&&(f=d.getPath().substr(0,h+1)+f)}f=goog.Uri.removeDotSegments(f)}e?d.setPath(f):e=c.hasQuery();e?d.setQueryData(c.getDecodedQuery()):
e=c.hasFragment();e&&d.setFragment(c.getFragment());return d};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(c,d){this.enforceReadOnly();if(this.scheme_=d?goog.Uri.decodeOrEmpty_(c):c)this.scheme_=this.scheme_.replace(/:$/,"");return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};
goog.Uri.prototype.setUserInfo=function(c,d){this.enforceReadOnly();this.userInfo_=d?goog.Uri.decodeOrEmpty_(c):c;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(c,d){this.enforceReadOnly();this.domain_=d?goog.Uri.decodeOrEmpty_(c):c;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};
goog.Uri.prototype.setPort=function(c){this.enforceReadOnly();if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);this.port_=c}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(c,d){this.enforceReadOnly();this.path_=d?goog.Uri.decodeOrEmpty_(c):c;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};
goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(c,d){this.enforceReadOnly();c instanceof goog.Uri.QueryData?(this.queryData_=c,this.queryData_.setIgnoreCase(this.ignoreCase_)):(d||(c=goog.Uri.encodeSpecialChars_(c,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(c,null,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(c,d){return this.setQueryData(c,d)};
goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(c,d){this.enforceReadOnly();this.queryData_.set(c,d);return this};
goog.Uri.prototype.setParameterValues=function(c,d){this.enforceReadOnly();goog.isArray(d)||(d=[String(d)]);this.queryData_.setValues(c,d);return this};goog.Uri.prototype.getParameterValues=function(c){return this.queryData_.getValues(c)};goog.Uri.prototype.getParameterValue=function(c){return this.queryData_.get(c)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(c,d){this.enforceReadOnly();this.fragment_=d?goog.Uri.decodeOrEmpty_(c):c;return this};
goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(c){return(!this.hasDomain()&&!c.hasDomain()||this.getDomain()==c.getDomain())&&(!this.hasPort()&&!c.hasPort()||this.getPort()==c.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(c){this.enforceReadOnly();this.queryData_.remove(c);return this};
goog.Uri.prototype.setReadOnly=function(c){this.isReadOnly_=c;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_)throw Error("Tried to modify a read-only Uri");};goog.Uri.prototype.setIgnoreCase=function(c){this.ignoreCase_=c;this.queryData_&&this.queryData_.setIgnoreCase(c);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};
goog.Uri.parse=function(c,d){return c instanceof goog.Uri?c.clone():new goog.Uri(c,d)};goog.Uri.create=function(c,d,e,f,h,k,l,m){m=new goog.Uri(null,m);c&&m.setScheme(c);d&&m.setUserInfo(d);e&&m.setDomain(e);f&&m.setPort(f);h&&m.setPath(h);k&&m.setQueryData(k);l&&m.setFragment(l);return m};goog.Uri.resolve=function(c,d){c instanceof goog.Uri||(c=goog.Uri.parse(c));d instanceof goog.Uri||(d=goog.Uri.parse(d));return c.resolve(d)};
goog.Uri.removeDotSegments=function(c){if(".."==c||"."==c)return"";if(goog.string.contains(c,"./")||goog.string.contains(c,"/.")){var d=goog.string.startsWith(c,"/");c=c.split("/");for(var e=[],f=0;f<c.length;){var h=c[f++];"."==h?d&&f==c.length&&e.push(""):".."==h?((1<e.length||1==e.length&&""!=e[0])&&e.pop(),d&&f==c.length&&e.push("")):(e.push(h),d=!0)}return e.join("/")}return c};goog.Uri.decodeOrEmpty_=function(c){return c?decodeURIComponent(c):""};
goog.Uri.encodeSpecialChars_=function(c,d){return goog.isString(c)?encodeURI(c).replace(d,goog.Uri.encodeChar_):null};goog.Uri.encodeChar_=function(c){c=c.charCodeAt(0);return"%"+(c>>4&15).toString(16)+(c&15).toString(16)};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;
goog.Uri.haveSameDomain=function(c,d){var e=goog.uri.utils.split(c),f=goog.uri.utils.split(d);return e[goog.uri.utils.ComponentIndex.DOMAIN]==f[goog.uri.utils.ComponentIndex.DOMAIN]&&e[goog.uri.utils.ComponentIndex.PORT]==f[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(c,d,e){this.encodedQuery_=c||null;this.ignoreCase_=!!e};
goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new goog.structs.Map,this.count_=0,this.encodedQuery_))for(var c=this.encodedQuery_.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,h=null;0<=e?(f=c[d].substring(0,e),h=c[d].substring(e+1)):f=c[d];f=goog.string.urlDecode(f);f=this.getKeyName_(f);this.add(f,h?goog.string.urlDecode(h):"")}};
goog.Uri.QueryData.createFromMap=function(c,d,e){d=goog.structs.getKeys(c);if("undefined"==typeof d)throw Error("Keys are undefined");e=new goog.Uri.QueryData(null,null,e);c=goog.structs.getValues(c);for(var f=0;f<d.length;f++){var h=d[f],k=c[f];goog.isArray(k)?e.setValues(h,k):e.add(h,k)}return e};
goog.Uri.QueryData.createFromKeysValues=function(c,d,e,f){if(c.length!=d.length)throw Error("Mismatched lengths for keys/values");e=new goog.Uri.QueryData(null,null,f);for(f=0;f<c.length;f++)e.add(c[f],d[f]);return e};goog.Uri.QueryData.prototype.keyMap_=null;goog.Uri.QueryData.prototype.count_=null;goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};
goog.Uri.QueryData.prototype.add=function(c,d){this.ensureKeyMapInitialized_();this.invalidateCache_();c=this.getKeyName_(c);var e=this.keyMap_.get(c);e||this.keyMap_.set(c,e=[]);e.push(d);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(c){this.ensureKeyMapInitialized_();c=this.getKeyName_(c);return this.keyMap_.containsKey(c)?(this.invalidateCache_(),this.count_-=this.keyMap_.get(c).length,this.keyMap_.remove(c)):!1};
goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};goog.Uri.QueryData.prototype.containsKey=function(c){this.ensureKeyMapInitialized_();c=this.getKeyName_(c);return this.keyMap_.containsKey(c)};goog.Uri.QueryData.prototype.containsValue=function(c){var d=this.getValues();return goog.array.contains(d,c)};
goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();for(var c=this.keyMap_.getValues(),d=this.keyMap_.getKeys(),e=[],f=0;f<d.length;f++)for(var h=c[f],k=0;k<h.length;k++)e.push(d[f]);return e};goog.Uri.QueryData.prototype.getValues=function(c){this.ensureKeyMapInitialized_();var d=[];if(c)this.containsKey(c)&&(d=goog.array.concat(d,this.keyMap_.get(this.getKeyName_(c))));else{c=this.keyMap_.getValues();for(var e=0;e<c.length;e++)d=goog.array.concat(d,c[e])}return d};
goog.Uri.QueryData.prototype.set=function(c,d){this.ensureKeyMapInitialized_();this.invalidateCache_();c=this.getKeyName_(c);this.containsKey(c)&&(this.count_-=this.keyMap_.get(c).length);this.keyMap_.set(c,[d]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(c,d){var e=c?this.getValues(c):[];return goog.Uri.preserveParameterTypesCompatibilityFlag?0<e.length?e[0]:d:0<e.length?String(e[0]):d};
goog.Uri.QueryData.prototype.setValues=function(c,d){this.remove(c);0<d.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(c),goog.array.clone(d)),this.count_+=d.length)};
goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";for(var c=[],d=this.keyMap_.getKeys(),e=0;e<d.length;e++)for(var f=d[e],h=goog.string.urlEncode(f),f=this.getValues(f),k=0;k<f.length;k++){var l=h;""!==f[k]&&(l+="="+goog.string.urlEncode(f[k]));c.push(l)}return this.encodedQuery_=c.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};
goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(c){this.ensureKeyMapInitialized_();goog.structs.forEach(this.keyMap_,function(d,e,f){goog.array.contains(c,e)||this.remove(e)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var c=new goog.Uri.QueryData;c.encodedQuery_=this.encodedQuery_;this.keyMap_&&(c.keyMap_=this.keyMap_.clone(),c.count_=this.count_);return c};
goog.Uri.QueryData.prototype.getKeyName_=function(c){c=String(c);this.ignoreCase_&&(c=c.toLowerCase());return c};goog.Uri.QueryData.prototype.setIgnoreCase=function(c){c&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),goog.structs.forEach(this.keyMap_,function(c,e){var f=e.toLowerCase();e!=f&&(this.remove(e),this.setValues(f,c))},this));this.ignoreCase_=c};
goog.Uri.QueryData.prototype.extend=function(c){for(var d=0;d<arguments.length;d++)goog.structs.forEach(arguments[d],function(c,d){this.add(d,c)},this)};goog.net={};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};
goog.net.ErrorCode.getDebugMessage=function(c){switch(c){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";
case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.net.HttpStatus={CONTINUE:100,SWITCHING_PROTOCOLS:101,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,
PRECONDITION_FAILED:412,REQUEST_ENTITY_TOO_LARGE:413,REQUEST_URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,REQUEST_RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,QUIRK_IE_NO_CONTENT:1223};
goog.net.HttpStatus.isSuccess=function(c){switch(c){case goog.net.HttpStatus.OK:case goog.net.HttpStatus.CREATED:case goog.net.HttpStatus.ACCEPTED:case goog.net.HttpStatus.NO_CONTENT:case goog.net.HttpStatus.PARTIAL_CONTENT:case goog.net.HttpStatus.NOT_MODIFIED:case goog.net.HttpStatus.QUIRK_IE_NO_CONTENT:return!0;default:return!1}};goog.json={};goog.json.isValid_=function(c){return/^\s*$/.test(c)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(c.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.parse=function(c){c=String(c);if(goog.json.isValid_(c))try{return eval("("+c+")")}catch(d){}throw Error("Invalid JSON string: "+c);};goog.json.unsafeParse=function(c){return eval("("+c+")")};
goog.json.serialize=function(c,d){return(new goog.json.Serializer(d)).serialize(c)};goog.json.Serializer=function(c){this.replacer_=c};goog.json.Serializer.prototype.serialize=function(c){var d=[];this.serialize_(c,d);return d.join("")};
goog.json.Serializer.prototype.serialize_=function(c,d){switch(typeof c){case "string":this.serializeString_(c,d);break;case "number":this.serializeNumber_(c,d);break;case "boolean":d.push(c);break;case "undefined":d.push("null");break;case "object":if(null==c){d.push("null");break}if(goog.isArray(c)){this.serializeArray(c,d);break}this.serializeObject_(c,d);break;case "function":break;default:throw Error("Unknown type: "+typeof c);}};
goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
goog.json.Serializer.prototype.serializeString_=function(c,d){d.push('"',c.replace(goog.json.Serializer.charsToReplace_,function(c){if(c in goog.json.Serializer.charToJsonCharCache_)return goog.json.Serializer.charToJsonCharCache_[c];var d=c.charCodeAt(0),h="\\u";16>d?h+="000":256>d?h+="00":4096>d&&(h+="0");return goog.json.Serializer.charToJsonCharCache_[c]=h+d.toString(16)}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(c,d){d.push(isFinite(c)&&!isNaN(c)?c:"null")};
goog.json.Serializer.prototype.serializeArray=function(c,d){var e=c.length;d.push("[");for(var f="",h=0;h<e;h++)d.push(f),f=c[h],this.serialize_(this.replacer_?this.replacer_.call(c,String(h),f):f,d),f=",";d.push("]")};
goog.json.Serializer.prototype.serializeObject_=function(c,d){d.push("{");var e="",f;for(f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var h=c[f];"function"!=typeof h&&(d.push(e),this.serializeString_(f,d),d.push(":"),this.serialize_(this.replacer_?this.replacer_.call(c,f,h):h,d),e=",")}d.push("}")};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.WrapperXmlHttpFactory=function(c,d){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=c;this.optionsFactory_=d};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};goog.net.XmlHttp.setFactory=function(c,d){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(c,d))};
goog.net.XmlHttp.setGlobalFactory=function(c){goog.net.XmlHttp.factory_=c};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){var c=this.getProgId_();return c?new ActiveXObject(c):new XMLHttpRequest};
goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){var c={};this.getProgId_()&&(c[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,c[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return c};
goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var c=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<c.length;d++){var e=c[d];try{return new ActiveXObject(e),this.ieProgId_=e}catch(f){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return this.ieProgId_};
goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.structs.Collection=function(){};goog.structs.Set=function(c){this.map_=new goog.structs.Map;c&&this.addAll(c)};goog.structs.Set.getKey_=function(c){var d=typeof c;return"object"==d&&c||"function"==d?"o"+goog.getUid(c):d.substr(0,1)+c};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(c){this.map_.set(goog.structs.Set.getKey_(c),c)};goog.structs.Set.prototype.addAll=function(c){c=goog.structs.getValues(c);for(var d=c.length,e=0;e<d;e++)this.add(c[e])};
goog.structs.Set.prototype.removeAll=function(c){c=goog.structs.getValues(c);for(var d=c.length,e=0;e<d;e++)this.remove(c[e])};goog.structs.Set.prototype.remove=function(c){return this.map_.remove(goog.structs.Set.getKey_(c))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(c){return this.map_.containsKey(goog.structs.Set.getKey_(c))};
goog.structs.Set.prototype.containsAll=function(c){return goog.structs.every(c,this.contains,this)};goog.structs.Set.prototype.intersection=function(c){var d=new goog.structs.Set;c=goog.structs.getValues(c);for(var e=0;e<c.length;e++){var f=c[e];this.contains(f)&&d.add(f)}return d};goog.structs.Set.prototype.difference=function(c){var d=this.clone();d.removeAll(c);return d};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};
goog.structs.Set.prototype.equals=function(c){return this.getCount()==goog.structs.getCount(c)&&this.isSubsetOf(c)};goog.structs.Set.prototype.isSubsetOf=function(c){var d=goog.structs.getCount(c);if(this.getCount()>d)return!1;!(c instanceof goog.structs.Set)&&5<d&&(c=new goog.structs.Set(c));return goog.structs.every(this,function(d){return goog.structs.contains(c,d)})};goog.structs.Set.prototype.__iterator__=function(c){return this.map_.__iterator__(!1)};goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.catchErrors=function(c,d,e){e=e||goog.global;var f=e.onerror,h=!!d;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(h=!h);e.onerror=function(d,e,m){f&&f(d,e,m);c({message:d,fileName:e,line:m});return h}};goog.debug.expose=function(c,d){if("undefined"==typeof c)return"undefined";if(null==c)return"NULL";var e=[],f;for(f in c)if(d||!goog.isFunction(c[f])){var h=f+" = ";try{h+=c[f]}catch(k){h+="*** "+k+" ***"}e.push(h)}return e.join("\n")};
goog.debug.deepExpose=function(c,d){var e=new goog.structs.Set,f=[],h=function(c,l){var m=l+"  ";try{if(goog.isDef(c))if(goog.isNull(c))f.push("NULL");else if(goog.isString(c))f.push('"'+c.replace(/\n/g,"\n"+l)+'"');else if(goog.isFunction(c))f.push(String(c).replace(/\n/g,"\n"+l));else if(goog.isObject(c))if(e.contains(c))f.push("*** reference loop detected ***");else{e.add(c);f.push("{");for(var n in c)if(d||!goog.isFunction(c[n]))f.push("\n"),f.push(m),f.push(n+" = "),h(c[n],m);f.push("\n"+l+"}")}else f.push(c);
else f.push("undefined")}catch(p){f.push("*** "+p+" ***")}};h(c,"");return f.join("")};goog.debug.exposeArray=function(c){for(var d=[],e=0;e<c.length;e++)goog.isArray(c[e])?d.push(goog.debug.exposeArray(c[e])):d.push(c[e]);return"[ "+d.join(", ")+" ]"};
goog.debug.exposeException=function(c,d){try{var e=goog.debug.normalizeErrorObject(c);return"Message: "+goog.string.htmlEscape(e.message)+'\nUrl: <a href="view-source:'+e.fileName+'" target="_new">'+e.fileName+"</a>\nLine: "+e.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(e.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(d)+"-> ")}catch(f){return"Exception trying to expose exception! You win, we lose. "+f}};
goog.debug.normalizeErrorObject=function(c){var d=goog.getObjectByName("window.location.href");if(goog.isString(c))return{message:c,name:"Unknown error",lineNumber:"Not available",fileName:d,stack:"Not available"};var e,f,h=!1;try{e=c.lineNumber||c.line||"Not available"}catch(k){e="Not available",h=!0}try{f=c.fileName||c.filename||c.sourceURL||goog.global.$googDebugFname||d}catch(l){f="Not available",h=!0}return!h&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||"Not available",
name:c.name||"UnknownError",lineNumber:e,fileName:f,stack:c.stack||"Not available"}};goog.debug.enhanceError=function(c,d){var e="string"==typeof c?Error(c):c;e.stack||(e.stack=goog.debug.getStacktrace(arguments.callee.caller));if(d){for(var f=0;e["message"+f];)++f;e["message"+f]=String(d)}return e};
goog.debug.getStacktraceSimple=function(c){for(var d=[],e=arguments.callee.caller,f=0;e&&(!c||f<c);){d.push(goog.debug.getFunctionName(e));d.push("()\n");try{e=e.caller}catch(h){d.push("[exception trying to get caller]\n");break}f++;if(f>=goog.debug.MAX_STACK_DEPTH){d.push("[...long stack...]");break}}c&&f>=c?d.push("[...reached max depth limit...]"):d.push("[end]");return d.join("")};goog.debug.MAX_STACK_DEPTH=50;
goog.debug.getStacktrace=function(c){return goog.debug.getStacktraceHelper_(c||arguments.callee.caller,[])};
goog.debug.getStacktraceHelper_=function(c,d){var e=[];if(goog.array.contains(d,c))e.push("[...circular reference...]");else if(c&&d.length<goog.debug.MAX_STACK_DEPTH){e.push(goog.debug.getFunctionName(c)+"(");for(var f=c.arguments,h=0;h<f.length;h++){0<h&&e.push(", ");var k;k=f[h];switch(typeof k){case "object":k=k?"object":"null";break;case "string":break;case "number":k=String(k);break;case "boolean":k=k?"true":"false";break;case "function":k=(k=goog.debug.getFunctionName(k))?k:"[fn]";break;default:k=
typeof k}40<k.length&&(k=k.substr(0,40)+"...");e.push(k)}d.push(c);e.push(")\n");try{e.push(goog.debug.getStacktraceHelper_(c.caller,d))}catch(l){e.push("[exception trying to get caller]\n")}}else c?e.push("[...long stack...]"):e.push("[end]");return e.join("")};goog.debug.setFunctionResolver=function(c){goog.debug.fnNameResolver_=c};
goog.debug.getFunctionName=function(c){if(goog.debug.fnNameCache_[c])return goog.debug.fnNameCache_[c];if(goog.debug.fnNameResolver_){var d=goog.debug.fnNameResolver_(c);if(d)return goog.debug.fnNameCache_[c]=d}c=String(c);goog.debug.fnNameCache_[c]||(d=/function ([^\(]+)/.exec(c),goog.debug.fnNameCache_[c]=d?d[1]:"[Anonymous]");return goog.debug.fnNameCache_[c]};
goog.debug.makeWhitespaceVisible=function(c){return c.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.fnNameCache_={};goog.debug.LogRecord=function(c,d,e,f,h){this.reset(c,d,e,f,h)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.prototype.exceptionText_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;
goog.debug.LogRecord.prototype.reset=function(c,d,e,f,h){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof h?h:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=f||goog.now();this.level_=c;this.msg_=d;this.loggerName_=e;delete this.exception_;delete this.exceptionText_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};
goog.debug.LogRecord.prototype.setException=function(c){this.exception_=c};goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_};goog.debug.LogRecord.prototype.setExceptionText=function(c){this.exceptionText_=c};goog.debug.LogRecord.prototype.setLoggerName=function(c){this.loggerName_=c};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(c){this.level_=c};
goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(c){this.msg_=c};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(c){this.time_=c};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;
goog.debug.LogBuffer.prototype.addRecord=function(c,d,e){var f=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=f;if(this.isFull_)return f=this.buffer_[f],f.reset(c,d,e),f;this.isFull_=f==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[f]=new goog.debug.LogRecord(c,d,e)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};
goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(c){var d=this.buffer_;if(d[0]){var e=this.curIndex_,f=this.isFull_?e:-1;do f=(f+1)%goog.debug.LogBuffer.CAPACITY,c(d[f]);while(f!=e)}};goog.debug.Logger=function(c){this.name_=c};goog.debug.Logger.prototype.parent_=null;goog.debug.Logger.prototype.level_=null;goog.debug.Logger.prototype.children_=null;goog.debug.Logger.prototype.handlers_=null;goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(c,d){this.name=c;this.value=d};goog.debug.Logger.Level.prototype.toString=function(){return this.name};
goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1E3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);
goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);
goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;
goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var c=0,d;d=goog.debug.Logger.Level.PREDEFINED_LEVELS[c];c++)goog.debug.Logger.Level.predefinedLevelsCache_[d.value]=d,goog.debug.Logger.Level.predefinedLevelsCache_[d.name]=d};
goog.debug.Logger.Level.getPredefinedLevel=function(c){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[c]||null};
goog.debug.Logger.Level.getPredefinedLevelByValue=function(c){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(c in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[c];for(var d=0;d<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++d){var e=goog.debug.Logger.Level.PREDEFINED_LEVELS[d];if(e.value<=c)return e}return null};goog.debug.Logger.getLogger=function(c){return goog.debug.LogManager.getLogger(c)};
goog.debug.Logger.logToProfilers=function(c){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(c):goog.global.console.markTimeline&&goog.global.console.markTimeline(c));goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(c)};goog.debug.Logger.prototype.getName=function(){return this.name_};
goog.debug.Logger.prototype.addHandler=function(c){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(c)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(c)))};
goog.debug.Logger.prototype.removeHandler=function(c){if(goog.debug.LOGGING_ENABLED){var d=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!d&&goog.array.remove(d,c)}return!1};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};
goog.debug.Logger.prototype.setLevel=function(c){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=c:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=c))};goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF};
goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.LOGGING_ENABLED)return goog.debug.Logger.Level.OFF;if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(c){return goog.debug.LOGGING_ENABLED&&c.value>=this.getEffectiveLevel().value};
goog.debug.Logger.prototype.log=function(c,d,e){goog.debug.LOGGING_ENABLED&&this.isLoggable(c)&&this.doLogRecord_(this.getLogRecord(c,d,e))};goog.debug.Logger.prototype.getLogRecord=function(c,d,e){var f=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(c,d,this.name_):new goog.debug.LogRecord(c,String(d),this.name_);e&&(f.setException(e),f.setExceptionText(goog.debug.exposeException(e,arguments.callee.caller)));return f};
goog.debug.Logger.prototype.shout=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,c,d)};goog.debug.Logger.prototype.severe=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,c,d)};goog.debug.Logger.prototype.warning=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,c,d)};goog.debug.Logger.prototype.info=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,c,d)};
goog.debug.Logger.prototype.config=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,c,d)};goog.debug.Logger.prototype.fine=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,c,d)};goog.debug.Logger.prototype.finer=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,c,d)};goog.debug.Logger.prototype.finest=function(c,d){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,c,d)};
goog.debug.Logger.prototype.logRecord=function(c){goog.debug.LOGGING_ENABLED&&this.isLoggable(c.getLevel())&&this.doLogRecord_(c)};goog.debug.Logger.prototype.doLogRecord_=function(c){goog.debug.Logger.logToProfilers("log:"+c.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY)for(var d=this;d;)d.callPublish_(c),d=d.getParent();else for(var d=0,e;e=goog.debug.Logger.rootHandlers_[d++];)e(c)};goog.debug.Logger.prototype.callPublish_=function(c){if(this.handlers_)for(var d=0,e;e=this.handlers_[d];d++)e(c)};
goog.debug.Logger.prototype.setParent_=function(c){this.parent_=c};goog.debug.Logger.prototype.addChild_=function(c,d){this.getChildren()[c]=d};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(""),goog.debug.LogManager.loggers_[""]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};
goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(c){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[c]||goog.debug.LogManager.createLogger_(c)};
goog.debug.LogManager.createFunctionForCatchErrors=function(c){return function(d){(c||goog.debug.LogManager.getRoot()).severe("Error: "+d.message+" ("+d.fileName+" @ Line: "+d.line+")")}};goog.debug.LogManager.createLogger_=function(c){var d=new goog.debug.Logger(c);if(goog.debug.Logger.ENABLE_HIERARCHY){var e=c.lastIndexOf("."),f=c.substr(0,e),e=c.substr(e+1),f=goog.debug.LogManager.getLogger(f);f.addChild_(e,d);d.setParent_(f)}return goog.debug.LogManager.loggers_[c]=d};goog.log={};goog.log.ENABLED=goog.debug.LOGGING_ENABLED;goog.log.Logger=goog.debug.Logger;goog.log.Level=goog.debug.Logger.Level;goog.log.LogRecord=goog.debug.LogRecord;goog.log.getLogger=function(c,d){if(goog.log.ENABLED){var e=goog.debug.Logger.getLogger(c);d&&e&&e.setLevel(d);return e}return null};goog.log.addHandler=function(c,d){goog.log.ENABLED&&c&&c.addHandler(d)};goog.log.removeHandler=function(c,d){return goog.log.ENABLED&&c?c.removeHandler(d):!1};
goog.log.log=function(c,d,e,f){goog.log.ENABLED&&c&&c.log(d,e,f)};goog.log.error=function(c,d,e){goog.log.ENABLED&&c&&c.severe(d,e)};goog.log.warning=function(c,d,e){goog.log.ENABLED&&c&&c.warning(d,e)};goog.log.info=function(c,d,e){goog.log.ENABLED&&c&&c.info(d,e)};goog.log.fine=function(c,d,e){goog.log.ENABLED&&c&&c.fine(d,e)};goog.net.XhrIo=function(c){goog.events.EventTarget.call(this);this.headers=new goog.structs.Map;this.xmlHttpFactory_=c||null;this.active_=!1;this.xhrOptions_=this.xhr_=null;this.lastMethod_=this.lastUri_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastError_="";this.inAbort_=this.inOpen_=this.inSend_=this.errorDispatched_=!1;this.timeoutInterval_=0;this.timeoutId_=null;this.responseType_=goog.net.XhrIo.ResponseType.DEFAULT;this.useXhr2Timeout_=this.withCredentials_=!1};
goog.inherits(goog.net.XhrIo,goog.events.EventTarget);goog.net.XhrIo.ResponseType={DEFAULT:"",TEXT:"text",DOCUMENT:"document",BLOB:"blob",ARRAY_BUFFER:"arraybuffer"};goog.net.XhrIo.prototype.logger_=goog.log.getLogger("goog.net.XhrIo");goog.net.XhrIo.CONTENT_TYPE_HEADER="Content-Type";goog.net.XhrIo.HTTP_SCHEME_PATTERN=/^https?$/i;goog.net.XhrIo.METHODS_WITH_FORM_DATA=["POST","PUT"];goog.net.XhrIo.FORM_CONTENT_TYPE="application/x-www-form-urlencoded;charset=utf-8";goog.net.XhrIo.XHR2_TIMEOUT_="timeout";
goog.net.XhrIo.XHR2_ON_TIMEOUT_="ontimeout";goog.net.XhrIo.sendInstances_=[];goog.net.XhrIo.send=function(c,d,e,f,h,k,l){var m=new goog.net.XhrIo;goog.net.XhrIo.sendInstances_.push(m);d&&m.listen(goog.net.EventType.COMPLETE,d);m.listenOnce(goog.net.EventType.READY,m.cleanupSend_);k&&m.setTimeoutInterval(k);l&&m.setWithCredentials(l);m.send(c,e,f,h)};goog.net.XhrIo.cleanup=function(){for(var c=goog.net.XhrIo.sendInstances_;c.length;)c.pop().dispose()};
goog.net.XhrIo.protectEntryPoints=function(c){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=c.protectEntryPoint(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)};goog.net.XhrIo.prototype.cleanupSend_=function(){this.dispose();goog.array.remove(goog.net.XhrIo.sendInstances_,this)};goog.net.XhrIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.XhrIo.prototype.setTimeoutInterval=function(c){this.timeoutInterval_=Math.max(0,c)};
goog.net.XhrIo.prototype.setResponseType=function(c){this.responseType_=c};goog.net.XhrIo.prototype.getResponseType=function(){return this.responseType_};goog.net.XhrIo.prototype.setWithCredentials=function(c){this.withCredentials_=c};goog.net.XhrIo.prototype.getWithCredentials=function(){return this.withCredentials_};
goog.net.XhrIo.prototype.send=function(c,d,e,f){if(this.xhr_)throw Error("[goog.net.XhrIo] Object is active with another request="+this.lastUri_+"; newUri="+c);d=d?d.toUpperCase():"GET";this.lastUri_=c;this.lastError_="";this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.lastMethod_=d;this.errorDispatched_=!1;this.active_=!0;this.xhr_=this.createXhr();this.xhrOptions_=this.xmlHttpFactory_?this.xmlHttpFactory_.getOptions():goog.net.XmlHttp.getOptions();this.xhr_.onreadystatechange=goog.bind(this.onReadyStateChange_,
this);try{goog.log.fine(this.logger_,this.formatMsg_("Opening Xhr")),this.inOpen_=!0,this.xhr_.open(d,c,!0),this.inOpen_=!1}catch(h){goog.log.fine(this.logger_,this.formatMsg_("Error opening Xhr: "+h.message));this.error_(goog.net.ErrorCode.EXCEPTION,h);return}c=e||"";var k=this.headers.clone();f&&goog.structs.forEach(f,function(c,d){k.set(d,c)});f=goog.array.find(k.getKeys(),goog.net.XhrIo.isContentTypeHeader_);e=goog.global.FormData&&c instanceof goog.global.FormData;!goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA,
d)||(f||e)||k.set(goog.net.XhrIo.CONTENT_TYPE_HEADER,goog.net.XhrIo.FORM_CONTENT_TYPE);goog.structs.forEach(k,function(c,d){this.xhr_.setRequestHeader(d,c)},this);this.responseType_&&(this.xhr_.responseType=this.responseType_);goog.object.containsKey(this.xhr_,"withCredentials")&&(this.xhr_.withCredentials=this.withCredentials_);try{this.cleanUpTimeoutTimer_(),0<this.timeoutInterval_&&(this.useXhr2Timeout_=goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_),goog.log.fine(this.logger_,this.formatMsg_("Will abort after "+
this.timeoutInterval_+"ms if incomplete, xhr2 "+this.useXhr2Timeout_)),this.useXhr2Timeout_?(this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_]=this.timeoutInterval_,this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=goog.bind(this.timeout_,this)):this.timeoutId_=goog.Timer.callOnce(this.timeout_,this.timeoutInterval_,this)),goog.log.fine(this.logger_,this.formatMsg_("Sending request")),this.inSend_=!0,this.xhr_.send(c),this.inSend_=!1}catch(l){goog.log.fine(this.logger_,this.formatMsg_("Send error: "+l.message)),this.error_(goog.net.ErrorCode.EXCEPTION,
l)}};goog.net.XhrIo.shouldUseXhr2Timeout_=function(c){return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(9)&&goog.isNumber(c[goog.net.XhrIo.XHR2_TIMEOUT_])&&goog.isDef(c[goog.net.XhrIo.XHR2_ON_TIMEOUT_])};goog.net.XhrIo.isContentTypeHeader_=function(c){return goog.string.caseInsensitiveEquals(goog.net.XhrIo.CONTENT_TYPE_HEADER,c)};goog.net.XhrIo.prototype.createXhr=function(){return this.xmlHttpFactory_?this.xmlHttpFactory_.createInstance():goog.net.XmlHttp()};
goog.net.XhrIo.prototype.timeout_=function(){"undefined"!=typeof goog&&this.xhr_&&(this.lastError_="Timed out after "+this.timeoutInterval_+"ms, aborting",this.lastErrorCode_=goog.net.ErrorCode.TIMEOUT,goog.log.fine(this.logger_,this.formatMsg_(this.lastError_)),this.dispatchEvent(goog.net.EventType.TIMEOUT),this.abort(goog.net.ErrorCode.TIMEOUT))};
goog.net.XhrIo.prototype.error_=function(c,d){this.active_=!1;this.xhr_&&(this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1);this.lastError_=d;this.lastErrorCode_=c;this.dispatchErrors_();this.cleanUpXhr_()};goog.net.XhrIo.prototype.dispatchErrors_=function(){this.errorDispatched_||(this.errorDispatched_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR))};
goog.net.XhrIo.prototype.abort=function(c){this.xhr_&&this.active_&&(goog.log.fine(this.logger_,this.formatMsg_("Aborting")),this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1,this.lastErrorCode_=c||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ABORT),this.cleanUpXhr_())};
goog.net.XhrIo.prototype.disposeInternal=function(){this.xhr_&&(this.active_&&(this.active_=!1,this.inAbort_=!0,this.xhr_.abort(),this.inAbort_=!1),this.cleanUpXhr_(!0));goog.net.XhrIo.superClass_.disposeInternal.call(this)};goog.net.XhrIo.prototype.onReadyStateChange_=function(){if(!this.isDisposed())if(this.inOpen_||this.inSend_||this.inAbort_)this.onReadyStateChangeHelper_();else this.onReadyStateChangeEntryPoint_()};goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};
goog.net.XhrIo.prototype.onReadyStateChangeHelper_=function(){if(this.active_&&"undefined"!=typeof goog)if(this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE&&2==this.getStatus())goog.log.fine(this.logger_,this.formatMsg_("Local request error detected and ignored"));else if(this.inSend_&&this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE)goog.Timer.callOnce(this.onReadyStateChange_,0,this);else if(this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE),
this.isComplete()){goog.log.fine(this.logger_,this.formatMsg_("Request complete"));this.active_=!1;try{this.isSuccess()?(this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS)):(this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getStatusText()+" ["+this.getStatus()+"]",this.dispatchErrors_())}finally{this.cleanUpXhr_()}}};
goog.net.XhrIo.prototype.cleanUpXhr_=function(c){if(this.xhr_){this.cleanUpTimeoutTimer_();var d=this.xhr_,e=this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]?goog.nullFunction:null;this.xhrOptions_=this.xhr_=null;c||this.dispatchEvent(goog.net.EventType.READY);try{d.onreadystatechange=e}catch(f){goog.log.error(this.logger_,"Problem encountered resetting onreadystatechange: "+f.message)}}};
goog.net.XhrIo.prototype.cleanUpTimeoutTimer_=function(){this.xhr_&&this.useXhr2Timeout_&&(this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_]=null);goog.isNumber(this.timeoutId_)&&(goog.Timer.clear(this.timeoutId_),this.timeoutId_=null)};goog.net.XhrIo.prototype.isActive=function(){return!!this.xhr_};goog.net.XhrIo.prototype.isComplete=function(){return this.getReadyState()==goog.net.XmlHttp.ReadyState.COMPLETE};
goog.net.XhrIo.prototype.isSuccess=function(){var c=this.getStatus();return goog.net.HttpStatus.isSuccess(c)||0===c&&!this.isLastUriEffectiveSchemeHttp_()};goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_=function(){var c=goog.uri.utils.getEffectiveScheme(String(this.lastUri_));return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(c)};goog.net.XhrIo.prototype.getReadyState=function(){return this.xhr_?this.xhr_.readyState:goog.net.XmlHttp.ReadyState.UNINITIALIZED};
goog.net.XhrIo.prototype.getStatus=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.status:-1}catch(c){return goog.log.warning(this.logger_,"Can not get status: "+c.message),-1}};goog.net.XhrIo.prototype.getStatusText=function(){try{return this.getReadyState()>goog.net.XmlHttp.ReadyState.LOADED?this.xhr_.statusText:""}catch(c){return goog.log.fine(this.logger_,"Can not get status: "+c.message),""}};goog.net.XhrIo.prototype.getLastUri=function(){return String(this.lastUri_)};
goog.net.XhrIo.prototype.getResponseText=function(){try{return this.xhr_?this.xhr_.responseText:""}catch(c){return goog.log.fine(this.logger_,"Can not get responseText: "+c.message),""}};goog.net.XhrIo.prototype.getResponseBody=function(){try{if(this.xhr_&&"responseBody"in this.xhr_)return this.xhr_.responseBody}catch(c){goog.log.fine(this.logger_,"Can not get responseBody: "+c.message)}return null};
goog.net.XhrIo.prototype.getResponseXml=function(){try{return this.xhr_?this.xhr_.responseXML:null}catch(c){return goog.log.fine(this.logger_,"Can not get responseXML: "+c.message),null}};goog.net.XhrIo.prototype.getResponseJson=function(c){if(this.xhr_){var d=this.xhr_.responseText;c&&0==d.indexOf(c)&&(d=d.substring(c.length));return goog.json.parse(d)}};
goog.net.XhrIo.prototype.getResponse=function(){try{if(!this.xhr_)return null;if("response"in this.xhr_)return this.xhr_.response;switch(this.responseType_){case goog.net.XhrIo.ResponseType.DEFAULT:case goog.net.XhrIo.ResponseType.TEXT:return this.xhr_.responseText;case goog.net.XhrIo.ResponseType.ARRAY_BUFFER:if("mozResponseArrayBuffer"in this.xhr_)return this.xhr_.mozResponseArrayBuffer}goog.log.error(this.logger_,"Response type "+this.responseType_+" is not supported on this browser");return null}catch(c){return goog.log.fine(this.logger_,
"Can not get response: "+c.message),null}};goog.net.XhrIo.prototype.getResponseHeader=function(c){return this.xhr_&&this.isComplete()?this.xhr_.getResponseHeader(c):void 0};goog.net.XhrIo.prototype.getAllResponseHeaders=function(){return this.xhr_&&this.isComplete()?this.xhr_.getAllResponseHeaders():""};goog.net.XhrIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.XhrIo.prototype.getLastError=function(){return goog.isString(this.lastError_)?this.lastError_:String(this.lastError_)};
goog.net.XhrIo.prototype.formatMsg_=function(c){return c+" ["+this.lastMethod_+" "+this.lastUri_+" "+this.getStatus()+"]"};goog.debug.entryPointRegistry.register(function(c){goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_=c(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_)});silex.Helper=function(){};silex.Helper.loadTemplateFile=function(c,d,e,f){goog.net.XhrIo.send(c,function(c){c=c.target.getResponse();d.innerHTML=c;e&&e.call(f)})};silex.Helper.resolveTemplate=function(c,d,e){d=Handlebars.compile(d);c.innerHTML=d(e)};
silex.Helper.getRelativePath=function(c,d){if(0!=d.indexOf("http")||0!=c.indexOf("http"))return console.warn("Warning: the URL is not absolute ",c,d),c;var e=c.split("/"),f=d.split("/"),h=e[e.length-1];e.pop();f.pop();e.shift();e.shift();f.shift();f.shift();if(f[0]!=e[0])return console.warn("Warning: the URL is not on the same domain as the base url ",c),c;for(;0<f.length&&0<e.length&&f[0]==e[0];)f.shift(),e.shift();for(var k="",l=0;l<f.length;l++)k+="../";k+=e.join("/")+"/"+h;console.log("getRelativePath ",
c,d,k);return k};silex.Helper.getAbsolutePath=function(c,d){console.log("getAbsolutePath ",c,d,goog.Uri.resolve(d,c).toString());return goog.Uri.resolve(d,c).toString()};silex.Helper.styleToString=function(c){var d="";goog.object.forEach(c,function(c,f,h){c&&(d+=goog.string.toSelectorCase(f)+": "+c+"; ")});return d};silex.Helper.stringToStyle=function(c){return goog.style.parseStyleAttribute(c)};
silex.Helper.hexToRgba=function(c){if(0!==c.indexOf("#"))return c;if(9!==c.length)return console.error("Error in length "+c+" - "+c.length),c;hexArr=silex.Helper.hexToArray(c);r=hexArr[0];g=hexArr[1];b=hexArr[2];a=hexArr[3];return"rgba("+r+","+g+","+b+","+a+")"};silex.Helper.hexToArray=function(c){if(0!==c.indexOf("#"))return c;c=c.replace("#","");r=parseInt(c.substring(0,2),16);g=parseInt(c.substring(2,4),16);b=parseInt(c.substring(4,6),16);a=parseInt(c.substring(6,8),16)/255;return[r,g,b,a]};
silex.Helper.rgbaToHex=function(c){if(0!==c.indexOf("rgb"))return c;rgbaArr=silex.Helper.rgbaToArray(c);r=rgbaArr[0].toString(16);2>r.length&&(r="0"+r);g=rgbaArr[1].toString(16);2>g.length&&(g="0"+g);b=rgbaArr[2].toString(16);2>b.length&&(b="0"+b);a=rgbaArr[3].toString(16);2>a.length&&(a="0"+a);return"#"+(r+g+b+a)};
silex.Helper.rgbaToArray=function(c){if(0!==c.indexOf("rgb"))return c;c=0!==c.indexOf("rgba")?c.replace("rgb",""):c.replace("rgba","");c=c.replace(" ","");rgbaArr=c.substring(1,c.length-1).split(",");4>rgbaArr.length&&rgbaArr.push("1");r=parseInt(rgbaArr[0]);g=parseInt(rgbaArr[1]);b=parseInt(rgbaArr[2]);a=parseInt(255*rgbaArr[3]);return[r,g,b,a]};silex.model.Page=function(c,d,e,f,h,k,l,m){this.name=c;this.workspace=d;this.menu=e;this.stage=f;this.pageTool=h;this.propertiesTool=k;this.textEditor=l;this.fileExplorer=m};silex.model.Page.PAGE_CLASS="silex-page";silex.model.Page.pages=[];silex.model.Page.getPages=function(){return silex.model.Page.pages};silex.model.Page.addPage=function(c){silex.model.Page.pages.push(c)};silex.model.Page.removePage=function(c){c=silex.model.Page.getPageIndex(c);silex.model.Page.pages.splice(c,1)};
silex.model.Page.getPageByName=function(c){var d=null,e=silex.model.Page.getPages();goog.array.forEach(e,function(e){e.name==c&&(d=e)});return d};silex.model.Page.getPageIndex=function(c){var d=-1,e=0,f=silex.model.Page.getPages();goog.array.forEach(f,function(f){c.name==f.name?d=e:e++});return d};silex.model.Page.getPagesForElement=function(c){var d=[],e=silex.model.Page.getPages();goog.array.forEach(e,function(e){goog.dom.classes.has(c,e.name)&&d.push(e)},this);return d};
silex.model.Page.prototype.open=function(){this.stage.openPage(this);this.pageTool.setSelectedItem(this,!1)};silex.model.Page.prototype.attach=function(){silex.model.Page.addPage(this);this.stage.addPage(this);var c=silex.model.Page.getPages();this.pageTool.setPages(c);this.propertiesTool.setPages(c)};silex.model.Page.prototype.detach=function(){silex.model.Page.removePage(this);this.stage.removePage(this);var c=silex.model.Page.getPages();this.pageTool.setPages(c);this.propertiesTool.setPages(c)};
silex.model.Page.prototype.rename=function(c){this.stage.renamePage(this,c);this.name=c;c=silex.model.Page.getPages();this.pageTool.setPages(c);this.propertiesTool.setPages(c)};silex.model.Page.prototype.addComponent=function(c){goog.dom.classes.has(c.element,this.name)||goog.dom.classes.add(c.element,this.name);goog.dom.classes.has(c.element,silex.model.Page.PAGE_CLASS)||goog.dom.classes.add(c.element,silex.model.Page.PAGE_CLASS)};
silex.model.Page.prototype.removeComponent=function(c){goog.dom.classes.has(c.element,this.name)&&goog.dom.classes.remove(c.element,this.name);0==silex.model.Page.getPagesForElement(c.element).length&&goog.dom.classes.has(c.element,silex.model.Page.PAGE_CLASS)&&goog.dom.classes.remove(c.element,silex.model.Page.PAGE_CLASS)};goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(c){var d={};c=String(c);var e=goog.color.prependHashIfNecessaryHelper(c);if(goog.color.isValidHexColor_(e))return d.hex=goog.color.normalizeHex(e),d.type="hex",d;e=goog.color.isValidRgbColor_(c);if(e.length)return d.hex=goog.color.rgbArrayToHex(e),d.type="rgb",d;if(goog.color.names&&(e=goog.color.names[c.toLowerCase()]))return d.hex=e,d.type="named",d;throw Error(c+" is not a valid color string");};
goog.color.isValidColor=function(c){var d=goog.color.prependHashIfNecessaryHelper(c);return!!(goog.color.isValidHexColor_(d)||goog.color.isValidRgbColor_(c).length||goog.color.names&&goog.color.names[c.toLowerCase()])};goog.color.parseRgb=function(c){var d=goog.color.isValidRgbColor_(c);if(!d.length)throw Error(c+" is not a valid RGB color");return d};goog.color.hexToRgbStyle=function(c){return goog.color.rgbStyle_(goog.color.hexToRgb(c))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(c){if(!goog.color.isValidHexColor_(c))throw Error("'"+c+"' is not a valid hex color");4==c.length&&(c=c.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return c.toLowerCase()};goog.color.hexToRgb=function(c){c=goog.color.normalizeHex(c);var d=parseInt(c.substr(1,2),16),e=parseInt(c.substr(3,2),16);c=parseInt(c.substr(5,2),16);return[d,e,c]};
goog.color.rgbToHex=function(c,d,e){c=Number(c);d=Number(d);e=Number(e);if(isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d||isNaN(e)||0>e||255<e)throw Error('"('+c+","+d+","+e+'") is not a valid RGB color');c=goog.color.prependZeroIfNecessaryHelper(c.toString(16));d=goog.color.prependZeroIfNecessaryHelper(d.toString(16));e=goog.color.prependZeroIfNecessaryHelper(e.toString(16));return"#"+c+d+e};goog.color.rgbArrayToHex=function(c){return goog.color.rgbToHex(c[0],c[1],c[2])};
goog.color.rgbToHsl=function(c,d,e){c/=255;d/=255;e/=255;var f=Math.max(c,d,e),h=Math.min(c,d,e),k=0,l=0,m=0.5*(f+h);f!=h&&(f==c?k=60*(d-e)/(f-h):f==d?k=60*(e-c)/(f-h)+120:f==e&&(k=60*(c-d)/(f-h)+240),l=0<m&&0.5>=m?(f-h)/(2*m):(f-h)/(2-2*m));return[Math.round(k+360)%360,l,m]};goog.color.rgbArrayToHsl=function(c){return goog.color.rgbToHsl(c[0],c[1],c[2])};goog.color.hueToRgb_=function(c,d,e){0>e?e+=1:1<e&&(e-=1);return 1>6*e?c+6*(d-c)*e:1>2*e?d:2>3*e?c+6*(d-c)*(2/3-e):c};
goog.color.hslToRgb=function(c,d,e){var f=0,h=0,k=0;c/=360;if(0==d)f=h=k=255*e;else var l=k=0,l=0.5>e?e*(1+d):e+d-d*e,k=2*e-l,f=255*goog.color.hueToRgb_(k,l,c+1/3),h=255*goog.color.hueToRgb_(k,l,c),k=255*goog.color.hueToRgb_(k,l,c-1/3);return[Math.round(f),Math.round(h),Math.round(k)]};goog.color.hslArrayToRgb=function(c){return goog.color.hslToRgb(c[0],c[1],c[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(c){return goog.color.validHexColorRe_.test(c)};
goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(c){return goog.color.normalizedHexColorRe_.test(c)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(c){var d=c.match(goog.color.rgbColorRe_);if(d){c=Number(d[1]);var e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d)return[c,e,d]}return[]};
goog.color.prependZeroIfNecessaryHelper=function(c){return 1==c.length?"0"+c:c};goog.color.prependHashIfNecessaryHelper=function(c){return"#"==c.charAt(0)?c:"#"+c};goog.color.rgbStyle_=function(c){return"rgb("+c.join(",")+")"};
goog.color.hsvToRgb=function(c,d,e){var f=0,h=0,k=0;if(0==d)k=h=f=e;else{var l=Math.floor(c/60),m=c/60-l;c=e*(1-d);var n=e*(1-d*m);d=e*(1-d*(1-m));switch(l){case 1:f=n;h=e;k=c;break;case 2:f=c;h=e;k=d;break;case 3:f=c;h=n;k=e;break;case 4:f=d;h=c;k=e;break;case 5:f=e;h=c;k=n;break;case 6:case 0:f=e,h=d,k=c}}return[Math.floor(f),Math.floor(h),Math.floor(k)]};
goog.color.rgbToHsv=function(c,d,e){var f=Math.max(Math.max(c,d),e),h=Math.min(Math.min(c,d),e);if(h==f)h=c=0;else{var k=f-h,h=k/f;c=60*(c==f?(d-e)/k:d==f?2+(e-c)/k:4+(c-d)/k);0>c&&(c+=360);360<c&&(c-=360)}return[c,h,f]};goog.color.rgbArrayToHsv=function(c){return goog.color.rgbToHsv(c[0],c[1],c[2])};goog.color.hsvArrayToRgb=function(c){return goog.color.hsvToRgb(c[0],c[1],c[2])};goog.color.hexToHsl=function(c){c=goog.color.hexToRgb(c);return goog.color.rgbToHsl(c[0],c[1],c[2])};
goog.color.hslToHex=function(c,d,e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(c,d,e))};goog.color.hslArrayToHex=function(c){return goog.color.rgbArrayToHex(goog.color.hslToRgb(c[0],c[1],c[2]))};goog.color.hexToHsv=function(c){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(c))};goog.color.hsvToHex=function(c,d,e){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(c,d,e))};goog.color.hsvArrayToHex=function(c){return goog.color.hsvToHex(c[0],c[1],c[2])};
goog.color.hslDistance=function(c,d){var e,f;e=0.5>=c[2]?c[1]*c[2]:c[1]*(1-c[2]);f=0.5>=d[2]?d[1]*d[2]:d[1]*(1-d[2]);return(c[2]-d[2])*(c[2]-d[2])+e*e+f*f-2*e*f*Math.cos(2*(c[0]/360-d[0]/360)*Math.PI)};goog.color.blend=function(c,d,e){e=goog.math.clamp(e,0,1);return[Math.round(e*c[0]+(1-e)*d[0]),Math.round(e*c[1]+(1-e)*d[1]),Math.round(e*c[2]+(1-e)*d[2])]};goog.color.darken=function(c,d){return goog.color.blend([0,0,0],c,d)};
goog.color.lighten=function(c,d){return goog.color.blend([255,255,255],c,d)};goog.color.highContrast=function(c,d){for(var e=[],f=0;f<d.length;f++)e.push({color:d[f],diff:goog.color.yiqBrightnessDiff_(d[f],c)+goog.color.colorDiff_(d[f],c)});e.sort(function(c,d){return d.diff-c.diff});return e[0].color};goog.color.yiqBrightness_=function(c){return Math.round((299*c[0]+587*c[1]+114*c[2])/1E3)};goog.color.yiqBrightnessDiff_=function(c,d){return Math.abs(goog.color.yiqBrightness_(c)-goog.color.yiqBrightness_(d))};
goog.color.colorDiff_=function(c,d){return Math.abs(c[0]-d[0])+Math.abs(c[1]-d[1])+Math.abs(c[2]-d[2])};goog.ui.ColorMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)};goog.inherits(goog.ui.ColorMenuButtonRenderer,goog.ui.MenuButtonRenderer);goog.addSingletonGetter(goog.ui.ColorMenuButtonRenderer);goog.ui.ColorMenuButtonRenderer.CSS_CLASS="goog-color-menu-button";goog.ui.ColorMenuButtonRenderer.prototype.createCaption=function(c,d){return goog.ui.ColorMenuButtonRenderer.superClass_.createCaption.call(this,goog.ui.ColorMenuButtonRenderer.wrapCaption(c,d),d)};
goog.ui.ColorMenuButtonRenderer.wrapCaption=function(c,d){return d.createDom("div",goog.ui.ColorMenuButtonRenderer.CSS_CLASS+"-indicator",c)};goog.ui.ColorMenuButtonRenderer.prototype.setValue=function(c,d){c&&goog.ui.ColorMenuButtonRenderer.setCaptionValue(this.getContentElement(c),d)};goog.ui.ColorMenuButtonRenderer.setCaptionValue=function(c,d){if(c&&c.firstChild){var e;e=d&&goog.color.isValidColor(d)?goog.color.parse(d).hex:null;c.firstChild.style.borderBottomColor=e||(goog.userAgent.IE?"":"transparent")}};
goog.ui.ColorMenuButtonRenderer.prototype.initializeDom=function(c){this.setValue(c.getElement(),c.getValue());goog.dom.classes.add(c.getElement(),goog.ui.ColorMenuButtonRenderer.CSS_CLASS);goog.ui.ColorMenuButtonRenderer.superClass_.initializeDom.call(this,c)};goog.functions={};goog.functions.constant=function(c){return function(){return c}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(c,d){return c};goog.functions.error=function(c){return function(){throw Error(c);}};goog.functions.fail=function(c){return function(){throw c;}};
goog.functions.lock=function(c,d){d=d||0;return function(){return c.apply(this,Array.prototype.slice.call(arguments,0,d))}};goog.functions.withReturnValue=function(c,d){return goog.functions.sequence(c,goog.functions.constant(d))};goog.functions.compose=function(c,d){var e=arguments,f=e.length;return function(){var c;f&&(c=e[f-1].apply(this,arguments));for(var d=f-2;0<=d;d--)c=e[d].call(this,c);return c}};
goog.functions.sequence=function(c){var d=arguments,e=d.length;return function(){for(var c,h=0;h<e;h++)c=d[h].apply(this,arguments);return c}};goog.functions.and=function(c){var d=arguments,e=d.length;return function(){for(var c=0;c<e;c++)if(!d[c].apply(this,arguments))return!1;return!0}};goog.functions.or=function(c){var d=arguments,e=d.length;return function(){for(var c=0;c<e;c++)if(d[c].apply(this,arguments))return!0;return!1}};
goog.functions.not=function(c){return function(){return!c.apply(this,arguments)}};goog.functions.create=function(c,d){var e=function(){};e.prototype=c.prototype;e=new e;c.apply(e,Array.prototype.slice.call(arguments,1));return e};goog.ui.ColorButtonRenderer=function(){goog.ui.ColorMenuButtonRenderer.call(this);this.createDropdown=goog.functions.NULL};goog.inherits(goog.ui.ColorButtonRenderer,goog.ui.ColorMenuButtonRenderer);goog.addSingletonGetter(goog.ui.ColorButtonRenderer);goog.ui.ColorButtonRenderer.CSS_CLASS="goog-color-button";
goog.ui.ColorButtonRenderer.prototype.createCaption=function(c,d){var e=goog.ui.ColorButtonRenderer.superClass_.createCaption.call(this,c,d);goog.dom.classes.add(e,goog.ui.ColorButtonRenderer.CSS_CLASS);return e};goog.ui.ColorButtonRenderer.prototype.initializeDom=function(c){goog.ui.ColorButtonRenderer.superClass_.initializeDom.call(this,c);goog.dom.classes.add(c.getElement(),goog.ui.ColorButtonRenderer.CSS_CLASS)};goog.ui.ColorButton=function(c,d,e){goog.ui.Button.call(this,c,d||goog.ui.ColorButtonRenderer.getInstance(),e)};goog.inherits(goog.ui.ColorButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.ColorButtonRenderer.CSS_CLASS,function(){return new goog.ui.ColorButton(null)});goog.ui.CustomButton=function(c,d,e){goog.ui.Button.call(this,c,d||goog.ui.CustomButtonRenderer.getInstance(),e)};goog.inherits(goog.ui.CustomButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.CustomButtonRenderer.CSS_CLASS,function(){return new goog.ui.CustomButton(null)});goog.events.InputHandler=function(c){goog.events.EventTarget.call(this);this.element_=c;c=goog.userAgent.IE||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("531")&&"TEXTAREA"==c.tagName;this.eventHandler_=new goog.events.EventHandler(this);this.eventHandler_.listen(this.element_,c?["keydown","paste","cut","drop","input"]:"input",this)};goog.inherits(goog.events.InputHandler,goog.events.EventTarget);goog.events.InputHandler.EventType={INPUT:"input"};
goog.events.InputHandler.prototype.timer_=null;
goog.events.InputHandler.prototype.handleEvent=function(c){if("input"==c.type)this.cancelTimerIfSet_(),goog.userAgent.OPERA&&this.element_!=goog.dom.getOwnerDocument(this.element_).activeElement||this.dispatchEvent(this.createInputEvent_(c));else if("keydown"!=c.type||goog.events.KeyCodes.isTextModifyingKeyEvent(c)){var d="keydown"==c.type?this.element_.value:null;goog.userAgent.IE&&c.keyCode==goog.events.KeyCodes.WIN_IME&&(d=null);var e=this.createInputEvent_(c);this.cancelTimerIfSet_();this.timer_=
goog.Timer.callOnce(function(){this.timer_=null;this.element_.value!=d&&this.dispatchEvent(e)},0,this)}};goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)};goog.events.InputHandler.prototype.createInputEvent_=function(c){c=new goog.events.BrowserEvent(c.getBrowserEvent());c.type=goog.events.InputHandler.EventType.INPUT;return c};
goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose();this.cancelTimerIfSet_();delete this.element_};goog.ui.HsvPalette=function(c,d,e){goog.ui.Component.call(this,c);this.setColor_(d||"#f00");this.className=e||"goog-hsv-palette";this.document_=this.getDomHelper().getDocument()};goog.inherits(goog.ui.HsvPalette,goog.ui.Component);goog.ui.HsvPalette.prototype.getColor=function(){return this.color_};goog.ui.HsvPalette.prototype.getAlpha=function(){return 1};
goog.ui.HsvPalette.prototype.updateInput=function(){var c;try{c=goog.color.parse(this.inputElement.value).hex}catch(d){}this.color_!=c&&(this.inputElement.value=this.color_)};goog.ui.HsvPalette.prototype.setColor=function(c){c!=this.color_&&(this.setColor_(c),this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION))};
goog.ui.HsvPalette.prototype.setColor_=function(c){c=goog.color.parse(c).hex;var d=goog.color.hexToRgb(c);this.hsv_=goog.color.rgbArrayToHsv(d);this.hsv_[0]/=360;this.color_=c};goog.ui.HsvPalette.prototype.setHsv=function(c,d,e){if(null!=c||null!=d||null!=e)this.setHsv_(c,d,e),this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.HsvPalette.prototype.setHsv_=function(c,d,e){this.hsv_[0]=null!=c?c:this.hsv_[0];this.hsv_[1]=null!=d?d:this.hsv_[1];this.hsv_[2]=null!=e?e:this.hsv_[2];this.color_=goog.color.hsvArrayToHex([360*this.hsv_[0],this.hsv_[1],this.hsv_[2]])};goog.ui.HsvPalette.prototype.canDecorate=function(c){return!1};
goog.ui.HsvPalette.prototype.createDom=function(){var c=this.getDomHelper(),d=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")?" "+(this.className+"-noalpha"):"",e=c.createDom(goog.dom.TagName.DIV,this.className+"-hs-backdrop");this.hsHandleEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-hs-handle");this.hsImageEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-hs-image",this.hsHandleEl_);this.valueBackgroundImageElement=c.createDom(goog.dom.TagName.DIV,this.className+"-v-image");
this.vHandleEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-v-handle");this.swatchElement=c.createDom(goog.dom.TagName.DIV,this.className+"-swatch");this.inputElement=c.createDom("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var f=c.createDom("label",null,this.inputElement),c=c.createDom(goog.dom.TagName.DIV,this.className+d,e,this.hsImageEl_,this.valueBackgroundImageElement,this.vHandleEl_,this.swatchElement,f);this.setElementInternal(c)};
goog.ui.HsvPalette.prototype.enterDocument=function(){goog.ui.HsvPalette.superClass_.enterDocument.call(this);this.updateUi();var c=this.getHandler();c.listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDown,!1,this);this.inputHandler_||(this.inputHandler_=new goog.events.InputHandler(this.inputElement));c.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.handleInput,!1,this)};
goog.ui.HsvPalette.prototype.disposeInternal=function(){goog.ui.HsvPalette.superClass_.disposeInternal.call(this);delete this.hsImageEl_;delete this.hsHandleEl_;delete this.valueBackgroundImageElement;delete this.vHandleEl_;delete this.swatchElement;delete this.inputElement;this.inputHandler_&&(this.inputHandler_.dispose(),delete this.inputHandler_);goog.events.unlistenByKey(this.mouseMoveListener_);goog.events.unlistenByKey(this.mouseUpListener_)};
goog.ui.HsvPalette.prototype.updateUi=function(){if(this.isInDocument()){var c=this.hsv_[1],d=this.hsv_[2],e=this.hsImageEl_.offsetWidth*this.hsv_[0];this.isRightToLeft()&&(e=this.hsImageEl_.offsetWidth-e);var f=Math.ceil(this.hsHandleEl_.offsetWidth/2),e=e-f,c=this.hsImageEl_.offsetHeight*(1-c),c=c-Math.ceil(this.hsHandleEl_.offsetHeight/2);goog.style.bidi.setPosition(this.hsHandleEl_,e,c,this.isRightToLeft());c=this.valueBackgroundImageElement.offsetTop-Math.floor(this.vHandleEl_.offsetHeight/2)+
this.valueBackgroundImageElement.offsetHeight*((255-d)/255);this.vHandleEl_.style.top=c+"px";goog.style.setOpacity(this.hsImageEl_,d/255);goog.style.setStyle(this.valueBackgroundImageElement,"background-color",goog.color.hsvToHex(360*this.hsv_[0],this.hsv_[1],255));goog.style.setStyle(this.swatchElement,"background-color",this.color_);goog.style.setStyle(this.swatchElement,"color",127.5<this.hsv_[2]?"#000":"#fff");this.updateInput()}};
goog.ui.HsvPalette.prototype.handleMouseDown=function(c){if(c.target==this.valueBackgroundImageElement||c.target==this.vHandleEl_){var d=goog.style.getBounds(this.valueBackgroundImageElement);this.handleMouseMoveV_(d,c);this.mouseMoveListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveV_,this,d));this.mouseUpListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)}else if(c.target==this.hsImageEl_||
c.target==this.hsHandleEl_)d=goog.style.getBounds(this.hsImageEl_),this.handleMouseMoveHs_(d,c),this.mouseMoveListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveHs_,this,d)),this.mouseUpListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)};
goog.ui.HsvPalette.prototype.handleMouseMoveV_=function(c,d){d.preventDefault();var e=this.getDomHelper().getDocumentScroll(),e=Math.min(Math.max(e.y+d.clientY,c.top),c.top+c.height),e=Math.round(255*(c.top+c.height-e)/c.height);this.setHsv(null,null,e)};
goog.ui.HsvPalette.prototype.handleMouseMoveHs_=function(c,d){d.preventDefault();var e=this.getDomHelper().getDocumentScroll(),f=(Math.min(Math.max(e.x+d.clientX,c.left),c.left+c.width)-c.left)/c.width,e=(-Math.min(Math.max(e.y+d.clientY,c.top),c.top+c.height)+c.top+c.height)/c.height;this.setHsv(f,e,null)};goog.ui.HsvPalette.prototype.handleMouseUp=function(c){goog.events.unlistenByKey(this.mouseMoveListener_);goog.events.unlistenByKey(this.mouseUpListener_)};
goog.ui.HsvPalette.prototype.handleInput=function(c){/^#[0-9a-f]{6}$/i.test(this.inputElement.value)&&this.setColor(this.inputElement.value)};goog.color.alpha={};
goog.color.alpha.parse=function(c){var d={};c=String(c);var e=goog.color.prependHashIfNecessaryHelper(c);if(goog.color.alpha.isValidAlphaHexColor_(e))return d.hex=goog.color.alpha.normalizeAlphaHex_(e),d.type="hex",d;e=goog.color.alpha.isValidRgbaColor_(c);if(e.length)return d.hex=goog.color.alpha.rgbaArrayToHex(e),d.type="rgba",d;e=goog.color.alpha.isValidHslaColor_(c);if(e.length)return d.hex=goog.color.alpha.hslaArrayToHex(e),d.type="hsla",d;throw Error(c+" is not a valid color string");};
goog.color.alpha.hexToRgbaStyle=function(c){return goog.color.alpha.rgbaStyle_(goog.color.alpha.hexToRgba(c))};goog.color.alpha.extractHexColor=function(c){if(goog.color.alpha.isValidAlphaHexColor_(c))return c=goog.color.prependHashIfNecessaryHelper(c),goog.color.alpha.normalizeAlphaHex_(c).substring(0,7);throw Error(c+" is not a valid 8-hex color string");};
goog.color.alpha.extractAlpha=function(c){if(goog.color.alpha.isValidAlphaHexColor_(c))return c=goog.color.prependHashIfNecessaryHelper(c),goog.color.alpha.normalizeAlphaHex_(c).substring(7,9);throw Error(c+" is not a valid 8-hex color string");};goog.color.alpha.hexQuadrupletRe_=/#(.)(.)(.)(.)/;
goog.color.alpha.normalizeAlphaHex_=function(c){if(!goog.color.alpha.isValidAlphaHexColor_(c))throw Error("'"+c+"' is not a valid alpha hex color");5==c.length&&(c=c.replace(goog.color.alpha.hexQuadrupletRe_,"#$1$1$2$2$3$3$4$4"));return c.toLowerCase()};goog.color.alpha.hexToRgba=function(c){c=goog.color.alpha.normalizeAlphaHex_(c);var d=parseInt(c.substr(1,2),16),e=parseInt(c.substr(3,2),16),f=parseInt(c.substr(5,2),16);c=parseInt(c.substr(7,2),16);return[d,e,f,c/255]};
goog.color.alpha.rgbaToHex=function(c,d,e,f){var h=Math.floor(255*f);if(isNaN(h)||0>h||255<h)throw Error('"('+c+","+d+","+e+","+f+'") is not a valid RGBA color');f=goog.color.prependZeroIfNecessaryHelper(h.toString(16));return goog.color.rgbToHex(c,d,e)+f};
goog.color.alpha.hslaToHex=function(c,d,e,f){var h=Math.floor(255*f);if(isNaN(h)||0>h||255<h)throw Error('"('+c+","+d+","+e+","+f+'") is not a valid HSLA color');f=goog.color.prependZeroIfNecessaryHelper(h.toString(16));return goog.color.hslToHex(c,d/100,e/100)+f};goog.color.alpha.rgbaArrayToHex=function(c){return goog.color.alpha.rgbaToHex(c[0],c[1],c[2],c[3])};
goog.color.alpha.rgbaToRgbaStyle=function(c,d,e,f){if(isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d||isNaN(e)||0>e||255<e||isNaN(f)||0>f||1<f)throw Error('"('+c+","+d+","+e+","+f+')" is not a valid RGBA color');return goog.color.alpha.rgbaStyle_([c,d,e,f])};goog.color.alpha.rgbaArrayToRgbaStyle=function(c){return goog.color.alpha.rgbaToRgbaStyle(c[0],c[1],c[2],c[3])};goog.color.alpha.hslaArrayToHex=function(c){return goog.color.alpha.hslaToHex(c[0],c[1],c[2],c[3])};
goog.color.alpha.hslaArrayToRgbaStyle=function(c){return goog.color.alpha.hslaToRgbaStyle(c[0],c[1],c[2],c[3])};goog.color.alpha.hslaToRgbaStyle=function(c,d,e,f){return goog.color.alpha.rgbaStyle_(goog.color.alpha.hslaToRgba(c,d,e,f))};goog.color.alpha.hslaToRgba=function(c,d,e,f){return goog.color.hslToRgb(c,d/100,e/100).concat(f)};goog.color.alpha.rgbaToHsla=function(c,d,e,f){return goog.color.rgbToHsl(c,d,e).concat(f)};
goog.color.alpha.rgbaArrayToHsla=function(c){return goog.color.alpha.rgbaToHsla(c[0],c[1],c[2],c[3])};goog.color.alpha.validAlphaHexColorRe_=/^#(?:[0-9a-f]{4}){1,2}$/i;goog.color.alpha.isValidAlphaHexColor_=function(c){return goog.color.alpha.validAlphaHexColorRe_.test(c)};goog.color.alpha.normalizedAlphaHexColorRe_=/^#[0-9a-f]{8}$/;goog.color.alpha.isNormalizedAlphaHexColor_=function(c){return goog.color.alpha.normalizedAlphaHexColorRe_.test(c)};goog.color.alpha.rgbaColorRe_=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;
goog.color.alpha.hslaColorRe_=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\%,\s?(0|[1-9]\d{0,2})\%,\s?(0|1|0\.\d{0,10})\)$/i;goog.color.alpha.isValidRgbaColor_=function(c){var d=c.match(goog.color.alpha.rgbaColorRe_);if(d){c=Number(d[1]);var e=Number(d[2]),f=Number(d[3]),d=Number(d[4]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&1>=d)return[c,e,f,d]}return[]};
goog.color.alpha.isValidHslaColor_=function(c){var d=c.match(goog.color.alpha.hslaColorRe_);if(d){c=Number(d[1]);var e=Number(d[2]),f=Number(d[3]),d=Number(d[4]);if(0<=c&&360>=c&&0<=e&&100>=e&&0<=f&&100>=f&&0<=d&&1>=d)return[c,e,f,d]}return[]};goog.color.alpha.rgbaStyle_=function(c){return"rgba("+c.join(",")+")"};goog.color.alpha.hsvaToHex=function(c,d,e,f){f=Math.floor(255*f);return goog.color.hsvArrayToHex([c,d,e])+goog.color.prependZeroIfNecessaryHelper(f.toString(16))};
goog.color.alpha.hsvaArrayToHex=function(c){return goog.color.alpha.hsvaToHex(c[0],c[1],c[2],c[3])};goog.ui.HsvaPalette=function(c,d,e,f){goog.ui.HsvPalette.call(this,c,d,f);this.alpha_=goog.isDef(e)?e:1;this.className=f||"goog-hsva-palette";this.document_=c?c.getDocument():goog.dom.getDomHelper().getDocument()};goog.inherits(goog.ui.HsvaPalette,goog.ui.HsvPalette);goog.ui.HsvaPalette.prototype.getAlpha=function(){return this.alpha_};goog.ui.HsvaPalette.prototype.setAlpha=function(c){this.setColorAlphaHelper_(this.color_,c)};
goog.ui.HsvaPalette.prototype.setColor=function(c){this.setColorAlphaHelper_(c,1)};goog.ui.HsvaPalette.prototype.getColorRgbaHex=function(){var c=Math.floor(255*this.alpha_).toString(16);return this.color_+(1==c.length?"0"+c:c)};goog.ui.HsvaPalette.prototype.setColorRgbaHex=function(c){c=goog.ui.HsvaPalette.parseColorRgbaHex_(c);this.setColorAlphaHelper_(c[0],c[1])};
goog.ui.HsvaPalette.prototype.setColorAlphaHelper_=function(c,d){var e=this.color_!=c,f=this.alpha_!=d;this.alpha_=d;this.color_=c;e&&goog.ui.HsvaPalette.superClass_.setColor_.call(this,c);if(e||f)this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.HsvaPalette.prototype.createDom=function(){goog.ui.HsvaPalette.superClass_.createDom.call(this);var c=this.getDomHelper();this.aImageEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-a-image");this.aHandleEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-a-handle");this.swatchBackdropEl_=c.createDom(goog.dom.TagName.DIV,this.className+"-swatch-backdrop");c.appendChild(this.element_,this.aImageEl_);c.appendChild(this.element_,this.aHandleEl_);c.appendChild(this.element_,this.swatchBackdropEl_)};
goog.ui.HsvaPalette.prototype.disposeInternal=function(){goog.ui.HsvaPalette.superClass_.disposeInternal.call(this);delete this.aImageEl_;delete this.aHandleEl_;delete this.swatchBackdropEl_};
goog.ui.HsvaPalette.prototype.updateUi=function(){goog.ui.HsvaPalette.superClass_.updateUi.call(this);if(this.isInDocument()){var c=255*this.alpha_;this.aHandleEl_.style.top=this.aImageEl_.offsetTop-Math.floor(this.aHandleEl_.offsetHeight/2)+this.aImageEl_.offsetHeight*((255-c)/255)+"px";this.aImageEl_.style.backgroundColor=this.color_;goog.style.setOpacity(this.swatchElement,c/255)}};
goog.ui.HsvaPalette.prototype.updateInput=function(){goog.array.equals([this.color_,this.alpha_],goog.ui.HsvaPalette.parseUserInput_(this.inputElement.value))||(this.inputElement.value=this.getColorRgbaHex())};
goog.ui.HsvaPalette.prototype.handleMouseDown=function(c){goog.ui.HsvaPalette.superClass_.handleMouseDown.call(this,c);if(c.target==this.aImageEl_||c.target==this.aHandleEl_){var d=goog.style.getBounds(this.valueBackgroundImageElement);this.handleMouseMoveA_(d,c);this.mouseMoveListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveA_,this,d));this.mouseUpListener_=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,
!1,this)}};goog.ui.HsvaPalette.prototype.handleMouseMoveA_=function(c,d){d.preventDefault();var e=this.getDomHelper().getDocumentScroll(),e=(c.top+c.height-Math.min(Math.max(e.y+d.clientY,c.top),c.top+c.height))/c.height;this.setAlpha(e)};goog.ui.HsvaPalette.prototype.handleInput=function(c){(c=goog.ui.HsvaPalette.parseUserInput_(this.inputElement.value))&&this.setColorAlphaHelper_(c[0],c[1])};
goog.ui.HsvaPalette.parseUserInput_=function(c){return/^#[0-9a-f]{8}$/i.test(c)?goog.ui.HsvaPalette.parseColorRgbaHex_(c):/^#[0-9a-f]{6}$/i.test(c)?[c,1]:null};goog.ui.HsvaPalette.parseColorRgbaHex_=function(c){c=goog.color.alpha.parse(c).hex;return[goog.color.alpha.extractHexColor(c),parseInt(goog.color.alpha.extractAlpha(c),16)/255]};goog.ui.TabRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.TabRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.TabRenderer);goog.ui.TabRenderer.CSS_CLASS="goog-tab";goog.ui.TabRenderer.prototype.getCssClass=function(){return goog.ui.TabRenderer.CSS_CLASS};goog.ui.TabRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB};
goog.ui.TabRenderer.prototype.createDom=function(c){var d=goog.ui.TabRenderer.superClass_.createDom.call(this,c);(c=c.getTooltip())&&this.setTooltip(d,c);return d};goog.ui.TabRenderer.prototype.decorate=function(c,d){d=goog.ui.TabRenderer.superClass_.decorate.call(this,c,d);var e=this.getTooltip(d);e&&c.setTooltipInternal(e);c.isSelected()&&(e=c.getParent())&&goog.isFunction(e.setSelectedTab)&&(c.setState(goog.ui.Component.State.SELECTED,!1),e.setSelectedTab(c));return d};
goog.ui.TabRenderer.prototype.getTooltip=function(c){return c.title||""};goog.ui.TabRenderer.prototype.setTooltip=function(c,d){c&&(c.title=d||"")};goog.ui.Tab=function(c,d,e){goog.ui.Control.call(this,c,d||goog.ui.TabRenderer.getInstance(),e);this.setSupportedState(goog.ui.Component.State.SELECTED,!0);this.setDispatchTransitionEvents(goog.ui.Component.State.DISABLED|goog.ui.Component.State.SELECTED,!0)};goog.inherits(goog.ui.Tab,goog.ui.Control);goog.ui.Tab.prototype.getTooltip=function(){return this.tooltip_};goog.ui.Tab.prototype.setTooltip=function(c){this.getRenderer().setTooltip(this.getElement(),c);this.setTooltipInternal(c)};
goog.ui.Tab.prototype.setTooltipInternal=function(c){this.tooltip_=c};goog.ui.registry.setDecoratorByClassName(goog.ui.TabRenderer.CSS_CLASS,function(){return new goog.ui.Tab(null)});goog.ui.TabBarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.TabBarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.TabBarRenderer);goog.ui.TabBarRenderer.CSS_CLASS="goog-tab-bar";goog.ui.TabBarRenderer.prototype.getCssClass=function(){return goog.ui.TabBarRenderer.CSS_CLASS};goog.ui.TabBarRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TAB_LIST};
goog.ui.TabBarRenderer.prototype.setStateFromClassName=function(c,d,e){this.locationByClass_||this.createLocationByClassMap_();var f=this.locationByClass_[d];f?c.setLocation(f):goog.ui.TabBarRenderer.superClass_.setStateFromClassName.call(this,c,d,e)};goog.ui.TabBarRenderer.prototype.getClassNames=function(c){var d=goog.ui.TabBarRenderer.superClass_.getClassNames.call(this,c);this.classByLocation_||this.createClassByLocationMap_();d.push(this.classByLocation_[c.getLocation()]);return d};
goog.ui.TabBarRenderer.prototype.createClassByLocationMap_=function(){var c=this.getCssClass();this.classByLocation_=goog.object.create(goog.ui.TabBar.Location.TOP,c+"-top",goog.ui.TabBar.Location.BOTTOM,c+"-bottom",goog.ui.TabBar.Location.START,c+"-start",goog.ui.TabBar.Location.END,c+"-end")};goog.ui.TabBarRenderer.prototype.createLocationByClassMap_=function(){this.classByLocation_||this.createClassByLocationMap_();this.locationByClass_=goog.object.transpose(this.classByLocation_)};goog.ui.TabBar=function(c,d,e){this.setLocation(c||goog.ui.TabBar.Location.TOP);goog.ui.Container.call(this,this.getOrientation(),d||goog.ui.TabBarRenderer.getInstance(),e);this.listenToTabEvents_()};goog.inherits(goog.ui.TabBar,goog.ui.Container);goog.ui.TabBar.Location={TOP:"top",BOTTOM:"bottom",START:"start",END:"end"};goog.ui.TabBar.prototype.autoSelectTabs_=!0;goog.ui.TabBar.prototype.selectedTab_=null;
goog.ui.TabBar.prototype.enterDocument=function(){goog.ui.TabBar.superClass_.enterDocument.call(this);this.listenToTabEvents_()};goog.ui.TabBar.prototype.disposeInternal=function(){goog.ui.TabBar.superClass_.disposeInternal.call(this);this.selectedTab_=null};goog.ui.TabBar.prototype.removeChild=function(c,d){this.deselectIfSelected(c);return goog.ui.TabBar.superClass_.removeChild.call(this,c,d)};goog.ui.TabBar.prototype.getLocation=function(){return this.location_};
goog.ui.TabBar.prototype.setLocation=function(c){this.setOrientation(goog.ui.TabBar.getOrientationFromLocation(c));this.location_=c};goog.ui.TabBar.prototype.isAutoSelectTabs=function(){return this.autoSelectTabs_};goog.ui.TabBar.prototype.setAutoSelectTabs=function(c){this.autoSelectTabs_=c};goog.ui.TabBar.prototype.setHighlightedIndexFromKeyEvent=function(c){goog.ui.TabBar.superClass_.setHighlightedIndexFromKeyEvent.call(this,c);this.autoSelectTabs_&&this.setSelectedTabIndex(c)};
goog.ui.TabBar.prototype.getSelectedTab=function(){return this.selectedTab_};goog.ui.TabBar.prototype.setSelectedTab=function(c){c?c.setSelected(!0):this.getSelectedTab()&&this.getSelectedTab().setSelected(!1)};goog.ui.TabBar.prototype.getSelectedTabIndex=function(){return this.indexOfChild(this.getSelectedTab())};goog.ui.TabBar.prototype.setSelectedTabIndex=function(c){this.setSelectedTab(this.getChildAt(c))};
goog.ui.TabBar.prototype.deselectIfSelected=function(c){if(c&&c==this.getSelectedTab()){for(var d=this.indexOfChild(c),e=d-1;c=this.getChildAt(e);e--)if(this.isSelectableTab(c)){this.setSelectedTab(c);return}for(d+=1;c=this.getChildAt(d);d++)if(this.isSelectableTab(c)){this.setSelectedTab(c);return}this.setSelectedTab(null)}};goog.ui.TabBar.prototype.isSelectableTab=function(c){return c.isVisible()&&c.isEnabled()};
goog.ui.TabBar.prototype.handleTabSelect=function(c){this.selectedTab_&&this.selectedTab_!=c.target&&this.selectedTab_.setSelected(!1);this.selectedTab_=c.target};goog.ui.TabBar.prototype.handleTabUnselect=function(c){c.target==this.selectedTab_&&(this.selectedTab_=null)};goog.ui.TabBar.prototype.handleTabDisable=function(c){this.deselectIfSelected(c.target)};goog.ui.TabBar.prototype.handleTabHide=function(c){this.deselectIfSelected(c.target)};
goog.ui.TabBar.prototype.handleFocus=function(c){this.getHighlighted()||this.setHighlighted(this.getSelectedTab()||this.getChildAt(0))};goog.ui.TabBar.prototype.listenToTabEvents_=function(){this.getHandler().listen(this,goog.ui.Component.EventType.SELECT,this.handleTabSelect).listen(this,goog.ui.Component.EventType.UNSELECT,this.handleTabUnselect).listen(this,goog.ui.Component.EventType.DISABLE,this.handleTabDisable).listen(this,goog.ui.Component.EventType.HIDE,this.handleTabHide)};
goog.ui.TabBar.getOrientationFromLocation=function(c){return c==goog.ui.TabBar.Location.START||c==goog.ui.TabBar.Location.END?goog.ui.Container.Orientation.VERTICAL:goog.ui.Container.Orientation.HORIZONTAL};goog.ui.registry.setDecoratorByClassName(goog.ui.TabBarRenderer.CSS_CLASS,function(){return new goog.ui.TabBar});goog.ui.CheckboxRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.CheckboxRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.CheckboxRenderer);goog.ui.CheckboxRenderer.CSS_CLASS="goog-checkbox";goog.ui.CheckboxRenderer.prototype.createDom=function(c){var d=c.getDomHelper().createDom("span",this.getClassNames(c).join(" "));c=c.getChecked();this.setCheckboxState(d,c);return d};
goog.ui.CheckboxRenderer.prototype.decorate=function(c,d){d=goog.ui.CheckboxRenderer.superClass_.decorate.call(this,c,d);var e=goog.dom.classes.get(d),f=goog.ui.Checkbox.State.UNCHECKED;goog.array.contains(e,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNDETERMINED))?f=goog.ui.Checkbox.State.UNDETERMINED:goog.array.contains(e,this.getClassForCheckboxState(goog.ui.Checkbox.State.CHECKED))?f=goog.ui.Checkbox.State.CHECKED:goog.array.contains(e,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNCHECKED))&&
(f=goog.ui.Checkbox.State.UNCHECKED);c.setCheckedInternal(f);goog.asserts.assert(d,"The element cannot be null.");goog.a11y.aria.setState(d,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(f));return d};goog.ui.CheckboxRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.CHECKBOX};
goog.ui.CheckboxRenderer.prototype.setCheckboxState=function(c,d){if(c){var e=this.getClassForCheckboxState(d);goog.asserts.assert(e);goog.dom.classes.has(c,e)||(goog.object.forEach(goog.ui.Checkbox.State,function(d){d=this.getClassForCheckboxState(d);goog.dom.classes.enable(c,d,d==e)},this),goog.a11y.aria.setState(c,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(d)))}};
goog.ui.CheckboxRenderer.prototype.ariaStateFromCheckState_=function(c){return c==goog.ui.Checkbox.State.UNDETERMINED?"mixed":c==goog.ui.Checkbox.State.CHECKED?"true":"false"};goog.ui.CheckboxRenderer.prototype.getCssClass=function(){return goog.ui.CheckboxRenderer.CSS_CLASS};
goog.ui.CheckboxRenderer.prototype.getClassForCheckboxState=function(c){var d=this.getStructuralCssClass();if(c==goog.ui.Checkbox.State.CHECKED)return d+"-checked";if(c==goog.ui.Checkbox.State.UNCHECKED)return d+"-unchecked";if(c==goog.ui.Checkbox.State.UNDETERMINED)return d+"-undetermined";throw Error("Invalid checkbox state: "+c);};goog.ui.Checkbox=function(c,d,e){e=e||goog.ui.CheckboxRenderer.getInstance();goog.ui.Control.call(this,null,e,d);this.checked_=goog.isDef(c)?c:goog.ui.Checkbox.State.UNCHECKED};goog.inherits(goog.ui.Checkbox,goog.ui.Control);goog.ui.Checkbox.State={CHECKED:!0,UNCHECKED:!1,UNDETERMINED:null};goog.ui.Checkbox.prototype.label_=null;goog.ui.Checkbox.prototype.getChecked=function(){return this.checked_};goog.ui.Checkbox.prototype.isChecked=function(){return this.checked_==goog.ui.Checkbox.State.CHECKED};
goog.ui.Checkbox.prototype.isUnchecked=function(){return this.checked_==goog.ui.Checkbox.State.UNCHECKED};goog.ui.Checkbox.prototype.isUndetermined=function(){return this.checked_==goog.ui.Checkbox.State.UNDETERMINED};goog.ui.Checkbox.prototype.setChecked=function(c){c!=this.checked_&&(this.checked_=c,this.getRenderer().setCheckboxState(this.getElement(),this.checked_))};goog.ui.Checkbox.prototype.setCheckedInternal=function(c){this.checked_=c};
goog.ui.Checkbox.prototype.setLabel=function(c){this.isInDocument()?(this.exitDocument(),this.label_=c,this.enterDocument()):this.label_=c};goog.ui.Checkbox.prototype.toggle=function(){this.setChecked(this.checked_?goog.ui.Checkbox.State.UNCHECKED:goog.ui.Checkbox.State.CHECKED)};
goog.ui.Checkbox.prototype.enterDocument=function(){goog.ui.Checkbox.superClass_.enterDocument.call(this);if(this.isHandleMouseEvents()){var c=this.getHandler();this.label_&&c.listen(this.label_,goog.events.EventType.CLICK,this.handleClickOrSpace_).listen(this.label_,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(this.label_,goog.events.EventType.MOUSEOUT,this.handleMouseOut).listen(this.label_,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(this.label_,goog.events.EventType.MOUSEUP,
this.handleMouseUp);c.listen(this.getElement(),goog.events.EventType.CLICK,this.handleClickOrSpace_)}this.label_&&(this.label_.id||(this.label_.id=this.makeId("lbl")),c=this.getElement(),goog.asserts.assert(c,"The checkbox DOM element cannot be null."),goog.a11y.aria.setState(c,goog.a11y.aria.State.LABELLEDBY,this.label_.id))};goog.ui.Checkbox.prototype.setEnabled=function(c){goog.ui.Checkbox.superClass_.setEnabled.call(this,c);if(c=this.getElement())c.tabIndex=this.isEnabled()?0:-1};
goog.ui.Checkbox.prototype.handleClickOrSpace_=function(c){c.stopPropagation();var d=this.checked_?goog.ui.Component.EventType.UNCHECK:goog.ui.Component.EventType.CHECK;this.isEnabled()&&this.dispatchEvent(d)&&(c.preventDefault(),this.toggle(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE))};goog.ui.Checkbox.prototype.handleKeyEventInternal=function(c){c.keyCode==goog.events.KeyCodes.SPACE&&this.handleClickOrSpace_(c);return!1};
goog.ui.registry.setDecoratorByClassName(goog.ui.CheckboxRenderer.CSS_CLASS,function(){return new goog.ui.Checkbox});silex.view.propertiesTool.BgPane=function(c,d,e){this.element=c;this.styleChanged=d;this.selectImage=e;this.buildUi()};
silex.view.propertiesTool.BgPane.prototype.buildUi=function(){var c=goog.dom.getElementByClass("color-bg-palette",this.element);this.hsvPalette=new goog.ui.HsvaPalette(null,null,null,"goog-hsva-palette-sm");this.hsvPalette.render(c);goog.events.listen(this.hsvPalette,goog.ui.Component.EventType.ACTION,this.onColorChanged,!1,this);this.bgColorPicker=new goog.ui.ColorButton;this.bgColorPicker.setTooltip("Click to select color");this.bgColorPicker.render(goog.dom.getElementByClass("color-bg-button"));
goog.events.listen(this.bgColorPicker,goog.ui.Component.EventType.ACTION,this.onBgColorButton,!1,this);this.hsvPalette.setColorRgbaHex("#FFFFFFFF");this.setColorPaletteVisibility(!1);this.transparentBgCheckbox=new goog.ui.Checkbox;this.transparentBgCheckbox.decorate(goog.dom.getElementByClass("enable-color-bg-button"),this.element);goog.events.listen(this.transparentBgCheckbox,goog.ui.Component.EventType.CHANGE,this.onTransparentChanged,!1,this);c=goog.dom.getElementByClass("bg-image-button");this.bgSelectBgImage=
new goog.ui.CustomButton;this.bgSelectBgImage.decorate(c);this.bgSelectBgImage.setTooltip("Click to select a file");goog.events.listen(c,goog.events.EventType.CLICK,this.onSelectImageButton,!1,this);c=goog.dom.getElementByClass("clear-bg-image-button");this.bgClearBgImage=new goog.ui.CustomButton;this.bgClearBgImage.setTooltip("Click to select a file");this.bgClearBgImage.decorate(c);goog.events.listen(c,goog.events.EventType.CLICK,this.onClearImageButton,!1,this);this.attachementComboBox=goog.ui.decorate(goog.dom.getElementByClass("bg-attachement-combo-box"));
this.vPositionComboBox=goog.ui.decorate(goog.dom.getElementByClass("bg-position-v-combo-box"));this.hPositionComboBox=goog.ui.decorate(goog.dom.getElementByClass("bg-position-h-combo-box"));this.repeatComboBox=goog.ui.decorate(goog.dom.getElementByClass("bg-repeat-combo-box"));goog.events.listen(this.attachementComboBox,goog.ui.Component.EventType.CHANGE,function(c){this.setBgImageAttachement(c.target.getSelectedItem().getId())},!1,this);goog.events.listen(this.vPositionComboBox,goog.ui.Component.EventType.CHANGE,
function(c){c=this.hPositionComboBox.getSelectedItem().getId();var e=this.vPositionComboBox.getSelectedItem().getId();this.setBgImagePosition(e+" "+c)},!1,this);goog.events.listen(this.hPositionComboBox,goog.ui.Component.EventType.CHANGE,function(c){c=this.hPositionComboBox.getSelectedItem().getId();var e=this.vPositionComboBox.getSelectedItem().getId();this.setBgImagePosition(e+" "+c)},!1,this);goog.events.listen(this.repeatComboBox,goog.ui.Component.EventType.CHANGE,function(c){this.setBgImageRepeat(c.target.getSelectedItem().getId())},
!1,this)};silex.view.propertiesTool.BgPane.prototype.setStyle=function(c){this.style=c;this.redraw()};
silex.view.propertiesTool.BgPane.prototype.redraw=function(){if(this.style&&!this.isRedraw&&this.transparentBgCheckbox){this.isRedraw=!0;var c=this.style.backgroundColor;void 0==c||"transparent"==c||""==c?(this.transparentBgCheckbox.setChecked(!0),this.bgColorPicker.setEnabled(!1),this.setColorPaletteVisibility(!1)):(c=silex.Helper.rgbaToHex(c),this.transparentBgCheckbox.setChecked(!1),this.bgColorPicker.setEnabled(!0),this.bgColorPicker.setValue(c.substring(0,7)),this.hsvPalette.setColorRgbaHex(c));
null!=this.style.backgroundImage&&"none"!=this.style.backgroundImage&&""!=this.style.backgroundImage?this.bgClearBgImage.setEnabled(!0):this.bgClearBgImage.setEnabled(!1);this.bgClearBgImage.setEnabled(!0);if(null!=this.style.backgroundAttachement)switch(this.style.backgroundAttachement){case "scroll":this.attachementComboBox.setSelectedIndex(0);break;case "fixed":this.attachementComboBox.setSelectedIndex(1);break;case "local":this.attachementComboBox.setSelectedIndex(2)}else this.attachementComboBox.setSelectedIndex(0);
if(null!=this.style.backgroundPosition){var c=this.style.backgroundPosition.split(" "),d=c[1];switch(c[0]){case "top":this.vPositionComboBox.setSelectedIndex(0);break;case "center":this.vPositionComboBox.setSelectedIndex(1);break;case "bottom":this.vPositionComboBox.setSelectedIndex(2)}switch(d){case "left":this.hPositionComboBox.setSelectedIndex(0);break;case "center":this.hPositionComboBox.setSelectedIndex(1);break;case "right":this.hPositionComboBox.setSelectedIndex(2)}}else this.vPositionComboBox.setSelectedIndex(0),
this.hPositionComboBox.setSelectedIndex(0);if(null!=this.style.backgroundRepeat)switch(this.style.backgroundRepeat){case "repeat":this.repeatComboBox.setSelectedIndex(0);break;case "repeat-x":this.repeatComboBox.setSelectedIndex(1);break;case "repeat-y":this.repeatComboBox.setSelectedIndex(2);break;case "no-repeat":this.repeatComboBox.setSelectedIndex(3);break;case "inherit":this.repeatComboBox.setSelectedIndex(4)}else this.repeatComboBox.setSelectedIndex(0);this.isRedraw=!1}};
silex.view.propertiesTool.BgPane.prototype.onColorChanged=function(c){c=silex.Helper.hexToRgba(this.hsvPalette.getColorRgbaHex());null==this.style&&(this.style={});this.style.backgroundColor=c;this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.onBgColorButton=function(c){!1==this.getColorPaletteVisibility()?(this.hsvPalette.setColorRgbaHex(silex.Helper.rgbaToHex(this.style.backgroundColor)),this.setColorPaletteVisibility(!0)):this.setColorPaletteVisibility(!1)};
silex.view.propertiesTool.BgPane.prototype.onTransparentChanged=function(c){!1==this.transparentBgCheckbox.getChecked()?(c=silex.Helper.hexToRgba(this.hsvPalette.getColorRgbaHex()),null==c&&(c="rgba(255, 255, 255, 1)"),this.style.backgroundColor=c):this.style.backgroundColor="transparent";this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.onSelectImageButton=function(c){this.selectImage()};
silex.view.propertiesTool.BgPane.prototype.setBgImage=function(c){this.style.backgroundImage="url('"+c+"')";this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.setBgImageAttachement=function(c){this.style.backgroundAttachement=c;this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.setBgImagePosition=function(c){this.style.backgroundPosition=c;this.styleChanged(this.style);this.redraw()};
silex.view.propertiesTool.BgPane.prototype.setBgImageRepeat=function(c){this.style.backgroundRepeat=c;this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.onClearImageButton=function(c){this.style.backgroundImage="none";this.styleChanged(this.style);this.redraw()};silex.view.propertiesTool.BgPane.prototype.getColorPaletteVisibility=function(){return"hidden"!=goog.style.getStyle(this.hsvPalette.getElement(),"visibility")};
silex.view.propertiesTool.BgPane.prototype.setColorPaletteVisibility=function(c){c?this.getColorPaletteVisibility()||(goog.style.setStyle(this.hsvPalette.getElement(),"visibility",null),goog.style.setStyle(this.hsvPalette.getElement(),"position",null)):this.getColorPaletteVisibility()&&(goog.style.setStyle(this.hsvPalette.getElement(),"visibility","hidden"),goog.style.setStyle(this.hsvPalette.getElement(),"position","absolute"))};silex.view.propertiesTool.GeneralStylePane=function(c,d){this.element=c;this.styleChanged=d;this.buildUi()};silex.view.propertiesTool.GeneralStylePane.prototype.buildUi=function(){this.opacityInput=goog.dom.getElementByClass("opacity-input");goog.events.listen(this.opacityInput,"change",this.onInputChanged,!1,this)};silex.view.propertiesTool.GeneralStylePane.prototype.setStyle=function(c){this.style=c;this.redraw()};
silex.view.propertiesTool.GeneralStylePane.prototype.redraw=function(){this.style&&!this.isRedraw&&(this.isRedraw=!0,this.style.opacity&&(this.opacityInput.value=this.style.opacity),this.isRedraw=!1)};silex.view.propertiesTool.GeneralStylePane.prototype.onInputChanged=function(c){this.style&&(!this.isRedraw&&this.opacityInput.value&&""!=this.opacityInput.value)&&(this.style.opacity=this.opacityInput.value,this.styleChanged(this.style),this.redraw())};goog.editor={};goog.editor.defines={};goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3=!1;goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME)return goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);if(goog.userAgent.product.SAFARI)return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var c=
goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(c)return c[1]+"."+c[2]}else{if(goog.userAgent.product.ANDROID)return(c=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?c:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.CAMINO)return goog.userAgent.product.getFirstRegExpGroup_(/Camino\/([0-9.]+)/)}return""};
goog.userAgent.product.getFirstRegExpGroup_=function(c){return(c=goog.userAgent.product.execRegExp_(c))?c[1]:""};goog.userAgent.product.execRegExp_=function(c){return c.exec(goog.userAgent.getUserAgentString())};goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_();goog.userAgent.product.isVersion=function(c){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,c)};goog.editor.BrowserFeature={HAS_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_RANGES:goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9),HAS_CONTENT_EDITABLE:goog.userAgent.IE||goog.userAgent.WEBKIT||goog.userAgent.OPERA||goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3&&goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9"),USE_MUTATION_EVENTS:goog.userAgent.GECKO,HAS_DOM_SUBTREE_MODIFIED_EVENT:goog.userAgent.WEBKIT||
goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3&&goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9"),HAS_DOCUMENT_INDEPENDENT_NODES:goog.userAgent.GECKO,PUTS_CURSOR_BEFORE_FIRST_BLOCK_ELEMENT_ON_FOCUS:goog.userAgent.GECKO,CLEARS_SELECTION_WHEN_FOCUS_LEAVES:goog.userAgent.IE||goog.userAgent.WEBKIT||goog.userAgent.OPERA,HAS_UNSELECTABLE_STYLE:goog.userAgent.GECKO||goog.userAgent.WEBKIT,FORMAT_BLOCK_WORKS_FOR_BLOCKQUOTES:goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA,
CREATES_MULTIPLE_BLOCKQUOTES:goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("534.16")||goog.userAgent.OPERA,WRAPS_BLOCKQUOTE_IN_DIVS:goog.userAgent.OPERA,PREFERS_READY_STATE_CHANGE_EVENT:goog.userAgent.IE,TAB_FIRES_KEYPRESS:!goog.userAgent.IE,NEEDS_99_WIDTH_IN_STANDARDS_MODE:goog.userAgent.IE,USE_DOCUMENT_FOR_KEY_EVENTS:goog.userAgent.GECKO&&!goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3,SHOWS_CUSTOM_ATTRS_IN_INNER_HTML:goog.userAgent.IE,COLLAPSES_EMPTY_NODES:goog.userAgent.GECKO||
goog.userAgent.WEBKIT||goog.userAgent.OPERA,CONVERT_TO_B_AND_I_TAGS:goog.userAgent.GECKO||goog.userAgent.OPERA,TABS_THROUGH_IMAGES:goog.userAgent.IE,UNESCAPES_URLS_WITHOUT_ASKING:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7.0"),HAS_STYLE_WITH_CSS:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.8")||goog.userAgent.WEBKIT||goog.userAgent.OPERA,FOLLOWS_EDITABLE_LINKS:goog.userAgent.WEBKIT||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9"),HAS_ACTIVE_ELEMENT:goog.userAgent.IE||
goog.userAgent.OPERA||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9"),HAS_SET_CAPTURE:goog.userAgent.IE,EATS_EMPTY_BACKGROUND_COLOR:goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("527"),SUPPORTS_FOCUSIN:goog.userAgent.IE||goog.userAgent.OPERA,SELECTS_IMAGES_ON_CLICK:goog.userAgent.IE||goog.userAgent.OPERA,MOVES_STYLE_TO_HEAD:goog.userAgent.WEBKIT,COLLAPSES_SELECTION_ONMOUSEDOWN:!1,CARET_INSIDE_SELECTION:goog.userAgent.OPERA,FOCUSES_EDITABLE_BODY_ON_HTML_CLICK:!0,
USES_KEYDOWN:goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525"),ADDS_NBSPS_IN_REMOVE_FORMAT:goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("531"),GETS_STUCK_IN_LINKS:goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("528"),NORMALIZE_CORRUPTS_EMPTY_TEXT_NODES:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9")||goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("531"),NORMALIZE_CORRUPTS_ALL_TEXT_NODES:goog.userAgent.IE,
NESTS_SUBSCRIPT_SUPERSCRIPT:goog.userAgent.IE||goog.userAgent.GECKO||goog.userAgent.OPERA,CAN_SELECT_EMPTY_ELEMENT:!goog.userAgent.IE&&!goog.userAgent.WEBKIT,FORGETS_FORMATTING_WHEN_LISTIFYING:goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("526"),LEAVES_P_WHEN_REMOVING_LISTS:goog.userAgent.IE||goog.userAgent.OPERA,CAN_LISTIFY_BR:!goog.userAgent.IE&&!goog.userAgent.OPERA,DOESNT_OVERRIDE_FONT_SIZE_IN_STYLE_ATTR:!goog.userAgent.WEBKIT,SUPPORTS_HTML5_FILE_DRAGGING:goog.userAgent.product.CHROME&&
goog.userAgent.product.isVersion("4")||goog.userAgent.product.SAFARI&&goog.userAgent.isVersionOrHigher("533")||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("2.0")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10"),SUPPORTS_OPERA_DEFAULTBLOCK_COMMAND:goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("11.10"),SUPPORTS_FILE_PASTING:goog.userAgent.product.CHROME&&goog.userAgent.product.isVersion("12")};goog.editor.icontent={};goog.editor.icontent.FieldFormatInfo=function(c,d,e,f,h){this.fieldId_=c;this.standards_=d;this.blended_=e;this.fixedHeight_=f;this.extraStyles_=h||{}};goog.editor.icontent.FieldStyleInfo=function(c,d){this.wrapper_=c;this.css_=d};goog.editor.icontent.useStandardsModeIframes_=!1;goog.editor.icontent.forceStandardsModeIframes=function(){goog.editor.icontent.useStandardsModeIframes_=!0};
goog.editor.icontent.getInitialIframeContent_=function(c,d,e){var f=[];(c.blended_&&c.standards_||goog.editor.icontent.useStandardsModeIframes_)&&f.push("<!DOCTYPE HTML>");f.push('<html style="background:none transparent;min-width:0;');c.blended_&&f.push("height:",c.fixedHeight_?"100%":"auto");f.push('">');f.push("<head><style>");e&&e.css_&&f.push(e.css_);goog.userAgent.GECKO&&c.standards_&&f.push(" img {-moz-force-broken-image-icon: 1;}");f.push("</style></head>");f.push('<body g_editable="true" hidefocus="true" ');
goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&f.push("contentEditable ");f.push('class="editable ');f.push('" id="',c.fieldId_,'" style="min-width:0;');goog.userAgent.GECKO&&c.blended_&&(f.push(";width:100%;border:0;margin:0;background:none transparent;",";height:",c.standards_?"100%":"auto"),c.fixedHeight_?f.push(";overflow:auto"):f.push(";overflow-y:hidden;overflow-x:auto"));goog.userAgent.OPERA&&f.push(";outline:hidden");for(var h in c.extraStyles_)f.push(";"+h+":"+c.extraStyles_[h]);f.push('">',
d,"</body></html>");return f.join("")};goog.editor.icontent.writeNormalInitialBlendedIframe=function(c,d,e,f){if(c.blended_){var h=goog.style.getPaddingBox(e.wrapper_);(h.top||h.left||h.right||h.bottom)&&goog.style.setStyle(f,"margin",-h.top+"px "+-h.right+"px "+-h.bottom+"px "+-h.left+"px")}goog.editor.icontent.writeNormalInitialIframe(c,d,e,f)};
goog.editor.icontent.writeNormalInitialIframe=function(c,d,e,f){c=goog.editor.icontent.getInitialIframeContent_(c,d,e);f=goog.dom.getFrameContentDocument(f);f.open();f.write(c);f.close()};goog.editor.icontent.writeHttpsInitialIframe=function(c,d,e){d=d.body;goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&(d.contentEditable=!0);d.className="editable";d.setAttribute("g_editable",!0);d.hideFocus=!0;d.id=c.fieldId_;goog.style.setStyle(d,c.extraStyles_);d.innerHTML=e};goog.editor.Command={UNDO:"+undo",REDO:"+redo",LINK:"+link",FORMAT_BLOCK:"+formatBlock",INDENT:"+indent",OUTDENT:"+outdent",REMOVE_FORMAT:"+removeFormat",STRIKE_THROUGH:"+strikeThrough",HORIZONTAL_RULE:"+insertHorizontalRule",SUBSCRIPT:"+subscript",SUPERSCRIPT:"+superscript",UNDERLINE:"+underline",BOLD:"+bold",ITALIC:"+italic",FONT_SIZE:"+fontSize",FONT_FACE:"+fontName",FONT_COLOR:"+foreColor",EMOTICON:"+emoticon",EQUATION:"+equation",BACKGROUND_COLOR:"+backColor",ORDERED_LIST:"+insertOrderedList",
UNORDERED_LIST:"+insertUnorderedList",TABLE:"+table",JUSTIFY_CENTER:"+justifyCenter",JUSTIFY_FULL:"+justifyFull",JUSTIFY_RIGHT:"+justifyRight",JUSTIFY_LEFT:"+justifyLeft",BLOCKQUOTE:"+BLOCKQUOTE",DIR_LTR:"ltr",DIR_RTL:"rtl",IMAGE:"image",EDIT_HTML:"editHtml",UPDATE_LINK_BUBBLE:"updateLinkBubble",DEFAULT_TAG:"+defaultTag",CLEAR_LOREM:"clearlorem",UPDATE_LOREM:"updatelorem",USING_LOREM:"usinglorem",MODAL_LINK_EDITOR:"link"};goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};goog.dom.TagIterator=function(c,d,e,f,h){this.reversed=!!d;c&&this.setPosition(c,f);this.depth=void 0!=h?h:this.tagType||0;this.reversed&&(this.depth*=-1);this.constrained=!e};goog.inherits(goog.dom.TagIterator,goog.iter.Iterator);goog.dom.TagIterator.prototype.node=null;goog.dom.TagIterator.prototype.tagType=goog.dom.TagWalkType.OTHER;goog.dom.TagIterator.prototype.started_=!1;
goog.dom.TagIterator.prototype.setPosition=function(c,d,e){if(this.node=c)goog.isNumber(d)?this.tagType=d:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;goog.isNumber(e)&&(this.depth=e)};goog.dom.TagIterator.prototype.copyFrom=function(c){this.node=c.node;this.tagType=c.tagType;this.depth=c.depth;this.reversed=c.reversed;this.constrained=c.constrained};
goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};goog.dom.TagIterator.prototype.skipTag=function(){var c=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==c&&(this.tagType=-1*c,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.restartTag=function(){var c=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==c&&(this.tagType=-1*c,this.depth+=this.tagType*(this.reversed?-1:1))};
goog.dom.TagIterator.prototype.next=function(){var c;if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;c=this.node;var d=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==d){var e=this.reversed?c.lastChild:c.firstChild;e?this.setPosition(e):this.setPosition(c,-1*d)}else(e=this.reversed?c.previousSibling:c.nextSibling)?this.setPosition(e):this.setPosition(c.parentNode,-1*d);this.depth+=this.tagType*(this.reversed?
-1:1)}else this.started_=!0;c=this.node;if(!this.node)throw goog.iter.StopIteration;return c};goog.dom.TagIterator.prototype.isStarted=function(){return this.started_};goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG};goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG};goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER};
goog.dom.TagIterator.prototype.equals=function(c){return c.node==this.node&&(!this.node||c.tagType==this.tagType)};goog.dom.TagIterator.prototype.splice=function(c){var d=this.node;this.restartTag();this.reversed=!this.reversed;goog.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;for(var e=goog.isArrayLike(arguments[0])?arguments[0]:arguments,f=e.length-1;0<=f;f--)goog.dom.insertSiblingAfter(e[f],d);goog.dom.removeNode(d)};goog.dom.SavedRange=function(){goog.Disposable.call(this)};goog.inherits(goog.dom.SavedRange,goog.Disposable);goog.dom.SavedRange.logger_=goog.log.getLogger("goog.dom.SavedRange");goog.dom.SavedRange.prototype.restore=function(c){this.isDisposed()&&goog.log.error(goog.dom.SavedRange.logger_,"Disposed SavedRange objects cannot be restored.");var d=this.restoreInternal();c||this.dispose();return d};goog.dom.SavedCaretRange=function(c){goog.dom.SavedRange.call(this);this.startCaretId_=goog.string.createUniqueString();this.endCaretId_=goog.string.createUniqueString();this.reversed_=c.isReversed();this.dom_=goog.dom.getDomHelper(c.getDocument());c.surroundWithNodes(this.createCaret_(!0),this.createCaret_(!1))};goog.inherits(goog.dom.SavedCaretRange,goog.dom.SavedRange);
goog.dom.SavedCaretRange.prototype.toAbstractRange=function(){var c=null,d=this.getCaret(!0),e=this.getCaret(!1);d&&e&&(c=goog.dom.Range.createFromNodes(d,0,e,0));return c};goog.dom.SavedCaretRange.prototype.getCaret=function(c){return this.dom_.getElement(c?this.startCaretId_:this.endCaretId_)};goog.dom.SavedCaretRange.prototype.removeCarets=function(c){goog.dom.removeNode(this.getCaret(!0));goog.dom.removeNode(this.getCaret(!1));return c};
goog.dom.SavedCaretRange.prototype.setRestorationDocument=function(c){this.dom_.setDocument(c)};goog.dom.SavedCaretRange.prototype.restoreInternal=function(){var c=null,d=this.getCaret(!this.reversed_),e=this.getCaret(this.reversed_);if(d&&e){var c=d.parentNode,d=goog.array.indexOf(c.childNodes,d),f=e.parentNode,e=goog.array.indexOf(f.childNodes,e);f==c&&(this.reversed_?d--:e--);c=goog.dom.Range.createFromNodes(c,d,f,e);c=this.removeCarets(c);c.select()}else this.removeCarets();return c};
goog.dom.SavedCaretRange.prototype.disposeInternal=function(){this.removeCarets();this.dom_=null};goog.dom.SavedCaretRange.prototype.createCaret_=function(c){return this.dom_.createDom(goog.dom.TagName.SPAN,{id:c?this.startCaretId_:this.endCaretId_})};goog.dom.SavedCaretRange.CARET_REGEX=/<span\s+id="?goog_\d+"?><\/span>/ig;goog.dom.SavedCaretRange.htmlEqual=function(c,d){return c==d||c.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")==d.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")};goog.dom.RangeType={TEXT:"text",CONTROL:"control",MULTI:"mutli"};goog.dom.AbstractRange=function(){};goog.dom.AbstractRange.getBrowserSelectionForWindow=function(c){if(c.getSelection)return c.getSelection();c=c.document;var d=c.selection;if(d){try{var e=d.createRange();if(e.parentElement){if(e.parentElement().document!=c)return null}else if(!e.length||e.item(0).document!=c)return null}catch(f){return null}return d}return null};goog.dom.AbstractRange.isNativeControlRange=function(c){return!!c&&!!c.addElement};
goog.dom.AbstractRange.prototype.setBrowserRangeObject=function(c){return!1};goog.dom.AbstractRange.prototype.getTextRanges=function(){for(var c=[],d=0,e=this.getTextRangeCount();d<e;d++)c.push(this.getTextRange(d));return c};goog.dom.AbstractRange.prototype.getContainerElement=function(){var c=this.getContainer();return c.nodeType==goog.dom.NodeType.ELEMENT?c:c.parentNode};goog.dom.AbstractRange.prototype.getAnchorNode=function(){return this.isReversed()?this.getEndNode():this.getStartNode()};
goog.dom.AbstractRange.prototype.getAnchorOffset=function(){return this.isReversed()?this.getEndOffset():this.getStartOffset()};goog.dom.AbstractRange.prototype.getFocusNode=function(){return this.isReversed()?this.getStartNode():this.getEndNode()};goog.dom.AbstractRange.prototype.getFocusOffset=function(){return this.isReversed()?this.getStartOffset():this.getEndOffset()};goog.dom.AbstractRange.prototype.isReversed=function(){return!1};
goog.dom.AbstractRange.prototype.getDocument=function(){return goog.dom.getOwnerDocument(goog.userAgent.IE?this.getContainer():this.getStartNode())};goog.dom.AbstractRange.prototype.getWindow=function(){return goog.dom.getWindow(this.getDocument())};goog.dom.AbstractRange.prototype.containsNode=function(c,d){return this.containsRange(goog.dom.Range.createFromNodeContents(c),d)};
goog.dom.AbstractRange.prototype.replaceContentsWithNode=function(c){this.isCollapsed()||this.removeContents();return this.insertNode(c,!0)};goog.dom.AbstractRange.prototype.saveUsingCarets=function(){return this.getStartNode()&&this.getEndNode()?new goog.dom.SavedCaretRange(this):null};goog.dom.RangeIterator=function(c,d){goog.dom.TagIterator.call(this,c,d,!0)};goog.inherits(goog.dom.RangeIterator,goog.dom.TagIterator);goog.dom.AbstractMultiRange=function(){};goog.inherits(goog.dom.AbstractMultiRange,goog.dom.AbstractRange);goog.dom.AbstractMultiRange.prototype.containsRange=function(c,d){var e=this.getTextRanges(),f=c.getTextRanges();return(d?goog.array.some:goog.array.every)(f,function(c){return goog.array.some(e,function(e){return e.containsRange(c,d)})})};
goog.dom.AbstractMultiRange.prototype.insertNode=function(c,d){d?goog.dom.insertSiblingBefore(c,this.getStartNode()):goog.dom.insertSiblingAfter(c,this.getEndNode());return c};goog.dom.AbstractMultiRange.prototype.surroundWithNodes=function(c,d){this.insertNode(c,!0);this.insertNode(d,!1)};goog.dom.TextRangeIterator=function(c,d,e,f,h){var k;c&&(this.startNode_=c,this.startOffset_=d,this.endNode_=e,this.endOffset_=f,c.nodeType==goog.dom.NodeType.ELEMENT&&c.tagName!=goog.dom.TagName.BR&&(c=c.childNodes,(d=c[d])?(this.startNode_=d,this.startOffset_=0):(c.length&&(this.startNode_=goog.array.peek(c)),k=!0)),e.nodeType==goog.dom.NodeType.ELEMENT&&((this.endNode_=e.childNodes[f])?this.endOffset_=0:this.endNode_=e));goog.dom.RangeIterator.call(this,h?this.endNode_:this.startNode_,h);if(k)try{this.next()}catch(l){if(l!=
goog.iter.StopIteration)throw l;}};goog.inherits(goog.dom.TextRangeIterator,goog.dom.RangeIterator);goog.dom.TextRangeIterator.prototype.startNode_=null;goog.dom.TextRangeIterator.prototype.endNode_=null;goog.dom.TextRangeIterator.prototype.startOffset_=0;goog.dom.TextRangeIterator.prototype.endOffset_=0;goog.dom.TextRangeIterator.prototype.getStartTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.startNode_?this.startOffset_:0};
goog.dom.TextRangeIterator.prototype.getEndTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.endNode_?this.endOffset_:this.node.nodeValue.length};goog.dom.TextRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.TextRangeIterator.prototype.setStartNode=function(c){this.isStarted()||this.setPosition(c);this.startNode_=c;this.startOffset_=0};goog.dom.TextRangeIterator.prototype.getEndNode=function(){return this.endNode_};
goog.dom.TextRangeIterator.prototype.setEndNode=function(c){this.endNode_=c;this.endOffset_=0};goog.dom.TextRangeIterator.prototype.isLast=function(){return this.isStarted()&&this.node==this.endNode_&&(!this.endOffset_||!this.isStartTag())};goog.dom.TextRangeIterator.prototype.next=function(){if(this.isLast())throw goog.iter.StopIteration;return goog.dom.TextRangeIterator.superClass_.next.call(this)};
goog.dom.TextRangeIterator.prototype.skipTag=function(){goog.dom.TextRangeIterator.superClass_.skipTag.apply(this);if(goog.dom.contains(this.node,this.endNode_))throw goog.iter.StopIteration;};goog.dom.TextRangeIterator.prototype.copyFrom=function(c){this.startNode_=c.startNode_;this.endNode_=c.endNode_;this.startOffset_=c.startOffset_;this.endOffset_=c.endOffset_;this.isReversed_=c.isReversed_;goog.dom.TextRangeIterator.superClass_.copyFrom.call(this,c)};
goog.dom.TextRangeIterator.prototype.clone=function(){var c=new goog.dom.TextRangeIterator(this.startNode_,this.startOffset_,this.endNode_,this.endOffset_,this.isReversed_);c.copyFrom(this);return c};goog.string.StringBuffer=function(c,d){null!=c&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.buffer_="";goog.string.StringBuffer.prototype.set=function(c){this.buffer_=""+c};goog.string.StringBuffer.prototype.append=function(c,d,e){this.buffer_+=c;if(null!=d)for(var f=1;f<arguments.length;f++)this.buffer_+=arguments[f];return this};goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""};goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length};
goog.string.StringBuffer.prototype.toString=function(){return this.buffer_};goog.dom.RangeEndpoint={START:1,END:0};goog.dom.browserrange={};goog.dom.browserrange.AbstractRange=function(){};goog.dom.browserrange.AbstractRange.prototype.getStartPosition=function(){goog.asserts.assert(this.range_.getClientRects,"Getting selection coordinates is not supported.");var c=this.range_.getClientRects();return c.length?new goog.math.Coordinate(c[0].left,c[0].top):null};
goog.dom.browserrange.AbstractRange.prototype.getEndPosition=function(){goog.asserts.assert(this.range_.getClientRects,"Getting selection coordinates is not supported.");var c=this.range_.getClientRects();return c.length?(c=goog.array.peek(c),new goog.math.Coordinate(c.right,c.bottom)):null};
goog.dom.browserrange.AbstractRange.prototype.containsRange=function(c,d){var e=d&&!c.isCollapsed(),f=c.getBrowserRange(),h=goog.dom.RangeEndpoint.START,k=goog.dom.RangeEndpoint.END;try{return e?0<=this.compareBrowserRangeEndpoints(f,k,h)&&0>=this.compareBrowserRangeEndpoints(f,h,k):0<=this.compareBrowserRangeEndpoints(f,k,k)&&0>=this.compareBrowserRangeEndpoints(f,h,h)}catch(l){if(!goog.userAgent.IE)throw l;return!1}};
goog.dom.browserrange.AbstractRange.prototype.containsNode=function(c,d){return this.containsRange(goog.dom.browserrange.createRangeFromNodeContents(c),d)};
goog.dom.browserrange.AbstractRange.prototype.getHtmlFragment=function(){var c=new goog.string.StringBuffer;goog.iter.forEach(this,function(d,e,f){d.nodeType==goog.dom.NodeType.TEXT?c.append(goog.string.htmlEscape(d.nodeValue.substring(f.getStartTextOffset(),f.getEndTextOffset()))):d.nodeType==goog.dom.NodeType.ELEMENT&&(f.isEndTag()?goog.dom.canHaveChildren(d)&&c.append("</"+d.tagName+">"):(e=d.cloneNode(!1),e=goog.dom.getOuterHtml(e),goog.userAgent.IE&&d.tagName==goog.dom.TagName.LI?c.append(e):
(d=e.lastIndexOf("<"),c.append(d?e.substr(0,d):e))))},this);return c.toString()};goog.dom.browserrange.AbstractRange.prototype.__iterator__=function(c){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.browserrange.W3cRange=function(c){this.range_=c};goog.inherits(goog.dom.browserrange.W3cRange,goog.dom.browserrange.AbstractRange);
goog.dom.browserrange.W3cRange.getBrowserRangeForNode=function(c){var d=goog.dom.getOwnerDocument(c).createRange();if(c.nodeType==goog.dom.NodeType.TEXT)d.setStart(c,0),d.setEnd(c,c.length);else if(goog.dom.browserrange.canContainRangeEndpoint(c)){for(var e,f=c;(e=f.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(e);)f=e;d.setStart(f,0);for(f=c;(e=f.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(e);)f=e;d.setEnd(f,f.nodeType==goog.dom.NodeType.ELEMENT?f.childNodes.length:f.length)}else e=
c.parentNode,c=goog.array.indexOf(e.childNodes,c),d.setStart(e,c),d.setEnd(e,c+1);return d};goog.dom.browserrange.W3cRange.getBrowserRangeForNodes=function(c,d,e,f){var h=goog.dom.getOwnerDocument(c).createRange();h.setStart(c,d);h.setEnd(e,f);return h};goog.dom.browserrange.W3cRange.createFromNodeContents=function(c){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(c))};
goog.dom.browserrange.W3cRange.createFromNodes=function(c,d,e,f){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(c,d,e,f))};goog.dom.browserrange.W3cRange.prototype.clone=function(){return new this.constructor(this.range_.cloneRange())};goog.dom.browserrange.W3cRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.W3cRange.prototype.getContainer=function(){return this.range_.commonAncestorContainer};
goog.dom.browserrange.W3cRange.prototype.getStartNode=function(){return this.range_.startContainer};goog.dom.browserrange.W3cRange.prototype.getStartOffset=function(){return this.range_.startOffset};goog.dom.browserrange.W3cRange.prototype.getEndNode=function(){return this.range_.endContainer};goog.dom.browserrange.W3cRange.prototype.getEndOffset=function(){return this.range_.endOffset};
goog.dom.browserrange.W3cRange.prototype.compareBrowserRangeEndpoints=function(c,d,e){return this.range_.compareBoundaryPoints(e==goog.dom.RangeEndpoint.START?d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.START_TO_END:d==goog.dom.RangeEndpoint.START?goog.global.Range.END_TO_START:goog.global.Range.END_TO_END,c)};goog.dom.browserrange.W3cRange.prototype.isCollapsed=function(){return this.range_.collapsed};goog.dom.browserrange.W3cRange.prototype.getText=function(){return this.range_.toString()};
goog.dom.browserrange.W3cRange.prototype.getValidHtml=function(){var c=goog.dom.getDomHelper(this.range_.startContainer).createDom("div");c.appendChild(this.range_.cloneContents());c=c.innerHTML;if(goog.string.startsWith(c,"<")||!this.isCollapsed()&&!goog.string.contains(c,"<"))return c;var d=this.getContainer(),d=d.nodeType==goog.dom.NodeType.ELEMENT?d:d.parentNode;return goog.dom.getOuterHtml(d.cloneNode(!1)).replace(">",">"+c)};
goog.dom.browserrange.W3cRange.prototype.select=function(c){var d=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));this.selectInternal(d.getSelection(),c)};goog.dom.browserrange.W3cRange.prototype.selectInternal=function(c,d){c.removeAllRanges();c.addRange(this.range_)};
goog.dom.browserrange.W3cRange.prototype.removeContents=function(){var c=this.range_;c.extractContents();if(c.startContainer.hasChildNodes()&&(c=c.startContainer.childNodes[c.startOffset])){var d=c.previousSibling;""==goog.dom.getRawTextContent(c)&&goog.dom.removeNode(c);d&&""==goog.dom.getRawTextContent(d)&&goog.dom.removeNode(d)}};goog.dom.browserrange.W3cRange.prototype.surroundContents=function(c){this.range_.surroundContents(c);return c};
goog.dom.browserrange.W3cRange.prototype.insertNode=function(c,d){var e=this.range_.cloneRange();e.collapse(d);e.insertNode(c);e.detach();return c};
goog.dom.browserrange.W3cRange.prototype.surroundWithNodes=function(c,d){var e=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));if(e=goog.dom.Range.createFromWindow(e))var f=e.getStartNode(),h=e.getEndNode(),k=e.getStartOffset(),l=e.getEndOffset();var m=this.range_.cloneRange(),n=this.range_.cloneRange();m.collapse(!1);n.collapse(!0);m.insertNode(d);n.insertNode(c);m.detach();n.detach();if(e){if(f.nodeType==goog.dom.NodeType.TEXT)for(;k>f.length;){k-=f.length;do f=f.nextSibling;
while(f==c||f==d)}if(h.nodeType==goog.dom.NodeType.TEXT)for(;l>h.length;){l-=h.length;do h=h.nextSibling;while(h==c||h==d)}goog.dom.Range.createFromNodes(f,k,h,l).select()}};goog.dom.browserrange.W3cRange.prototype.collapse=function(c){this.range_.collapse(c)};goog.dom.browserrange.WebKitRange=function(c){goog.dom.browserrange.W3cRange.call(this,c)};goog.inherits(goog.dom.browserrange.WebKitRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.WebKitRange.createFromNodeContents=function(c){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(c))};
goog.dom.browserrange.WebKitRange.createFromNodes=function(c,d,e,f){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(c,d,e,f))};
goog.dom.browserrange.WebKitRange.prototype.compareBrowserRangeEndpoints=function(c,d,e){return goog.userAgent.isVersionOrHigher("528")?goog.dom.browserrange.WebKitRange.superClass_.compareBrowserRangeEndpoints.call(this,c,d,e):this.range_.compareBoundaryPoints(e==goog.dom.RangeEndpoint.START?d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.END_TO_START:d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_END:goog.global.Range.END_TO_END,c)};
goog.dom.browserrange.WebKitRange.prototype.selectInternal=function(c,d){c.removeAllRanges();d?c.setBaseAndExtent(this.getEndNode(),this.getEndOffset(),this.getStartNode(),this.getStartOffset()):c.setBaseAndExtent(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.browserrange.IeRange=function(c,d){this.range_=c;this.doc_=d};goog.inherits(goog.dom.browserrange.IeRange,goog.dom.browserrange.AbstractRange);goog.dom.browserrange.IeRange.logger_=goog.log.getLogger("goog.dom.browserrange.IeRange");
goog.dom.browserrange.IeRange.getBrowserRangeForNode_=function(c){var d=goog.dom.getOwnerDocument(c).body.createTextRange();if(c.nodeType==goog.dom.NodeType.ELEMENT)d.moveToElementText(c),goog.dom.browserrange.canContainRangeEndpoint(c)&&!c.childNodes.length&&d.collapse(!1);else{for(var e=0,f=c;f=f.previousSibling;){var h=f.nodeType;if(h==goog.dom.NodeType.TEXT)e+=f.length;else if(h==goog.dom.NodeType.ELEMENT){d.moveToElementText(f);break}}f||d.moveToElementText(c.parentNode);d.collapse(!f);e&&d.move("character",
e);d.moveEnd("character",c.length)}return d};
goog.dom.browserrange.IeRange.getBrowserRangeForNodes_=function(c,d,e,f){var h=!1;c.nodeType==goog.dom.NodeType.ELEMENT&&(d>c.childNodes.length&&goog.log.error(goog.dom.browserrange.IeRange.logger_,"Cannot have startOffset > startNode child count"),d=c.childNodes[d],h=!d,c=d||c.lastChild||c,d=0);var k=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(c);d&&k.move("character",d);if(c==e&&d==f)return k.collapse(!0),k;h&&k.collapse(!1);h=!1;e.nodeType==goog.dom.NodeType.ELEMENT&&(f>e.childNodes.length&&
goog.log.error(goog.dom.browserrange.IeRange.logger_,"Cannot have endOffset > endNode child count"),e=(d=e.childNodes[f])||e.lastChild||e,f=0,h=!d);c=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(e);c.collapse(!h);f&&c.moveEnd("character",f);k.setEndPoint("EndToEnd",c);return k};
goog.dom.browserrange.IeRange.createFromNodeContents=function(c){var d=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNode_(c),goog.dom.getOwnerDocument(c));if(goog.dom.browserrange.canContainRangeEndpoint(c)){for(var e,f=c;(e=f.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(e);)f=e;d.startNode_=f;d.startOffset_=0;for(f=c;(e=f.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(e);)f=e;d.endNode_=f;d.endOffset_=f.nodeType==goog.dom.NodeType.ELEMENT?
f.childNodes.length:f.length;d.parentNode_=c}else d.startNode_=d.endNode_=d.parentNode_=c.parentNode,d.startOffset_=goog.array.indexOf(d.parentNode_.childNodes,c),d.endOffset_=d.startOffset_+1;return d};goog.dom.browserrange.IeRange.createFromNodes=function(c,d,e,f){var h=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNodes_(c,d,e,f),goog.dom.getOwnerDocument(c));h.startNode_=c;h.startOffset_=d;h.endNode_=e;h.endOffset_=f;return h};
goog.dom.browserrange.IeRange.prototype.parentNode_=null;goog.dom.browserrange.IeRange.prototype.startNode_=null;goog.dom.browserrange.IeRange.prototype.endNode_=null;goog.dom.browserrange.IeRange.prototype.startOffset_=-1;goog.dom.browserrange.IeRange.prototype.endOffset_=-1;goog.dom.browserrange.IeRange.prototype.clone=function(){var c=new goog.dom.browserrange.IeRange(this.range_.duplicate(),this.doc_);c.parentNode_=this.parentNode_;c.startNode_=this.startNode_;c.endNode_=this.endNode_;return c};
goog.dom.browserrange.IeRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.IeRange.prototype.clearCachedValues_=function(){this.parentNode_=this.startNode_=this.endNode_=null;this.startOffset_=this.endOffset_=-1};
goog.dom.browserrange.IeRange.prototype.getContainer=function(){if(!this.parentNode_){var c=this.range_.text,d=this.range_.duplicate(),e=c.replace(/ +$/,"");(e=c.length-e.length)&&d.moveEnd("character",-e);e=d.parentElement();d=goog.string.stripNewlines(d.htmlText).length;if(this.isCollapsed()&&0<d)return this.parentNode_=e;for(;d>goog.string.stripNewlines(e.outerHTML).length;)e=e.parentNode;for(;1==e.childNodes.length&&e.innerText==goog.dom.browserrange.IeRange.getNodeText_(e.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(e.firstChild);)e=
e.firstChild;0==c.length&&(e=this.findDeepestContainer_(e));this.parentNode_=e}return this.parentNode_};
goog.dom.browserrange.IeRange.prototype.findDeepestContainer_=function(c){for(var d=c.childNodes,e=0,f=d.length;e<f;e++){var h=d[e];if(goog.dom.browserrange.canContainRangeEndpoint(h)){var k=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(h),l=goog.dom.RangeEndpoint.START,m=goog.dom.RangeEndpoint.END,n=k.htmlText!=h.outerHTML;if(this.isCollapsed()&&n?0<=this.compareBrowserRangeEndpoints(k,l,l)&&0>=this.compareBrowserRangeEndpoints(k,l,m):this.range_.inRange(k))return this.findDeepestContainer_(h)}}return c};
goog.dom.browserrange.IeRange.prototype.getStartNode=function(){this.startNode_||(this.startNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endNode_=this.startNode_));return this.startNode_};goog.dom.browserrange.IeRange.prototype.getStartOffset=function(){0>this.startOffset_&&(this.startOffset_=this.getOffset_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endOffset_=this.startOffset_));return this.startOffset_};
goog.dom.browserrange.IeRange.prototype.getEndNode=function(){if(this.isCollapsed())return this.getStartNode();this.endNode_||(this.endNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.END));return this.endNode_};goog.dom.browserrange.IeRange.prototype.getEndOffset=function(){if(this.isCollapsed())return this.getStartOffset();0>this.endOffset_&&(this.endOffset_=this.getOffset_(goog.dom.RangeEndpoint.END),this.isCollapsed()&&(this.startOffset_=this.endOffset_));return this.endOffset_};
goog.dom.browserrange.IeRange.prototype.compareBrowserRangeEndpoints=function(c,d,e){return this.range_.compareEndPoints((d==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==goog.dom.RangeEndpoint.START?"Start":"End"),c)};
goog.dom.browserrange.IeRange.prototype.getEndpointNode_=function(c,d){var e=d||this.getContainer();if(!e||!e.firstChild)return e;for(var f=goog.dom.RangeEndpoint.START,h=goog.dom.RangeEndpoint.END,k=c==f,l=0,m=e.childNodes.length;l<m;l++){var n=k?l:m-l-1,p=e.childNodes[n],s;try{s=goog.dom.browserrange.createRangeFromNodeContents(p)}catch(q){continue}var t=s.getBrowserRange();if(this.isCollapsed())if(!goog.dom.browserrange.canContainRangeEndpoint(p)){if(0==this.compareBrowserRangeEndpoints(t,f,f)){this.startOffset_=
this.endOffset_=n;break}}else{if(s.containsRange(this))return this.getEndpointNode_(c,p)}else{if(this.containsRange(s)){if(!goog.dom.browserrange.canContainRangeEndpoint(p)){k?this.startOffset_=n:this.endOffset_=n+1;break}return this.getEndpointNode_(c,p)}if(0>this.compareBrowserRangeEndpoints(t,f,h)&&0<this.compareBrowserRangeEndpoints(t,h,f))return this.getEndpointNode_(c,p)}}return e};
goog.dom.browserrange.IeRange.prototype.compareNodeEndpoints_=function(c,d,e){return this.range_.compareEndPoints((d==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(e==goog.dom.RangeEndpoint.START?"Start":"End"),goog.dom.browserrange.createRangeFromNodeContents(c).getBrowserRange())};
goog.dom.browserrange.IeRange.prototype.getOffset_=function(c,d){var e=c==goog.dom.RangeEndpoint.START,f=d||(e?this.getStartNode():this.getEndNode());if(f.nodeType==goog.dom.NodeType.ELEMENT){for(var f=f.childNodes,h=f.length,k=e?1:-1,l=e?0:h-1;0<=l&&l<h;l+=k){var m=f[l];if(!goog.dom.browserrange.canContainRangeEndpoint(m)&&0==this.compareNodeEndpoints_(m,c,c))return e?l:l+1}return-1==l?0:l}h=this.range_.duplicate();k=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(f);h.setEndPoint(e?"EndToEnd":
"StartToStart",k);h=h.text.length;return e?f.length-h:h};goog.dom.browserrange.IeRange.getNodeText_=function(c){return c.nodeType==goog.dom.NodeType.TEXT?c.nodeValue:c.innerText};goog.dom.browserrange.IeRange.prototype.isRangeInDocument=function(){var c=this.doc_.body.createTextRange();c.moveToElementText(this.doc_.body);return this.containsRange(new goog.dom.browserrange.IeRange(c,this.doc_),!0)};
goog.dom.browserrange.IeRange.prototype.isCollapsed=function(){return 0==this.range_.compareEndPoints("StartToEnd",this.range_)};goog.dom.browserrange.IeRange.prototype.getText=function(){return this.range_.text};goog.dom.browserrange.IeRange.prototype.getValidHtml=function(){return this.range_.htmlText};goog.dom.browserrange.IeRange.prototype.select=function(c){this.range_.select()};
goog.dom.browserrange.IeRange.prototype.removeContents=function(){if(!this.isCollapsed()&&this.range_.htmlText){var c=this.getStartNode(),d=this.getEndNode(),e=this.range_.text,f=this.range_.duplicate();f.moveStart("character",1);f.moveStart("character",-1);f.text==e&&(this.range_=f);this.range_.text="";this.clearCachedValues_();e=this.getStartNode();f=this.getStartOffset();try{var h=c.nextSibling;c==d&&(c.parentNode&&c.nodeType==goog.dom.NodeType.TEXT&&h&&h.nodeType==goog.dom.NodeType.TEXT)&&(c.nodeValue+=
h.nodeValue,goog.dom.removeNode(h),this.range_=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(e),this.range_.move("character",f),this.clearCachedValues_())}catch(k){}}};goog.dom.browserrange.IeRange.getDomHelper_=function(c){return goog.dom.getDomHelper(c.parentElement())};
goog.dom.browserrange.IeRange.pasteElement_=function(c,d,e){e=e||goog.dom.browserrange.IeRange.getDomHelper_(c);var f,h=f=d.id;f||(f=d.id=goog.string.createUniqueString());c.pasteHTML(d.outerHTML);(d=e.getElement(f))&&(h||d.removeAttribute("id"));return d};
goog.dom.browserrange.IeRange.prototype.surroundContents=function(c){goog.dom.removeNode(c);c.innerHTML=this.range_.htmlText;(c=goog.dom.browserrange.IeRange.pasteElement_(this.range_,c))&&this.range_.moveToElementText(c);this.clearCachedValues_();return c};
goog.dom.browserrange.IeRange.insertNode_=function(c,d,e,f){f=f||goog.dom.browserrange.IeRange.getDomHelper_(c);var h;d.nodeType!=goog.dom.NodeType.ELEMENT&&(h=!0,d=f.createDom(goog.dom.TagName.DIV,null,d));c.collapse(e);d=goog.dom.browserrange.IeRange.pasteElement_(c,d,f);h&&(c=d.firstChild,f.flattenElement(d),d=c);return d};goog.dom.browserrange.IeRange.prototype.insertNode=function(c,d){var e=goog.dom.browserrange.IeRange.insertNode_(this.range_.duplicate(),c,d);this.clearCachedValues_();return e};
goog.dom.browserrange.IeRange.prototype.surroundWithNodes=function(c,d){var e=this.range_.duplicate(),f=this.range_.duplicate();goog.dom.browserrange.IeRange.insertNode_(e,c,!0);goog.dom.browserrange.IeRange.insertNode_(f,d,!1);this.clearCachedValues_()};goog.dom.browserrange.IeRange.prototype.collapse=function(c){this.range_.collapse(c);c?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_)};goog.dom.browserrange.GeckoRange=function(c){goog.dom.browserrange.W3cRange.call(this,c)};goog.inherits(goog.dom.browserrange.GeckoRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.GeckoRange.createFromNodeContents=function(c){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(c))};
goog.dom.browserrange.GeckoRange.createFromNodes=function(c,d,e,f){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(c,d,e,f))};goog.dom.browserrange.GeckoRange.prototype.selectInternal=function(c,d){!d||this.isCollapsed()?goog.dom.browserrange.GeckoRange.superClass_.selectInternal.call(this,c,d):(c.collapse(this.getEndNode(),this.getEndOffset()),c.extend(this.getStartNode(),this.getStartOffset()))};goog.dom.browserrange.OperaRange=function(c){goog.dom.browserrange.W3cRange.call(this,c)};goog.inherits(goog.dom.browserrange.OperaRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.OperaRange.createFromNodeContents=function(c){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(c))};
goog.dom.browserrange.OperaRange.createFromNodes=function(c,d,e,f){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(c,d,e,f))};goog.dom.browserrange.OperaRange.prototype.selectInternal=function(c,d){c.collapse(this.getStartNode(),this.getStartOffset());this.getEndNode()==this.getStartNode()&&this.getEndOffset()==this.getStartOffset()||c.extend(this.getEndNode(),this.getEndOffset());0==c.rangeCount&&c.addRange(this.range_)};goog.dom.browserrange.Error={NOT_IMPLEMENTED:"Not Implemented"};goog.dom.browserrange.createRange=function(c){return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?new goog.dom.browserrange.IeRange(c,goog.dom.getOwnerDocument(c.parentElement())):goog.userAgent.WEBKIT?new goog.dom.browserrange.WebKitRange(c):goog.userAgent.GECKO?new goog.dom.browserrange.GeckoRange(c):goog.userAgent.OPERA?new goog.dom.browserrange.OperaRange(c):new goog.dom.browserrange.W3cRange(c)};
goog.dom.browserrange.createRangeFromNodeContents=function(c){return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?goog.dom.browserrange.IeRange.createFromNodeContents(c):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodeContents(c):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodeContents(c):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodeContents(c):goog.dom.browserrange.W3cRange.createFromNodeContents(c)};
goog.dom.browserrange.createRangeFromNodes=function(c,d,e,f){return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?goog.dom.browserrange.IeRange.createFromNodes(c,d,e,f):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodes(c,d,e,f):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodes(c,d,e,f):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodes(c,d,e,f):goog.dom.browserrange.W3cRange.createFromNodes(c,d,e,f)};
goog.dom.browserrange.canContainRangeEndpoint=function(c){return goog.dom.canHaveChildren(c)||c.nodeType==goog.dom.NodeType.TEXT};goog.dom.TextRange=function(){};goog.inherits(goog.dom.TextRange,goog.dom.AbstractRange);goog.dom.TextRange.createFromBrowserRange=function(c,d){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRange(c),d)};goog.dom.TextRange.createFromBrowserRangeWrapper_=function(c,d){var e=new goog.dom.TextRange;e.browserRangeWrapper_=c;e.isReversed_=!!d;return e};
goog.dom.TextRange.createFromNodeContents=function(c,d){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRangeFromNodeContents(c),d)};
goog.dom.TextRange.createFromNodes=function(c,d,e,f){var h=new goog.dom.TextRange;h.isReversed_=goog.dom.Range.isReversed(c,d,e,f);if(goog.dom.isElement(c)&&!goog.dom.canHaveChildren(c)){var k=c.parentNode;d=goog.array.indexOf(k.childNodes,c);c=k}goog.dom.isElement(e)&&!goog.dom.canHaveChildren(e)&&(k=e.parentNode,f=goog.array.indexOf(k.childNodes,e),e=k);h.isReversed_?(h.startNode_=e,h.startOffset_=f,h.endNode_=c,h.endOffset_=d):(h.startNode_=c,h.startOffset_=d,h.endNode_=e,h.endOffset_=f);return h};
goog.dom.TextRange.prototype.browserRangeWrapper_=null;goog.dom.TextRange.prototype.startNode_=null;goog.dom.TextRange.prototype.startOffset_=null;goog.dom.TextRange.prototype.endNode_=null;goog.dom.TextRange.prototype.endOffset_=null;goog.dom.TextRange.prototype.isReversed_=!1;
goog.dom.TextRange.prototype.clone=function(){var c=new goog.dom.TextRange;c.browserRangeWrapper_=this.browserRangeWrapper_;c.startNode_=this.startNode_;c.startOffset_=this.startOffset_;c.endNode_=this.endNode_;c.endOffset_=this.endOffset_;c.isReversed_=this.isReversed_;return c};goog.dom.TextRange.prototype.getType=function(){return goog.dom.RangeType.TEXT};goog.dom.TextRange.prototype.getBrowserRangeObject=function(){return this.getBrowserRangeWrapper_().getBrowserRange()};
goog.dom.TextRange.prototype.setBrowserRangeObject=function(c){if(goog.dom.AbstractRange.isNativeControlRange(c))return!1;this.browserRangeWrapper_=goog.dom.browserrange.createRange(c);this.clearCachedValues_();return!0};goog.dom.TextRange.prototype.clearCachedValues_=function(){this.startNode_=this.startOffset_=this.endNode_=this.endOffset_=null};goog.dom.TextRange.prototype.getTextRangeCount=function(){return 1};goog.dom.TextRange.prototype.getTextRange=function(c){return this};
goog.dom.TextRange.prototype.getBrowserRangeWrapper_=function(){return this.browserRangeWrapper_||(this.browserRangeWrapper_=goog.dom.browserrange.createRangeFromNodes(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset()))};goog.dom.TextRange.prototype.getContainer=function(){return this.getBrowserRangeWrapper_().getContainer()};goog.dom.TextRange.prototype.getStartNode=function(){return this.startNode_||(this.startNode_=this.getBrowserRangeWrapper_().getStartNode())};
goog.dom.TextRange.prototype.getStartOffset=function(){return null!=this.startOffset_?this.startOffset_:this.startOffset_=this.getBrowserRangeWrapper_().getStartOffset()};goog.dom.TextRange.prototype.getStartPosition=function(){return this.isReversed()?this.getBrowserRangeWrapper_().getEndPosition():this.getBrowserRangeWrapper_().getStartPosition()};goog.dom.TextRange.prototype.getEndNode=function(){return this.endNode_||(this.endNode_=this.getBrowserRangeWrapper_().getEndNode())};
goog.dom.TextRange.prototype.getEndOffset=function(){return null!=this.endOffset_?this.endOffset_:this.endOffset_=this.getBrowserRangeWrapper_().getEndOffset()};goog.dom.TextRange.prototype.getEndPosition=function(){return this.isReversed()?this.getBrowserRangeWrapper_().getStartPosition():this.getBrowserRangeWrapper_().getEndPosition()};
goog.dom.TextRange.prototype.moveToNodes=function(c,d,e,f,h){this.startNode_=c;this.startOffset_=d;this.endNode_=e;this.endOffset_=f;this.isReversed_=h;this.browserRangeWrapper_=null};goog.dom.TextRange.prototype.isReversed=function(){return this.isReversed_};
goog.dom.TextRange.prototype.containsRange=function(c,d){var e=c.getType();return e==goog.dom.RangeType.TEXT?this.getBrowserRangeWrapper_().containsRange(c.getBrowserRangeWrapper_(),d):e==goog.dom.RangeType.CONTROL?(e=c.getElements(),(d?goog.array.some:goog.array.every)(e,function(c){return this.containsNode(c,d)},this)):!1};
goog.dom.TextRange.isAttachedNode=function(c){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var d=!1;try{d=c.parentNode}catch(e){}return!!d}return goog.dom.contains(c.ownerDocument.body,c)};goog.dom.TextRange.prototype.isRangeInDocument=function(){return(!this.startNode_||goog.dom.TextRange.isAttachedNode(this.startNode_))&&(!this.endNode_||goog.dom.TextRange.isAttachedNode(this.endNode_))&&(!(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9))||this.getBrowserRangeWrapper_().isRangeInDocument())};
goog.dom.TextRange.prototype.isCollapsed=function(){return this.getBrowserRangeWrapper_().isCollapsed()};goog.dom.TextRange.prototype.getText=function(){return this.getBrowserRangeWrapper_().getText()};goog.dom.TextRange.prototype.getHtmlFragment=function(){return this.getBrowserRangeWrapper_().getHtmlFragment()};goog.dom.TextRange.prototype.getValidHtml=function(){return this.getBrowserRangeWrapper_().getValidHtml()};
goog.dom.TextRange.prototype.getPastableHtml=function(){var c=this.getValidHtml();if(c.match(/^\s*<td\b/i))c="<table><tbody><tr>"+c+"</tr></tbody></table>";else if(c.match(/^\s*<tr\b/i))c="<table><tbody>"+c+"</tbody></table>";else if(c.match(/^\s*<tbody\b/i))c="<table>"+c+"</table>";else if(c.match(/^\s*<li\b/i)){for(var d=this.getContainer(),e=goog.dom.TagName.UL;d;){if(d.tagName==goog.dom.TagName.OL){e=goog.dom.TagName.OL;break}else if(d.tagName==goog.dom.TagName.UL)break;d=d.parentNode}c=goog.string.buildString("<",
e,">",c,"</",e,">")}return c};goog.dom.TextRange.prototype.__iterator__=function(c){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.TextRange.prototype.select=function(){this.getBrowserRangeWrapper_().select(this.isReversed_)};goog.dom.TextRange.prototype.removeContents=function(){this.getBrowserRangeWrapper_().removeContents();this.clearCachedValues_()};
goog.dom.TextRange.prototype.surroundContents=function(c){c=this.getBrowserRangeWrapper_().surroundContents(c);this.clearCachedValues_();return c};goog.dom.TextRange.prototype.insertNode=function(c,d){var e=this.getBrowserRangeWrapper_().insertNode(c,d);this.clearCachedValues_();return e};goog.dom.TextRange.prototype.surroundWithNodes=function(c,d){this.getBrowserRangeWrapper_().surroundWithNodes(c,d);this.clearCachedValues_()};goog.dom.TextRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedTextRange_(this)};
goog.dom.TextRange.prototype.collapse=function(c){c=this.isReversed()?!c:c;this.browserRangeWrapper_&&this.browserRangeWrapper_.collapse(c);c?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_);this.isReversed_=!1};goog.dom.DomSavedTextRange_=function(c){this.anchorNode_=c.getAnchorNode();this.anchorOffset_=c.getAnchorOffset();this.focusNode_=c.getFocusNode();this.focusOffset_=c.getFocusOffset()};
goog.inherits(goog.dom.DomSavedTextRange_,goog.dom.SavedRange);goog.dom.DomSavedTextRange_.prototype.restoreInternal=function(){return goog.dom.Range.createFromNodes(this.anchorNode_,this.anchorOffset_,this.focusNode_,this.focusOffset_)};goog.dom.DomSavedTextRange_.prototype.disposeInternal=function(){goog.dom.DomSavedTextRange_.superClass_.disposeInternal.call(this);this.focusNode_=this.anchorNode_=null};goog.dom.ControlRange=function(){};goog.inherits(goog.dom.ControlRange,goog.dom.AbstractMultiRange);goog.dom.ControlRange.createFromBrowserRange=function(c){var d=new goog.dom.ControlRange;d.range_=c;return d};goog.dom.ControlRange.createFromElements=function(c){for(var d=goog.dom.getOwnerDocument(arguments[0]).body.createControlRange(),e=0,f=arguments.length;e<f;e++)d.addElement(arguments[e]);return goog.dom.ControlRange.createFromBrowserRange(d)};goog.dom.ControlRange.prototype.range_=null;
goog.dom.ControlRange.prototype.elements_=null;goog.dom.ControlRange.prototype.sortedElements_=null;goog.dom.ControlRange.prototype.clearCachedValues_=function(){this.sortedElements_=this.elements_=null};goog.dom.ControlRange.prototype.clone=function(){return goog.dom.ControlRange.createFromElements.apply(this,this.getElements())};goog.dom.ControlRange.prototype.getType=function(){return goog.dom.RangeType.CONTROL};
goog.dom.ControlRange.prototype.getBrowserRangeObject=function(){return this.range_||document.body.createControlRange()};goog.dom.ControlRange.prototype.setBrowserRangeObject=function(c){if(!goog.dom.AbstractRange.isNativeControlRange(c))return!1;this.range_=c;return!0};goog.dom.ControlRange.prototype.getTextRangeCount=function(){return this.range_?this.range_.length:0};goog.dom.ControlRange.prototype.getTextRange=function(c){return goog.dom.TextRange.createFromNodeContents(this.range_.item(c))};
goog.dom.ControlRange.prototype.getContainer=function(){return goog.dom.findCommonAncestor.apply(null,this.getElements())};goog.dom.ControlRange.prototype.getStartNode=function(){return this.getSortedElements()[0]};goog.dom.ControlRange.prototype.getStartOffset=function(){return 0};goog.dom.ControlRange.prototype.getEndNode=function(){var c=this.getSortedElements(),d=goog.array.peek(c);return goog.array.find(c,function(c){return goog.dom.contains(c,d)})};
goog.dom.ControlRange.prototype.getEndOffset=function(){return this.getEndNode().childNodes.length};goog.dom.ControlRange.prototype.getElements=function(){if(!this.elements_&&(this.elements_=[],this.range_))for(var c=0;c<this.range_.length;c++)this.elements_.push(this.range_.item(c));return this.elements_};
goog.dom.ControlRange.prototype.getSortedElements=function(){this.sortedElements_||(this.sortedElements_=this.getElements().concat(),this.sortedElements_.sort(function(c,d){return c.sourceIndex-d.sourceIndex}));return this.sortedElements_};goog.dom.ControlRange.prototype.isRangeInDocument=function(){var c=!1;try{c=goog.array.every(this.getElements(),function(c){return goog.userAgent.IE?!!c.parentNode:goog.dom.contains(c.ownerDocument.body,c)})}catch(d){}return c};
goog.dom.ControlRange.prototype.isCollapsed=function(){return!this.range_||!this.range_.length};goog.dom.ControlRange.prototype.getText=function(){return""};goog.dom.ControlRange.prototype.getHtmlFragment=function(){return goog.array.map(this.getSortedElements(),goog.dom.getOuterHtml).join("")};goog.dom.ControlRange.prototype.getValidHtml=function(){return this.getHtmlFragment()};goog.dom.ControlRange.prototype.getPastableHtml=goog.dom.ControlRange.prototype.getValidHtml;
goog.dom.ControlRange.prototype.__iterator__=function(c){return new goog.dom.ControlRangeIterator(this)};goog.dom.ControlRange.prototype.select=function(){this.range_&&this.range_.select()};goog.dom.ControlRange.prototype.removeContents=function(){if(this.range_){for(var c=[],d=0,e=this.range_.length;d<e;d++)c.push(this.range_.item(d));goog.array.forEach(c,goog.dom.removeNode);this.collapse(!1)}};
goog.dom.ControlRange.prototype.replaceContentsWithNode=function(c){c=this.insertNode(c,!0);this.isCollapsed()||this.removeContents();return c};goog.dom.ControlRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedControlRange_(this)};goog.dom.ControlRange.prototype.collapse=function(c){this.range_=null;this.clearCachedValues_()};goog.dom.DomSavedControlRange_=function(c){this.elements_=c.getElements()};goog.inherits(goog.dom.DomSavedControlRange_,goog.dom.SavedRange);
goog.dom.DomSavedControlRange_.prototype.restoreInternal=function(){for(var c=(this.elements_.length?goog.dom.getOwnerDocument(this.elements_[0]):document).body.createControlRange(),d=0,e=this.elements_.length;d<e;d++)c.addElement(this.elements_[d]);return goog.dom.ControlRange.createFromBrowserRange(c)};goog.dom.DomSavedControlRange_.prototype.disposeInternal=function(){goog.dom.DomSavedControlRange_.superClass_.disposeInternal.call(this);delete this.elements_};
goog.dom.ControlRangeIterator=function(c){c&&(this.elements_=c.getSortedElements(),this.startNode_=this.elements_.shift(),this.endNode_=goog.array.peek(this.elements_)||this.startNode_);goog.dom.RangeIterator.call(this,this.startNode_,!1)};goog.inherits(goog.dom.ControlRangeIterator,goog.dom.RangeIterator);goog.dom.ControlRangeIterator.prototype.startNode_=null;goog.dom.ControlRangeIterator.prototype.endNode_=null;goog.dom.ControlRangeIterator.prototype.elements_=null;
goog.dom.ControlRangeIterator.prototype.getStartTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getEndTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.ControlRangeIterator.prototype.getEndNode=function(){return this.endNode_};goog.dom.ControlRangeIterator.prototype.isLast=function(){return!this.depth&&!this.elements_.length};
goog.dom.ControlRangeIterator.prototype.next=function(){if(this.isLast())throw goog.iter.StopIteration;if(!this.depth){var c=this.elements_.shift();this.setPosition(c,goog.dom.TagWalkType.START_TAG,goog.dom.TagWalkType.START_TAG);return c}return goog.dom.ControlRangeIterator.superClass_.next.call(this)};
goog.dom.ControlRangeIterator.prototype.copyFrom=function(c){this.elements_=c.elements_;this.startNode_=c.startNode_;this.endNode_=c.endNode_;goog.dom.ControlRangeIterator.superClass_.copyFrom.call(this,c)};goog.dom.ControlRangeIterator.prototype.clone=function(){var c=new goog.dom.ControlRangeIterator(null);c.copyFrom(this);return c};goog.dom.MultiRange=function(){this.browserRanges_=[];this.ranges_=[];this.container_=this.sortedRanges_=null};goog.inherits(goog.dom.MultiRange,goog.dom.AbstractMultiRange);goog.dom.MultiRange.createFromBrowserSelection=function(c){for(var d=new goog.dom.MultiRange,e=0,f=c.rangeCount;e<f;e++)d.browserRanges_.push(c.getRangeAt(e));return d};goog.dom.MultiRange.createFromBrowserRanges=function(c){var d=new goog.dom.MultiRange;d.browserRanges_=goog.array.clone(c);return d};
goog.dom.MultiRange.createFromTextRanges=function(c){var d=new goog.dom.MultiRange;d.ranges_=c;d.browserRanges_=goog.array.map(c,function(c){return c.getBrowserRangeObject()});return d};goog.dom.MultiRange.prototype.logger_=goog.log.getLogger("goog.dom.MultiRange");goog.dom.MultiRange.prototype.clearCachedValues_=function(){this.ranges_=[];this.container_=this.sortedRanges_=null};goog.dom.MultiRange.prototype.clone=function(){return goog.dom.MultiRange.createFromBrowserRanges(this.browserRanges_)};
goog.dom.MultiRange.prototype.getType=function(){return goog.dom.RangeType.MULTI};goog.dom.MultiRange.prototype.getBrowserRangeObject=function(){1<this.browserRanges_.length&&goog.log.warning(this.logger_,"getBrowserRangeObject called on MultiRange with more than 1 range");return this.browserRanges_[0]};goog.dom.MultiRange.prototype.setBrowserRangeObject=function(c){return!1};goog.dom.MultiRange.prototype.getTextRangeCount=function(){return this.browserRanges_.length};
goog.dom.MultiRange.prototype.getTextRange=function(c){this.ranges_[c]||(this.ranges_[c]=goog.dom.TextRange.createFromBrowserRange(this.browserRanges_[c]));return this.ranges_[c]};goog.dom.MultiRange.prototype.getContainer=function(){if(!this.container_){for(var c=[],d=0,e=this.getTextRangeCount();d<e;d++)c.push(this.getTextRange(d).getContainer());this.container_=goog.dom.findCommonAncestor.apply(null,c)}return this.container_};
goog.dom.MultiRange.prototype.getSortedRanges=function(){this.sortedRanges_||(this.sortedRanges_=this.getTextRanges(),this.sortedRanges_.sort(function(c,d){var e=c.getStartNode(),f=c.getStartOffset(),h=d.getStartNode(),k=d.getStartOffset();return e==h&&f==k?0:goog.dom.Range.isReversed(e,f,h,k)?1:-1}));return this.sortedRanges_};goog.dom.MultiRange.prototype.getStartNode=function(){return this.getSortedRanges()[0].getStartNode()};goog.dom.MultiRange.prototype.getStartOffset=function(){return this.getSortedRanges()[0].getStartOffset()};
goog.dom.MultiRange.prototype.getEndNode=function(){return goog.array.peek(this.getSortedRanges()).getEndNode()};goog.dom.MultiRange.prototype.getEndOffset=function(){return goog.array.peek(this.getSortedRanges()).getEndOffset()};goog.dom.MultiRange.prototype.isRangeInDocument=function(){return goog.array.every(this.getTextRanges(),function(c){return c.isRangeInDocument()})};goog.dom.MultiRange.prototype.isCollapsed=function(){return 0==this.browserRanges_.length||1==this.browserRanges_.length&&this.getTextRange(0).isCollapsed()};
goog.dom.MultiRange.prototype.getText=function(){return goog.array.map(this.getTextRanges(),function(c){return c.getText()}).join("")};goog.dom.MultiRange.prototype.getHtmlFragment=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.getValidHtml=function(){return goog.array.map(this.getTextRanges(),function(c){return c.getValidHtml()}).join("")};goog.dom.MultiRange.prototype.getPastableHtml=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.__iterator__=function(c){return new goog.dom.MultiRangeIterator(this)};
goog.dom.MultiRange.prototype.select=function(){var c=goog.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());c.removeAllRanges();for(var d=0,e=this.getTextRangeCount();d<e;d++)c.addRange(this.getTextRange(d).getBrowserRangeObject())};goog.dom.MultiRange.prototype.removeContents=function(){goog.array.forEach(this.getTextRanges(),function(c){c.removeContents()})};goog.dom.MultiRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedMultiRange_(this)};
goog.dom.MultiRange.prototype.collapse=function(c){if(!this.isCollapsed()){var d=c?this.getTextRange(0):this.getTextRange(this.getTextRangeCount()-1);this.clearCachedValues_();d.collapse(c);this.ranges_=[d];this.sortedRanges_=[d];this.browserRanges_=[d.getBrowserRangeObject()]}};goog.dom.DomSavedMultiRange_=function(c){this.savedRanges_=goog.array.map(c.getTextRanges(),function(c){return c.saveUsingDom()})};goog.inherits(goog.dom.DomSavedMultiRange_,goog.dom.SavedRange);
goog.dom.DomSavedMultiRange_.prototype.restoreInternal=function(){var c=goog.array.map(this.savedRanges_,function(c){return c.restore()});return goog.dom.MultiRange.createFromTextRanges(c)};goog.dom.DomSavedMultiRange_.prototype.disposeInternal=function(){goog.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);goog.array.forEach(this.savedRanges_,function(c){c.dispose()});delete this.savedRanges_};
goog.dom.MultiRangeIterator=function(c){c&&(this.iterators_=goog.array.map(c.getSortedRanges(),function(c){return goog.iter.toIterator(c)}));goog.dom.RangeIterator.call(this,c?this.getStartNode():null,!1)};goog.inherits(goog.dom.MultiRangeIterator,goog.dom.RangeIterator);goog.dom.MultiRangeIterator.prototype.iterators_=null;goog.dom.MultiRangeIterator.prototype.currentIdx_=0;goog.dom.MultiRangeIterator.prototype.getStartTextOffset=function(){return this.iterators_[this.currentIdx_].getStartTextOffset()};
goog.dom.MultiRangeIterator.prototype.getEndTextOffset=function(){return this.iterators_[this.currentIdx_].getEndTextOffset()};goog.dom.MultiRangeIterator.prototype.getStartNode=function(){return this.iterators_[0].getStartNode()};goog.dom.MultiRangeIterator.prototype.getEndNode=function(){return goog.array.peek(this.iterators_).getEndNode()};goog.dom.MultiRangeIterator.prototype.isLast=function(){return this.iterators_[this.currentIdx_].isLast()};
goog.dom.MultiRangeIterator.prototype.next=function(){try{var c=this.iterators_[this.currentIdx_],d=c.next();this.setPosition(c.node,c.tagType,c.depth);return d}catch(e){if(e!==goog.iter.StopIteration||this.iterators_.length-1==this.currentIdx_)throw e;this.currentIdx_++;return this.next()}};goog.dom.MultiRangeIterator.prototype.copyFrom=function(c){this.iterators_=goog.array.clone(c.iterators_);goog.dom.MultiRangeIterator.superClass_.copyFrom.call(this,c)};
goog.dom.MultiRangeIterator.prototype.clone=function(){var c=new goog.dom.MultiRangeIterator(null);c.copyFrom(this);return c};goog.dom.Range={};goog.dom.Range.createFromWindow=function(c){return(c=goog.dom.AbstractRange.getBrowserSelectionForWindow(c||window))&&goog.dom.Range.createFromBrowserSelection(c)};
goog.dom.Range.createFromBrowserSelection=function(c){var d,e=!1;if(c.createRange)try{d=c.createRange()}catch(f){return null}else if(c.rangeCount){if(1<c.rangeCount)return goog.dom.MultiRange.createFromBrowserSelection(c);d=c.getRangeAt(0);e=goog.dom.Range.isReversed(c.anchorNode,c.anchorOffset,c.focusNode,c.focusOffset)}else return null;return goog.dom.Range.createFromBrowserRange(d,e)};
goog.dom.Range.createFromBrowserRange=function(c,d){return goog.dom.AbstractRange.isNativeControlRange(c)?goog.dom.ControlRange.createFromBrowserRange(c):goog.dom.TextRange.createFromBrowserRange(c,d)};goog.dom.Range.createFromNodeContents=function(c,d){return goog.dom.TextRange.createFromNodeContents(c,d)};goog.dom.Range.createCaret=function(c,d){return goog.dom.TextRange.createFromNodes(c,d,c,d)};goog.dom.Range.createFromNodes=function(c,d,e,f){return goog.dom.TextRange.createFromNodes(c,d,e,f)};
goog.dom.Range.clearSelection=function(c){if(c=goog.dom.AbstractRange.getBrowserSelectionForWindow(c||window))if(c.empty)try{c.empty()}catch(d){}else try{c.removeAllRanges()}catch(e){}};goog.dom.Range.hasSelection=function(c){c=goog.dom.AbstractRange.getBrowserSelectionForWindow(c||window);return!!c&&(goog.userAgent.IE?"None"!=c.type:!!c.rangeCount)};
goog.dom.Range.isReversed=function(c,d,e,f){if(c==e)return f<d;var h;if(c.nodeType==goog.dom.NodeType.ELEMENT&&d)if(h=c.childNodes[d])c=h,d=0;else if(goog.dom.contains(c,e))return!0;if(e.nodeType==goog.dom.NodeType.ELEMENT&&f)if(h=e.childNodes[f])e=h,f=0;else if(goog.dom.contains(e,c))return!1;return 0<(goog.dom.compareNodeOrder(c,e)||d-f)};goog.editor.style={};goog.editor.style.getComputedOrCascadedStyle_=function(c,d){return c.nodeType!=goog.dom.NodeType.ELEMENT?null:goog.userAgent.IE?goog.style.getCascadedStyle(c,d):goog.style.getComputedStyle(c,d)};goog.editor.style.isDisplayBlock=function(c){return"block"==goog.editor.style.getComputedOrCascadedStyle_(c,"display")};goog.editor.style.isContainer=function(c){var d=c&&c.nodeName.toLowerCase();return!(!c||!goog.editor.style.isDisplayBlock(c)&&"td"!=d&&"table"!=d&&"li"!=d)};
goog.editor.style.getContainer=function(c){return goog.dom.getAncestor(c,goog.editor.style.isContainer,!0)};goog.editor.style.SELECTABLE_INPUT_TYPES_=goog.object.createSet("text","file","url");goog.editor.style.cancelMouseDownHelper_=function(c){var d=c.target.tagName;d!=goog.dom.TagName.TEXTAREA&&d!=goog.dom.TagName.INPUT&&c.preventDefault()};
goog.editor.style.makeUnselectable=function(c,d){goog.editor.BrowserFeature.HAS_UNSELECTABLE_STYLE&&d.listen(c,goog.events.EventType.MOUSEDOWN,goog.editor.style.cancelMouseDownHelper_,!0);goog.style.setUnselectable(c,!0);for(var e=c.getElementsByTagName(goog.dom.TagName.INPUT),f=0,h=e.length;f<h;f++){var k=e[f];k.type in goog.editor.style.SELECTABLE_INPUT_TYPES_&&goog.editor.style.makeSelectable(k)}goog.array.forEach(c.getElementsByTagName(goog.dom.TagName.TEXTAREA),goog.editor.style.makeSelectable)};
goog.editor.style.makeSelectable=function(c){goog.style.setUnselectable(c,!1);if(goog.editor.BrowserFeature.HAS_UNSELECTABLE_STYLE){var d=c;for(c=c.parentNode;c&&c.tagName!=goog.dom.TagName.HTML;){if(goog.style.isUnselectable(c)){goog.style.setUnselectable(c,!1,!0);for(var e=0,f=c.childNodes.length;e<f;e++){var h=c.childNodes[e];h!=d&&h.nodeType==goog.dom.NodeType.ELEMENT&&goog.style.setUnselectable(c.childNodes[e],!0)}}d=c;c=c.parentNode}}};goog.dom.iter={};goog.dom.iter.SiblingIterator=function(c,d,e){this.node_=c;this.reverse_=!!e;c&&!d&&this.next()};goog.inherits(goog.dom.iter.SiblingIterator,goog.iter.Iterator);goog.dom.iter.SiblingIterator.prototype.next=function(){var c=this.node_;if(!c)throw goog.iter.StopIteration;this.node_=this.reverse_?c.previousSibling:c.nextSibling;return c};
goog.dom.iter.ChildIterator=function(c,d,e){goog.isDef(e)||(e=d&&c.childNodes.length?c.childNodes.length-1:0);goog.dom.iter.SiblingIterator.call(this,c.childNodes[e],!0,d)};goog.inherits(goog.dom.iter.ChildIterator,goog.dom.iter.SiblingIterator);goog.dom.iter.AncestorIterator=function(c,d){(this.node_=c)&&!d&&this.next()};goog.inherits(goog.dom.iter.AncestorIterator,goog.iter.Iterator);
goog.dom.iter.AncestorIterator.prototype.next=function(){var c=this.node_;if(!c)throw goog.iter.StopIteration;this.node_=c.parentNode;return c};goog.editor.node={};
goog.editor.node.BLOCK_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.ADDRESS,goog.dom.TagName.ARTICLE,goog.dom.TagName.ASIDE,goog.dom.TagName.BLOCKQUOTE,goog.dom.TagName.BODY,goog.dom.TagName.CAPTION,goog.dom.TagName.CENTER,goog.dom.TagName.COL,goog.dom.TagName.COLGROUP,goog.dom.TagName.DETAILS,goog.dom.TagName.DIR,goog.dom.TagName.DIV,goog.dom.TagName.DL,goog.dom.TagName.DD,goog.dom.TagName.DT,goog.dom.TagName.FIELDSET,goog.dom.TagName.FIGCAPTION,goog.dom.TagName.FIGURE,goog.dom.TagName.FOOTER,goog.dom.TagName.FORM,
goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6,goog.dom.TagName.HEADER,goog.dom.TagName.HGROUP,goog.dom.TagName.HR,goog.dom.TagName.ISINDEX,goog.dom.TagName.OL,goog.dom.TagName.LI,goog.dom.TagName.MAP,goog.dom.TagName.MENU,goog.dom.TagName.NAV,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.P,goog.dom.TagName.PRE,goog.dom.TagName.SECTION,goog.dom.TagName.SUMMARY,goog.dom.TagName.TABLE,goog.dom.TagName.TBODY,
goog.dom.TagName.TD,goog.dom.TagName.TFOOT,goog.dom.TagName.TH,goog.dom.TagName.THEAD,goog.dom.TagName.TR,goog.dom.TagName.UL);goog.editor.node.NON_EMPTY_TAGS_=goog.object.createSet(goog.dom.TagName.IMG,goog.dom.TagName.IFRAME,goog.dom.TagName.EMBED);goog.editor.node.isStandardsMode=function(c){return goog.dom.getDomHelper(c).isCss1CompatMode()};goog.editor.node.getRightMostLeaf=function(c){for(var d;d=goog.editor.node.getLastChild(c);)c=d;return c};
goog.editor.node.getLeftMostLeaf=function(c){for(var d;d=goog.editor.node.getFirstChild(c);)c=d;return c};goog.editor.node.getFirstChild=function(c){return goog.editor.node.getChildHelper_(c,!1)};goog.editor.node.getLastChild=function(c){return goog.editor.node.getChildHelper_(c,!0)};goog.editor.node.getPreviousSibling=function(c){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(c,!1,!0),goog.editor.node.isImportant))};
goog.editor.node.getNextSibling=function(c){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(c),goog.editor.node.isImportant))};goog.editor.node.getChildHelper_=function(c,d){return c&&c.nodeType==goog.dom.NodeType.ELEMENT?goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.ChildIterator(c,d),goog.editor.node.isImportant)):null};goog.editor.node.getFirstValue_=function(c){try{return c.next()}catch(d){return null}};
goog.editor.node.isImportant=function(c){return c.nodeType==goog.dom.NodeType.ELEMENT||c.nodeType==goog.dom.NodeType.TEXT&&!goog.editor.node.isAllNonNbspWhiteSpace(c)};goog.editor.node.isAllNonNbspWhiteSpace=function(c){return goog.string.isBreakingWhitespace(c.nodeValue)};
goog.editor.node.isEmpty=function(c,d){var e=goog.dom.getRawTextContent(c);if(c.getElementsByTagName)for(var f in goog.editor.node.NON_EMPTY_TAGS_)if(c.tagName==f||0<c.getElementsByTagName(f).length)return!1;return!d&&e==goog.string.Unicode.NBSP||goog.string.isBreakingWhitespace(e)};goog.editor.node.getLength=function(c){return c.length||c.childNodes.length};goog.editor.node.findInChildren=function(c,d){for(var e=0,f=c.childNodes.length;e<f;e++)if(d(c.childNodes[e]))return e;return null};
goog.editor.node.findHighestMatchingAncestor=function(c,d){for(var e=c.parentNode,f=null;e&&d(e);)f=e,e=e.parentNode;return f};goog.editor.node.isBlockTag=function(c){return!!goog.editor.node.BLOCK_TAG_NAMES_[c.tagName]};goog.editor.node.skipEmptyTextNodes=function(c){for(;c&&c.nodeType==goog.dom.NodeType.TEXT&&!c.nodeValue;)c=c.nextSibling;return c};goog.editor.node.isEditableContainer=function(c){return c.getAttribute&&"true"==c.getAttribute("g_editable")};
goog.editor.node.isEditable=function(c){return!!goog.dom.getAncestor(c,goog.editor.node.isEditableContainer)};goog.editor.node.findTopMostEditableAncestor=function(c,d){for(var e=null;c&&!goog.editor.node.isEditableContainer(c);)d(c)&&(e=c),c=c.parentNode;return e};goog.editor.node.splitDomTreeAt=function(c,d,e){for(var f;c!=e&&(f=c.parentNode);)d=goog.editor.node.getSecondHalfOfNode_(f,c,d),c=f;return d};
goog.editor.node.getSecondHalfOfNode_=function(c,d,e){for(c=c.cloneNode(!1);d.nextSibling;)goog.dom.appendChild(c,d.nextSibling);e&&c.insertBefore(e,c.firstChild);return c};goog.editor.node.transferChildren=function(c,d){goog.dom.append(c,d.childNodes)};goog.editor.node.replaceInnerHtml=function(c,d){goog.userAgent.IE&&goog.dom.removeChildren(c);c.innerHTML=d};goog.editor.range={};goog.editor.range.narrow=function(c,d){var e=c.getStartNode(),f=c.getEndNode();if(e&&f){var h=function(c){return c==d},e=goog.dom.getAncestor(e,h,!0),f=goog.dom.getAncestor(f,h,!0);if(e&&f)return c.clone();if(e)return f=goog.editor.node.getRightMostLeaf(d),goog.dom.Range.createFromNodes(c.getStartNode(),c.getStartOffset(),f,goog.editor.node.getLength(f));if(f)return goog.dom.Range.createFromNodes(goog.editor.node.getLeftMostLeaf(d),0,c.getEndNode(),c.getEndOffset())}return null};
goog.editor.range.expand=function(c,d){var e=goog.editor.range.expandEndPointToContainer_(c,goog.dom.RangeEndpoint.START,d),e=goog.editor.range.expandEndPointToContainer_(e,goog.dom.RangeEndpoint.END,d),f=e.getStartNode(),h=e.getEndNode(),k=e.getStartOffset(),e=e.getEndOffset();if(f==h){for(;h!=d&&0==k&&e==goog.editor.node.getLength(h);)f=h.parentNode,k=goog.array.indexOf(f.childNodes,h),e=k+1,h=f;f=h}return goog.dom.Range.createFromNodes(f,k,h,e)};
goog.editor.range.expandEndPointToContainer_=function(c,d,e){for(var f=(d=d==goog.dom.RangeEndpoint.START)?c.getStartNode():c.getEndNode(),h=d?c.getStartOffset():c.getEndOffset(),k=c.getContainerElement();f!=k&&f!=e&&!(d&&0!=h||!d&&h!=goog.editor.node.getLength(f));)var l=f.parentNode,f=goog.array.indexOf(l.childNodes,f),h=d?f:f+1,f=l;return goog.dom.Range.createFromNodes(d?f:c.getStartNode(),d?h:c.getStartOffset(),d?c.getEndNode():f,d?c.getEndOffset():h)};
goog.editor.range.selectNodeStart=function(c){goog.dom.Range.createCaret(goog.editor.node.getLeftMostLeaf(c),0).select()};goog.editor.range.placeCursorNextTo=function(c,d){var e=c.parentNode,f=goog.array.indexOf(e.childNodes,c)+(d?0:1),e=goog.editor.range.Point.createDeepestPoint(e,f,d,!0),e=goog.dom.Range.createCaret(e.node,e.offset);e.select();return e};
goog.editor.range.selectionPreservingNormalize=function(c){var d=goog.dom.getOwnerDocument(c),d=goog.dom.Range.createFromWindow(goog.dom.getWindow(d));(c=goog.editor.range.rangePreservingNormalize(c,d))&&c.select()};goog.editor.range.normalizeNodeIe_=function(c){for(var d=null,e=c.firstChild;e;){var f=e.nextSibling;e.nodeType==goog.dom.NodeType.TEXT?""==e.nodeValue?c.removeChild(e):d?(d.nodeValue+=e.nodeValue,c.removeChild(e)):d=e:(goog.editor.range.normalizeNodeIe_(e),d=null);e=f}};
goog.editor.range.normalizeNode=function(c){goog.userAgent.IE?goog.editor.range.normalizeNodeIe_(c):c.normalize()};goog.editor.range.rangePreservingNormalize=function(c,d){if(d)var e=goog.editor.range.normalize(d),f=goog.editor.style.getContainer(d.getContainerElement());f?goog.editor.range.normalizeNode(goog.dom.findCommonAncestor(f,c)):c&&goog.editor.range.normalizeNode(c);return e?e():null};
goog.editor.range.getDeepEndPoint=function(c,d){return d?goog.editor.range.Point.createDeepestPoint(c.getStartNode(),c.getStartOffset()):goog.editor.range.Point.createDeepestPoint(c.getEndNode(),c.getEndOffset())};
goog.editor.range.normalize=function(c){var d=c.isReversed(),e=goog.editor.range.normalizePoint_(goog.editor.range.getDeepEndPoint(c,!d)),f=e.getParentPoint(),h=e.node.previousSibling;e.node.nodeType==goog.dom.NodeType.TEXT&&(e.node=null);var k=goog.editor.range.normalizePoint_(goog.editor.range.getDeepEndPoint(c,d)),l=k.getParentPoint(),m=k.node.previousSibling;k.node.nodeType==goog.dom.NodeType.TEXT&&(k.node=null);return function(){!e.node&&h&&(e.node=h.nextSibling,e.node||(e=goog.editor.range.Point.getPointAtEndOfNode(h)));
!k.node&&m&&(k.node=m.nextSibling,k.node||(k=goog.editor.range.Point.getPointAtEndOfNode(m)));return goog.dom.Range.createFromNodes(e.node||f.node.firstChild||f.node,e.offset,k.node||l.node.firstChild||l.node,k.offset)}};
goog.editor.range.normalizePoint_=function(c){var d;if(c.node.nodeType==goog.dom.NodeType.TEXT)for(d=c.node.previousSibling;d&&d.nodeType==goog.dom.NodeType.TEXT;d=d.previousSibling)c.offset+=goog.editor.node.getLength(d);else d=c.node.previousSibling;var e=c.node.parentNode;c.node=d?d.nextSibling:e.firstChild;return c};goog.editor.range.isEditable=function(c){var d=c.getContainerElement();return c.getStartNode()!=d.parentElement&&goog.editor.node.isEditableContainer(d)||goog.editor.node.isEditable(d)};
goog.editor.range.intersectsTag=function(c,d){return goog.dom.getAncestorByTagNameAndClass(c.getContainerElement(),d)?!0:goog.iter.some(c,function(c){return c.tagName==d})};goog.editor.range.Point=function(c,d){this.node=c;this.offset=d};goog.editor.range.Point.prototype.getParentPoint=function(){var c=this.node.parentNode;return new goog.editor.range.Point(c,goog.array.indexOf(c.childNodes,this.node))};
goog.editor.range.Point.createDeepestPoint=function(c,d,e,f){for(;c.nodeType==goog.dom.NodeType.ELEMENT;){var h=c.childNodes[d];if(h||c.lastChild)if(h){var k=h.previousSibling;if(e&&k){if(f&&goog.editor.range.Point.isTerminalElement_(k))break;c=k;d=goog.editor.node.getLength(c)}else{if(f&&goog.editor.range.Point.isTerminalElement_(h))break;c=h;d=0}}else{if(f&&goog.editor.range.Point.isTerminalElement_(c.lastChild))break;c=c.lastChild;d=goog.editor.node.getLength(c)}else break}return new goog.editor.range.Point(c,
d)};goog.editor.range.Point.isTerminalElement_=function(c){return c.nodeType==goog.dom.NodeType.ELEMENT&&!goog.dom.canHaveChildren(c)};goog.editor.range.Point.getPointAtEndOfNode=function(c){return new goog.editor.range.Point(c,goog.editor.node.getLength(c))};goog.editor.range.saveUsingNormalizedCarets=function(c){return new goog.editor.range.NormalizedCaretRange_(c)};goog.editor.range.NormalizedCaretRange_=function(c){goog.dom.SavedCaretRange.call(this,c)};
goog.inherits(goog.editor.range.NormalizedCaretRange_,goog.dom.SavedCaretRange);goog.editor.range.NormalizedCaretRange_.prototype.removeCarets=function(c){var d=this.getCaret(!0),e=this.getCaret(!1),d=d&&e?goog.dom.findCommonAncestor(d,e):d||e;goog.editor.range.NormalizedCaretRange_.superClass_.removeCarets.call(this);if(c)return goog.editor.range.rangePreservingNormalize(d,c);d&&goog.editor.range.selectionPreservingNormalize(d)};goog.editor.Plugin=function(){goog.events.EventTarget.call(this);this.enabled_=this.activeOnUneditableFields()};goog.inherits(goog.editor.Plugin,goog.events.EventTarget);goog.editor.Plugin.prototype.fieldObject=null;goog.editor.Plugin.prototype.getFieldDomHelper=function(){return this.getFieldObject()&&this.getFieldObject().getEditableDomHelper()};goog.editor.Plugin.prototype.autoDispose_=!0;goog.editor.Plugin.prototype.logger=goog.log.getLogger("goog.editor.Plugin");
goog.editor.Plugin.prototype.getFieldObject=function(){return this.fieldObject};goog.editor.Plugin.prototype.setFieldObject=function(c){this.fieldObject=c};goog.editor.Plugin.prototype.registerFieldObject=function(c){this.setFieldObject(c)};goog.editor.Plugin.prototype.unregisterFieldObject=function(c){this.getFieldObject()&&(this.disable(this.getFieldObject()),this.setFieldObject(null))};
goog.editor.Plugin.prototype.enable=function(c){this.getFieldObject()==c?this.enabled_=!0:goog.log.error(this.logger,"Trying to enable an unregistered field with this plugin.")};goog.editor.Plugin.prototype.disable=function(c){this.getFieldObject()==c?this.enabled_=!1:goog.log.error(this.logger,"Trying to disable an unregistered field with this plugin.")};goog.editor.Plugin.prototype.isEnabled=function(c){return this.getFieldObject()==c?this.enabled_:!1};
goog.editor.Plugin.prototype.setAutoDispose=function(c){this.autoDispose_=c};goog.editor.Plugin.prototype.isAutoDispose=function(){return this.autoDispose_};goog.editor.Plugin.prototype.activeOnUneditableFields=goog.functions.FALSE;goog.editor.Plugin.prototype.isSilentCommand=goog.functions.FALSE;goog.editor.Plugin.prototype.disposeInternal=function(){this.getFieldObject()&&this.unregisterFieldObject(this.getFieldObject());goog.editor.Plugin.superClass_.disposeInternal.call(this)};
goog.editor.Plugin.Op={KEYDOWN:1,KEYPRESS:2,KEYUP:3,SELECTION:4,SHORTCUT:5,EXEC_COMMAND:6,QUERY_COMMAND:7,PREPARE_CONTENTS_HTML:8,CLEAN_CONTENTS_HTML:10,CLEAN_CONTENTS_DOM:11};
goog.editor.Plugin.OPCODE=goog.object.transpose(goog.reflect.object(goog.editor.Plugin,{handleKeyDown:goog.editor.Plugin.Op.KEYDOWN,handleKeyPress:goog.editor.Plugin.Op.KEYPRESS,handleKeyUp:goog.editor.Plugin.Op.KEYUP,handleSelectionChange:goog.editor.Plugin.Op.SELECTION,handleKeyboardShortcut:goog.editor.Plugin.Op.SHORTCUT,execCommand:goog.editor.Plugin.Op.EXEC_COMMAND,queryCommandValue:goog.editor.Plugin.Op.QUERY_COMMAND,prepareContentsHtml:goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,cleanContentsHtml:goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,
cleanContentsDom:goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM}));goog.editor.Plugin.IRREPRESSIBLE_OPS=goog.object.createSet(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM);
goog.editor.Plugin.prototype.execCommand=function(c,d){var e=this.isSilentCommand(c);e||(goog.userAgent.GECKO&&this.getFieldObject().stopChangeEvents(!0,!0),this.getFieldObject().dispatchBeforeChange());try{var f=this.execCommandInternal.apply(this,arguments)}finally{e||(this.getFieldObject().dispatchChange(),this.getFieldObject().dispatchSelectionChangeEvent())}return f};goog.editor.Plugin.prototype.isSupportedCommand=function(c){return!1};goog.editor.Field=function(c,d){goog.events.EventTarget.call(this);this.hashCode_=this.id=c;this.editableDomHelper=null;this.plugins_={};this.indexedPlugins_={};for(var e in goog.editor.Plugin.OPCODE)this.indexedPlugins_[e]=[];this.cssStyles="";this.stoppedEvents_={};this.stopEvent(goog.editor.Field.EventType.CHANGE);this.stopEvent(goog.editor.Field.EventType.DELAYEDCHANGE);this.isEverModified_=this.isModified_=!1;this.delayedChangeTimer_=new goog.async.Delay(this.dispatchDelayedChange_,goog.editor.Field.DELAYED_CHANGE_FREQUENCY,
this);this.debouncedEvents_={};for(var f in goog.editor.Field.EventType)this.debouncedEvents_[goog.editor.Field.EventType[f]]=0;goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&(this.changeTimerGecko_=new goog.async.Delay(this.handleChange,goog.editor.Field.CHANGE_FREQUENCY,this));this.eventRegister=new goog.events.EventHandler(this);this.wrappers_=[];this.loadState_=goog.editor.Field.LoadState_.UNEDITABLE;this.originalDomHelper=goog.dom.getDomHelper(d||document);this.originalElement=this.originalDomHelper.getElement(this.id);
this.appWindow_=this.originalDomHelper.getWindow()};goog.inherits(goog.editor.Field,goog.events.EventTarget);goog.editor.Field.prototype.field=null;goog.editor.Field.prototype.originalElement=null;goog.editor.Field.prototype.logger=goog.log.getLogger("goog.editor.Field");
goog.editor.Field.EventType={COMMAND_VALUE_CHANGE:"cvc",LOAD:"load",UNLOAD:"unload",BEFORECHANGE:"beforechange",CHANGE:"change",DELAYEDCHANGE:"delayedchange",BEFOREFOCUS:"beforefocus",FOCUS:"focus",BLUR:"blur",BEFORETAB:"beforetab",IFRAME_RESIZED:"ifrsz",SELECTIONCHANGE:"selectionchange"};goog.editor.Field.LoadState_={UNEDITABLE:0,LOADING:1,EDITABLE:2};goog.editor.Field.DEBOUNCE_TIME_MS_=500;goog.editor.Field.activeFieldId_=null;goog.editor.Field.prototype.inModalMode_=!1;
goog.editor.Field.prototype.useWindowMouseUp_=!1;goog.editor.Field.prototype.waitingForMouseUp_=!1;goog.editor.Field.setActiveFieldId=function(c){goog.editor.Field.activeFieldId_=c};goog.editor.Field.getActiveFieldId=function(){return goog.editor.Field.activeFieldId_};goog.editor.Field.prototype.setUseWindowMouseUp=function(c){goog.asserts.assert(!c||!this.usesIframe(),"procssing window mouse up should only be enabled when not using iframe");this.useWindowMouseUp_=c};
goog.editor.Field.prototype.inModalMode=function(){return this.inModalMode_};goog.editor.Field.prototype.setModalMode=function(c){this.inModalMode_=c};goog.editor.Field.prototype.getHashCode=function(){return this.hashCode_};goog.editor.Field.prototype.getElement=function(){return this.field};goog.editor.Field.prototype.getOriginalElement=function(){return this.originalElement};
goog.editor.Field.prototype.addListener=function(c,d,e,f){var h=this.getElement();goog.editor.BrowserFeature.USE_DOCUMENT_FOR_KEY_EVENTS&&(h&&this.usesIframe())&&(h=h.ownerDocument);this.eventRegister.listen(h,c,d,e,f)};goog.editor.Field.prototype.getPluginByClassId=function(c){return this.plugins_[c]};
goog.editor.Field.prototype.registerPlugin=function(c){var d=c.getTrogClassId();this.plugins_[d]&&goog.log.error(this.logger,"Cannot register the same class of plugin twice.");this.plugins_[d]=c;for(var e in goog.editor.Plugin.OPCODE)c[goog.editor.Plugin.OPCODE[e]]&&this.indexedPlugins_[e].push(c);c.registerFieldObject(this);this.isLoaded()&&c.enable(this)};
goog.editor.Field.prototype.unregisterPlugin=function(c){var d=c.getTrogClassId();this.plugins_[d]||goog.log.error(this.logger,"Cannot unregister a plugin that isn't registered.");delete this.plugins_[d];for(var e in goog.editor.Plugin.OPCODE)c[goog.editor.Plugin.OPCODE[e]]&&goog.array.remove(this.indexedPlugins_[e],c);c.unregisterFieldObject(this)};goog.editor.Field.prototype.setInitialStyle=function(c){this.cssText=c};
goog.editor.Field.prototype.resetOriginalElemProperties=function(){var c=this.getOriginalElement();c.removeAttribute("contentEditable");c.removeAttribute("g_editable");c.removeAttribute("role");this.id?c.id=this.id:c.removeAttribute("id");c.className=this.savedClassName_||"";var d=this.cssText;d?goog.dom.setProperties(c,{style:d}):c.removeAttribute("style");goog.isString(this.originalFieldLineHeight_)&&(goog.style.setStyle(c,"lineHeight",this.originalFieldLineHeight_),this.originalFieldLineHeight_=
null)};goog.editor.Field.prototype.isModified=function(c){return c?this.isEverModified_:this.isModified_};goog.editor.Field.CHANGE_FREQUENCY=15;goog.editor.Field.DELAYED_CHANGE_FREQUENCY=250;goog.editor.Field.prototype.usesIframe=goog.functions.TRUE;goog.editor.Field.prototype.isFixedHeight=goog.functions.TRUE;goog.editor.Field.prototype.shouldRefocusOnInputMobileSafari=goog.functions.FALSE;goog.editor.Field.KEYS_CAUSING_CHANGES_={46:!0,8:!0};
goog.userAgent.IE||(goog.editor.Field.KEYS_CAUSING_CHANGES_[9]=!0);goog.editor.Field.CTRL_KEYS_CAUSING_CHANGES_={86:!0,88:!0};goog.userAgent.WINDOWS&&!goog.userAgent.GECKO&&(goog.editor.Field.KEYS_CAUSING_CHANGES_[229]=!0);goog.editor.Field.isGeneratingKey_=function(c,d){return goog.editor.Field.isSpecialGeneratingKey_(c)?!0:!(!d||c.ctrlKey||c.metaKey||goog.userAgent.GECKO&&!c.charCode)};
goog.editor.Field.isSpecialGeneratingKey_=function(c){var d=!(c.ctrlKey||c.metaKey)&&c.keyCode in goog.editor.Field.KEYS_CAUSING_CHANGES_;return(c.ctrlKey||c.metaKey)&&c.keyCode in goog.editor.Field.CTRL_KEYS_CAUSING_CHANGES_||d};goog.editor.Field.prototype.setAppWindow=function(c){this.appWindow_=c};goog.editor.Field.prototype.getAppWindow=function(){return this.appWindow_};goog.editor.Field.prototype.setBaseZindex=function(c){this.baseZindex_=c};
goog.editor.Field.prototype.getBaseZindex=function(){return this.baseZindex_||0};goog.editor.Field.prototype.setupFieldObject=function(c){this.loadState_=goog.editor.Field.LoadState_.EDITABLE;this.field=c;this.editableDomHelper=goog.dom.getDomHelper(c);this.isEverModified_=this.isModified_=!1;c.setAttribute("g_editable","true");goog.a11y.aria.setRole(c,goog.a11y.aria.Role.TEXTBOX)};
goog.editor.Field.prototype.tearDownFieldObject_=function(){this.loadState_=goog.editor.Field.LoadState_.UNEDITABLE;for(var c in this.plugins_){var d=this.plugins_[c];d.activeOnUneditableFields()||d.disable(this)}this.editableDomHelper=this.field=null};
goog.editor.Field.prototype.setupChangeListeners_=function(){if((goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&this.usesIframe()&&this.shouldRefocusOnInputMobileSafari()){var c=this.getEditableDomHelper().getWindow();this.boundRefocusListenerMobileSafari_=goog.bind(c.focus,c);c.addEventListener(goog.events.EventType.KEYDOWN,this.boundRefocusListenerMobileSafari_,!1);c.addEventListener(goog.events.EventType.TOUCHEND,this.boundRefocusListenerMobileSafari_,!1)}goog.userAgent.OPERA&&this.usesIframe()?
(this.boundFocusListenerOpera_=goog.bind(this.dispatchFocusAndBeforeFocus_,this),this.boundBlurListenerOpera_=goog.bind(this.dispatchBlur,this),c=this.getEditableDomHelper().getWindow(),c.addEventListener(goog.events.EventType.FOCUS,this.boundFocusListenerOpera_,!1),c.addEventListener(goog.events.EventType.BLUR,this.boundBlurListenerOpera_,!1)):(goog.editor.BrowserFeature.SUPPORTS_FOCUSIN?(this.addListener(goog.events.EventType.FOCUS,this.dispatchFocus_),this.addListener(goog.events.EventType.FOCUSIN,
this.dispatchBeforeFocus_)):this.addListener(goog.events.EventType.FOCUS,this.dispatchFocusAndBeforeFocus_),this.addListener(goog.events.EventType.BLUR,this.dispatchBlur,goog.editor.BrowserFeature.USE_MUTATION_EVENTS));goog.editor.BrowserFeature.USE_MUTATION_EVENTS?this.setupMutationEventHandlersGecko():(this.addListener(["beforecut","beforepaste","drop","dragend"],this.dispatchBeforeChange),this.addListener(["cut","paste"],goog.functions.lock(this.dispatchChange)),this.addListener("drop",this.handleDrop_));
this.addListener(goog.userAgent.WEBKIT?"dragend":"dragdrop",this.handleDrop_);this.addListener(goog.events.EventType.KEYDOWN,this.handleKeyDown_);this.addListener(goog.events.EventType.KEYPRESS,this.handleKeyPress_);this.addListener(goog.events.EventType.KEYUP,this.handleKeyUp_);this.selectionChangeTimer_=new goog.async.Delay(this.handleSelectionChangeTimer_,goog.editor.Field.SELECTION_CHANGE_FREQUENCY_,this);goog.editor.BrowserFeature.FOLLOWS_EDITABLE_LINKS&&this.addListener(goog.events.EventType.CLICK,
goog.editor.Field.cancelLinkClick_);this.addListener(goog.events.EventType.MOUSEDOWN,this.handleMouseDown_);this.useWindowMouseUp_?(this.eventRegister.listen(this.editableDomHelper.getDocument(),goog.events.EventType.MOUSEUP,this.handleMouseUp_),this.addListener(goog.events.EventType.DRAGSTART,this.handleDragStart_)):this.addListener(goog.events.EventType.MOUSEUP,this.handleMouseUp_)};goog.editor.Field.SELECTION_CHANGE_FREQUENCY_=250;
goog.editor.Field.prototype.clearListeners=function(){this.eventRegister&&this.eventRegister.removeAll();if((goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&this.usesIframe()&&this.shouldRefocusOnInputMobileSafari()){try{var c=this.getEditableDomHelper().getWindow();c.removeEventListener(goog.events.EventType.KEYDOWN,this.boundRefocusListenerMobileSafari_,!1);c.removeEventListener(goog.events.EventType.TOUCHEND,this.boundRefocusListenerMobileSafari_,!1)}catch(d){}delete this.boundRefocusListenerMobileSafari_}if(goog.userAgent.OPERA&&
this.usesIframe()){try{c=this.getEditableDomHelper().getWindow(),c.removeEventListener(goog.events.EventType.FOCUS,this.boundFocusListenerOpera_,!1),c.removeEventListener(goog.events.EventType.BLUR,this.boundBlurListenerOpera_,!1)}catch(e){}delete this.boundFocusListenerOpera_;delete this.boundBlurListenerOpera_}this.changeTimerGecko_&&this.changeTimerGecko_.stop();this.delayedChangeTimer_.stop()};
goog.editor.Field.prototype.disposeInternal=function(){(this.isLoading()||this.isLoaded())&&goog.log.warning(this.logger,"Disposing a field that is in use.");this.getOriginalElement()&&this.execCommand(goog.editor.Command.CLEAR_LOREM);this.tearDownFieldObject_();this.clearListeners();this.clearFieldLoadListener_();this.originalDomHelper=null;this.eventRegister&&(this.eventRegister.dispose(),this.eventRegister=null);this.removeAllWrappers();goog.editor.Field.getActiveFieldId()==this.id&&goog.editor.Field.setActiveFieldId(null);
for(var c in this.plugins_){var d=this.plugins_[c];d.isAutoDispose()&&d.dispose()}delete this.plugins_;goog.editor.Field.superClass_.disposeInternal.call(this)};goog.editor.Field.prototype.attachWrapper=function(c){this.wrappers_.push(c)};goog.editor.Field.prototype.removeAllWrappers=function(){for(var c;c=this.wrappers_.pop();)c.dispose()};goog.editor.Field.MUTATION_EVENTS_GECKO=["DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMCharacterDataModified"];
goog.editor.Field.prototype.setupMutationEventHandlersGecko=function(){if(goog.editor.BrowserFeature.HAS_DOM_SUBTREE_MODIFIED_EVENT||!this.usesIframe())this.eventRegister.listen(this.getElement(),"DOMSubtreeModified",this.handleMutationEventGecko_);else{var c=this.getEditableDomHelper().getDocument();this.eventRegister.listen(c,goog.editor.Field.MUTATION_EVENTS_GECKO,this.handleMutationEventGecko_,!0);this.eventRegister.listen(c,"DOMAttrModified",goog.bind(this.handleDomAttrChange,this,this.handleMutationEventGecko_),
!0)}};goog.editor.Field.prototype.handleBeforeChangeKeyEvent_=function(c){if(c.keyCode==goog.events.KeyCodes.TAB&&!this.dispatchBeforeTab_(c)||goog.userAgent.GECKO&&c.metaKey&&(c.keyCode==goog.events.KeyCodes.LEFT||c.keyCode==goog.events.KeyCodes.RIGHT))return c.preventDefault(),!1;(this.gotGeneratingKey_=c.charCode||goog.editor.Field.isGeneratingKey_(c,goog.userAgent.GECKO))&&this.dispatchBeforeChange();return!0};
goog.editor.Field.SELECTION_CHANGE_KEYCODES_={8:1,9:1,13:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,46:1};goog.editor.Field.CTRL_KEYS_CAUSING_SELECTION_CHANGES_={65:!0,86:!0,88:!0};goog.editor.Field.POTENTIAL_SHORTCUT_KEYCODES_={8:1,9:1,13:1,27:1,33:1,34:1,37:1,38:1,39:1,40:1};
goog.editor.Field.prototype.invokeShortCircuitingOp_=function(c,d){for(var e=this.indexedPlugins_[c],f=goog.array.slice(arguments,1),h=0;h<e.length;++h){var k=e[h];if((k.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[c])&&k[goog.editor.Plugin.OPCODE[c]].apply(k,f))return!0}return!1};
goog.editor.Field.prototype.invokeOp_=function(c,d){for(var e=this.indexedPlugins_[c],f=goog.array.slice(arguments,1),h=0;h<e.length;++h){var k=e[h];(k.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[c])&&k[goog.editor.Plugin.OPCODE[c]].apply(k,f)}};
goog.editor.Field.prototype.reduceOp_=function(c,d,e){for(var f=this.indexedPlugins_[c],h=goog.array.slice(arguments,1),k=0;k<f.length;++k){var l=f[k];if(l.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[c])h[0]=l[goog.editor.Plugin.OPCODE[c]].apply(l,h)}return h[0]};goog.editor.Field.prototype.injectContents=function(c,d){var e={},f=this.getInjectableContents(c,e);goog.style.setStyle(d,e);goog.editor.node.replaceInnerHtml(d,f)};
goog.editor.Field.prototype.getInjectableContents=function(c,d){return this.reduceOp_(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,c||"",d)};goog.editor.Field.prototype.handleKeyDown_=function(c){(goog.editor.BrowserFeature.USE_MUTATION_EVENTS||this.handleBeforeChangeKeyEvent_(c))&&!this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYDOWN,c)&&goog.editor.BrowserFeature.USES_KEYDOWN&&this.handleKeyboardShortcut_(c)};
goog.editor.Field.prototype.handleKeyPress_=function(c){if(goog.editor.BrowserFeature.USE_MUTATION_EVENTS){if(!this.handleBeforeChangeKeyEvent_(c))return}else this.gotGeneratingKey_=!0,this.dispatchBeforeChange();this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYPRESS,c)||goog.editor.BrowserFeature.USES_KEYDOWN||this.handleKeyboardShortcut_(c)};
goog.editor.Field.prototype.handleKeyUp_=function(c){goog.editor.BrowserFeature.USE_MUTATION_EVENTS||!this.gotGeneratingKey_&&!goog.editor.Field.isSpecialGeneratingKey_(c)||this.handleChange();this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYUP,c);this.isEventStopped(goog.editor.Field.EventType.SELECTIONCHANGE)||(goog.editor.Field.SELECTION_CHANGE_KEYCODES_[c.keyCode]||(c.ctrlKey||c.metaKey)&&goog.editor.Field.CTRL_KEYS_CAUSING_SELECTION_CHANGES_[c.keyCode])&&this.selectionChangeTimer_.start()};
goog.editor.Field.prototype.handleKeyboardShortcut_=function(c){if(!c.altKey){var d=goog.userAgent.MAC?c.metaKey:c.ctrlKey;if(d||goog.editor.Field.POTENTIAL_SHORTCUT_KEYCODES_[c.keyCode]){var e=c.charCode||c.keyCode;17!=e&&(e=String.fromCharCode(e).toLowerCase(),this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.SHORTCUT,c,e,d)&&c.preventDefault())}}};
goog.editor.Field.prototype.execCommand=function(c,d){for(var e=arguments,f,h=this.indexedPlugins_[goog.editor.Plugin.Op.EXEC_COMMAND],k=0;k<h.length;++k){var l=h[k];if(l.isEnabled(this)&&l.isSupportedCommand(c)){f=l.execCommand.apply(l,e);break}}return f};
goog.editor.Field.prototype.queryCommandValue=function(c){var d=this.isLoaded()&&this.isSelectionEditable();if(goog.isString(c))return this.queryCommandValueInternal_(c,d);for(var e={},f=0;f<c.length;f++)e[c[f]]=this.queryCommandValueInternal_(c[f],d);return e};
goog.editor.Field.prototype.queryCommandValueInternal_=function(c,d){for(var e=this.indexedPlugins_[goog.editor.Plugin.Op.QUERY_COMMAND],f=0;f<e.length;++f){var h=e[f];if(h.isEnabled(this)&&h.isSupportedCommand(c)&&(d||h.activeOnUneditableFields()))return h.queryCommandValue(c)}return d?null:!1};
goog.editor.Field.prototype.handleDomAttrChange=function(c,d){if(!this.isEventStopped(goog.editor.Field.EventType.CHANGE)){var e=d.getBrowserEvent();try{if(e.originalTarget.prefix||"scrollbar"==e.originalTarget.nodeName)return}catch(f){return}e.prevValue!=e.newValue&&c.call(this,e)}};
goog.editor.Field.prototype.handleMutationEventGecko_=function(c){this.isEventStopped(goog.editor.Field.EventType.CHANGE)||(c=c.getBrowserEvent?c.getBrowserEvent():c,c.target.firebugIgnore||(this.isEverModified_=this.isModified_=!0,this.changeTimerGecko_.start()))};goog.editor.Field.prototype.handleDrop_=function(c){goog.userAgent.IE&&this.execCommand(goog.editor.Command.CLEAR_LOREM,!0);goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&this.dispatchFocusAndBeforeFocus_();this.dispatchChange()};
goog.editor.Field.prototype.getEditableIframe=function(){var c;return this.usesIframe()&&(c=this.getEditableDomHelper())?(c=c.getWindow())&&c.frameElement:null};goog.editor.Field.prototype.getEditableDomHelper=function(){return this.editableDomHelper};goog.editor.Field.prototype.getRange=function(){var c=this.editableDomHelper&&this.editableDomHelper.getWindow();return c&&goog.dom.Range.createFromWindow(c)};
goog.editor.Field.prototype.dispatchSelectionChangeEvent=function(c,d){if(!this.isEventStopped(goog.editor.Field.EventType.SELECTIONCHANGE)){var e=this.getRange(),e=e&&e.getContainerElement();this.isSelectionEditable_=!!e&&goog.dom.contains(this.getElement(),e);this.dispatchCommandValueChange();this.dispatchEvent({type:goog.editor.Field.EventType.SELECTIONCHANGE,originalType:c&&c.type});this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.SELECTION,c,d)}};
goog.editor.Field.prototype.handleSelectionChangeTimer_=function(){var c=this.selectionChangeTarget_;this.selectionChangeTarget_=null;this.dispatchSelectionChangeEvent(void 0,c)};goog.editor.Field.prototype.dispatchBeforeChange=function(){this.isEventStopped(goog.editor.Field.EventType.BEFORECHANGE)||this.dispatchEvent(goog.editor.Field.EventType.BEFORECHANGE)};
goog.editor.Field.prototype.dispatchBeforeTab_=function(c){return this.dispatchEvent({type:goog.editor.Field.EventType.BEFORETAB,shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.ctrlKey})};goog.editor.Field.prototype.stopChangeEvents=function(c,d){c&&(this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive(),this.stopEvent(goog.editor.Field.EventType.CHANGE));d&&(this.clearDelayedChange(),this.stopEvent(goog.editor.Field.EventType.DELAYEDCHANGE))};
goog.editor.Field.prototype.startChangeEvents=function(c,d){!c&&this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive();this.startEvent(goog.editor.Field.EventType.CHANGE);this.startEvent(goog.editor.Field.EventType.DELAYEDCHANGE);c&&this.handleChange();d&&this.dispatchDelayedChange_()};goog.editor.Field.prototype.stopEvent=function(c){this.stoppedEvents_[c]=1};goog.editor.Field.prototype.startEvent=function(c){this.stoppedEvents_[c]=0};
goog.editor.Field.prototype.debounceEvent=function(c){this.debouncedEvents_[c]=goog.now()};goog.editor.Field.prototype.isEventStopped=function(c){return!!this.stoppedEvents_[c]||this.debouncedEvents_[c]&&goog.now()-this.debouncedEvents_[c]<=goog.editor.Field.DEBOUNCE_TIME_MS_};
goog.editor.Field.prototype.manipulateDom=function(c,d,e){this.stopChangeEvents(!0,!0);try{c.call(e)}finally{this.isLoaded()&&(d?(this.startEvent(goog.editor.Field.EventType.CHANGE),this.handleChange(),this.startEvent(goog.editor.Field.EventType.DELAYEDCHANGE)):this.dispatchChange())}};goog.editor.Field.prototype.dispatchCommandValueChange=function(c){c?this.dispatchEvent({type:goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,commands:c}):this.dispatchEvent(goog.editor.Field.EventType.COMMAND_VALUE_CHANGE)};
goog.editor.Field.prototype.dispatchChange=function(c){this.startChangeEvents(!0,c)};goog.editor.Field.prototype.handleChange=function(){this.isEventStopped(goog.editor.Field.EventType.CHANGE)||(this.changeTimerGecko_&&this.changeTimerGecko_.stop(),this.isEverModified_=this.isModified_=!0,this.isEventStopped(goog.editor.Field.EventType.DELAYEDCHANGE)||this.delayedChangeTimer_.start())};
goog.editor.Field.prototype.dispatchDelayedChange_=function(){this.isEventStopped(goog.editor.Field.EventType.DELAYEDCHANGE)||(this.delayedChangeTimer_.stop(),this.isModified_=!1,this.dispatchEvent(goog.editor.Field.EventType.DELAYEDCHANGE))};goog.editor.Field.prototype.clearDelayedChange=function(){this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive();this.delayedChangeTimer_.fireIfActive()};goog.editor.Field.prototype.dispatchFocusAndBeforeFocus_=function(){this.dispatchBeforeFocus_();this.dispatchFocus_()};
goog.editor.Field.prototype.dispatchBeforeFocus_=function(){this.isEventStopped(goog.editor.Field.EventType.BEFOREFOCUS)||(this.execCommand(goog.editor.Command.CLEAR_LOREM,!0),this.dispatchEvent(goog.editor.Field.EventType.BEFOREFOCUS))};
goog.editor.Field.prototype.dispatchFocus_=function(){if(!this.isEventStopped(goog.editor.Field.EventType.FOCUS)){goog.editor.Field.setActiveFieldId(this.id);this.isSelectionEditable_=!0;this.dispatchEvent(goog.editor.Field.EventType.FOCUS);if(goog.editor.BrowserFeature.PUTS_CURSOR_BEFORE_FIRST_BLOCK_ELEMENT_ON_FOCUS){var c=this.getElement(),d=this.getRange();if(d){var e=d.getFocusNode();0!=d.getFocusOffset()||e&&e!=c&&e.tagName!=goog.dom.TagName.BODY||goog.editor.range.selectNodeStart(c)}}!goog.editor.BrowserFeature.CLEARS_SELECTION_WHEN_FOCUS_LEAVES&&
this.usesIframe()&&this.getEditableDomHelper().getWindow().parent.getSelection().removeAllRanges()}};goog.editor.Field.prototype.dispatchBlur=function(){this.isEventStopped(goog.editor.Field.EventType.BLUR)||(goog.editor.Field.getActiveFieldId()==this.id&&goog.editor.Field.setActiveFieldId(null),this.isSelectionEditable_=!1,this.dispatchEvent(goog.editor.Field.EventType.BLUR))};goog.editor.Field.prototype.isSelectionEditable=function(){return this.isSelectionEditable_};
goog.editor.Field.cancelLinkClick_=function(c){goog.dom.getAncestorByTagNameAndClass(c.target,goog.dom.TagName.A)&&c.preventDefault()};goog.editor.Field.prototype.handleMouseDown_=function(c){goog.editor.Field.setActiveFieldId(this.id);if(goog.userAgent.IE){var d=c.target;d&&(d.tagName==goog.dom.TagName.A&&c.ctrlKey)&&this.originalDomHelper.getWindow().open(d.href)}this.waitingForMouseUp_=!0};goog.editor.Field.prototype.handleDragStart_=function(c){this.waitingForMouseUp_=!1};
goog.editor.Field.prototype.handleMouseUp_=function(c){if(!this.useWindowMouseUp_||this.waitingForMouseUp_)this.waitingForMouseUp_=!1,this.dispatchSelectionChangeEvent(c),goog.userAgent.IE&&(this.selectionChangeTarget_=c.target,this.selectionChangeTimer_.start())};
goog.editor.Field.prototype.getCleanContents=function(){if(this.queryCommandValue(goog.editor.Command.USING_LOREM))return goog.string.Unicode.NBSP;if(!this.isLoaded()){var c=this.getOriginalElement();c||goog.log.log(this.logger,goog.log.Level.SHOUT,"Couldn't get the field element to read the contents");return c.innerHTML}c=this.getFieldCopy();this.invokeOp_(goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM,c);return this.reduceOp_(goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,c.innerHTML)};
goog.editor.Field.prototype.getFieldCopy=function(){var c=this.getElement(),d=c.cloneNode(!1),c=c.innerHTML;goog.userAgent.IE&&c.match(/^\s*<script/i)&&(c=goog.string.Unicode.NBSP+c);d.innerHTML=c;return d};
goog.editor.Field.prototype.setHtml=function(c,d,e,f){this.isLoading()?goog.log.error(this.logger,"Can't set html while loading Trogedit"):(f&&this.execCommand(goog.editor.Command.CLEAR_LOREM),d&&c&&(d="<p>"+d+"</p>"),e&&this.stopChangeEvents(!1,!0),this.setInnerHtml_(d),f&&this.execCommand(goog.editor.Command.UPDATE_LOREM),this.isLoaded()&&(e?(goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&this.changeTimerGecko_.fireIfActive(),this.startChangeEvents()):this.dispatchChange()))};
goog.editor.Field.prototype.setInnerHtml_=function(c){var d=this.getElement();if(d){if(this.usesIframe()&&goog.editor.BrowserFeature.MOVES_STYLE_TO_HEAD)for(var e=d.ownerDocument.getElementsByTagName("HEAD"),f=e.length-1;1<=f;--f)e[f].parentNode.removeChild(e[f])}else d=this.getOriginalElement();d&&this.injectContents(c,d)};
goog.editor.Field.prototype.turnOnDesignModeGecko=function(){var c=this.getEditableDomHelper().getDocument();c.designMode="on";goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&c.execCommand("styleWithCSS",!1,!1)};goog.editor.Field.prototype.installStyles=function(){this.cssStyles&&this.shouldLoadAsynchronously()&&goog.style.installStyles(this.cssStyles,this.getElement())};
goog.editor.Field.prototype.dispatchLoadEvent_=function(){this.getElement();this.installStyles();this.startChangeEvents();goog.log.info(this.logger,"Dispatching load "+this.id);this.dispatchEvent(goog.editor.Field.EventType.LOAD)};goog.editor.Field.prototype.isUneditable=function(){return this.loadState_==goog.editor.Field.LoadState_.UNEDITABLE};goog.editor.Field.prototype.isLoaded=function(){return this.loadState_==goog.editor.Field.LoadState_.EDITABLE};
goog.editor.Field.prototype.isLoading=function(){return this.loadState_==goog.editor.Field.LoadState_.LOADING};goog.editor.Field.prototype.focus=function(){if(!goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&this.usesIframe())this.getEditableDomHelper().getWindow().focus();else{if(goog.userAgent.OPERA)var c=this.appWindow_.pageXOffset,d=this.appWindow_.pageYOffset;this.getElement().focus();goog.userAgent.OPERA&&this.appWindow_.scrollTo(c,d)}};
goog.editor.Field.prototype.focusAndPlaceCursorAtStart=function(){(goog.editor.BrowserFeature.HAS_IE_RANGES||goog.userAgent.WEBKIT)&&this.placeCursorAtStart();this.focus()};goog.editor.Field.prototype.placeCursorAtStart=function(){this.placeCursorAtStartOrEnd_(!0)};goog.editor.Field.prototype.placeCursorAtEnd=function(){this.placeCursorAtStartOrEnd_(!1)};
goog.editor.Field.prototype.placeCursorAtStartOrEnd_=function(c){var d=this.getElement();if(d){var e=c?goog.editor.node.getLeftMostLeaf(d):goog.editor.node.getRightMostLeaf(d);d==e?goog.dom.Range.createCaret(d,0).select():goog.editor.range.placeCursorNextTo(e,c);this.dispatchSelectionChangeEvent()}};goog.editor.Field.prototype.restoreSavedRange=function(c){goog.userAgent.IE&&this.focus();c&&c.restore();goog.userAgent.IE||this.focus()};
goog.editor.Field.prototype.makeEditable=function(c){this.loadState_=goog.editor.Field.LoadState_.LOADING;var d=this.getOriginalElement();this.nodeName=d.nodeName;this.savedClassName_=d.className;this.setInitialStyle(d.style.cssText);d.className+=" editable";this.makeEditableInternal(c)};goog.editor.Field.prototype.makeEditableInternal=function(c){this.makeIframeField_(c)};
goog.editor.Field.prototype.handleFieldLoad=function(){goog.userAgent.IE&&goog.dom.Range.clearSelection(this.editableDomHelper.getWindow());goog.editor.Field.getActiveFieldId()!=this.id&&this.execCommand(goog.editor.Command.UPDATE_LOREM);this.setupChangeListeners_();this.dispatchLoadEvent_();for(var c in this.plugins_)this.plugins_[c].enable(this)};
goog.editor.Field.prototype.makeUneditable=function(c){if(this.isUneditable())throw Error("makeUneditable: Field is already uneditable");this.clearDelayedChange();this.selectionChangeTimer_.fireIfActive();this.execCommand(goog.editor.Command.CLEAR_LOREM);var d=null;!c&&this.getElement()&&(d=this.getCleanContents());this.clearFieldLoadListener_();c=this.getOriginalElement();goog.editor.Field.getActiveFieldId()==c.id&&goog.editor.Field.setActiveFieldId(null);this.clearListeners();goog.isString(d)&&
(goog.editor.node.replaceInnerHtml(c,d),this.resetOriginalElemProperties());this.restoreDom();this.tearDownFieldObject_();goog.userAgent.WEBKIT&&c.blur();this.execCommand(goog.editor.Command.UPDATE_LOREM);this.dispatchEvent(goog.editor.Field.EventType.UNLOAD)};goog.editor.Field.prototype.restoreDom=function(){var c=this.getOriginalElement();if(c){var d=this.getEditableIframe();d&&goog.dom.replaceNode(c,d)}};
goog.editor.Field.prototype.shouldLoadAsynchronously=function(){if(!goog.isDef(this.isHttps_)&&(this.isHttps_=!1,goog.userAgent.IE&&this.usesIframe())){for(var c=this.originalDomHelper.getWindow();c!=c.parent;)try{c=c.parent}catch(d){break}c=c.location;this.isHttps_="https:"==c.protocol&&-1==c.search.indexOf("nocheckhttps")}return this.isHttps_};
goog.editor.Field.prototype.makeIframeField_=function(c){var d=this.getOriginalElement();if(d){var d=d.innerHTML,e={},d=this.reduceOp_(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,d,e),f=this.originalDomHelper.createDom(goog.dom.TagName.IFRAME,this.getIframeAttributes());if(this.shouldLoadAsynchronously()){var h=goog.bind(this.iframeFieldLoadHandler,this,f,d,e);this.fieldLoadListenerKey_=goog.events.listen(f,goog.events.EventType.LOAD,h,!0);c&&(f.src=c)}this.attachIframe(f);this.shouldLoadAsynchronously()||
this.iframeFieldLoadHandler(f,d,e)}};goog.editor.Field.prototype.attachIframe=function(c){var d=this.getOriginalElement();c.className=d.className;c.id=d.id;goog.dom.replaceNode(c,d)};goog.editor.Field.prototype.getFieldFormatInfo=function(c){var d=this.getOriginalElement(),d=goog.editor.node.isStandardsMode(d);return new goog.editor.icontent.FieldFormatInfo(this.id,d,!1,!1,c)};
goog.editor.Field.prototype.writeIframeContent=function(c,d,e){e=this.getFieldFormatInfo(e);if(this.shouldLoadAsynchronously())c=goog.dom.getFrameContentDocument(c),goog.editor.icontent.writeHttpsInitialIframe(e,c,d);else{var f=new goog.editor.icontent.FieldStyleInfo(this.getElement(),this.cssStyles);goog.editor.icontent.writeNormalInitialIframe(e,d,f,c)}};
goog.editor.Field.prototype.iframeFieldLoadHandler=function(c,d,e){this.clearFieldLoadListener_();c.allowTransparency="true";this.writeIframeContent(c,d,e);c=goog.dom.getFrameContentDocument(c).body;this.setupFieldObject(c);!goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&this.usesIframe()&&this.turnOnDesignModeGecko();this.handleFieldLoad()};
goog.editor.Field.prototype.clearFieldLoadListener_=function(){this.fieldLoadListenerKey_&&(goog.events.unlistenByKey(this.fieldLoadListenerKey_),this.fieldLoadListenerKey_=null)};goog.editor.Field.prototype.getIframeAttributes=function(){var c="padding:0;"+this.getOriginalElement().style.cssText;goog.string.endsWith(c,";")||(c+=";");c+="background-color:white;";goog.userAgent.IE&&(c+="overflow:visible;");return{frameBorder:0,style:c}};goog.cssom={};goog.cssom.CssRuleType={STYLE:1,IMPORT:3,MEDIA:4,FONT_FACE:5,PAGE:6,NAMESPACE:7};goog.cssom.getAllCssText=function(c){return goog.cssom.getAllCss_(c||document.styleSheets,!0)};goog.cssom.getAllCssStyleRules=function(c){return goog.cssom.getAllCss_(c||document.styleSheets,!1)};goog.cssom.getCssRulesFromStyleSheet=function(c){var d=null;try{d=c.rules||c.cssRules}catch(e){if(15==e.code)throw e.styleSheet=c,e;}return d};
goog.cssom.getAllCssStyleSheets=function(c,d){var e=[],f=c||document.styleSheets,h=goog.isDef(d)?d:!1;if(f.imports&&f.imports.length)for(var k=0,l=f.imports.length;k<l;k++)goog.array.extend(e,goog.cssom.getAllCssStyleSheets(f.imports[k]));else if(f.length)for(k=0,l=f.length;k<l;k++)goog.array.extend(e,goog.cssom.getAllCssStyleSheets(f[k]));else{var m=goog.cssom.getCssRulesFromStyleSheet(f);if(m&&m.length)for(var k=0,l=m.length,n;k<l;k++)n=m[k],n.styleSheet&&goog.array.extend(e,goog.cssom.getAllCssStyleSheets(n.styleSheet))}!(f.type||
f.rules||f.cssRules)||f.disabled&&!h||e.push(f);return e};goog.cssom.getCssTextFromCssRule=function(c){var d="";c.cssText?d=c.cssText:c.style&&(c.style.cssText&&c.selectorText)&&(d=c.style.cssText.replace(/\s*-closure-parent-stylesheet:\s*\[object\];?\s*/gi,"").replace(/\s*-closure-rule-index:\s*[\d]+;?\s*/gi,""),d=c.selectorText+" { "+d+" }");return d};
goog.cssom.getCssRuleIndexInParentStyleSheet=function(c,d){if(c.style&&c.style["-closure-rule-index"])return c.style["-closure-rule-index"];var e=d||goog.cssom.getParentStyleSheet(c);if(!e)throw Error("Cannot find a parentStyleSheet.");if((e=goog.cssom.getCssRulesFromStyleSheet(e))&&e.length)for(var f=0,h=e.length,k;f<h;f++)if(k=e[f],k==c)return f;return-1};goog.cssom.getParentStyleSheet=function(c){return c.parentStyleSheet||c.style&&c.style["-closure-parent-stylesheet"]};
goog.cssom.replaceCssRule=function(c,d,e,f){if(e=e||goog.cssom.getParentStyleSheet(c))if(c=0<=f?f:goog.cssom.getCssRuleIndexInParentStyleSheet(c,e),0<=c)goog.cssom.removeCssRule(e,c),goog.cssom.addCssRule(e,d,c);else throw Error("Cannot proceed without the index of the cssRule.");else throw Error("Cannot proceed without the parentStyleSheet.");};
goog.cssom.addCssRule=function(c,d,e){if(0>e||void 0==e)e=(c.rules||c.cssRules).length;if(c.insertRule)c.insertRule(d,e);else if(d=/^([^\{]+)\{([^\{]+)\}/.exec(d),3==d.length)c.addRule(d[1],d[2],e);else throw Error("Your CSSRule appears to be ill-formatted.");};goog.cssom.removeCssRule=function(c,d){c.deleteRule?c.deleteRule(d):c.removeRule(d)};
goog.cssom.addCssText=function(c,d){var e=d?d.getDocument():goog.dom.getDocument(),f=e.createElement("style");f.type="text/css";e.getElementsByTagName("head")[0].appendChild(f);f.styleSheet?f.styleSheet.cssText=c:(e=e.createTextNode(c),f.appendChild(e));return f};goog.cssom.getFileNameFromStyleSheet=function(c){return(c=c.href)?/([^\/\?]+)[^\/]*$/.exec(c)[1]:null};
goog.cssom.getAllCss_=function(c,d){for(var e=[],f=goog.cssom.getAllCssStyleSheets(c),h=0;c=f[h];h++){var k=goog.cssom.getCssRulesFromStyleSheet(c);if(k&&k.length){if(!d)var l=0;for(var m=0,n=k.length,p;m<n;m++)p=k[m],d&&!p.href?(p=goog.cssom.getCssTextFromCssRule(p),e.push(p)):p.href||(p.style&&(p.parentStyleSheet||(p.style["-closure-parent-stylesheet"]=c),p.style["-closure-rule-index"]=l),e.push(p)),d||l++}}return d?e.join(" "):e};silex.view.propertiesTool.BorderPane=function(c,d){this.element=c;this.onChanged=d;this.buildUi()};
silex.view.propertiesTool.BorderPane.prototype.buildUi=function(){this.borderWidthInput=goog.dom.getElementByClass("border-width-input",this.element);goog.events.listen(this.borderWidthInput,"change",this.onBorderChanged,!1,this);this.borderStyleComboBox=goog.ui.decorate(goog.dom.getElementByClass("border-type-combo-box",this.element));goog.events.listen(this.borderStyleComboBox,goog.ui.Component.EventType.CHANGE,this.onBorderChanged,!1,this);var c=goog.dom.getElementByClass("border-color-palette",
this.element);this.hsvPalette=new goog.ui.HsvaPalette(null,null,null,"goog-hsva-palette-sm");this.hsvPalette.render(c);goog.events.listen(this.hsvPalette,goog.ui.Component.EventType.ACTION,this.onBorderChanged,!1,this);this.bgColorPicker=new goog.ui.ColorButton;this.bgColorPicker.setTooltip("Click to select color");this.bgColorPicker.render(goog.dom.getElementByClass("border-color-button",this.element));goog.events.listen(this.bgColorPicker,goog.ui.Component.EventType.ACTION,this.toggleColorPaletteVisibility,
!1,this);this.hsvPalette.setColorRgbaHex("#000000FF");this.setColorPaletteVisibility(!1);this.noBorderButton=goog.dom.getElementByClass("enable-border-color-button",this.element);goog.events.listen(this.noBorderButton,goog.events.EventType.CLICK,this.onResetBorder,!1,this);this.borderPlacementCheckBoxes=[];var c=goog.dom.getElementsByTagNameAndClass("span",null,goog.dom.getElementByClass("border-placement-container",this.element)),d,e=c.length;for(d=0;d<e;d++){var f=goog.ui.decorate(c[d]);this.borderPlacementCheckBoxes.push(f);
goog.events.listen(f,goog.ui.Component.EventType.CHANGE,this.onBorderChanged,!1,this)}this.cornerRadiusInput=goog.dom.getElementByClass("corner-radius-input",this.element);goog.events.listen(this.cornerRadiusInput,"change",this.onBorderChanged,!1,this);this.cornerPlacementCheckBoxes=[];c=goog.dom.getElementsByTagNameAndClass("span",null,goog.dom.getElementByClass("corner-placement-container",this.element));e=c.length;for(d=0;d<e;d++)f=goog.ui.decorate(c[d]),this.cornerPlacementCheckBoxes.push(f),
goog.events.listen(f,goog.ui.Component.EventType.CHANGE,this.onBorderChanged,!1,this)};silex.view.propertiesTool.BorderPane.prototype.setStyle=function(c){this.style=c;this.redraw()};
silex.view.propertiesTool.BorderPane.prototype.redraw=function(){if(this.style&&!this.isRedraw){this.isRedraw=!0;if(this.style.borderWidth){var c=this.style.borderWidth.split(" "),d=c[0];this.borderWidthInput.value=d.substr(0,d.indexOf("px"));for(var e=this.borderPlacementCheckBoxes.length,d=0;d<e;d++){var f=this.borderPlacementCheckBoxes[d];c.length>d&&"0"!=c[d]?f.setChecked(!0):f.setChecked(!1)}c=this.style.borderColor;void 0==c||"transparent"==c||""==c?(this.bgColorPicker.setEnabled(!1),this.setColorPaletteVisibility(!1)):
(c=silex.Helper.rgbaToHex(c),this.bgColorPicker.setEnabled(!0),this.bgColorPicker.setValue(c.substring(0,7)),this.hsvPalette.setColorRgbaHex(c))}else for(this.borderWidthInput.value="",e=this.borderPlacementCheckBoxes.length,d=0;d<e;d++)f=this.borderPlacementCheckBoxes[d],f.setChecked(!0);this.style.borderStyle?this.borderStyleComboBox.setValue(this.style.borderStyle):this.borderStyleComboBox.setSelectedIndex(0);if(this.style.borderRadius)for(c=this.style.borderRadius.split(" "),d=c[0],this.cornerRadiusInput.value=
d.substr(0,d.indexOf("px")),e=this.cornerPlacementCheckBoxes.length,d=0;d<e;d++)f=this.cornerPlacementCheckBoxes[d],c.length>d&&"0"!=c[d]?f.setChecked(!0):f.setChecked(!1);else for(this.cornerRadiusInput.value="",e=this.cornerPlacementCheckBoxes.length,d=0;d<e;d++)f=this.cornerPlacementCheckBoxes[d],f.setChecked(!0);this.isRedraw=!1}};
silex.view.propertiesTool.BorderPane.prototype.onBorderChanged=function(c){if(this.style&&!this.isRedraw){if(this.borderWidthInput.value&&""!=this.borderWidthInput.value){c="";var d,e=this.borderPlacementCheckBoxes.length;for(d=0;d<e;d++){var f=this.borderPlacementCheckBoxes[d];c=f.getChecked()?c+(this.borderWidthInput.value+"px "):c+"0 "}this.style.borderWidth=c;this.style.borderStyle=this.borderStyleComboBox.getSelectedItem().getValue();c=this.hsvPalette.getColorRgbaHex();d=silex.Helper.hexToRgba(c);
this.style.borderColor=d;this.bgColorPicker.setValue(c.substring(0,7))}else this.style.borderWidth="none",this.style.borderStyle="none";if(this.cornerRadiusInput.value&&""!=this.cornerRadiusInput.value){c="";e=this.cornerPlacementCheckBoxes.length;for(d=0;d<e;d++)f=this.cornerPlacementCheckBoxes[d],c=f.getChecked()?c+(this.cornerRadiusInput.value+"px "):c+"0 ";this.style.borderRadius=c}else this.style.borderRadius="none";this.onChanged(this.style)}};
silex.view.propertiesTool.BorderPane.prototype.onResetBorder=function(c){this.borderWidthInput.value="";this.onBorderChanged(c)};silex.view.propertiesTool.BorderPane.prototype.toggleColorPaletteVisibility=function(){this.setColorPaletteVisibility(!this.getColorPaletteVisibility())};silex.view.propertiesTool.BorderPane.prototype.getColorPaletteVisibility=function(){return"hidden"!=goog.style.getStyle(this.hsvPalette.getElement(),"visibility")};
silex.view.propertiesTool.BorderPane.prototype.setColorPaletteVisibility=function(c){c?this.getColorPaletteVisibility()||(goog.style.setStyle(this.hsvPalette.getElement(),"visibility",null),goog.style.setStyle(this.hsvPalette.getElement(),"position",null)):this.getColorPaletteVisibility()&&(goog.style.setStyle(this.hsvPalette.getElement(),"visibility","hidden"),goog.style.setStyle(this.hsvPalette.getElement(),"position","absolute"))};silex.view.PageTool=function(c,d){this.element=c;this.pages=[];this.selectedIndex=-1;silex.Helper.loadTemplateFile("templates/pagetool.html",c,function(){goog.events.listen(this.element,goog.events.EventType.CLICK,function(c){console.log("click on page ",this.element);this.selectionChanged(this.pages[this.getCellIndex(c.target.parentNode)],!0)},!1,this);d&&d()},this)};
silex.view.PageTool.prototype.setPages=function(c){this.pages=c;var d=goog.dom.getElementByClass("page-tool-container",this.element),e=goog.dom.getElementByClass("page-tool-template",this.element).innerHTML;silex.Helper.resolveTemplate(d,e,{pages:c});var f=this;$(this.element).find(".page-tool-container .page-container .page-preview .delete").click(function(c){console.log("click on delete ",this.element);c.stopPropagation();f.removePageAtIndex(f.getCellIndex(this.parentNode.parentNode))});$(this.element).find(".page-tool-container .page-container .page-preview .label").click(function(c){console.log("click",
this,this.parentNode.parentNode);c.stopPropagation();f.renamePageAtIndex(f.getCellIndex(this.parentNode.parentNode))})};silex.view.PageTool.prototype.removePageAtIndex=function(c){if(this.onStatus)this.onStatus({type:"delete",page:this.pages[c]})};silex.view.PageTool.prototype.renamePageAtIndex=function(c){if(this.onStatus)this.onStatus({type:"rename",page:this.pages[c]})};silex.view.PageTool.prototype.selectionChanged=function(c){if(this.onStatus)this.onStatus({type:"changed",page:c})};
silex.view.PageTool.prototype.setSelectedItem=function(c,d){var e=silex.model.Page.getPageIndex(c);this.setSelectedIndex(e,d)};silex.view.PageTool.prototype.getSelectedItem=function(){return this.pages.length>this.selectedIndex?this.pages[this.selectedIndex]:null};
silex.view.PageTool.prototype.getCellIndex=function(c){console.log("getCellIndex",c,c.getAttribute("data-page-name"));var d=silex.model.Page.getPageByName(c.getAttribute("data-page-name"));if(d){var e=silex.model.Page.getPageIndex(d);return e}console.log("getCellIndex return ",c,this.pages[e],e);console.error("Page not found for element ",c,silex.model.Page.pages);return-1};
silex.view.PageTool.prototype.setSelectedIndex=function(c,d){this.selectedIndex=c;var e=0;$(".page-container",this.element).each(function(){c==e?$(this).addClass("ui-selected"):$(this).removeClass("ui-selected");e++});!1!==d&&this.selectionChanged(this.getSelectedItem())};goog.editor.plugins={};goog.editor.plugins.HeaderFormatter=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.HeaderFormatter,goog.editor.Plugin);goog.editor.plugins.HeaderFormatter.prototype.getTrogClassId=function(){return"HeaderFormatter"};goog.editor.plugins.HeaderFormatter.HEADER_COMMAND={H1:"H1",H2:"H2",H3:"H3",H4:"H4"};
goog.editor.plugins.HeaderFormatter.prototype.handleKeyboardShortcut=function(c,d,e){if(!e)return!1;e=null;switch(d){case "1":e=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H1;break;case "2":e=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H2;break;case "3":e=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H3;break;case "4":e=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H4}return e?(this.getFieldObject().execCommand(goog.editor.Command.FORMAT_BLOCK,e),goog.userAgent.GECKO&&c.stopPropagation(),
!0):!1};goog.fx={};goog.fx.Dragger=function(c,d,e){goog.events.EventTarget.call(this);this.target=c;this.handle=d||c;this.limits=e||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(c);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);
goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.3");goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;
goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1;goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(c){this.useRightPositioningForRtl_=c};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};
goog.fx.Dragger.prototype.setLimits=function(c){this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(c){this.hysteresisDistanceSquared_=Math.pow(c,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(c){this.scrollTarget_=c};goog.fx.Dragger.prototype.setCancelIeDragStart=function(c){this.ieDragStartCancellingOn_=c};
goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(c){this.enabled_=c};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};
goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(c){var d=c.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||d&&!c.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{this.maybeReinitTouchEvent_(c);if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(c))this.dragging_=!0,c.preventDefault();else return;else c.preventDefault();this.setupDragHandlers();this.clientX=this.startX=c.clientX;this.clientY=this.startY=c.clientY;this.screenX=c.screenX;
this.screenY=c.screenY;this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var c=this.document_,d=c.documentElement,e=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(c,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,e);this.eventHandler_.listen(c,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,e);goog.fx.Dragger.HAS_SET_CAPTURE_?(d.setCapture(!1),this.eventHandler_.listen(d,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(c),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(c,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,e)};goog.fx.Dragger.prototype.fireDragStart_=function(c){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,c.clientX,c.clientY,c))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(c,d){this.cleanUpAfterDragging_();if(this.dragging_){this.maybeReinitTouchEvent_(c);this.dragging_=!1;var e=this.limitX(this.deltaX),f=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,c.clientX,c.clientY,c,e,f,d||c.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(c){this.endDrag(c,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(c){var d=c.type;d==goog.events.EventType.TOUCHSTART||d==goog.events.EventType.TOUCHMOVE?c.init(c.getBrowserEvent().targetTouches[0],c.currentTarget):d!=goog.events.EventType.TOUCHEND&&d!=goog.events.EventType.TOUCHCANCEL||c.init(c.getBrowserEvent().changedTouches[0],c.currentTarget)};
goog.fx.Dragger.prototype.handleMove_=function(c){if(this.enabled_){this.maybeReinitTouchEvent_(c);var d=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(c.clientX-this.clientX),e=c.clientY-this.clientY;this.clientX=c.clientX;this.clientY=c.clientY;this.screenX=c.screenX;this.screenY=c.screenY;if(!this.dragging_){var f=this.startX-this.clientX,h=this.startY-this.clientY;if(f*f+h*h>this.hysteresisDistanceSquared_)if(this.fireDragStart_(c))this.dragging_=!0;else{this.isDisposed()||this.endDrag(c);
return}}e=this.calculatePosition_(d,e);d=e.x;e=e.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,c.clientX,c.clientY,c,d,e))&&(this.doDrag(c,d,e,!1),c.preventDefault())}};
goog.fx.Dragger.prototype.calculatePosition_=function(c,d){var e=goog.dom.getDomHelper(this.document_).getDocumentScroll();c+=e.x-this.pageScroll.x;d+=e.y-this.pageScroll.y;this.pageScroll=e;this.deltaX+=c;this.deltaY+=d;var e=this.limitX(this.deltaX),f=this.limitY(this.deltaY);return new goog.math.Coordinate(e,f)};goog.fx.Dragger.prototype.onScroll_=function(c){var d=this.calculatePosition_(0,0);c.clientX=this.clientX;c.clientY=this.clientY;this.doDrag(c,d.x,d.y,!0)};
goog.fx.Dragger.prototype.doDrag=function(c,d,e,f){this.defaultAction(d,e);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,c.clientX,c.clientY,c,d,e))};goog.fx.Dragger.prototype.limitX=function(c){var d=this.limits,e=isNaN(d.left)?null:d.left,d=isNaN(d.width)?0:d.width;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))};
goog.fx.Dragger.prototype.limitY=function(c){var d=this.limits,e=isNaN(d.top)?null:d.top,d=isNaN(d.height)?0:d.height;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))};goog.fx.Dragger.prototype.defaultAction=function(c,d){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=c+"px":this.target.style.left=c+"px";this.target.style.top=d+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};
goog.fx.DragEvent=function(c,d,e,f,h,k,l,m){goog.events.Event.call(this,c);this.clientX=e;this.clientY=f;this.browserEvent=h;this.left=goog.isDef(k)?k:d.deltaX;this.top=goog.isDef(l)?l:d.deltaY;this.dragger=d;this.dragCanceled=!!m};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.ui.PopupBase=function(c,d){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(c||null);d&&this.setType(d)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;
goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};
goog.ui.PopupBase.prototype.setType=function(c){this.type_=c};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(c){this.shouldHideAsync_=c};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(c){this.ensureNotVisible_();this.element_=c};goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};
goog.ui.PopupBase.prototype.setAutoHide=function(c){this.ensureNotVisible_();this.autoHide_=c};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(c){this.ensureNotVisible_();this.hideOnEscape_=c};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(c){this.enableCrossIframeDismissal_=c};
goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(c){this.autoHideRegion_=c};goog.ui.PopupBase.prototype.setTransition=function(c,d){this.showTransition_=c;this.hideTransition_=d};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};
goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.setVisible=function(c){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();c?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var c=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(c,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(c,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var d;try{d=c.activeElement}catch(e){}for(;d&&
"IFRAME"==d.nodeName;){try{var f=goog.dom.getFrameContentDocument(d)}catch(h){break}c=f;d=c.activeElement}this.handler_.listen(c,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(c,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(c,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play();else this.onShow_()}};
goog.ui.PopupBase.prototype.hide_=function(c){if(!this.isVisible_||!this.onBeforeHide_(c))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,c),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(c);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(c){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide_(c)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now();this.lastHideTime_=-1;this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide_=function(c){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:c})};goog.ui.PopupBase.prototype.onHide_=function(c){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:c})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(c){c=c.target;goog.dom.contains(this.element_,c)||(this.autoHideRegion_&&!goog.dom.contains(this.autoHideRegion_,c)||this.shouldDebounce_())||this.hide_(c)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(c){c.keyCode==goog.events.KeyCodes.ESC&&this.hide_(c.target)&&(c.preventDefault(),c.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(c){if(this.enableCrossIframeDismissal_){var d=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(c=d.activeElement,!c||goog.dom.contains(this.element_,c)||"BODY"==c.tagName)return}else if(c.target!=d)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_};goog.events.FocusHandler=function(c){goog.events.EventTarget.call(this);this.element_=c;c=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,c,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};
goog.events.FocusHandler.prototype.handleEvent=function(c){var d=c.getBrowserEvent(),d=new goog.events.BrowserEvent(d);d.type="focusin"==c.type||"focus"==c.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(d)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE='javascript:""';goog.dom.iframe.BLANK_SOURCE_NEW_FRAME=goog.userAgent.IE?'javascript:""':"javascript:undefined";goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(c,d){return c.createDom("iframe",{frameborder:0,style:goog.dom.iframe.STYLES_+(d||""),src:goog.dom.iframe.BLANK_SOURCE})};goog.dom.iframe.writeContent=function(c,d){var e=goog.dom.getFrameContentDocument(c);e.open();e.write(d);e.close()};
goog.dom.iframe.createWithContent=function(c,d,e,f,h){var k=goog.dom.getDomHelper(c),l=[];h||l.push("<!DOCTYPE html>");l.push("<html><head>",d,"</head><body>",e,"</body></html>");d=goog.dom.iframe.createBlank(k,f);c.appendChild(d);goog.dom.iframe.writeContent(d,l.join(""));return d};goog.ui.ModalPopup=function(c,d){goog.ui.Component.call(this,d);this.useIframeMask_=!!c;this.lastFocus_=null};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;goog.ui.ModalPopup.prototype.tabCatcherElement_=null;goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};
goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var c=this.getElement();goog.dom.classes.add(c,this.getCssClass());goog.dom.setFocusableTabIndex(c,!0);goog.style.setElementShown(c,!1);this.manageBackgroundDom_();this.createTabCatcher_()};
goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.setElementShown(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("div",this.getCssClass()+"-bg"),goog.style.setElementShown(this.bgEl_,!1))};
goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("span"),goog.style.setElementShown(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};
goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(c){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)};goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1};
goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(c){return!!c&&c.tagName==goog.dom.TagName.DIV};
goog.ui.ModalPopup.prototype.decorateInternal=function(c){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,c);goog.dom.classes.add(this.getElement(),this.getCssClass());this.manageBackgroundDom_();this.createTabCatcher_();goog.style.setElementShown(this.getElement(),!1)};
goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus_);this.setA11YDetectBackground_(!1)};
goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);goog.dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};
goog.ui.ModalPopup.prototype.setVisible=function(c){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");c!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),this.isInDocument()&&this.setA11YDetectBackground_(c),c?this.show_():this.hide_())};
goog.ui.ModalPopup.setAriaHidden_=function(c,d){d?goog.a11y.aria.setState(c,goog.a11y.aria.State.HIDDEN,d):goog.a11y.aria.removeState(c,goog.a11y.aria.State.HIDDEN)};goog.ui.ModalPopup.prototype.setA11YDetectBackground_=function(c){for(var d=this.getDomHelper().getDocument().body.firstChild;d;d=d.nextSibling)d.nodeType==goog.dom.NodeType.ELEMENT&&goog.ui.ModalPopup.setAriaHidden_(d,c);goog.ui.ModalPopup.setAriaHidden_(this.getElementStrict(),!c)};
goog.ui.ModalPopup.prototype.setTransition=function(c,d,e,f){this.popupShowTransition_=c;this.popupHideTransition_=d;this.bgShowTransition_=e;this.bgHideTransition_=f};
goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){try{this.lastFocus_=this.getDomHelper().getDocument().activeElement}catch(c){}this.resizeBackground_();this.reposition();this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.showPopupElement_(!0);this.focus();this.visible_=!0;if(this.popupShowTransition_&&this.bgShowTransition_)goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,
this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play();else this.onShow()}};
goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_);this.visible_=!1;if(this.popupHideTransition_&&this.bgHideTransition_)goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),this.bgHideTransition_.play(),this.popupHideTransition_.play();else this.onHide();try{var c=this.getDomHelper().getDocument().body,
d=this.getDomHelper().getDocument().activeElement||c;this.lastFocus_&&(d==c&&this.lastFocus_!=c)&&this.lastFocus_.focus()}catch(e){}this.lastFocus_=null}};goog.ui.ModalPopup.prototype.showPopupElement_=function(c){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,c);this.bgEl_&&goog.style.setElementShown(this.bgEl_,c);goog.style.setElementShown(this.getElement(),c);goog.style.setElementShown(this.tabCatcherElement_,c)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};
goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,!1);this.bgEl_&&goog.style.setElementShown(this.bgEl_,!1);var c=this.getDomHelper().getDocument(),d=goog.dom.getWindow(c)||window,e=goog.dom.getViewportSize(d),d=Math.max(e.width,Math.max(c.body.scrollWidth,c.documentElement.scrollWidth)),c=Math.max(e.height,Math.max(c.body.scrollHeight,c.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.setElementShown(this.bgIframeEl_,
!0),goog.style.setSize(this.bgIframeEl_,d,c));this.bgEl_&&(goog.style.setElementShown(this.bgEl_,!0),goog.style.setSize(this.bgEl_,d,c))};
goog.ui.ModalPopup.prototype.reposition=function(){var c=this.getDomHelper().getDocument(),d=goog.dom.getWindow(c)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var e=c=0;else e=this.getDomHelper().getDocumentScroll(),c=e.x,e=e.y;var f=goog.style.getSize(this.getElement()),d=goog.dom.getViewportSize(d),c=Math.max(c+d.width/2-f.width/2,0),e=Math.max(e+d.height/2-f.height/2,0);goog.style.setPosition(this.getElement(),c,e);goog.style.setPosition(this.tabCatcherElement_,c,e)};
goog.ui.ModalPopup.prototype.onFocus_=function(c){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():c.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(c){}};
goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_);this.popupShowTransition_=null;goog.dispose(this.popupHideTransition_);this.popupHideTransition_=null;goog.dispose(this.bgShowTransition_);this.bgShowTransition_=null;goog.dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.ui.Dialog=function(c,d,e){goog.ui.ModalPopup.call(this,d,e);this.class_=c||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=0.5;goog.ui.Dialog.prototype.title_="";goog.ui.Dialog.prototype.content_="";
goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};
goog.ui.Dialog.prototype.setTitle=function(c){this.title_=c;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,c)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setContent=function(c){this.content_=c;this.contentEl_&&(this.contentEl_.innerHTML=c)};goog.ui.Dialog.prototype.getContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Dialog.prototype.setPreferredAriaRole=function(c){this.preferredAriaRole_=c};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};
goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};
goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(c){this.backgroundElementOpacity_=c;this.getElement()&&(c=this.getBackgroundElement())&&goog.style.setOpacity(c,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(c){c!=this.modal_&&this.setModalInternal_(c)};
goog.ui.Dialog.prototype.setModalInternal_=function(c){this.modal_=c;if(this.isInDocument()){var d=this.getDomHelper(),e=this.getBackgroundElement(),f=this.getBackgroundIframe();c?(f&&d.insertSiblingBefore(f,this.getElement()),d.insertSiblingBefore(e,this.getElement())):(d.removeNode(f),d.removeNode(e))}};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};
goog.ui.Dialog.prototype.setDraggable=function(c){this.draggable_=c;this.setDraggingEnabled_(c&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};
goog.ui.Dialog.prototype.setDraggingEnabled_=function(c){this.getElement()&&goog.dom.classes.enable(this.titleEl_,this.class_+"-title-draggable",c);c&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classes.add(this.titleEl_,this.class_+"-title-draggable"),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!c&&this.dragger_&&(this.dragger_.dispose(),this.dragger_=null)};
goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var c=this.getElement();goog.asserts.assert(c,"getElement() returns null");var d=this.getDomHelper();this.titleEl_=d.createDom("div",{className:this.class_+"-title",id:this.getId()},this.titleTextEl_=d.createDom("span",this.class_+"-title-text",this.title_),this.titleCloseEl_=d.createDom("span",this.class_+"-title-close"));goog.dom.append(c,this.titleEl_,this.contentEl_=d.createDom("div",this.class_+"-content"),
this.buttonEl_=d.createDom("div",this.class_+"-buttons"));this.titleId_=this.titleEl_.id;goog.a11y.aria.setRole(c,this.getPreferredAriaRole());goog.a11y.aria.setState(c,goog.a11y.aria.State.LABELLEDBY,this.titleId_||"");this.content_&&(this.contentEl_.innerHTML=this.content_);goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.setElementShown(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.decorateInternal=function(c){goog.ui.Dialog.superClass_.decorateInternal.call(this,c);c=this.getElement();goog.asserts.assert(c,"The DOM element for dialog cannot be null.");var d=this.class_+"-content";(this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,d,c)[0])?this.content_=this.contentEl_.innerHTML:(this.contentEl_=this.getDomHelper().createDom("div",d),this.content_&&(this.contentEl_.innerHTML=this.content_),c.appendChild(this.contentEl_));var d=this.class_+"-title",
e=this.class_+"-title-text",f=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,d,c)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,e,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,f,this.titleEl_)[0],this.titleEl_.id||(this.titleEl_.id=this.getId())):(this.titleEl_=this.getDomHelper().createDom("div",{className:d,id:this.getId()}),c.insertBefore(this.titleEl_,this.contentEl_));this.titleId_=this.titleEl_.id;this.titleTextEl_?
this.title_=goog.dom.getTextContent(this.titleTextEl_):(this.titleTextEl_=this.getDomHelper().createDom("span",e,this.title_),this.titleEl_.appendChild(this.titleTextEl_));goog.a11y.aria.setState(c,goog.a11y.aria.State.LABELLEDBY,this.titleId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("span",f),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);d=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,
d,c)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("div",d),c.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.setElementShown(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var c=this.getElement();
goog.asserts.assert(c,"The DOM element for dialog cannot be null");goog.a11y.aria.setRole(c,this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.a11y.aria.setState(c,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};
goog.ui.Dialog.prototype.setVisible=function(c){c!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,c))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};
goog.ui.Dialog.prototype.focus=function(){goog.ui.Dialog.superClass_.focus.call(this);if(this.getButtonSet()){var c=this.getButtonSet().getDefault();if(c)for(var d=this.getDomHelper().getDocument(),e=this.buttonEl_.getElementsByTagName("button"),f=0,h;h=e[f];f++)if(h.name==c&&!h.disabled){try{if(goog.userAgent.WEBKIT||goog.userAgent.OPERA){var k=d.createElement("input");k.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.getElement().appendChild(k);k.focus();this.getElement().removeChild(k)}h.focus()}catch(l){}break}}};
goog.ui.Dialog.prototype.setDraggerLimits_=function(c){var d=this.getDomHelper().getDocument();c=goog.dom.getWindow(d)||window;c=goog.dom.getViewportSize(c);var e=Math.max(d.body.scrollWidth,c.width),d=Math.max(d.body.scrollHeight,c.height),f=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,c.width-f.width),Math.max(0,c.height-f.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,e-f.width,
d-f.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(c){if(this.hasTitleCloseButton_){var d=this.getButtonSet();(c=d&&d.getCancel())?(d=d.get(c),this.dispatchEvent(new goog.ui.Dialog.Event(c,d))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};goog.ui.Dialog.prototype.setHasTitleCloseButton=function(c){this.hasTitleCloseButton_=c;this.titleCloseEl_&&goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_)};
goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(c){this.escapeToCancel_=c};goog.ui.Dialog.prototype.setDisposeOnHide=function(c){this.disposeOnHide_=c};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};
goog.ui.Dialog.prototype.setButtonSet=function(c){this.buttons_=c;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):this.buttonEl_.innerHTML="",goog.style.setElementShown(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};
goog.ui.Dialog.prototype.onButtonClick_=function(c){if((c=this.findParentButton_(c.target))&&!c.disabled){c=c.name;var d=this.getButtonSet().get(c);this.dispatchEvent(new goog.ui.Dialog.Event(c,d))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(c){for(;null!=c&&c!=this.buttonEl_;){if("BUTTON"==c.tagName)return c;c=c.parentNode}return null};
goog.ui.Dialog.prototype.onKey_=function(c){var d=!1,e=!1,f=this.getButtonSet(),h=c.target;if(c.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&c.keyCode==goog.events.KeyCodes.ESC){var k=f&&f.getCancel(),h="SELECT"==h.tagName&&!h.disabled;k&&!h?(e=!0,d=f.get(k),d=this.dispatchEvent(new goog.ui.Dialog.Event(k,d))):h||(d=!0)}else c.keyCode==goog.events.KeyCodes.TAB&&(c.shiftKey&&h==this.getElement())&&this.setupBackwardTabWrap();else if(c.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==
h.tagName&&!h.disabled)k=h.name;else if(f){var l=f.getDefault(),m=l&&f.getButton(l),h=("TEXTAREA"==h.tagName||"SELECT"==h.tagName||"A"==h.tagName)&&!h.disabled;!m||(m.disabled||h)||(k=l)}k&&f&&(e=!0,d=this.dispatchEvent(new goog.ui.Dialog.Event(k,String(f.get(k)))))}if(d||e)c.stopPropagation(),c.preventDefault();d&&this.setVisible(!1)};goog.ui.Dialog.Event=function(c,d){this.type=goog.ui.Dialog.EventType.SELECT;this.key=c;this.caption=d};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);
goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};goog.ui.Dialog.ButtonSet=function(c){this.dom_=c||goog.dom.getDomHelper();goog.structs.Map.call(this)};goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map);goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset";goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null;goog.ui.Dialog.ButtonSet.prototype.element_=null;
goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null;goog.ui.Dialog.ButtonSet.prototype.set=function(c,d,e,f){goog.structs.Map.prototype.set.call(this,c,d);e&&(this.defaultButton_=c);f&&(this.cancelButton_=c);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(c,d,e){return this.set(c.key,c.caption,d,e)};goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(c){this.element_=c;this.render()};
goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){this.element_.innerHTML="";var c=goog.dom.getDomHelper(this.element_);goog.structs.forEach(this,function(d,e){var f=c.createDom("button",{name:e},d);e==this.defaultButton_&&(f.className=this.class_+"-default");this.element_.appendChild(f)},this)}};
goog.ui.Dialog.ButtonSet.prototype.decorate=function(c){if(c&&c.nodeType==goog.dom.NodeType.ELEMENT){this.element_=c;c=this.element_.getElementsByTagName("button");for(var d=0,e,f,h;e=c[d];d++)if(f=e.name||e.id,h=goog.dom.getTextContent(e)||e.value,f){var k=0==d;this.set(f,h,k,e.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);k&&goog.dom.classes.add(e,this.class_+"-default")}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};
goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(c){this.defaultButton_=c};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(c){this.cancelButton_=c};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};
goog.ui.Dialog.ButtonSet.prototype.getButton=function(c){for(var d=this.getAllButtons(),e=0,f;f=d[e];e++)if(f.name==c||f.id==c)return f;return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByTagName(goog.dom.TagName.BUTTON)};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(c,d){var e=this.getButton(c);e&&(e.disabled=!d)};
goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(c){for(var d=this.getAllButtons(),e=0,f;f=d[e];e++)f.disabled=!c};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");
goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};
goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},
CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};
(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();goog.ui.editor={};goog.ui.editor.AbstractDialog=function(c){goog.events.EventTarget.call(this);this.dom=c};goog.inherits(goog.ui.editor.AbstractDialog,goog.events.EventTarget);goog.ui.editor.AbstractDialog.prototype.show=function(){this.dialogInternal_||(this.dialogInternal_=this.createDialogControl(),this.dialogInternal_.addEventListener(goog.ui.Dialog.EventType.AFTER_HIDE,this.handleAfterHide_,!1,this));this.dialogInternal_.setVisible(!0)};
goog.ui.editor.AbstractDialog.prototype.hide=function(){this.dialogInternal_&&this.dialogInternal_.setVisible(!1)};goog.ui.editor.AbstractDialog.prototype.isOpen=function(){return!!this.dialogInternal_&&this.dialogInternal_.isVisible()};goog.ui.editor.AbstractDialog.prototype.processOkAndClose=function(){var c=new goog.ui.Dialog.Event(goog.ui.Dialog.DefaultButtonKeys.OK,null);this.handleOk(c)&&this.hide()};goog.ui.editor.AbstractDialog.EventType={AFTER_HIDE:"afterhide",CANCEL:"cancel",OK:"ok"};
goog.ui.editor.AbstractDialog.Builder=function(c){this.editorDialog_=c;this.wrappedDialog_=new goog.ui.Dialog("",!0,this.editorDialog_.dom);this.buttonSet_=new goog.ui.Dialog.ButtonSet(this.editorDialog_.dom);this.buttonHandlers_={};this.addClassName("tr-dialog")};goog.ui.editor.AbstractDialog.Builder.prototype.setTitle=function(c){this.wrappedDialog_.setTitle(c);return this};
goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=function(c){var d=goog.ui.Dialog.DefaultButtonKeys.OK,e=goog.getMsg("OK");this.buttonSet_.set(d,c||e,!0);this.buttonHandlers_[d]=goog.bind(this.editorDialog_.handleOk,this.editorDialog_);return this};
goog.ui.editor.AbstractDialog.Builder.prototype.addCancelButton=function(c){var d=goog.ui.Dialog.DefaultButtonKeys.CANCEL,e=goog.getMsg("Cancel");this.buttonSet_.set(d,c||e,!1,!0);this.buttonHandlers_[d]=goog.bind(this.editorDialog_.handleCancel,this.editorDialog_);return this};goog.ui.editor.AbstractDialog.Builder.prototype.addButton=function(c,d,e){e=e||goog.string.createUniqueString();this.buttonSet_.set(e,c);this.buttonHandlers_[e]=d;return this};
goog.ui.editor.AbstractDialog.Builder.prototype.addClassName=function(c){goog.dom.classes.add(this.wrappedDialog_.getDialogElement(),c);return this};goog.ui.editor.AbstractDialog.Builder.prototype.setContent=function(c){goog.dom.appendChild(this.wrappedDialog_.getContentElement(),c);return this};
goog.ui.editor.AbstractDialog.Builder.prototype.build=function(){this.buttonSet_.isEmpty()&&(this.addOkButton(),this.addCancelButton());this.wrappedDialog_.setButtonSet(this.buttonSet_);var c=this.buttonHandlers_;this.buttonHandlers_=null;this.wrappedDialog_.addEventListener(goog.ui.Dialog.EventType.SELECT,function(d){if(c[d.key])return c[d.key](d)});this.wrappedDialog_.setModal(!0);var d=this.wrappedDialog_;this.wrappedDialog_=null;return d};
goog.ui.editor.AbstractDialog.prototype.getOkButtonElement=function(){return this.getButtonElement(goog.ui.Dialog.DefaultButtonKeys.OK)};goog.ui.editor.AbstractDialog.prototype.getCancelButtonElement=function(){return this.getButtonElement(goog.ui.Dialog.DefaultButtonKeys.CANCEL)};goog.ui.editor.AbstractDialog.prototype.getButtonElement=function(c){return this.dialogInternal_.getButtonSet().getButton(c)};
goog.ui.editor.AbstractDialog.prototype.handleOk=function(c){return(c=this.createOkEvent(c))?this.dispatchEvent(c):!1};goog.ui.editor.AbstractDialog.prototype.handleCancel=function(){return this.dispatchEvent(goog.ui.editor.AbstractDialog.EventType.CANCEL)};goog.ui.editor.AbstractDialog.prototype.disposeInternal=function(){this.dialogInternal_&&(this.hide(),this.dialogInternal_.dispose(),this.dialogInternal_=null);goog.ui.editor.AbstractDialog.superClass_.disposeInternal.call(this)};
goog.ui.editor.AbstractDialog.prototype.handleAfterHide_=function(){this.dispatchEvent(goog.ui.editor.AbstractDialog.EventType.AFTER_HIDE)};goog.editor.Link=function(c,d){this.anchor_=c;this.isNew_=d;this.extraAnchors_=[]};goog.editor.Link.prototype.getAnchor=function(){return this.anchor_};goog.editor.Link.prototype.getExtraAnchors=function(){return this.extraAnchors_};goog.editor.Link.prototype.getCurrentText=function(){this.currentText_||(this.currentText_=goog.dom.getRawTextContent(this.getAnchor()));return this.currentText_};goog.editor.Link.prototype.isNew=function(){return this.isNew_};
goog.editor.Link.prototype.initializeUrl=function(c){this.getAnchor().href=c};goog.editor.Link.prototype.removeLink=function(){goog.dom.flattenElement(this.anchor_);for(this.anchor_=null;this.extraAnchors_.length;)goog.dom.flattenElement(this.extraAnchors_.pop())};
goog.editor.Link.prototype.setTextAndUrl=function(c,d){var e=this.getAnchor();e.href=d;var f=this.getCurrentText();if(c!=f){var h=goog.editor.node.getLeftMostLeaf(e);h.nodeType==goog.dom.NodeType.TEXT&&(h=h.parentNode);goog.dom.getRawTextContent(h)!=f&&(h=e);goog.dom.removeChildren(h);e=goog.dom.getDomHelper(h);goog.dom.appendChild(h,e.createTextNode(c));this.currentText_=null}this.isNew_=!1};
goog.editor.Link.prototype.placeCursorRightOf=function(){var c=this.getAnchor();if(goog.editor.BrowserFeature.GETS_STUCK_IN_LINKS){var d;d=c.nextSibling;d&&d.nodeType==goog.dom.NodeType.TEXT&&(goog.string.startsWith(d.data,goog.string.Unicode.NBSP)||goog.string.startsWith(d.data," "))||(d=goog.dom.getDomHelper(c).createTextNode(goog.string.Unicode.NBSP),goog.dom.insertSiblingAfter(d,c));goog.dom.Range.createCaret(d,1).select()}else goog.editor.range.placeCursorNextTo(c,!1)};
goog.editor.Link.prototype.updateLinkDisplay_=function(c,d){this.initializeUrl(d);this.placeCursorRightOf();c.execCommand(goog.editor.Command.UPDATE_LINK_BUBBLE)};goog.editor.Link.prototype.getValidLinkFromText=function(){var c=this.getCurrentText();return goog.editor.Link.isLikelyUrl(c)?0>c.search(/:/)?"http://"+goog.string.trimLeft(c):c:goog.editor.Link.isLikelyEmailAddress(c)?"mailto:"+c:null};
goog.editor.Link.prototype.finishLinkCreation=function(c){var d=this.getValidLinkFromText();d?this.updateLinkDisplay_(c,d):c.execCommand(goog.editor.Command.MODAL_LINK_EDITOR,this)};goog.editor.Link.createNewLink=function(c,d,e,f){var h=new goog.editor.Link(c,!0);h.initializeUrl(d);e&&(c.target=e);f&&(h.extraAnchors_=f);return h};
goog.editor.Link.isLikelyUrl=function(c){if(/\s/.test(c)||goog.editor.Link.isLikelyEmailAddress(c))return!1;var d=!1;/^[^:\/?#.]+:/.test(c)||(c="http://"+c,d=!0);c=goog.uri.utils.split(c);if(-1!=goog.array.indexOf(["mailto","aim"],c[goog.uri.utils.ComponentIndex.SCHEME]))return!0;var e=c[goog.uri.utils.ComponentIndex.DOMAIN];if(!e||d&&-1==e.indexOf(".")||/[^\w\d\-\u0100-\uffff.%]/.test(e))return!1;d=c[goog.uri.utils.ComponentIndex.PATH];return!d||0==d.indexOf("/")};
goog.editor.Link.LIKELY_EMAIL_ADDRESS_=/^[\w-]+(\.[\w-]+)*\@([\w-]+\.)+(\d+|\w\w+)$/i;goog.editor.Link.isLikelyEmailAddress=function(c){return goog.editor.Link.LIKELY_EMAIL_ADDRESS_.test(c)};goog.editor.Link.isMailto=function(c){return!!c&&goog.string.startsWith(c,"mailto:")};goog.ui.editor.TabPane=function(c,d){goog.ui.Component.call(this,c);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.tabBar_=new goog.ui.TabBar(goog.ui.TabBar.Location.START,void 0,this.dom_);this.tabBar_.setFocusable(!1);this.tabContent_=this.dom_.createDom(goog.dom.TagName.DIV,{className:"goog-tab-content"});this.visibleContent_=this.selectedRadio_=null;if(d){var e=new goog.ui.Control(d,void 0,this.dom_);e.addClassName("tr-tabpane-caption");
e.setEnabled(!1);this.tabBar_.addChild(e,!0)}};goog.inherits(goog.ui.editor.TabPane,goog.ui.Component);goog.ui.editor.TabPane.prototype.getCurrentTabId=function(){return this.tabBar_.getSelectedTab().getId()};goog.ui.editor.TabPane.prototype.setSelectedTabId=function(c){this.tabBar_.setSelectedTab(this.tabBar_.getChild(c))};
goog.ui.editor.TabPane.prototype.addTab=function(c,d,e,f,h){f=this.dom_.createDom(goog.dom.TagName.INPUT,{name:f,type:"radio"});d=new goog.ui.Tab([f,this.dom_.createTextNode(d)],void 0,this.dom_);d.setId(c);d.setTooltip(e);this.tabBar_.addChild(d,!0);this.eventHandler_.listen(f,[goog.events.EventType.SELECT,goog.events.EventType.CLICK],goog.bind(this.tabBar_.setSelectedTab,this.tabBar_,d));h.id=c+"-tab";this.tabContent_.appendChild(h);goog.style.setElementShown(h,!1)};
goog.ui.editor.TabPane.prototype.enterDocument=function(){goog.ui.editor.TabPane.superClass_.enterDocument.call(this);var c=this.getElement();goog.dom.classes.add(c,"tr-tabpane");this.addChild(this.tabBar_,!0);this.eventHandler_.listen(this.tabBar_,goog.ui.Component.EventType.SELECT,this.handleTabSelect_);c.appendChild(this.tabContent_);c.appendChild(this.dom_.createDom(goog.dom.TagName.DIV,{className:"goog-tab-bar-clear"}))};
goog.ui.editor.TabPane.prototype.handleTabSelect_=function(c){c=c.target;this.visibleContent_&&goog.style.setElementShown(this.visibleContent_,!1);this.visibleContent_=this.dom_.getElement(c.getId()+"-tab");goog.style.setElementShown(this.visibleContent_,!0);this.selectedRadio_&&(this.selectedRadio_.checked=!1);this.selectedRadio_=c.getElement().getElementsByTagName(goog.dom.TagName.INPUT)[0];this.selectedRadio_.checked=!0};goog.ui.FlatButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.FlatButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.FlatButtonRenderer);goog.ui.FlatButtonRenderer.CSS_CLASS="goog-flat-button";
goog.ui.FlatButtonRenderer.prototype.createDom=function(c){var d=this.getClassNames(c),d={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+d.join(" ")},d=c.getDomHelper().createDom("div",d,c.getContent());this.setTooltip(d,c.getTooltip());this.setAriaStates(c,d);return d};goog.ui.FlatButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON};goog.ui.FlatButtonRenderer.prototype.canDecorate=function(c){return"DIV"==c.tagName};
goog.ui.FlatButtonRenderer.prototype.decorate=function(c,d){goog.dom.classes.add(d,goog.ui.INLINE_BLOCK_CLASSNAME);return goog.ui.FlatButtonRenderer.superClass_.decorate.call(this,c,d)};goog.ui.FlatButtonRenderer.prototype.getValue=function(c){return""};goog.ui.FlatButtonRenderer.prototype.getCssClass=function(){return goog.ui.FlatButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.FlatButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.FlatButtonRenderer.getInstance())});goog.ui.LinkButtonRenderer=function(){goog.ui.FlatButtonRenderer.call(this)};goog.inherits(goog.ui.LinkButtonRenderer,goog.ui.FlatButtonRenderer);goog.addSingletonGetter(goog.ui.LinkButtonRenderer);goog.ui.LinkButtonRenderer.CSS_CLASS="goog-link-button";goog.ui.LinkButtonRenderer.prototype.getCssClass=function(){return goog.ui.LinkButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.LinkButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.LinkButtonRenderer.getInstance())});goog.ui.editor.messages={};goog.ui.editor.messages.MSG_LINK_CAPTION=goog.getMsg("Link");goog.ui.editor.messages.MSG_EDIT_LINK=goog.getMsg("Edit Link");goog.ui.editor.messages.MSG_TEXT_TO_DISPLAY=goog.getMsg("Text to display:");goog.ui.editor.messages.MSG_LINK_TO=goog.getMsg("Link to:");goog.ui.editor.messages.MSG_ON_THE_WEB=goog.getMsg("Web address");goog.ui.editor.messages.MSG_ON_THE_WEB_TIP=goog.getMsg("Link to a page or file somewhere else on the web");
goog.ui.editor.messages.MSG_TEST_THIS_LINK=goog.getMsg("Test this link");
goog.ui.editor.messages.MSG_TR_LINK_EXPLANATION=goog.getMsg("{$startBold}Not sure what to put in the box?{$endBold} First, find the page on the web that you want to link to. (A {$searchEngineLink}search engine{$endLink} might be useful.) Then, copy the web address from the box in your browser's address bar, and paste it into the box above.",{startBold:"<b>",endBold:"</b>",searchEngineLink:"<a href='http://www.google.com/' target='_new'>",endLink:"</a>"});goog.ui.editor.messages.MSG_WHAT_URL=goog.getMsg("To what URL should this link go?");
goog.ui.editor.messages.MSG_EMAIL_ADDRESS=goog.getMsg("Email address");goog.ui.editor.messages.MSG_EMAIL_ADDRESS_TIP=goog.getMsg("Link to an email address");goog.ui.editor.messages.MSG_INVALID_EMAIL=goog.getMsg("Invalid email address");goog.ui.editor.messages.MSG_WHAT_EMAIL=goog.getMsg("To what email address should this link?");
goog.ui.editor.messages.MSG_EMAIL_EXPLANATION=goog.getMsg("{$preb}Be careful.{$postb} Remember that any time you include an email address on a web page, nasty spammers can find it too.",{preb:"<b>",postb:"</b>"});goog.ui.editor.messages.MSG_OPEN_IN_NEW_WINDOW=goog.getMsg("Open this link in a new window");goog.ui.editor.messages.MSG_IMAGE_CAPTION=goog.getMsg("Image");goog.dom.selection={};goog.dom.selection.setStart=function(c,d){if(goog.dom.selection.useSelectionProperties_(c))c.selectionStart=d;else if(goog.userAgent.IE){var e=goog.dom.selection.getRangeIe_(c),f=e[0];f.inRange(e[1])&&(d=goog.dom.selection.canonicalizePositionIe_(c,d),f.collapse(!0),f.move("character",d),f.select())}};goog.dom.selection.getStart=function(c){return goog.dom.selection.getEndPoints_(c,!0)[0]};
goog.dom.selection.getEndPointsTextareaIe_=function(c,d,e){d=d.duplicate();for(var f=c.text,h=f,k=d.text,l=k,m=!1;!m;)0==c.compareEndPoints("StartToEnd",c)?m=!0:(c.moveEnd("character",-1),c.text==f?h+="\r\n":m=!0);if(e)return[h.length,-1];for(c=!1;!c;)0==d.compareEndPoints("StartToEnd",d)?c=!0:(d.moveEnd("character",-1),d.text==k?l+="\r\n":c=!0);return[h.length,h.length+l.length]};goog.dom.selection.getEndPoints=function(c){return goog.dom.selection.getEndPoints_(c,!1)};
goog.dom.selection.getEndPoints_=function(c,d){var e=0,f=0;if(goog.dom.selection.useSelectionProperties_(c))e=c.selectionStart,f=d?-1:c.selectionEnd;else if(goog.userAgent.IE){var h=goog.dom.selection.getRangeIe_(c),k=h[0],h=h[1];if(k.inRange(h)){k.setEndPoint("EndToStart",h);if("textarea"==c.type)return goog.dom.selection.getEndPointsTextareaIe_(k,h,d);e=k.text.length;f=d?-1:k.text.length+h.text.length}}return[e,f]};
goog.dom.selection.setEnd=function(c,d){if(goog.dom.selection.useSelectionProperties_(c))c.selectionEnd=d;else if(goog.userAgent.IE){var e=goog.dom.selection.getRangeIe_(c),f=e[1];e[0].inRange(f)&&(d=goog.dom.selection.canonicalizePositionIe_(c,d),e=goog.dom.selection.canonicalizePositionIe_(c,goog.dom.selection.getStart(c)),f.collapse(!0),f.moveEnd("character",d-e),f.select())}};goog.dom.selection.getEnd=function(c){return goog.dom.selection.getEndPoints_(c,!1)[1]};
goog.dom.selection.setCursorPosition=function(c,d){if(goog.dom.selection.useSelectionProperties_(c))c.selectionStart=d,c.selectionEnd=d;else if(goog.userAgent.IE){d=goog.dom.selection.canonicalizePositionIe_(c,d);var e=c.createTextRange();e.collapse(!0);e.move("character",d);e.select()}};
goog.dom.selection.setText=function(c,d){if(goog.dom.selection.useSelectionProperties_(c)){var e=c.value,f=c.selectionStart,h=e.substr(0,f),e=e.substr(c.selectionEnd);c.value=h+d+e;c.selectionStart=f;c.selectionEnd=f+d.length}else if(goog.userAgent.IE)h=goog.dom.selection.getRangeIe_(c),f=h[1],h[0].inRange(f)&&(h=f.duplicate(),f.text=d,f.setEndPoint("StartToStart",h),f.select());else throw Error("Cannot set the selection end");};
goog.dom.selection.getText=function(c){if(goog.dom.selection.useSelectionProperties_(c))return c.value.substring(c.selectionStart,c.selectionEnd);if(goog.userAgent.IE){var d=goog.dom.selection.getRangeIe_(c),e=d[1];return d[0].inRange(e)?"textarea"==c.type?goog.dom.selection.getSelectionRangeText_(e):e.text:""}throw Error("Cannot get the selection text");};
goog.dom.selection.getSelectionRangeText_=function(c){c=c.duplicate();for(var d=c.text,e=d,f=!1;!f;)0==c.compareEndPoints("StartToEnd",c)?f=!0:(c.moveEnd("character",-1),c.text==d?e+="\r\n":f=!0);return e};goog.dom.selection.getRangeIe_=function(c){var d=c.ownerDocument||c.document,e=d.selection.createRange();"textarea"==c.type?(d=d.body.createTextRange(),d.moveToElementText(c)):d=c.createTextRange();return[d,e]};
goog.dom.selection.canonicalizePositionIe_=function(c,d){if("textarea"==c.type){var e=c.value.substring(0,d);d=goog.string.canonicalizeNewlines(e).length}return d};goog.dom.selection.useSelectionProperties_=function(c){try{return"number"==typeof c.selectionStart}catch(d){return!1}};goog.editor.focus={};goog.editor.focus.focusInputField=function(c){c.focus();goog.dom.selection.setCursorPosition(c,c.value.length)};goog.window={};goog.window.DEFAULT_POPUP_HEIGHT=500;goog.window.DEFAULT_POPUP_WIDTH=690;goog.window.DEFAULT_POPUP_TARGET="google_popup";
goog.window.open=function(c,d,e){d||(d={});var f=e||window;e="undefined"!=typeof c.href?c.href:String(c);c=d.target||c.target;var h=[],k;for(k in d)switch(k){case "width":case "height":case "top":case "left":h.push(k+"="+d[k]);break;case "target":case "noreferrer":break;default:h.push(k+"="+(d[k]?1:0))}k=h.join(",");if(d.noreferrer){if(d=f.open("",c,k))goog.userAgent.IE&&-1!=e.indexOf(";")&&(e="'"+e.replace(/'/g,"%27")+"'"),d.opener=null,e=goog.string.htmlEscape(e),d.document.write('<META HTTP-EQUIV="refresh" content="0; url='+
e+'">'),d.document.close()}else d=f.open(e,c,k);return d};goog.window.openBlank=function(c,d,e){c=c?goog.string.htmlEscape(c):"";return goog.window.open('javascript:"'+encodeURI(c)+'"',d,e)};goog.window.popup=function(c,d){d||(d={});d.target=d.target||c.target||goog.window.DEFAULT_POPUP_TARGET;d.width=d.width||goog.window.DEFAULT_POPUP_WIDTH;d.height=d.height||goog.window.DEFAULT_POPUP_HEIGHT;var e=goog.window.open(c,d);if(!e)return!0;e.focus();return!1};goog.ui.editor.LinkDialog=function(c,d){goog.ui.editor.AbstractDialog.call(this,c);this.targetLink_=d;this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(goog.ui.editor.LinkDialog,goog.ui.editor.AbstractDialog);goog.ui.editor.LinkDialog.EventType={BEFORE_TEST_LINK:"beforetestlink"};goog.ui.editor.LinkDialog.OkEvent=function(c,d,e,f){goog.events.Event.call(this,goog.ui.editor.AbstractDialog.EventType.OK);this.linkText=c;this.linkUrl=d;this.openInNewWindow=e;this.noFollow=f};
goog.inherits(goog.ui.editor.LinkDialog.OkEvent,goog.events.Event);goog.ui.editor.LinkDialog.BeforeTestLinkEvent=function(c){goog.events.Event.call(this,goog.ui.editor.LinkDialog.EventType.BEFORE_TEST_LINK);this.url=c};goog.inherits(goog.ui.editor.LinkDialog.BeforeTestLinkEvent,goog.events.Event);goog.ui.editor.LinkDialog.prototype.showOpenLinkInNewWindow_=!1;goog.ui.editor.LinkDialog.prototype.isOpenLinkInNewWindowChecked_=!1;goog.ui.editor.LinkDialog.prototype.showRelNoFollow_=!1;
goog.ui.editor.LinkDialog.prototype.setEmailWarning=function(c){this.emailWarning_=c};goog.ui.editor.LinkDialog.prototype.showOpenLinkInNewWindow=function(c){this.showOpenLinkInNewWindow_=!0;this.isOpenLinkInNewWindowChecked_=c};goog.ui.editor.LinkDialog.prototype.showRelNoFollow=function(){this.showRelNoFollow_=!0};
goog.ui.editor.LinkDialog.prototype.show=function(){goog.ui.editor.LinkDialog.superClass_.show.call(this);this.selectAppropriateTab_(this.textToDisplayInput_.value,this.getTargetUrl_());this.syncOkButton_();this.showOpenLinkInNewWindow_&&(this.targetLink_.isNew()||(this.isOpenLinkInNewWindowChecked_="_blank"==this.targetLink_.getAnchor().target),this.openInNewWindowCheckbox_.checked=this.isOpenLinkInNewWindowChecked_);this.showRelNoFollow_&&(this.relNoFollowCheckbox_.checked=goog.ui.editor.LinkDialog.hasNoFollow(this.targetLink_.getAnchor().rel))};
goog.ui.editor.LinkDialog.prototype.hide=function(){this.disableAutogenFlag_(!1);goog.ui.editor.LinkDialog.superClass_.hide.call(this)};goog.ui.editor.LinkDialog.prototype.setTextToDisplayVisible=function(c){this.textToDisplayDiv_&&goog.style.setStyle(this.textToDisplayDiv_,"display",c?"block":"none")};goog.ui.editor.LinkDialog.prototype.setStopReferrerLeaks=function(c){this.stopReferrerLeaks_=c};
goog.ui.editor.LinkDialog.prototype.setAutogenFeatureEnabled=function(c){this.autogenFeatureEnabled_=c};goog.ui.editor.LinkDialog.hasNoFollow=function(c){return goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_.test(c)};goog.ui.editor.LinkDialog.removeNoFollow=function(c){return c.replace(goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_,"")};
goog.ui.editor.LinkDialog.prototype.createDialogControl=function(){var c=new goog.ui.editor.AbstractDialog.Builder(this);c.setTitle(goog.ui.editor.messages.MSG_EDIT_LINK).setContent(this.createDialogContent_());return c.build()};goog.ui.editor.LinkDialog.prototype.createOkEvent=function(){return this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB?this.createOkEventFromEmailTab_():this.createOkEventFromWebTab_()};
goog.ui.editor.LinkDialog.prototype.disposeInternal=function(){this.eventHandler_.dispose();this.eventHandler_=null;this.tabPane_.dispose();this.tabPane_=null;this.urlInputHandler_.dispose();this.urlInputHandler_=null;this.emailInputHandler_.dispose();this.emailInputHandler_=null;goog.ui.editor.LinkDialog.superClass_.disposeInternal.call(this)};goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_=/\bnofollow\b/i;goog.ui.editor.LinkDialog.prototype.autogenFeatureEnabled_=!0;
goog.ui.editor.LinkDialog.prototype.stopReferrerLeaks_=!1;
goog.ui.editor.LinkDialog.prototype.createDialogContent_=function(){this.textToDisplayDiv_=this.buildTextToDisplayDiv_();var c=this.dom.createDom(goog.dom.TagName.DIV,null,this.textToDisplayDiv_);this.tabPane_=new goog.ui.editor.TabPane(this.dom,goog.ui.editor.messages.MSG_LINK_TO);this.tabPane_.addTab(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB,goog.ui.editor.messages.MSG_ON_THE_WEB,goog.ui.editor.messages.MSG_ON_THE_WEB_TIP,goog.ui.editor.LinkDialog.BUTTON_GROUP_,this.buildTabOnTheWeb_());this.tabPane_.addTab(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB,
goog.ui.editor.messages.MSG_EMAIL_ADDRESS,goog.ui.editor.messages.MSG_EMAIL_ADDRESS_TIP,goog.ui.editor.LinkDialog.BUTTON_GROUP_,this.buildTabEmailAddress_());this.tabPane_.render(c);this.eventHandler_.listen(this.tabPane_,goog.ui.Component.EventType.SELECT,this.onChangeTab_);this.showOpenLinkInNewWindow_&&c.appendChild(this.buildOpenInNewWindowDiv_());this.showRelNoFollow_&&c.appendChild(this.buildRelNoFollowDiv_());return c};
goog.ui.editor.LinkDialog.prototype.buildTextToDisplayDiv_=function(){var c=this.dom.createTable(1,2);c.cellSpacing="0";c.cellPadding="0";c.style.fontSize="10pt";var d=this.dom.createDom(goog.dom.TagName.DIV);c.rows[0].cells[0].innerHTML='<span style="position: relative; bottom: 2px; padding-right: 1px; white-space: nowrap;">'+goog.ui.editor.messages.MSG_TEXT_TO_DISPLAY+"&nbsp;</span>";var e=this.textToDisplayInput_=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.TEXT_TO_DISPLAY});
goog.style.setStyle(e,"width","98%");goog.style.setStyle(c.rows[0].cells[1],"width","100%");goog.dom.appendChild(c.rows[0].cells[1],e);e.value=this.targetLink_.getCurrentText();this.eventHandler_.listen(e,goog.events.EventType.KEYUP,goog.bind(this.onTextToDisplayEdit_,this));goog.dom.appendChild(d,c);return d};
goog.ui.editor.LinkDialog.prototype.buildOpenInNewWindowDiv_=function(){this.openInNewWindowCheckbox_=this.dom.createDom(goog.dom.TagName.INPUT,{type:"checkbox"});return this.dom.createDom(goog.dom.TagName.DIV,null,this.dom.createDom(goog.dom.TagName.LABEL,null,this.openInNewWindowCheckbox_,goog.ui.editor.messages.MSG_OPEN_IN_NEW_WINDOW))};
goog.ui.editor.LinkDialog.prototype.buildRelNoFollowDiv_=function(){var c=goog.getMsg("Add '{$relNoFollow}' attribute ({$linkStart}Learn more{$linkEnd})",{relNoFollow:"rel=nofollow",linkStart:'<a href="http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569" target="_blank">',linkEnd:"</a>"});this.relNoFollowCheckbox_=this.dom.createDom(goog.dom.TagName.INPUT,{type:"checkbox"});return this.dom.createDom(goog.dom.TagName.DIV,null,this.dom.createDom(goog.dom.TagName.LABEL,null,this.relNoFollowCheckbox_,
goog.dom.htmlToDocumentFragment(c)))};
goog.ui.editor.LinkDialog.prototype.buildTabOnTheWeb_=function(){var c=this.dom.createElement(goog.dom.TagName.DIV),d=this.dom.createDom(goog.dom.TagName.DIV,{innerHTML:"<b>"+goog.ui.editor.messages.MSG_WHAT_URL+"</b>"}),e=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT,className:goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_});goog.userAgent.IE||(e.type="url");goog.editor.BrowserFeature.NEEDS_99_WIDTH_IN_STANDARDS_MODE&&goog.editor.node.isStandardsMode(e)&&
(e.style.width="99%");var f=this.dom.createDom(goog.dom.TagName.DIV,null,e);this.urlInputHandler_=new goog.events.InputHandler(e);this.eventHandler_.listen(this.urlInputHandler_,goog.events.InputHandler.EventType.INPUT,this.onUrlOrEmailInputChange_);e=new goog.ui.Button(goog.ui.editor.messages.MSG_TEST_THIS_LINK,goog.ui.LinkButtonRenderer.getInstance(),this.dom);e.render(f);e.getElement().style.marginTop="1em";this.eventHandler_.listen(e,goog.ui.Component.EventType.ACTION,this.onWebTestLink_);e=this.dom.createDom(goog.dom.TagName.DIV,
{className:goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_,innerHTML:goog.ui.editor.messages.MSG_TR_LINK_EXPLANATION});c.appendChild(d);c.appendChild(f);c.appendChild(e);return c};
goog.ui.editor.LinkDialog.prototype.buildTabEmailAddress_=function(){var c=this.dom.createDom(goog.dom.TagName.DIV),d=this.dom.createDom(goog.dom.TagName.DIV,{innerHTML:"<b>"+goog.ui.editor.messages.MSG_WHAT_EMAIL+"</b>"});goog.dom.appendChild(c,d);d=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT,className:goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_});goog.editor.BrowserFeature.NEEDS_99_WIDTH_IN_STANDARDS_MODE&&goog.editor.node.isStandardsMode(d)&&
(d.style.width="99%");goog.dom.appendChild(c,d);this.emailInputHandler_=new goog.events.InputHandler(d);this.eventHandler_.listen(this.emailInputHandler_,goog.events.InputHandler.EventType.INPUT,this.onUrlOrEmailInputChange_);goog.dom.appendChild(c,this.dom.createDom(goog.dom.TagName.DIV,{id:goog.ui.editor.LinkDialog.Id_.EMAIL_WARNING,className:goog.ui.editor.LinkDialog.EMAIL_WARNING_CLASSNAME_,style:"visibility:hidden"},goog.ui.editor.messages.MSG_INVALID_EMAIL));this.emailWarning_&&(d=this.dom.createDom(goog.dom.TagName.DIV,
{className:goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_,innerHTML:this.emailWarning_}),goog.dom.appendChild(c,d));return c};goog.ui.editor.LinkDialog.prototype.getTargetUrl_=function(){return this.targetLink_.getAnchor().getAttribute("href")||""};
goog.ui.editor.LinkDialog.prototype.selectAppropriateTab_=function(c,d){this.isNewLink_()?this.guessUrlAndSelectTab_(c):(goog.editor.Link.isMailto(d)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value=d.substring(d.indexOf(":")+1)):(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value=this.isNewLink_()?
"http://":d),this.setAutogenFlagFromCurInput_())};
goog.ui.editor.LinkDialog.prototype.guessUrlAndSelectTab_=function(c){goog.editor.Link.isLikelyEmailAddress(c)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value=c,this.setAutogenFlag_(!0),this.disableAutogenFlag_(!0)):goog.editor.Link.isLikelyUrl(c)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value=c,
this.setAutogenFlag_(!0),this.disableAutogenFlag_(!0)):(this.targetLink_.getCurrentText()||this.setAutogenFlag_(!0),this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB))};
goog.ui.editor.LinkDialog.prototype.syncOkButton_=function(){var c;if(this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB)c=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value,this.toggleInvalidEmailWarning_(""!=c&&!goog.editor.Link.isLikelyEmailAddress(c));else if(this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB)c=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value;else return;this.getOkButtonElement().disabled=
goog.string.isEmpty(c)};goog.ui.editor.LinkDialog.prototype.toggleInvalidEmailWarning_=function(c){this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_WARNING).style.visibility=c?"visible":"hidden"};goog.ui.editor.LinkDialog.prototype.onTextToDisplayEdit_=function(){""==this.textToDisplayInput_.value?this.setAutogenFlag_(!0):this.setAutogenFlagFromCurInput_()};
goog.ui.editor.LinkDialog.prototype.createOkEventFromWebTab_=function(){var c=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value;if(goog.editor.Link.isLikelyEmailAddress(c))return this.createOkEventFromEmailTab_(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT);0>c.search(/:/)&&(c="http://"+goog.string.trimLeft(c));return this.createOkEventFromUrl_(c)};
goog.ui.editor.LinkDialog.prototype.createOkEventFromEmailTab_=function(c){c=this.dom.getElement(c||goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value;return this.createOkEventFromUrl_("mailto:"+c)};
goog.ui.editor.LinkDialog.prototype.onWebTestLink_=function(){var c=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value;0>c.search(/:/)&&(c="http://"+goog.string.trimLeft(c));if(this.dispatchEvent(new goog.ui.editor.LinkDialog.BeforeTestLinkEvent(c))){var d=this.dom.getWindow(),e=goog.dom.getViewportSize(d),e={target:"_blank",width:Math.max(e.width-50,50),height:Math.max(e.height-50,50),toolbar:!0,scrollbars:!0,location:!0,statusbar:!1,menubar:!0,resizable:!0,noreferrer:this.stopReferrerLeaks_};
goog.window.open(c,e,d)}};goog.ui.editor.LinkDialog.prototype.onUrlOrEmailInputChange_=function(){this.autogenerateTextToDisplay_?this.setTextToDisplayFromAuto_():""==this.textToDisplayInput_.value&&this.setAutogenFlagFromCurInput_();this.syncOkButton_()};
goog.ui.editor.LinkDialog.prototype.onChangeTab_=function(c){c=this.dom.getElement(c.target.getId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX);goog.editor.focus.focusInputField(c);c.style.width="";c.style.width=c.offsetWidth+"px";this.syncOkButton_();this.setTextToDisplayFromAuto_()};
goog.ui.editor.LinkDialog.prototype.setTextToDisplayFromAuto_=function(){if(this.autogenFeatureEnabled_&&this.autogenerateTextToDisplay_){var c=this.tabPane_.getCurrentTabId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX;this.textToDisplayInput_.value=this.dom.getElement(c).value}};goog.ui.editor.LinkDialog.prototype.setAutogenFlag_=function(c){this.autogenerateTextToDisplay_=c};goog.ui.editor.LinkDialog.prototype.disableAutogenFlag_=function(c){this.setAutogenFlag_(!c);this.disableAutogen_=c};
goog.ui.editor.LinkDialog.prototype.createOkEventFromUrl_=function(c){this.setTextToDisplayFromAuto_();this.showOpenLinkInNewWindow_&&(this.isOpenLinkInNewWindowChecked_=this.openInNewWindowCheckbox_.checked);return new goog.ui.editor.LinkDialog.OkEvent(this.textToDisplayInput_.value,c,this.showOpenLinkInNewWindow_&&this.isOpenLinkInNewWindowChecked_,this.showRelNoFollow_&&this.relNoFollowCheckbox_.checked)};
goog.ui.editor.LinkDialog.prototype.setAutogenFlagFromCurInput_=function(){var c=!1;this.disableAutogen_||(c=this.dom.getElement(this.tabPane_.getCurrentTabId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX).value==this.textToDisplayInput_.value);this.setAutogenFlag_(c)};goog.ui.editor.LinkDialog.prototype.isNewLink_=function(){return this.targetLink_.isNew()};
goog.ui.editor.LinkDialog.Id_={TEXT_TO_DISPLAY:"linkdialog-text",ON_WEB_TAB:"linkdialog-onweb",ON_WEB_INPUT:"linkdialog-onweb-tab-input",EMAIL_ADDRESS_TAB:"linkdialog-email",EMAIL_ADDRESS_INPUT:"linkdialog-email-tab-input",EMAIL_WARNING:"linkdialog-email-warning",TAB_INPUT_SUFFIX:"-tab-input"};goog.ui.editor.LinkDialog.BUTTON_GROUP_="linkdialog-buttons";goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_="tr-link-dialog-target-input";goog.ui.editor.LinkDialog.EMAIL_WARNING_CLASSNAME_="tr-link-dialog-email-warning";
goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_="tr-link-dialog-explanation-text";goog.editor.plugins.AbstractDialogPlugin=function(c){goog.editor.Plugin.call(this);this.command_=c};goog.inherits(goog.editor.plugins.AbstractDialogPlugin,goog.editor.Plugin);goog.editor.plugins.AbstractDialogPlugin.prototype.isSupportedCommand=function(c){return c==this.command_};goog.editor.plugins.AbstractDialogPlugin.prototype.execCommand=function(c,d){return this.execCommandInternal.apply(this,arguments)};goog.editor.plugins.AbstractDialogPlugin.EventType={OPENED:"dialogOpened",CLOSED:"dialogClosed"};
goog.editor.plugins.AbstractDialogPlugin.prototype.getDialog=function(){return this.dialog_};goog.editor.plugins.AbstractDialogPlugin.prototype.setReuseDialog=function(c){this.reuseDialog_=c};
goog.editor.plugins.AbstractDialogPlugin.prototype.execCommandInternal=function(c,d){this.reuseDialog_||this.disposeDialog_();this.dialog_||(this.dialog_=this.createDialog(goog.dom.getDomHelper(this.getFieldObject().getAppWindow()),d));var e=this.getFieldObject().getRange();this.savedRange_=e&&goog.editor.range.saveUsingNormalizedCarets(e);goog.dom.Range.clearSelection(this.getFieldObject().getEditableDomHelper().getWindow());goog.events.listenOnce(this.dialog_,goog.ui.editor.AbstractDialog.EventType.AFTER_HIDE,
this.handleAfterHide,!1,this);this.getFieldObject().setModalMode(!0);this.dialog_.show();this.dispatchEvent(goog.editor.plugins.AbstractDialogPlugin.EventType.OPENED);this.getFieldObject().dispatchSelectionChangeEvent();return!0};
goog.editor.plugins.AbstractDialogPlugin.prototype.handleAfterHide=function(c){this.getFieldObject().setModalMode(!1);this.restoreOriginalSelection();this.reuseDialog_||this.disposeDialog_();this.dispatchEvent(goog.editor.plugins.AbstractDialogPlugin.EventType.CLOSED);this.getFieldObject().dispatchSelectionChangeEvent();this.getFieldObject().debounceEvent(goog.editor.Field.EventType.SELECTIONCHANGE)};
goog.editor.plugins.AbstractDialogPlugin.prototype.restoreOriginalSelection=function(){this.getFieldObject().restoreSavedRange(this.savedRange_);this.savedRange_=null};goog.editor.plugins.AbstractDialogPlugin.prototype.disposeOriginalSelection=function(){this.savedRange_&&(this.savedRange_.dispose(),this.savedRange_=null)};goog.editor.plugins.AbstractDialogPlugin.prototype.disposeInternal=function(){this.disposeDialog_();goog.editor.plugins.AbstractDialogPlugin.superClass_.disposeInternal.call(this)};
goog.editor.plugins.AbstractDialogPlugin.prototype.reuseDialog_=!1;goog.editor.plugins.AbstractDialogPlugin.prototype.isDisposingDialog_=!1;goog.editor.plugins.AbstractDialogPlugin.prototype.disposeDialog_=function(){this.dialog_&&!this.isDisposingDialog_&&(this.isDisposingDialog_=!0,this.dialog_.dispose(),this.dialog_=null,this.isDisposingDialog_=!1)};goog.editor.plugins.LinkDialogPlugin=function(){goog.editor.plugins.AbstractDialogPlugin.call(this,goog.editor.Command.MODAL_LINK_EDITOR);this.eventHandler_=new goog.events.EventHandler(this);this.safeToOpenSchemes_=["http","https","ftp"]};goog.inherits(goog.editor.plugins.LinkDialogPlugin,goog.editor.plugins.AbstractDialogPlugin);goog.editor.plugins.LinkDialogPlugin.prototype.showOpenLinkInNewWindow_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.isOpenLinkInNewWindowChecked_=!1;
goog.editor.plugins.LinkDialogPlugin.prototype.showRelNoFollow_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.stopReferrerLeaks_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.blockOpeningUnsafeSchemes_=!0;goog.editor.plugins.LinkDialogPlugin.prototype.getTrogClassId=goog.functions.constant("LinkDialogPlugin");goog.editor.plugins.LinkDialogPlugin.prototype.setBlockOpeningUnsafeSchemes=function(c){this.blockOpeningUnsafeSchemes_=c};
goog.editor.plugins.LinkDialogPlugin.prototype.setSafeToOpenSchemes=function(c){this.safeToOpenSchemes_=c};goog.editor.plugins.LinkDialogPlugin.prototype.showOpenLinkInNewWindow=function(c){this.showOpenLinkInNewWindow_=!0;this.isOpenLinkInNewWindowChecked_=c};goog.editor.plugins.LinkDialogPlugin.prototype.showRelNoFollow=function(){this.showRelNoFollow_=!0};goog.editor.plugins.LinkDialogPlugin.prototype.getOpenLinkInNewWindowCheckedState=function(){return this.isOpenLinkInNewWindowChecked_};
goog.editor.plugins.LinkDialogPlugin.prototype.stopReferrerLeaks=function(){this.stopReferrerLeaks_=!0};goog.editor.plugins.LinkDialogPlugin.prototype.setEmailWarning=function(c){this.emailWarning_=c};goog.editor.plugins.LinkDialogPlugin.prototype.execCommandInternal=function(c,d){this.currentLink_=d;return goog.editor.plugins.LinkDialogPlugin.superClass_.execCommandInternal.call(this,c,d)};
goog.editor.plugins.LinkDialogPlugin.prototype.handleAfterHide=function(c){goog.editor.plugins.LinkDialogPlugin.superClass_.handleAfterHide.call(this,c);this.currentLink_=null};goog.editor.plugins.LinkDialogPlugin.prototype.getEventHandler=function(){return this.eventHandler_};goog.editor.plugins.LinkDialogPlugin.prototype.getCurrentLink=function(){return this.currentLink_};
goog.editor.plugins.LinkDialogPlugin.prototype.createDialog=function(c,d){var e=new goog.ui.editor.LinkDialog(c,d);this.emailWarning_&&e.setEmailWarning(this.emailWarning_);this.showOpenLinkInNewWindow_&&e.showOpenLinkInNewWindow(this.isOpenLinkInNewWindowChecked_);this.showRelNoFollow_&&e.showRelNoFollow();e.setStopReferrerLeaks(this.stopReferrerLeaks_);this.eventHandler_.listen(e,goog.ui.editor.AbstractDialog.EventType.OK,this.handleOk).listen(e,goog.ui.editor.AbstractDialog.EventType.CANCEL,this.handleCancel_).listen(e,
goog.ui.editor.LinkDialog.EventType.BEFORE_TEST_LINK,this.handleBeforeTestLink);return e};goog.editor.plugins.LinkDialogPlugin.prototype.disposeInternal=function(){goog.editor.plugins.LinkDialogPlugin.superClass_.disposeInternal.call(this);this.eventHandler_.dispose()};
goog.editor.plugins.LinkDialogPlugin.prototype.handleOk=function(c){this.disposeOriginalSelection();this.currentLink_.setTextAndUrl(c.linkText,c.linkUrl);this.showOpenLinkInNewWindow_&&(this.isOpenLinkInNewWindowChecked_=c.openInNewWindow);var d=this.currentLink_.getAnchor();this.touchUpAnchorOnOk_(d,c);for(var e=this.currentLink_.getExtraAnchors(),f=0;f<e.length;++f)e[f].href=d.href,this.touchUpAnchorOnOk_(e[f],c);this.currentLink_.placeCursorRightOf();this.getFieldObject().focus();this.getFieldObject().dispatchSelectionChangeEvent();
this.getFieldObject().dispatchChange();this.eventHandler_.removeAll()};goog.editor.plugins.LinkDialogPlugin.prototype.touchUpAnchorOnOk_=function(c,d){this.showOpenLinkInNewWindow_&&(d.openInNewWindow?c.target="_blank":"_blank"==c.target&&(c.target=""));if(this.showRelNoFollow_){var e=goog.ui.editor.LinkDialog.hasNoFollow(c.rel);e&&!d.noFollow?c.rel=goog.ui.editor.LinkDialog.removeNoFollow(c.rel):!e&&d.noFollow&&(c.rel=c.rel?c.rel+" nofollow":"nofollow")}};
goog.editor.plugins.LinkDialogPlugin.prototype.handleCancel_=function(c){if(this.currentLink_.isNew()){goog.dom.flattenElement(this.currentLink_.getAnchor());c=this.currentLink_.getExtraAnchors();for(var d=0;d<c.length;++d)goog.dom.flattenElement(c[d]);this.getFieldObject().dispatchChange()}this.eventHandler_.removeAll()};goog.editor.plugins.LinkDialogPlugin.prototype.handleBeforeTestLink=function(c){if(!this.shouldOpenUrl(c.url)){var d=goog.getMsg("This link cannot be tested.");alert(d);c.preventDefault()}};
goog.editor.plugins.LinkDialogPlugin.prototype.shouldOpenUrl=function(c){return!this.blockOpeningUnsafeSchemes_||this.isSafeSchemeToOpen_(c)};goog.editor.plugins.LinkDialogPlugin.prototype.isSafeSchemeToOpen_=function(c){c=goog.uri.utils.getScheme(c)||"http";return goog.array.contains(this.safeToOpenSchemes_,c.toLowerCase())};goog.editor.plugins.BasicTextFormatter=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.BasicTextFormatter,goog.editor.Plugin);goog.editor.plugins.BasicTextFormatter.prototype.getTrogClassId=function(){return"BTF"};goog.editor.plugins.BasicTextFormatter.prototype.logger=goog.log.getLogger("goog.editor.plugins.BasicTextFormatter");
goog.editor.plugins.BasicTextFormatter.COMMAND={LINK:"+link",FORMAT_BLOCK:"+formatBlock",INDENT:"+indent",OUTDENT:"+outdent",STRIKE_THROUGH:"+strikeThrough",HORIZONTAL_RULE:"+insertHorizontalRule",SUBSCRIPT:"+subscript",SUPERSCRIPT:"+superscript",UNDERLINE:"+underline",BOLD:"+bold",ITALIC:"+italic",FONT_SIZE:"+fontSize",FONT_FACE:"+fontName",FONT_COLOR:"+foreColor",BACKGROUND_COLOR:"+backColor",ORDERED_LIST:"+insertOrderedList",UNORDERED_LIST:"+insertUnorderedList",JUSTIFY_CENTER:"+justifyCenter",
JUSTIFY_FULL:"+justifyFull",JUSTIFY_RIGHT:"+justifyRight",JUSTIFY_LEFT:"+justifyLeft"};goog.editor.plugins.BasicTextFormatter.SUPPORTED_COMMANDS_=goog.object.transpose(goog.editor.plugins.BasicTextFormatter.COMMAND);goog.editor.plugins.BasicTextFormatter.prototype.isSupportedCommand=function(c){return c in goog.editor.plugins.BasicTextFormatter.SUPPORTED_COMMANDS_};goog.editor.plugins.BasicTextFormatter.prototype.getRange_=function(){return this.getFieldObject().getRange()};
goog.editor.plugins.BasicTextFormatter.prototype.getDocument_=function(){return this.getFieldDomHelper().getDocument()};
goog.editor.plugins.BasicTextFormatter.prototype.execCommandInternal=function(c,d){var e,f,h,k,l,m=d;switch(c){case goog.editor.plugins.BasicTextFormatter.COMMAND.BACKGROUND_COLOR:goog.isNull(m)||(goog.editor.BrowserFeature.EATS_EMPTY_BACKGROUND_COLOR?this.applyBgColorManually_(m):goog.userAgent.OPERA?this.execCommandHelper_("hiliteColor",m):this.execCommandHelper_(c,m));break;case goog.editor.plugins.BasicTextFormatter.COMMAND.LINK:l=this.toggleLink_(m);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_CENTER:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_FULL:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_RIGHT:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_LEFT:this.justify_(c);
break;default:goog.userAgent.IE&&(c==goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK&&m)&&(m="<"+m+">");if(c==goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR&&goog.isNull(m))break;switch(c){case goog.editor.plugins.BasicTextFormatter.COMMAND.INDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT:goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&(goog.userAgent.GECKO&&(f=!0),goog.userAgent.OPERA&&(f=c==goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT?!this.getDocument_().queryCommandEnabled("outdent"):
!0));case goog.editor.plugins.BasicTextFormatter.COMMAND.ORDERED_LIST:case goog.editor.plugins.BasicTextFormatter.COMMAND.UNORDERED_LIST:goog.editor.BrowserFeature.LEAVES_P_WHEN_REMOVING_LISTS&&this.queryCommandStateInternal_(this.getDocument_(),c)?h=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)!=goog.dom.TagName.P:goog.editor.BrowserFeature.CAN_LISTIFY_BR||this.convertBreaksToDivs_(),goog.userAgent.GECKO&&(goog.editor.BrowserFeature.FORGETS_FORMATTING_WHEN_LISTIFYING&&
!this.queryCommandValue(c))&&(k|=this.beforeInsertListGecko_());case goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK:e=!!this.getFieldObject().getPluginByClassId("Bidi");break;case goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT:case goog.editor.plugins.BasicTextFormatter.COMMAND.SUPERSCRIPT:goog.editor.BrowserFeature.NESTS_SUBSCRIPT_SUPERSCRIPT&&this.applySubscriptSuperscriptWorkarounds_(c);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE:case goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD:case goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC:f=
goog.userAgent.GECKO&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&this.queryCommandValue(c);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_FACE:f=goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO}this.execCommandHelper_(c,m,e,!!f);k&&this.getDocument_().execCommand("Delete",!1,!0);h&&this.getDocument_().execCommand("FormatBlock",!1,"<div>")}goog.userAgent.GECKO&&!this.getFieldObject().inModalMode()&&
this.focusField_();return l};goog.editor.plugins.BasicTextFormatter.prototype.focusField_=function(){this.getFieldDomHelper().getWindow().focus()};
goog.editor.plugins.BasicTextFormatter.prototype.queryCommandValue=function(c){var d;switch(c){case goog.editor.plugins.BasicTextFormatter.COMMAND.LINK:return this.isNodeInState_(goog.dom.TagName.A);case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_CENTER:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_FULL:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_RIGHT:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_LEFT:return this.isJustification_(c);case goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK:return goog.editor.plugins.BasicTextFormatter.getSelectionBlockState_(this.getFieldObject().getRange());
case goog.editor.plugins.BasicTextFormatter.COMMAND.INDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.HORIZONTAL_RULE:return!1;case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_SIZE:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_FACE:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR:case goog.editor.plugins.BasicTextFormatter.COMMAND.BACKGROUND_COLOR:return this.queryCommandValueInternal_(this.getDocument_(),
c,goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO);case goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE:case goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD:case goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC:d=goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO;default:return this.queryCommandStateInternal_(this.getDocument_(),c,d)}};
goog.editor.plugins.BasicTextFormatter.prototype.prepareContentsHtml=function(c){goog.editor.BrowserFeature.COLLAPSES_EMPTY_NODES&&c.match(/^\s*<script/i)&&(c="&nbsp;"+c);goog.editor.BrowserFeature.CONVERT_TO_B_AND_I_TAGS&&(c=c.replace(/<(\/?)strong([^\w])/gi,"<$1b$2"),c=c.replace(/<(\/?)em([^\w])/gi,"<$1i$2"));return c};
goog.editor.plugins.BasicTextFormatter.prototype.cleanContentsDom=function(c){c=c.getElementsByTagName(goog.dom.TagName.IMG);for(var d=0,e;e=c[d];d++)goog.editor.BrowserFeature.SHOWS_CUSTOM_ATTRS_IN_INNER_HTML&&(e.removeAttribute("tabIndex"),e.removeAttribute("tabIndexSet"),goog.removeUid(e),e.oldTabIndex&&(e.tabIndex=e.oldTabIndex))};
goog.editor.plugins.BasicTextFormatter.prototype.cleanContentsHtml=function(c){if(goog.editor.BrowserFeature.MOVES_STYLE_TO_HEAD){for(var d=this.getFieldObject().getEditableDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.HEAD),e=[],f=d.length,h=1;h<f;++h)for(var k=d[h].getElementsByTagName(goog.dom.TagName.STYLE),l=k.length,m=0;m<l;++m)e.push(k[m].outerHTML);return e.join("")+c}return c};
goog.editor.plugins.BasicTextFormatter.prototype.handleKeyboardShortcut=function(c,d,e){if(!e)return!1;var f;switch(d){case "b":f=goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD;break;case "i":f=goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC;break;case "u":f=goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE;break;case "s":return!0}return f?(this.getFieldObject().execCommand(f),!0):!1};goog.editor.plugins.BasicTextFormatter.BR_REGEXP_=goog.userAgent.IE?/<br([^\/>]*)\/?>/gi:/<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi;
goog.editor.plugins.BasicTextFormatter.prototype.convertBreaksToDivs_=function(){if(!goog.userAgent.IE&&!goog.userAgent.OPERA)return!1;var c=this.getRange_(),d=c.getContainerElement(),e=this.getDocument_();goog.editor.plugins.BasicTextFormatter.BR_REGEXP_.lastIndex=0;if(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_.test(d.innerHTML)){c=c.saveUsingCarets();if(d.tagName==goog.dom.TagName.P)goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_(d,!0);else{var f=d.innerHTML.replace(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_,
'<p$1 trtempbr="temp_br">');goog.editor.node.replaceInnerHtml(d,f);d=goog.array.toArray(d.getElementsByTagName(goog.dom.TagName.P));goog.iter.forEach(d,function(c){if("temp_br"==c.getAttribute("trtempbr")){c.removeAttribute("trtempbr");if(goog.string.isBreakingWhitespace(goog.dom.getTextContent(c))){var d=goog.userAgent.IE?e.createTextNode(goog.string.Unicode.NBSP):e.createElement(goog.dom.TagName.BR);c.appendChild(d)}goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_(c)}})}c.restore();
return!0}return!1};goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_=function(c,d){if(goog.userAgent.IE||goog.userAgent.OPERA){var e=c.outerHTML.replace(/<(\/?)p/gi,"<$1div");d&&(e=e.replace(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_,"</div><div$1>"));goog.userAgent.OPERA&&!/<\/div>$/i.test(e)&&(e+="</div>");c.outerHTML=e}};goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_=function(c){return 0==c.indexOf("+")?c.substring(1):c};
goog.editor.plugins.BasicTextFormatter.prototype.justify_=function(c){this.execCommandHelper_(c,null,!1,!0);goog.userAgent.GECKO&&this.execCommandHelper_(c,null,!1,!0);goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO||goog.iter.forEach(this.getFieldObject().getRange(),goog.editor.plugins.BasicTextFormatter.convertContainerToTextAlign_)};
goog.editor.plugins.BasicTextFormatter.convertContainerToTextAlign_=function(c){c=goog.editor.style.getContainer(c);c.align&&(c.style.textAlign=c.align,c.removeAttribute("align"))};
goog.editor.plugins.BasicTextFormatter.prototype.execCommandHelper_=function(c,d,e,f){var h=null;e&&(h=this.getFieldObject().queryCommandValue(goog.editor.Command.DIR_RTL)?"rtl":this.getFieldObject().queryCommandValue(goog.editor.Command.DIR_LTR)?"ltr":null);c=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(c);var k,l;goog.userAgent.IE&&(l=this.applyExecCommandIEFixes_(c),k=l[0],l=l[1]);goog.userAgent.WEBKIT&&(k=this.applyExecCommandSafariFixes_(c));goog.userAgent.GECKO&&this.applyExecCommandGeckoFixes_(c);
goog.editor.BrowserFeature.DOESNT_OVERRIDE_FONT_SIZE_IN_STYLE_ATTR&&"fontsize"==c.toLowerCase()&&this.removeFontSizeFromStyleAttrs_();e=this.getDocument_();f&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&(e.execCommand("styleWithCSS",!1,!0),goog.userAgent.OPERA&&this.invalidateInlineCss_());e.execCommand(c,!1,d);f&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&e.execCommand("styleWithCSS",!1,!1);goog.userAgent.WEBKIT&&(!goog.userAgent.isVersionOrHigher("526")&&"formatblock"==c.toLowerCase()&&d&&
/^[<]?h\d[>]?$/i.test(d))&&this.cleanUpSafariHeadings_();/insert(un)?orderedlist/i.test(c)&&(goog.userAgent.WEBKIT&&this.fixSafariLists_(),goog.userAgent.IE&&(this.fixIELists_(),l&&goog.dom.removeNode(l)));k&&goog.dom.removeNode(k);h&&this.getFieldObject().execCommand(h)};
goog.editor.plugins.BasicTextFormatter.prototype.applyBgColorManually_=function(c){var d=goog.userAgent.GECKO,e=this.getFieldObject().getRange(),f,h;e&&e.isCollapsed()&&(f=this.getFieldDomHelper().createTextNode(d?" ":""),h=e.getStartNode(),h=h.nodeType==goog.dom.NodeType.ELEMENT?h:h.parentNode,""==h.innerHTML?(h.style.textIndent="-10000px",h.appendChild(f)):(h=this.getFieldDomHelper().createDom("span",{style:"text-indent:-10000px"},f),e.replaceContentsWithNode(h)),goog.dom.Range.createFromNodeContents(f).select());
this.execCommandHelper_("hiliteColor",c,!1,!0);f&&(d&&(f.data=""),h.style.textIndent="")};
goog.editor.plugins.BasicTextFormatter.prototype.toggleLink_=function(c){this.getFieldObject().isSelectionEditable()||this.focusField_();var d=this.getRange_(),e=d&&d.getContainerElement();if((e=goog.dom.getAncestorByTagNameAndClass(e,goog.dom.TagName.A))&&goog.editor.node.isEditable(e))goog.dom.flattenElement(e);else if(c=this.createLink_(d,"/",c)){if(!this.getFieldObject().execCommand(goog.editor.Command.MODAL_LINK_EDITOR,c))if(d=this.getFieldObject().getAppWindow().prompt(goog.ui.editor.messages.MSG_LINK_TO,
"http://"))c.setTextAndUrl(c.getCurrentText()||d,d),c.placeCursorRightOf();else return d=goog.editor.range.saveUsingNormalizedCarets(goog.dom.Range.createFromNodeContents(c.getAnchor())),c.removeLink(),d.restore().select(),null;return c}return null};
goog.editor.plugins.BasicTextFormatter.prototype.createLink_=function(c,d,e){var f=null,h=[],k=c&&c.getContainerElement();if(k&&k.tagName==goog.dom.TagName.IMG)return null;if(c&&c.isCollapsed())c=c.getTextRange(0).getBrowserRangeObject(),goog.editor.BrowserFeature.HAS_W3C_RANGES?(f=this.getFieldDomHelper().createElement(goog.dom.TagName.A),c.insertNode(f)):goog.editor.BrowserFeature.HAS_IE_RANGES&&(c.pasteHTML("<a id='newLink'></a>"),f=this.getFieldDomHelper().getElement("newLink"),f.removeAttribute("id"));
else{var l=goog.string.createUniqueString();this.execCommandHelper_("CreateLink",l);goog.array.forEach(this.getFieldObject().getElement().getElementsByTagName(goog.dom.TagName.A),function(c,d,e){goog.string.endsWith(c.href,l)&&h.push(c)});h.length&&(f=h.pop())}return goog.editor.Link.createNewLink(f,d,e,h)};goog.editor.plugins.BasicTextFormatter.brokenExecCommandsIE_={indent:1,outdent:1,insertOrderedList:1,insertUnorderedList:1,justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,ltr:1,rtl:1};
goog.editor.plugins.BasicTextFormatter.blockquoteHatingCommandsIE_={insertOrderedList:1,insertUnorderedList:1};
goog.editor.plugins.BasicTextFormatter.prototype.applySubscriptSuperscriptWorkarounds_=function(c){if(!this.queryCommandValue(c)){c=c==goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT?goog.editor.plugins.BasicTextFormatter.COMMAND.SUPERSCRIPT:goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT;var d=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(c);this.queryCommandValue(c)||this.getDocument_().execCommand(d,!1,null);this.getDocument_().execCommand(d,!1,null)}};
goog.editor.plugins.BasicTextFormatter.prototype.removeFontSizeFromStyleAttrs_=function(){var c=goog.editor.range.expand(this.getFieldObject().getRange(),this.getFieldObject().getElement());goog.iter.forEach(goog.iter.filter(c,function(d,e,f){return f.isStartTag()&&c.containsNode(d)}),function(c){goog.style.setStyle(c,"font-size","");goog.userAgent.GECKO&&(0==c.style.length&&null!=c.getAttribute("style"))&&c.removeAttribute("style")})};
goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandIEFixes_=function(c){var d=[],e=null,f=this.getRange_(),h=this.getFieldDomHelper();if(c in goog.editor.plugins.BasicTextFormatter.blockquoteHatingCommandsIE_){var k=f&&f.getContainerElement();if(k){for(var l=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.BLOCKQUOTE,null,k),m,n=0;n<l.length;n++)if(f.containsNode(l[n])){m=l[n];break}if(k=m||goog.dom.getAncestorByTagNameAndClass(k,"BLOCKQUOTE"))e=h.createDom("div",{style:"height:0"}),
goog.dom.appendChild(k,e),d.push(e),m?f=goog.dom.Range.createFromNodes(m,0,e,0):f.containsNode(e)&&(f=goog.dom.Range.createFromNodes(f.getStartNode(),f.getStartOffset(),e,0)),f.select()}}m=this.getFieldObject();!m.usesIframe()&&!e&&c in goog.editor.plugins.BasicTextFormatter.brokenExecCommandsIE_&&(c=m.getElement(),f&&(f.isCollapsed()&&!goog.dom.getFirstElementChild(c))&&(e=f.getTextRange(0).getBrowserRangeObject(),f=e.duplicate(),f.moveToElementText(c),f.collapse(!1),f.isEqual(e)&&(f=h.createTextNode(goog.string.Unicode.NBSP),
c.appendChild(f),e.move("character",1),e.move("character",-1),e.select(),d.push(f))),e=h.createDom("div",{style:"height:0"}),goog.dom.appendChild(c,e),d.push(e));return d};goog.editor.plugins.BasicTextFormatter.prototype.cleanUpSafariHeadings_=function(){goog.iter.forEach(this.getRange_(),function(c){"Apple-style-span"==c.className&&(c.style.fontSize="",c.style.fontWeight="")})};
goog.editor.plugins.BasicTextFormatter.prototype.fixSafariLists_=function(){var c=!1;goog.iter.forEach(this.getRange_(),function(d){var e=d.tagName;if(e==goog.dom.TagName.UL||e==goog.dom.TagName.OL)if(c){if(e=goog.dom.getPreviousElementSibling(d)){var f=d.ownerDocument.createRange();f.setStartAfter(e);f.setEndBefore(d);if(goog.string.isEmpty(f.toString())&&e.nodeName==d.nodeName){for(;e.lastChild;)d.insertBefore(e.lastChild,d.firstChild);e.parentNode.removeChild(e)}}}else c=!0})};
goog.editor.plugins.BasicTextFormatter.orderedListTypes_={1:1,a:1,A:1,i:1,I:1};goog.editor.plugins.BasicTextFormatter.unorderedListTypes_={disc:1,circle:1,square:1};
goog.editor.plugins.BasicTextFormatter.prototype.fixIELists_=function(){for(var c=this.getRange_(),c=c&&c.getContainer();c&&c.tagName!=goog.dom.TagName.UL&&c.tagName!=goog.dom.TagName.OL;)c=c.parentNode;c&&(c=c.parentNode);if(c){var d=goog.array.toArray(c.getElementsByTagName(goog.dom.TagName.UL));goog.array.extend(d,goog.array.toArray(c.getElementsByTagName(goog.dom.TagName.OL)));goog.array.forEach(d,function(c){var d=c.type;d&&!(c.tagName==goog.dom.TagName.UL?goog.editor.plugins.BasicTextFormatter.unorderedListTypes_:
goog.editor.plugins.BasicTextFormatter.orderedListTypes_)[d]&&(c.type="")})}};goog.editor.plugins.BasicTextFormatter.brokenExecCommandsSafari_={justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,formatBlock:1};goog.editor.plugins.BasicTextFormatter.hangingExecCommandWebkit_={insertOrderedList:1,insertUnorderedList:1};
goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandSafariFixes_=function(c){var d;goog.editor.plugins.BasicTextFormatter.brokenExecCommandsSafari_[c]&&(d=this.getFieldDomHelper().createDom("div",{style:"height: 0"},"x"),goog.dom.appendChild(this.getFieldObject().getElement(),d));goog.editor.plugins.BasicTextFormatter.hangingExecCommandWebkit_[c]&&(c=this.getFieldObject().getElement(),d=this.getFieldDomHelper().createDom("div",{style:"height: 0"},"x"),c.insertBefore(d,c.firstChild));
return d};goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandGeckoFixes_=function(c){if(goog.userAgent.isVersionOrHigher("1.9")&&"formatblock"==c.toLowerCase()){c=this.getRange_();var d=c.getStartNode();if(c.isCollapsed()&&d&&d.tagName==goog.dom.TagName.BODY){var e=c.getStartOffset();(d=d.childNodes[e])&&d.tagName==goog.dom.TagName.BR&&(c=c.getBrowserRangeObject(),c.setStart(d,0),c.setEnd(d,0))}}};
goog.editor.plugins.BasicTextFormatter.prototype.invalidateInlineCss_=function(){var c=[],d=this.getFieldObject().getRange().getContainerElement();do c.push(d);while(d=d.parentNode);c=goog.iter.chain(goog.iter.toIterator(this.getFieldObject().getRange()),goog.iter.toIterator(c));c=goog.iter.filter(c,goog.editor.style.isContainer);goog.iter.forEach(c,function(c){var d=c.style.outline;c.style.outline="0px solid red";c.style.outline=d})};
goog.editor.plugins.BasicTextFormatter.prototype.beforeInsertListGecko_=function(){var c=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG);if(c==goog.dom.TagName.P||c==goog.dom.TagName.DIV)return!1;c=this.getRange_();if(c.isCollapsed()&&c.getContainer().nodeType!=goog.dom.NodeType.TEXT){var d=this.getFieldDomHelper().createTextNode(goog.string.Unicode.NBSP);c.insertNode(d,!1);goog.dom.Range.createFromNodeContents(d).select();return!0}return!1};
goog.editor.plugins.BasicTextFormatter.getSelectionBlockState_=function(c){var d=null;goog.iter.forEach(c,function(c,f,h){if(!h.isEndTag()){c=goog.editor.style.getContainer(c).tagName;d=d||c;if(d!=c)throw d=null,goog.iter.StopIteration;h.skipTag()}});return d};goog.editor.plugins.BasicTextFormatter.SUPPORTED_JUSTIFICATIONS_={center:1,justify:1,right:1,left:1};
goog.editor.plugins.BasicTextFormatter.prototype.isJustification_=function(c){c=c.replace("+justify","").toLowerCase();"full"==c&&(c="justify");var d=this.getFieldObject().getPluginByClassId("Bidi");if(d)return c==d.getSelectionAlignment();var e=this.getRange_();if(!e)return!1;for(var f=e.getContainerElement(),d=goog.array.filter(f.childNodes,function(c){return goog.editor.node.isImportant(c)&&e.containsNode(c,!0)}),d=d.length?d:[f],f=0;f<d.length;f++){var h=goog.editor.style.getContainer(d[f]);if(c!=
goog.editor.plugins.BasicTextFormatter.getNodeJustification_(h))return!1}return!0};goog.editor.plugins.BasicTextFormatter.getNodeJustification_=function(c){var d=goog.style.getComputedTextAlign(c),d=d.replace(/^-(moz|webkit)-/,"");goog.editor.plugins.BasicTextFormatter.SUPPORTED_JUSTIFICATIONS_[d]||(d=c.align||"left");return d};
goog.editor.plugins.BasicTextFormatter.prototype.isNodeInState_=function(c){var d=this.getRange_(),d=d&&d.getContainerElement();c=goog.dom.getAncestorByTagNameAndClass(d,c);return!!c&&goog.editor.node.isEditable(c)};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandStateInternal_=function(c,d,e){return this.queryCommandHelper_(!0,c,d,e)};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandValueInternal_=function(c,d,e){return this.queryCommandHelper_(!1,c,d,e)};
goog.editor.plugins.BasicTextFormatter.prototype.queryCommandHelper_=function(c,d,e,f){e=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(e);if(f){var h=this.getDocument_();h.execCommand("styleWithCSS",!1,!0)}c=c?d.queryCommandState(e):d.queryCommandValue(e);f&&h.execCommand("styleWithCSS",!1,!1);return c};goog.ui.ToolbarMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarMenuButtonRenderer,goog.ui.MenuButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarMenuButtonRenderer);goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS="goog-toolbar-menu-button";goog.ui.ToolbarMenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS};goog.ui.ToolbarMenuButton=function(c,d,e,f){goog.ui.MenuButton.call(this,c,d,e||goog.ui.ToolbarMenuButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.ToolbarMenuButton,goog.ui.MenuButton);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarMenuButton(null)});goog.ui.ToolbarSeparatorRenderer=function(){goog.ui.MenuSeparatorRenderer.call(this)};goog.inherits(goog.ui.ToolbarSeparatorRenderer,goog.ui.MenuSeparatorRenderer);goog.addSingletonGetter(goog.ui.ToolbarSeparatorRenderer);goog.ui.ToolbarSeparatorRenderer.CSS_CLASS="goog-toolbar-separator";goog.ui.ToolbarSeparatorRenderer.prototype.createDom=function(c){return c.getDomHelper().createDom("div",this.getCssClass()+" "+goog.ui.INLINE_BLOCK_CLASSNAME,"\u00a0")};
goog.ui.ToolbarSeparatorRenderer.prototype.decorate=function(c,d){d=goog.ui.ToolbarSeparatorRenderer.superClass_.decorate.call(this,c,d);goog.dom.classes.add(d,goog.ui.INLINE_BLOCK_CLASSNAME);return d};goog.ui.ToolbarSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarSeparatorRenderer.CSS_CLASS};goog.ui.ToolbarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.ToolbarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.ToolbarRenderer);goog.ui.ToolbarRenderer.CSS_CLASS="goog-toolbar";goog.ui.ToolbarRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.TOOLBAR};
goog.ui.ToolbarRenderer.prototype.getDecoratorForChild=function(c){return"HR"==c.tagName?new goog.ui.Separator(goog.ui.ToolbarSeparatorRenderer.getInstance()):goog.ui.ToolbarRenderer.superClass_.getDecoratorForChild.call(this,c)};goog.ui.ToolbarRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarRenderer.CSS_CLASS};goog.ui.ToolbarRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.HORIZONTAL};goog.ui.Toolbar=function(c,d,e){goog.ui.Container.call(this,d,c||goog.ui.ToolbarRenderer.getInstance(),e)};goog.inherits(goog.ui.Toolbar,goog.ui.Container);goog.ui.SelectionModel=function(c){goog.events.EventTarget.call(this);this.items_=[];this.addItems(c)};goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget);goog.ui.SelectionModel.prototype.selectedItem_=null;goog.ui.SelectionModel.prototype.selectionHandler_=null;goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_};goog.ui.SelectionModel.prototype.setSelectionHandler=function(c){this.selectionHandler_=c};
goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length};goog.ui.SelectionModel.prototype.indexOfItem=function(c){return c?goog.array.indexOf(this.items_,c):-1};goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]};goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]};goog.ui.SelectionModel.prototype.getItemAt=function(c){return this.items_[c]||null};
goog.ui.SelectionModel.prototype.addItems=function(c){c&&(goog.array.forEach(c,function(c){this.selectItem_(c,!1)},this),goog.array.extend(this.items_,c))};goog.ui.SelectionModel.prototype.addItem=function(c){this.addItemAt(c,this.getItemCount())};goog.ui.SelectionModel.prototype.addItemAt=function(c,d){c&&(this.selectItem_(c,!1),goog.array.insertAt(this.items_,c,d))};
goog.ui.SelectionModel.prototype.removeItem=function(c){c&&goog.array.remove(this.items_,c)&&c==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))};goog.ui.SelectionModel.prototype.removeItemAt=function(c){this.removeItem(this.getItemAt(c))};goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_};goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)};
goog.ui.SelectionModel.prototype.setSelectedItem=function(c){c!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=c,this.selectItem_(c,!0));this.dispatchEvent(goog.events.EventType.SELECT)};goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)};goog.ui.SelectionModel.prototype.setSelectedIndex=function(c){this.setSelectedItem(this.getItemAt(c))};
goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_);this.selectedItem_=null};goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this);delete this.items_;this.selectedItem_=null};goog.ui.SelectionModel.prototype.selectItem_=function(c,d){c&&("function"==typeof this.selectionHandler_?this.selectionHandler_(c,d):"function"==typeof c.setSelected&&c.setSelected(d))};goog.ui.Select=function(c,d,e,f){goog.ui.MenuButton.call(this,c,d,e,f);this.setDefaultCaption(c)};goog.inherits(goog.ui.Select,goog.ui.MenuButton);goog.ui.Select.prototype.selectionModel_=null;goog.ui.Select.prototype.defaultCaption_=null;goog.ui.Select.prototype.enterDocument=function(){goog.ui.Select.superClass_.enterDocument.call(this);this.updateCaption();this.listenToSelectionModelEvents_()};
goog.ui.Select.prototype.decorateInternal=function(c){goog.ui.Select.superClass_.decorateInternal.call(this,c);(c=this.getCaption())?this.setDefaultCaption(c):this.setSelectedIndex(0)};goog.ui.Select.prototype.disposeInternal=function(){goog.ui.Select.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.defaultCaption_=null};
goog.ui.Select.prototype.handleMenuAction=function(c){this.setSelectedItem(c.target);goog.ui.Select.superClass_.handleMenuAction.call(this,c);c.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.Select.prototype.handleSelectionChange=function(c){c=this.getSelectedItem();goog.ui.Select.superClass_.setValue.call(this,c&&c.getValue());this.updateCaption()};
goog.ui.Select.prototype.setMenu=function(c){var d=goog.ui.Select.superClass_.setMenu.call(this,c);c!=d&&(this.selectionModel_&&this.selectionModel_.clear(),c&&(this.selectionModel_?c.forEachChild(function(c,d){this.setCorrectAriaRole_(c);this.selectionModel_.addItem(c)},this):this.createSelectionModel_(c)));return d};goog.ui.Select.prototype.getDefaultCaption=function(){return this.defaultCaption_};goog.ui.Select.prototype.setDefaultCaption=function(c){this.defaultCaption_=c;this.updateCaption()};
goog.ui.Select.prototype.addItem=function(c){this.setCorrectAriaRole_(c);goog.ui.Select.superClass_.addItem.call(this,c);this.selectionModel_?this.selectionModel_.addItem(c):this.createSelectionModel_(this.getMenu())};goog.ui.Select.prototype.addItemAt=function(c,d){this.setCorrectAriaRole_(c);goog.ui.Select.superClass_.addItemAt.call(this,c,d);this.selectionModel_?this.selectionModel_.addItemAt(c,d):this.createSelectionModel_(this.getMenu())};
goog.ui.Select.prototype.removeItem=function(c){goog.ui.Select.superClass_.removeItem.call(this,c);this.selectionModel_&&this.selectionModel_.removeItem(c)};goog.ui.Select.prototype.removeItemAt=function(c){goog.ui.Select.superClass_.removeItemAt.call(this,c);this.selectionModel_&&this.selectionModel_.removeItemAt(c)};goog.ui.Select.prototype.setSelectedItem=function(c){if(this.selectionModel_){var d=this.getSelectedItem();this.selectionModel_.setSelectedItem(c);c!=d&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};
goog.ui.Select.prototype.setSelectedIndex=function(c){this.selectionModel_&&this.setSelectedItem(this.selectionModel_.getItemAt(c))};goog.ui.Select.prototype.setValue=function(c){if(goog.isDefAndNotNull(c)&&this.selectionModel_)for(var d=0,e;e=this.selectionModel_.getItemAt(d);d++)if(e&&"function"==typeof e.getValue&&e.getValue()==c){this.setSelectedItem(e);return}this.setSelectedItem(null)};
goog.ui.Select.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Select.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Select.prototype.getSelectionModel=function(){return this.selectionModel_};
goog.ui.Select.prototype.createSelectionModel_=function(c){this.selectionModel_=new goog.ui.SelectionModel;c&&c.forEachChild(function(c,e){this.setCorrectAriaRole_(c);this.selectionModel_.addItem(c)},this);this.listenToSelectionModelEvents_()};goog.ui.Select.prototype.listenToSelectionModelEvents_=function(){this.selectionModel_&&this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)};
goog.ui.Select.prototype.updateCaption=function(){var c=this.getSelectedItem();this.setContent(c?c.getCaption():this.defaultCaption_)};goog.ui.Select.prototype.setCorrectAriaRole_=function(c){c.setPreferredAriaRole(c instanceof goog.ui.MenuItem?goog.a11y.aria.Role.OPTION:goog.a11y.aria.Role.SEPARATOR)};goog.ui.Select.prototype.setOpen=function(c,d){goog.ui.Select.superClass_.setOpen.call(this,c,d);this.isOpen()&&this.getMenu().setHighlightedIndex(this.getSelectedIndex())};
goog.ui.registry.setDecoratorByClassName("goog-select",function(){return new goog.ui.Select(null)});goog.ui.ToolbarSelect=function(c,d,e,f){goog.ui.Select.call(this,c,d,e||goog.ui.ToolbarMenuButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.ToolbarSelect,goog.ui.Select);goog.ui.registry.setDecoratorByClassName("goog-toolbar-select",function(){return new goog.ui.ToolbarSelect(null)});goog.dom.NodeIterator=function(c,d,e,f){goog.dom.TagIterator.call(this,c,d,e,null,f)};goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator);goog.dom.NodeIterator.prototype.next=function(){do goog.dom.NodeIterator.superClass_.next.call(this);while(this.isEndTag());return this.node};goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.PaletteRenderer);goog.ui.PaletteRenderer.cellId_=0;goog.ui.PaletteRenderer.CSS_CLASS="goog-palette";
goog.ui.PaletteRenderer.prototype.createDom=function(c){var d=this.getClassNames(c);c=c.getDomHelper().createDom(goog.dom.TagName.DIV,d?d.join(" "):null,this.createGrid(c.getContent(),c.getSize(),c.getDomHelper()));goog.a11y.aria.setRole(c,goog.a11y.aria.Role.GRID);return c};
goog.ui.PaletteRenderer.prototype.createGrid=function(c,d,e){for(var f=[],h=0,k=0;h<d.height;h++){for(var l=[],m=0;m<d.width;m++){var n=c&&c[k++];l.push(this.createCell(n,e))}f.push(this.createRow(l,e))}return this.createTable(f,e)};goog.ui.PaletteRenderer.prototype.createTable=function(c,d){var e=d.createDom(goog.dom.TagName.TABLE,this.getCssClass()+"-table",d.createDom(goog.dom.TagName.TBODY,this.getCssClass()+"-body",c));e.cellSpacing=0;e.cellPadding=0;return e};
goog.ui.PaletteRenderer.prototype.createRow=function(c,d){var e=d.createDom(goog.dom.TagName.TR,this.getCssClass()+"-row",c);goog.a11y.aria.setRole(e,goog.a11y.aria.Role.ROW);return e};
goog.ui.PaletteRenderer.prototype.createCell=function(c,d){var e=d.createDom(goog.dom.TagName.TD,{"class":this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},c);goog.a11y.aria.setRole(e,goog.a11y.aria.Role.GRIDCELL);if(!goog.dom.getTextContent(e)&&!goog.a11y.aria.getLabel(e)){var f=this.findAriaLabelForCell_(e);f&&goog.a11y.aria.setLabel(e,f)}return e};
goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_=function(c){c=new goog.dom.NodeIterator(c);for(var d="",e;!d&&(e=goog.iter.nextOrValue(c,null));)e.nodeType==goog.dom.NodeType.ELEMENT&&(d=goog.a11y.aria.getLabel(e)||e.title);return d};goog.ui.PaletteRenderer.prototype.canDecorate=function(c){return!1};goog.ui.PaletteRenderer.prototype.decorate=function(c,d){return null};
goog.ui.PaletteRenderer.prototype.setContent=function(c,d){if(c){var e=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.TBODY,this.getCssClass()+"-body",c)[0];if(e){var f=0;goog.array.forEach(e.rows,function(c){goog.array.forEach(c.cells,function(c){goog.dom.removeChildren(c);if(d){var e=d[f++];e&&goog.dom.appendChild(c,e)}})});if(f<d.length){for(var h=[],k=goog.dom.getDomHelper(c),l=e.rows[0].cells.length;f<d.length;){var m=d[f++];h.push(this.createCell(m,k));h.length==l&&(m=this.createRow(h,
k),goog.dom.appendChild(e,m),h.length=0)}if(0<h.length){for(;h.length<l;)h.push(this.createCell("",k));m=this.createRow(h,k);goog.dom.appendChild(e,m)}}}goog.style.setUnselectable(c,!0,goog.userAgent.GECKO)}};goog.ui.PaletteRenderer.prototype.getContainingItem=function(c,d){for(var e=c.getElement();d&&d.nodeType==goog.dom.NodeType.ELEMENT&&d!=e;){if(d.tagName==goog.dom.TagName.TD&&goog.dom.classes.has(d,this.getCssClass()+"-cell"))return d.firstChild;d=d.parentNode}return null};
goog.ui.PaletteRenderer.prototype.highlightCell=function(c,d,e){d&&(d=this.getCellForItem(d),goog.dom.classes.enable(d,this.getCssClass()+"-cell-hover",e),goog.a11y.aria.setState(c.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT,d.id))};goog.ui.PaletteRenderer.prototype.getCellForItem=function(c){return c?c.parentNode:null};goog.ui.PaletteRenderer.prototype.selectCell=function(c,d,e){d&&goog.dom.classes.enable(d.parentNode,this.getCssClass()+"-cell-selected",e)};
goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS};goog.ui.Palette=function(c,d,e){goog.ui.Control.call(this,c,d||goog.ui.PaletteRenderer.getInstance(),e);this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1);this.currentCellControl_=new goog.ui.Palette.CurrentCell_;this.currentCellControl_.setParentEventTarget(this)};goog.inherits(goog.ui.Palette,goog.ui.Control);goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")};goog.ui.Palette.prototype.size_=null;
goog.ui.Palette.prototype.highlightedIndex_=-1;goog.ui.Palette.prototype.selectionModel_=null;goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.size_=null;this.currentCellControl_.dispose()};
goog.ui.Palette.prototype.setContentInternal=function(c){goog.ui.Palette.superClass_.setContentInternal.call(this,c);this.adjustSize_();this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(c)):(this.selectionModel_=new goog.ui.SelectionModel(c),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange));this.highlightedIndex_=-1};
goog.ui.Palette.prototype.getCaption=function(){return""};goog.ui.Palette.prototype.setCaption=function(c){};goog.ui.Palette.prototype.handleMouseOver=function(c){goog.ui.Palette.superClass_.handleMouseOver.call(this,c);var d=this.getRenderer().getContainingItem(this,c.target);d&&c.relatedTarget&&goog.dom.contains(d,c.relatedTarget)||d!=this.getHighlightedItem()&&this.setHighlightedItem(d)};
goog.ui.Palette.prototype.handleMouseOut=function(c){goog.ui.Palette.superClass_.handleMouseOut.call(this,c);var d=this.getRenderer().getContainingItem(this,c.target);d&&c.relatedTarget&&goog.dom.contains(d,c.relatedTarget)||d==this.getHighlightedItem()&&this.setHighlightedItem(null)};goog.ui.Palette.prototype.handleMouseDown=function(c){goog.ui.Palette.superClass_.handleMouseDown.call(this,c);this.isActive()&&(c=this.getRenderer().getContainingItem(this,c.target),c!=this.getHighlightedItem()&&this.setHighlightedItem(c))};
goog.ui.Palette.prototype.performActionInternal=function(c){var d=this.getHighlightedItem();return d?(this.setSelectedItem(d),goog.ui.Palette.superClass_.performActionInternal.call(this,c)):!1};
goog.ui.Palette.prototype.handleKeyEvent=function(c){var d=this.getContent(),d=d?d.length:0,e=this.size_.width;if(0==d||!this.isEnabled())return!1;if(c.keyCode==goog.events.KeyCodes.ENTER||c.keyCode==goog.events.KeyCodes.SPACE)return this.performActionInternal(c);if(c.keyCode==goog.events.KeyCodes.HOME)return this.setHighlightedIndex(0),!0;if(c.keyCode==goog.events.KeyCodes.END)return this.setHighlightedIndex(d-1),!0;var f=0>this.highlightedIndex_?this.getSelectedIndex():this.highlightedIndex_;switch(c.keyCode){case goog.events.KeyCodes.LEFT:-1==
f&&(f=d);if(0<f)return this.setHighlightedIndex(f-1),c.preventDefault(),!0;break;case goog.events.KeyCodes.RIGHT:if(f<d-1)return this.setHighlightedIndex(f+1),c.preventDefault(),!0;break;case goog.events.KeyCodes.UP:-1==f&&(f=d+e-1);if(f>=e)return this.setHighlightedIndex(f-e),c.preventDefault(),!0;break;case goog.events.KeyCodes.DOWN:if(-1==f&&(f=-e),f<d-e)return this.setHighlightedIndex(f+e),c.preventDefault(),!0}return!1};goog.ui.Palette.prototype.handleSelectionChange=function(c){};
goog.ui.Palette.prototype.getSize=function(){return this.size_};goog.ui.Palette.prototype.setSize=function(c,d){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.size_=goog.isNumber(c)?new goog.math.Size(c,d):c;this.adjustSize_()};goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};goog.ui.Palette.prototype.getHighlightedItem=function(){var c=this.getContent();return c&&c[this.highlightedIndex_]};
goog.ui.Palette.prototype.getHighlightedCellElement_=function(){return this.getRenderer().getCellForItem(this.getHighlightedItem())};goog.ui.Palette.prototype.setHighlightedIndex=function(c){c!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.highlightedIndex_=c,this.highlightIndex_(c,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))};
goog.ui.Palette.prototype.setHighlightedItem=function(c){var d=this.getContent();this.setHighlightedIndex(d?goog.array.indexOf(d,c):-1)};goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Palette.prototype.setSelectedIndex=function(c){this.selectionModel_&&this.selectionModel_.setSelectedIndex(c)};
goog.ui.Palette.prototype.setSelectedItem=function(c){this.selectionModel_&&this.selectionModel_.setSelectedItem(c)};goog.ui.Palette.prototype.highlightIndex_=function(c,d){if(this.getElement()){var e=this.getContent();if(e&&0<=c&&c<e.length){var f=this.getHighlightedCellElement_();this.currentCellControl_.getElement()!=f&&this.currentCellControl_.setElementInternal(f);this.currentCellControl_.tryHighlight(d)&&this.getRenderer().highlightCell(this,e[c],d)}}};
goog.ui.Palette.prototype.selectItem_=function(c,d){this.getElement()&&this.getRenderer().selectCell(this,c,d)};goog.ui.Palette.prototype.adjustSize_=function(){var c=this.getContent();if(c)if(this.size_&&this.size_.width){if(c=Math.ceil(c.length/this.size_.width),!goog.isNumber(this.size_.height)||this.size_.height<c)this.size_.height=c}else c=Math.ceil(Math.sqrt(c.length)),this.size_=new goog.math.Size(c,c);else this.size_=new goog.math.Size(0,0)};
goog.ui.Palette.CurrentCell_=function(){goog.ui.Control.call(this,null);this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0)};goog.inherits(goog.ui.Palette.CurrentCell_,goog.ui.Control);goog.ui.Palette.CurrentCell_.prototype.tryHighlight=function(c){this.setHighlighted(c);return this.isHighlighted()==c};goog.ui.ColorPalette=function(c,d,e){this.colors_=c||[];goog.ui.Palette.call(this,null,d||goog.ui.PaletteRenderer.getInstance(),e);this.setColors(this.colors_)};goog.inherits(goog.ui.ColorPalette,goog.ui.Palette);goog.ui.ColorPalette.prototype.normalizedColors_=null;goog.ui.ColorPalette.prototype.labels_=null;goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_};
goog.ui.ColorPalette.prototype.setColors=function(c,d){this.colors_=c;this.labels_=d||null;this.normalizedColors_=null;this.setContent(this.createColorNodes())};goog.ui.ColorPalette.prototype.getSelectedColor=function(){var c=this.getSelectedItem();return c?(c=goog.style.getStyle(c,"background-color"),goog.ui.ColorPalette.parseColor_(c)):null};
goog.ui.ColorPalette.prototype.setSelectedColor=function(c){c=goog.ui.ColorPalette.parseColor_(c);this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(c){return goog.ui.ColorPalette.parseColor_(c)}));this.setSelectedIndex(c?goog.array.indexOf(this.normalizedColors_,c):-1)};
goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(c,d){var e=this.getDomHelper().createDom("div",{"class":this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+c});e.title=this.labels_&&this.labels_[d]?this.labels_[d]:"#"==c.charAt(0)?"RGB ("+goog.color.hexToRgb(c).join(", ")+")":c;return e},this)};goog.ui.ColorPalette.parseColor_=function(c){if(c)try{return goog.color.parse(c).hex}catch(d){}return null};goog.ui.ColorMenuButton=function(c,d,e,f){goog.ui.MenuButton.call(this,c,d,e||goog.ui.ColorMenuButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.ColorMenuButton,goog.ui.MenuButton);goog.ui.ColorMenuButton.PALETTES={GRAYSCALE:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),SOLID:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),PASTEL:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};
goog.ui.ColorMenuButton.NO_COLOR="none";goog.ui.ColorMenuButton.newColorMenu=function(c,d){var e=new goog.ui.Menu(d);c&&goog.array.forEach(c,function(c){e.addChild(c,!0)});goog.object.forEach(goog.ui.ColorMenuButton.PALETTES,function(c){c=new goog.ui.ColorPalette(c,null,d);c.setSize(8);e.addChild(c,!0)});return e};goog.ui.ColorMenuButton.prototype.getSelectedColor=function(){return this.getValue()};goog.ui.ColorMenuButton.prototype.setSelectedColor=function(c){this.setValue(c)};
goog.ui.ColorMenuButton.prototype.setValue=function(c){for(var d=0,e;e=this.getItemAt(d);d++)"function"==typeof e.setSelectedColor&&e.setSelectedColor(c);goog.ui.ColorMenuButton.superClass_.setValue.call(this,c)};
goog.ui.ColorMenuButton.prototype.handleMenuAction=function(c){"function"==typeof c.target.getSelectedColor?this.setValue(c.target.getSelectedColor()):c.target.getValue()==goog.ui.ColorMenuButton.NO_COLOR&&this.setValue(null);goog.ui.ColorMenuButton.superClass_.handleMenuAction.call(this,c);c.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.ColorMenuButton.prototype.setOpen=function(c,d){c&&0==this.getItemCount()&&(this.setMenu(goog.ui.ColorMenuButton.newColorMenu(null,this.getDomHelper())),this.setValue(this.getValue()));goog.ui.ColorMenuButton.superClass_.setOpen.call(this,c,d)};goog.ui.registry.setDecoratorByClassName(goog.ui.ColorMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ColorMenuButton(null)});goog.ui.ToolbarColorMenuButtonRenderer=function(){goog.ui.ToolbarMenuButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarColorMenuButtonRenderer,goog.ui.ToolbarMenuButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarColorMenuButtonRenderer);goog.ui.ToolbarColorMenuButtonRenderer.prototype.createCaption=function(c,d){return goog.ui.MenuButtonRenderer.wrapCaption(goog.ui.ColorMenuButtonRenderer.wrapCaption(c,d),this.getCssClass(),d)};
goog.ui.ToolbarColorMenuButtonRenderer.prototype.setValue=function(c,d){c&&goog.ui.ColorMenuButtonRenderer.setCaptionValue(this.getContentElement(c),d)};goog.ui.ToolbarColorMenuButtonRenderer.prototype.initializeDom=function(c){this.setValue(c.getElement(),c.getValue());goog.dom.classes.add(c.getElement(),"goog-toolbar-color-menu-button");goog.ui.ToolbarColorMenuButtonRenderer.superClass_.initializeDom.call(this,c)};goog.ui.ToolbarColorMenuButton=function(c,d,e,f){goog.ui.ColorMenuButton.call(this,c,d,e||goog.ui.ToolbarColorMenuButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.ToolbarColorMenuButton,goog.ui.ColorMenuButton);goog.ui.registry.setDecoratorByClassName("goog-toolbar-color-menu-button",function(){return new goog.ui.ToolbarColorMenuButton(null)});goog.ui.ToolbarButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarButtonRenderer);goog.ui.ToolbarButtonRenderer.CSS_CLASS="goog-toolbar-button";goog.ui.ToolbarButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarButtonRenderer.CSS_CLASS};goog.ui.ToolbarButton=function(c,d,e){goog.ui.Button.call(this,c,d||goog.ui.ToolbarButtonRenderer.getInstance(),e)};goog.inherits(goog.ui.ToolbarButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarButton(null)});goog.ui.Option=function(c,d,e){goog.ui.MenuItem.call(this,c,d,e);this.setSelectable(!0)};goog.inherits(goog.ui.Option,goog.ui.MenuItem);goog.ui.Option.prototype.performActionInternal=function(c){return this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.registry.setDecoratorByClassName("goog-option",function(){return new goog.ui.Option(null)});goog.ui.editor.ToolbarFactory={};goog.ui.editor.ToolbarFactory.getPrimaryFont=function(c){var d=c.indexOf(",");c=(-1!=d?c.substring(0,d):c).toLowerCase();return goog.string.stripQuotes(c,"\"'")};goog.ui.editor.ToolbarFactory.addFonts=function(c,d){goog.array.forEach(d,function(d){goog.ui.editor.ToolbarFactory.addFont(c,d.caption,d.value)})};
goog.ui.editor.ToolbarFactory.addFont=function(c,d,e){var f=goog.ui.editor.ToolbarFactory.getPrimaryFont(e);d=new goog.ui.Option(d,e,c.getDomHelper());d.setId(f);c.addItem(d);d.getContentElement().style.fontFamily=e};goog.ui.editor.ToolbarFactory.addFontSizes=function(c,d){goog.array.forEach(d,function(d){goog.ui.editor.ToolbarFactory.addFontSize(c,d.caption,d.value)})};
goog.ui.editor.ToolbarFactory.addFontSize=function(c,d,e){d=new goog.ui.Option(d,e,c.getDomHelper());c.addItem(d);c=d.getContentElement();c.style.fontSize=goog.ui.editor.ToolbarFactory.getPxFromLegacySize(e)+"px";c.firstChild.style.height="1.1em"};goog.ui.editor.ToolbarFactory.getPxFromLegacySize=function(c){return goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_[c]||10};
goog.ui.editor.ToolbarFactory.getLegacySizeFromPx=function(c){return goog.array.lastIndexOf(goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_,c)};goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_=[10,10,13,16,18,24,32,48];goog.ui.editor.ToolbarFactory.addFormatOptions=function(c,d){goog.array.forEach(d,function(d){goog.ui.editor.ToolbarFactory.addFormatOption(c,d.caption,d.command)})};
goog.ui.editor.ToolbarFactory.addFormatOption=function(c,d,e){var f=c.getDomHelper();d=new goog.ui.Option(f.createDom(goog.dom.TagName.DIV,null,d),e,f);d.setId(e);c.addItem(d)};
goog.ui.editor.ToolbarFactory.makeToolbar=function(c,d,e){var f=goog.dom.getDomHelper(d),f=new goog.ui.Toolbar(goog.ui.ToolbarRenderer.getInstance(),goog.ui.Container.Orientation.HORIZONTAL,f);e=e||goog.style.isRightToLeft(d);f.setRightToLeft(e);f.setFocusable(!1);for(var h=0,k;k=c[h];h++)k.setSupportedState(goog.ui.Component.State.FOCUSED,!1),k.setRightToLeft(e),f.addChild(k,!0);f.render(d);return f};
goog.ui.editor.ToolbarFactory.makeButton=function(c,d,e,f,h,k){e=new goog.ui.ToolbarButton(goog.ui.editor.ToolbarFactory.createContent_(e,f,k),h,k);e.setId(c);e.setTooltip(d);return e};goog.ui.editor.ToolbarFactory.makeToggleButton=function(c,d,e,f,h,k){c=goog.ui.editor.ToolbarFactory.makeButton(c,d,e,f,h,k);c.setSupportedState(goog.ui.Component.State.CHECKED,!0);return c};
goog.ui.editor.ToolbarFactory.makeMenuButton=function(c,d,e,f,h,k){e=new goog.ui.ToolbarMenuButton(goog.ui.editor.ToolbarFactory.createContent_(e,f,k),null,h,k);e.setId(c);e.setTooltip(d);return e};goog.ui.editor.ToolbarFactory.makeSelectButton=function(c,d,e,f,h,k){h=new goog.ui.ToolbarSelect(null,null,h,k);f&&goog.array.forEach(f.split(/\s+/),h.addClassName,h);h.addClassName("goog-toolbar-select");h.setDefaultCaption(e);h.setId(c);h.setTooltip(d);return h};
goog.ui.editor.ToolbarFactory.makeColorMenuButton=function(c,d,e,f,h,k){e=new goog.ui.ToolbarColorMenuButton(goog.ui.editor.ToolbarFactory.createContent_(e,f,k),null,h,k);e.setId(c);e.setTooltip(d);return e};goog.ui.editor.ToolbarFactory.createContent_=function(c,d,e){c&&""!=c||(!goog.userAgent.GECKO||goog.userAgent.isVersionOrHigher("1.9a"))||(c=goog.string.Unicode.NBSP);return(e||goog.dom.getDomHelper()).createDom(goog.dom.TagName.DIV,d?{"class":d}:null,c)};goog.ui.editor.DefaultToolbar={};goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL=goog.getMsg("Normal");goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL_SERIF=goog.getMsg("Normal / serif");
goog.ui.editor.DefaultToolbar.FONTS_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL,value:"arial,sans-serif"},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL_SERIF,value:"times new roman,serif"},{caption:"Courier New",value:"courier new,monospace"},{caption:"Georgia",value:"georgia,serif"},{caption:"Trebuchet",value:"trebuchet ms,sans-serif"},{caption:"Verdana",value:"verdana,sans-serif"}];
goog.ui.editor.DefaultToolbar.I18N_FONTS_={ja:[{caption:"\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af",value:"ms pgothic,sans-serif"},{caption:"\uff2d\uff33 \uff30\u660e\u671d",value:"ms pmincho,serif"},{caption:"\uff2d\uff33 \u30b4\u30b7\u30c3\u30af",value:"ms gothic,monospace"}],ko:[{caption:"\uad74\ub9bc",value:"gulim,sans-serif"},{caption:"\ubc14\ud0d5",value:"batang,serif"},{caption:"\uad74\ub9bc\uccb4",value:"gulimche,monospace"}],"zh-tw":[{caption:"\u65b0\u7d30\u660e\u9ad4",value:"pmingliu,serif"},
{caption:"\u7d30\u660e\u9ad4",value:"mingliu,serif"}],"zh-cn":[{caption:"\u5b8b\u4f53",value:"simsun,serif"},{caption:"\u9ed1\u4f53",value:"simhei,sans-serif"},{caption:"MS Song",value:"ms song,monospace"}]};goog.ui.editor.DefaultToolbar.locale_="en-us";goog.ui.editor.DefaultToolbar.setLocale=function(c){goog.ui.editor.DefaultToolbar.locale_=c};
goog.ui.editor.DefaultToolbar.addDefaultFonts=function(c){var d=goog.ui.editor.DefaultToolbar.locale_.replace(/_/,"-").toLowerCase(),e=[];d in goog.ui.editor.DefaultToolbar.I18N_FONTS_&&(e=goog.ui.editor.DefaultToolbar.I18N_FONTS_[d]);e.length&&goog.ui.editor.ToolbarFactory.addFonts(c,e);goog.ui.editor.ToolbarFactory.addFonts(c,goog.ui.editor.DefaultToolbar.FONTS_)};goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_SMALL=goog.getMsg("Small");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL=goog.getMsg("Normal");
goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_LARGE=goog.getMsg("Large");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_HUGE=goog.getMsg("Huge");goog.ui.editor.DefaultToolbar.FONT_SIZES_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_SMALL,value:1},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL,value:2},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_LARGE,value:4},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_HUGE,value:6}];
goog.ui.editor.DefaultToolbar.addDefaultFontSizes=function(c){goog.ui.editor.ToolbarFactory.addFontSizes(c,goog.ui.editor.DefaultToolbar.FONT_SIZES_)};goog.ui.editor.DefaultToolbar.MSG_FORMAT_HEADING=goog.getMsg("Heading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_SUBHEADING=goog.getMsg("Subheading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_MINOR_HEADING=goog.getMsg("Minor heading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL=goog.getMsg("Normal");
goog.ui.editor.DefaultToolbar.FORMAT_OPTIONS_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_HEADING,command:goog.dom.TagName.H2},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_SUBHEADING,command:goog.dom.TagName.H3},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_MINOR_HEADING,command:goog.dom.TagName.H4},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL,command:goog.dom.TagName.P}];
goog.ui.editor.DefaultToolbar.addDefaultFormatOptions=function(c){goog.ui.editor.ToolbarFactory.addFormatOptions(c,goog.ui.editor.DefaultToolbar.FORMAT_OPTIONS_)};goog.ui.editor.DefaultToolbar.makeDefaultToolbar=function(c,d){var e=d||goog.style.isRightToLeft(c)?goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS_RTL:goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS;return goog.ui.editor.DefaultToolbar.makeToolbar(e,c,d)};
goog.ui.editor.DefaultToolbar.makeToolbar=function(c,d,e){for(var f=goog.dom.getDomHelper(d),h=[],k=0,l;l=c[k];k++)goog.isString(l)&&(l=goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton(l,f)),l&&h.push(l);return goog.ui.editor.ToolbarFactory.makeToolbar(h,d,e)};
goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton=function(c,d){var e,f=goog.ui.editor.DefaultToolbar.buttons_[c];if(f){e=f.factory||goog.ui.editor.ToolbarFactory.makeToggleButton;var h=f.command,k=f.tooltip,l=f.caption,m=f.classes,n=d||goog.dom.getDomHelper();e=e(h,k,l,m,null,n);f.queryable&&(e.queryable=!0)}return e};
goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS=[goog.editor.Command.IMAGE,goog.editor.Command.LINK,goog.editor.Command.BOLD,goog.editor.Command.ITALIC,goog.editor.Command.UNORDERED_LIST,goog.editor.Command.FONT_COLOR,goog.editor.Command.FONT_FACE,goog.editor.Command.FONT_SIZE,goog.editor.Command.JUSTIFY_LEFT,goog.editor.Command.JUSTIFY_CENTER,goog.editor.Command.JUSTIFY_RIGHT,goog.editor.Command.EDIT_HTML];
goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS_RTL=[goog.editor.Command.IMAGE,goog.editor.Command.LINK,goog.editor.Command.BOLD,goog.editor.Command.ITALIC,goog.editor.Command.UNORDERED_LIST,goog.editor.Command.FONT_COLOR,goog.editor.Command.FONT_FACE,goog.editor.Command.FONT_SIZE,goog.editor.Command.JUSTIFY_RIGHT,goog.editor.Command.JUSTIFY_CENTER,goog.editor.Command.JUSTIFY_LEFT,goog.editor.Command.DIR_RTL,goog.editor.Command.DIR_LTR,goog.editor.Command.EDIT_HTML];
goog.ui.editor.DefaultToolbar.rtlButtonFactory_=function(c,d,e,f,h,k){var l=goog.ui.editor.ToolbarFactory.makeToggleButton(c,d,e,f,h,k);l.updateFromValue=function(c){c=!!c;goog.dom.classes.enable(l.getParent().getElement(),"tr-rtl-mode",c);l.setChecked(c)};return l};goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_=function(c,d,e,f,h,k){var l=goog.ui.editor.ToolbarFactory.makeButton(c,d,e,f,h,k);l.updateFromValue=function(c){l.setEnabled(c)};return l};
goog.ui.editor.DefaultToolbar.fontFaceFactory_=function(c,d,e,f,h,k){var l=goog.ui.editor.ToolbarFactory.makeSelectButton(c,d,e,f,h,k);goog.ui.editor.DefaultToolbar.addDefaultFonts(l);l.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL);goog.dom.classes.add(l.getMenu().getContentElement(),"goog-menu-noaccel");l.updateFromValue=function(c){var d=null;c&&0<c.length&&(d=l.getMenu().getChild(goog.ui.editor.ToolbarFactory.getPrimaryFont(c)));c=l.getSelectedItem();d!=c&&l.setSelectedItem(d)};
return l};
goog.ui.editor.DefaultToolbar.fontSizeFactory_=function(c,d,e,f,h,k){var l=goog.ui.editor.ToolbarFactory.makeSelectButton(c,d,e,f,h,k);goog.ui.editor.DefaultToolbar.addDefaultFontSizes(l);l.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL);goog.dom.classes.add(l.getMenu().getContentElement(),"goog-menu-noaccel");l.updateFromValue=function(c){goog.isString(c)&&"px"==goog.style.getLengthUnits(c)&&(c=goog.ui.editor.ToolbarFactory.getLegacySizeFromPx(parseInt(c,10)));c=0<c?c:null;
c!=l.getValue()&&l.setValue(c)};return l};goog.ui.editor.DefaultToolbar.colorUpdateFromValue_=function(c,d){var e=d;try{if(goog.userAgent.IE)var f="000000"+e.toString(16),h=f.substr(f.length-6,6),e="#"+h.substring(4,6)+h.substring(2,4)+h.substring(0,2);e!=c.getValue()&&c.setValue(e)}catch(k){}};
goog.ui.editor.DefaultToolbar.fontColorFactory_=function(c,d,e,f,h,k){c=goog.ui.editor.ToolbarFactory.makeColorMenuButton(c,d,e,f,h,k);c.setSelectedColor("#000");c.updateFromValue=goog.partial(goog.ui.editor.DefaultToolbar.colorUpdateFromValue_,c);return c};
goog.ui.editor.DefaultToolbar.backgroundColorFactory_=function(c,d,e,f,h,k){c=goog.ui.editor.ToolbarFactory.makeColorMenuButton(c,d,e,f,h,k);c.setSelectedColor("#FFF");c.updateFromValue=goog.partial(goog.ui.editor.DefaultToolbar.colorUpdateFromValue_,c);return c};
goog.ui.editor.DefaultToolbar.formatBlockFactory_=function(c,d,e,f,h,k){var l=goog.ui.editor.ToolbarFactory.makeSelectButton(c,d,e,f,h,k);goog.ui.editor.DefaultToolbar.addDefaultFormatOptions(l);l.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL);goog.dom.classes.add(l.getMenu().getContentElement(),"goog-menu-noaccel");l.updateFromValue=function(c){c=c&&0<c.length?c:null;c!=l.getValue()&&l.setValue(c)};return l};goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_TITLE=goog.getMsg("Format");
goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_CAPTION=goog.getMsg("Format");goog.ui.editor.DefaultToolbar.MSG_UNDO_TITLE=goog.getMsg("Undo");goog.ui.editor.DefaultToolbar.MSG_REDO_TITLE=goog.getMsg("Redo");goog.ui.editor.DefaultToolbar.MSG_FONT_FACE_TITLE=goog.getMsg("Font");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_TITLE=goog.getMsg("Font size");goog.ui.editor.DefaultToolbar.MSG_FONT_COLOR_TITLE=goog.getMsg("Text color");goog.ui.editor.DefaultToolbar.MSG_BOLD_TITLE=goog.getMsg("Bold");
goog.ui.editor.DefaultToolbar.MSG_ITALIC_TITLE=goog.getMsg("Italic");goog.ui.editor.DefaultToolbar.MSG_UNDERLINE_TITLE=goog.getMsg("Underline");goog.ui.editor.DefaultToolbar.MSG_BACKGROUND_COLOR_TITLE=goog.getMsg("Text background color");goog.ui.editor.DefaultToolbar.MSG_LINK_TITLE=goog.getMsg("Add or remove link");goog.ui.editor.DefaultToolbar.MSG_ORDERED_LIST_TITLE=goog.getMsg("Numbered list");goog.ui.editor.DefaultToolbar.MSG_UNORDERED_LIST_TITLE=goog.getMsg("Bullet list");
goog.ui.editor.DefaultToolbar.MSG_OUTDENT_TITLE=goog.getMsg("Decrease indent");goog.ui.editor.DefaultToolbar.MSG_INDENT_TITLE=goog.getMsg("Increase indent");goog.ui.editor.DefaultToolbar.MSG_ALIGN_LEFT_TITLE=goog.getMsg("Align left");goog.ui.editor.DefaultToolbar.MSG_ALIGN_CENTER_TITLE=goog.getMsg("Align center");goog.ui.editor.DefaultToolbar.MSG_ALIGN_RIGHT_TITLE=goog.getMsg("Align right");goog.ui.editor.DefaultToolbar.MSG_JUSTIFY_TITLE=goog.getMsg("Justify");
goog.ui.editor.DefaultToolbar.MSG_REMOVE_FORMAT_TITLE=goog.getMsg("Remove formatting");goog.ui.editor.DefaultToolbar.MSG_IMAGE_TITLE=goog.getMsg("Insert image");goog.ui.editor.DefaultToolbar.MSG_STRIKE_THROUGH_TITLE=goog.getMsg("Strikethrough");goog.ui.editor.DefaultToolbar.MSG_DIR_LTR_TITLE=goog.getMsg("Left-to-right");goog.ui.editor.DefaultToolbar.MSG_DIR_RTL_TITLE=goog.getMsg("Right-to-left");goog.ui.editor.DefaultToolbar.MSG_BLOCKQUOTE_TITLE=goog.getMsg("Quote");
goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_TITLE=goog.getMsg("Edit HTML source");goog.ui.editor.DefaultToolbar.MSG_SUBSCRIPT=goog.getMsg("Subscript");goog.ui.editor.DefaultToolbar.MSG_SUPERSCRIPT=goog.getMsg("Superscript");goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_CAPTION=goog.getMsg("Edit HTML");goog.ui.editor.DefaultToolbar.buttons_={};
goog.ui.editor.DefaultToolbar.BUTTONS_=[{command:goog.editor.Command.UNDO,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNDO_TITLE,classes:"tr-icon tr-undo",factory:goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_,queryable:!0},{command:goog.editor.Command.REDO,tooltip:goog.ui.editor.DefaultToolbar.MSG_REDO_TITLE,classes:"tr-icon tr-redo",factory:goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_,queryable:!0},{command:goog.editor.Command.FONT_FACE,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_FACE_TITLE,
classes:"tr-fontName",factory:goog.ui.editor.DefaultToolbar.fontFaceFactory_,queryable:!0},{command:goog.editor.Command.FONT_SIZE,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_TITLE,classes:"tr-fontSize",factory:goog.ui.editor.DefaultToolbar.fontSizeFactory_,queryable:!0},{command:goog.editor.Command.BOLD,tooltip:goog.ui.editor.DefaultToolbar.MSG_BOLD_TITLE,classes:"tr-icon tr-bold",queryable:!0},{command:goog.editor.Command.ITALIC,tooltip:goog.ui.editor.DefaultToolbar.MSG_ITALIC_TITLE,classes:"tr-icon tr-italic",
queryable:!0},{command:goog.editor.Command.UNDERLINE,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNDERLINE_TITLE,classes:"tr-icon tr-underline",queryable:!0},{command:goog.editor.Command.FONT_COLOR,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_COLOR_TITLE,classes:"tr-icon tr-foreColor",factory:goog.ui.editor.DefaultToolbar.fontColorFactory_,queryable:!0},{command:goog.editor.Command.BACKGROUND_COLOR,tooltip:goog.ui.editor.DefaultToolbar.MSG_BACKGROUND_COLOR_TITLE,classes:"tr-icon tr-backColor",factory:goog.ui.editor.DefaultToolbar.backgroundColorFactory_,
queryable:!0},{command:goog.editor.Command.LINK,tooltip:goog.ui.editor.DefaultToolbar.MSG_LINK_TITLE,caption:goog.ui.editor.messages.MSG_LINK_CAPTION,classes:"tr-link",queryable:!0},{command:goog.editor.Command.ORDERED_LIST,tooltip:goog.ui.editor.DefaultToolbar.MSG_ORDERED_LIST_TITLE,classes:"tr-icon tr-insertOrderedList",queryable:!0},{command:goog.editor.Command.UNORDERED_LIST,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNORDERED_LIST_TITLE,classes:"tr-icon tr-insertUnorderedList",queryable:!0},{command:goog.editor.Command.OUTDENT,
tooltip:goog.ui.editor.DefaultToolbar.MSG_OUTDENT_TITLE,classes:"tr-icon tr-outdent",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.INDENT,tooltip:goog.ui.editor.DefaultToolbar.MSG_INDENT_TITLE,classes:"tr-icon tr-indent",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.JUSTIFY_LEFT,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_LEFT_TITLE,classes:"tr-icon tr-justifyLeft",queryable:!0},{command:goog.editor.Command.JUSTIFY_CENTER,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_CENTER_TITLE,
classes:"tr-icon tr-justifyCenter",queryable:!0},{command:goog.editor.Command.JUSTIFY_RIGHT,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_RIGHT_TITLE,classes:"tr-icon tr-justifyRight",queryable:!0},{command:goog.editor.Command.JUSTIFY_FULL,tooltip:goog.ui.editor.DefaultToolbar.MSG_JUSTIFY_TITLE,classes:"tr-icon tr-justifyFull",queryable:!0},{command:goog.editor.Command.REMOVE_FORMAT,tooltip:goog.ui.editor.DefaultToolbar.MSG_REMOVE_FORMAT_TITLE,classes:"tr-icon tr-removeFormat",factory:goog.ui.editor.ToolbarFactory.makeButton},
{command:goog.editor.Command.IMAGE,tooltip:goog.ui.editor.DefaultToolbar.MSG_IMAGE_TITLE,classes:"tr-icon tr-image",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.STRIKE_THROUGH,tooltip:goog.ui.editor.DefaultToolbar.MSG_STRIKE_THROUGH_TITLE,classes:"tr-icon tr-strikeThrough",queryable:!0},{command:goog.editor.Command.SUBSCRIPT,tooltip:goog.ui.editor.DefaultToolbar.MSG_SUBSCRIPT,classes:"tr-icon tr-subscript",queryable:!0},{command:goog.editor.Command.SUPERSCRIPT,tooltip:goog.ui.editor.DefaultToolbar.MSG_SUPERSCRIPT,
classes:"tr-icon tr-superscript",queryable:!0},{command:goog.editor.Command.DIR_LTR,tooltip:goog.ui.editor.DefaultToolbar.MSG_DIR_LTR_TITLE,classes:"tr-icon tr-ltr",queryable:!0},{command:goog.editor.Command.DIR_RTL,tooltip:goog.ui.editor.DefaultToolbar.MSG_DIR_RTL_TITLE,classes:"tr-icon tr-rtl",factory:goog.ui.editor.DefaultToolbar.rtlButtonFactory_,queryable:!0},{command:goog.editor.Command.BLOCKQUOTE,tooltip:goog.ui.editor.DefaultToolbar.MSG_BLOCKQUOTE_TITLE,classes:"tr-icon tr-BLOCKQUOTE",queryable:!0},
{command:goog.editor.Command.FORMAT_BLOCK,tooltip:goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_TITLE,caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_CAPTION,classes:"tr-formatBlock",factory:goog.ui.editor.DefaultToolbar.formatBlockFactory_,queryable:!0},{command:goog.editor.Command.EDIT_HTML,tooltip:goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_TITLE,caption:goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_CAPTION,classes:"tr-editHtml",factory:goog.ui.editor.ToolbarFactory.makeButton}];
(function(){for(var c=0,d;d=goog.ui.editor.DefaultToolbar.BUTTONS_[c];c++)goog.ui.editor.DefaultToolbar.buttons_[d.command]=d;delete goog.ui.editor.DefaultToolbar.BUTTONS_})();goog.ui.editor.ToolbarController=function(c,d){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.field_=c;this.toolbar_=d;this.queryCommands_=[];this.toolbar_.forEachChild(function(c){c.queryable&&this.queryCommands_.push(this.getComponentId(c.getId()))},this);this.toolbar_.setFocusable(!1);this.handler_.listen(this.field_,goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,this.updateToolbar).listen(this.toolbar_,goog.ui.Component.EventType.ACTION,this.handleAction)};
goog.inherits(goog.ui.editor.ToolbarController,goog.events.EventTarget);goog.ui.editor.ToolbarController.prototype.getComponentId=function(c){return c};goog.ui.editor.ToolbarController.prototype.getCommand=function(c){return c};goog.ui.editor.ToolbarController.prototype.getHandler=function(){return this.handler_};goog.ui.editor.ToolbarController.prototype.getField=function(){return this.field_};goog.ui.editor.ToolbarController.prototype.getToolbar=function(){return this.toolbar_};
goog.ui.editor.ToolbarController.prototype.isVisible=function(){return this.toolbar_.isVisible()};goog.ui.editor.ToolbarController.prototype.setVisible=function(c){this.toolbar_.setVisible(c)};goog.ui.editor.ToolbarController.prototype.isEnabled=function(){return this.toolbar_.isEnabled()};goog.ui.editor.ToolbarController.prototype.setEnabled=function(c){this.toolbar_.setEnabled(c)};goog.ui.editor.ToolbarController.prototype.blur=function(){this.toolbar_.handleBlur(null)};
goog.ui.editor.ToolbarController.prototype.disposeInternal=function(){goog.ui.editor.ToolbarController.superClass_.disposeInternal.call(this);this.handler_&&(this.handler_.dispose(),delete this.handler_);this.toolbar_&&(this.toolbar_.dispose(),delete this.toolbar_);delete this.field_;delete this.queryCommands_};
goog.ui.editor.ToolbarController.prototype.updateToolbar=function(c){if(this.toolbar_.isEnabled()&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)){var d;try{d=this.field_.queryCommandValue(c.commands||this.queryCommands_)}catch(e){d={}}this.updateToolbarFromState(d)}};goog.ui.editor.ToolbarController.prototype.updateToolbarFromState=function(c){for(var d in c){var e=this.toolbar_.getChild(this.getComponentId(d));if(e){var f=c[d];e.updateFromValue?e.updateFromValue(f):e.setChecked(!!f)}}};
goog.ui.editor.ToolbarController.prototype.handleAction=function(c){var d=this.getCommand(c.target.getId());this.field_.execCommand(d,c.target.getValue())};goog.editor.plugins.AbstractTabHandler=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.AbstractTabHandler,goog.editor.Plugin);goog.editor.plugins.AbstractTabHandler.prototype.handleKeyboardShortcut=function(c,d,e){return goog.userAgent.GECKO&&this.getFieldObject().inModalMode()?!1:c.keyCode!=goog.events.KeyCodes.TAB||c.metaKey||c.ctrlKey?!1:this.handleTabKey(c)};goog.editor.plugins.ListTabHandler=function(){goog.editor.plugins.AbstractTabHandler.call(this)};goog.inherits(goog.editor.plugins.ListTabHandler,goog.editor.plugins.AbstractTabHandler);goog.editor.plugins.ListTabHandler.prototype.getTrogClassId=function(){return"ListTabHandler"};
goog.editor.plugins.ListTabHandler.prototype.handleTabKey=function(c){var d=this.getFieldObject().getRange();return goog.dom.getAncestorByTagNameAndClass(d.getContainerElement(),goog.dom.TagName.LI)||goog.iter.some(d,function(c){return c.tagName==goog.dom.TagName.LI})?(this.getFieldObject().execCommand(c.shiftKey?goog.editor.Command.OUTDENT:goog.editor.Command.INDENT),c.preventDefault(),!0):!1};goog.editor.plugins.RemoveFormatting=function(){goog.editor.Plugin.call(this);this.optRemoveFormattingFunc_=null};goog.inherits(goog.editor.plugins.RemoveFormatting,goog.editor.Plugin);goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND="+removeFormat";goog.editor.plugins.RemoveFormatting.BLOCK_RE_=/^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/;goog.editor.plugins.RemoveFormatting.appendNewline_=function(c){c.push("<br>")};
goog.editor.plugins.RemoveFormatting.createRangeDelimitedByRanges_=function(c,d){return goog.dom.Range.createFromNodes(c.getStartNode(),c.getStartOffset(),d.getEndNode(),d.getEndOffset())};goog.editor.plugins.RemoveFormatting.prototype.getTrogClassId=function(){return"RemoveFormatting"};goog.editor.plugins.RemoveFormatting.prototype.isSupportedCommand=function(c){return c==goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND};
goog.editor.plugins.RemoveFormatting.prototype.execCommandInternal=function(c,d){c==goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND&&this.removeFormatting_()};goog.editor.plugins.RemoveFormatting.prototype.handleKeyboardShortcut=function(c,d,e){return e?" "==d?(this.getFieldObject().execCommand(goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND),!0):!1:!1};
goog.editor.plugins.RemoveFormatting.prototype.removeFormatting_=function(){if(!this.getFieldObject().getRange().isCollapsed()){var c=this.optRemoveFormattingFunc_||goog.bind(this.removeFormattingWorker_,this);this.convertSelectedHtmlText_(c);this.getFieldDomHelper().getDocument().execCommand("RemoveFormat",!1,void 0);goog.editor.BrowserFeature.ADDS_NBSPS_IN_REMOVE_FORMAT&&this.convertSelectedHtmlText_(function(c){var e=goog.userAgent.isVersionOrHigher("528")?/&nbsp;/g:/\u00A0/g;return c.replace(e,
" ")})}};goog.editor.plugins.RemoveFormatting.prototype.getTableAncestor_=function(c){for(var d=this.getFieldObject().getElement();c&&c!=d;){if(c.tagName==goog.dom.TagName.TABLE)return c;c=c.parentNode}return null};
goog.editor.plugins.RemoveFormatting.prototype.pasteHtml_=function(c){var d=this.getFieldObject().getRange(),e=this.getFieldDomHelper(),f=goog.string.createUniqueString(),h=goog.string.createUniqueString();c='<span id="'+f+'"></span>'+c+'<span id="'+h+'"></span>';var k=goog.string.createUniqueString(),l='<span id="'+k+'"></span>';if(goog.editor.BrowserFeature.HAS_IE_RANGES){var m=d.getTextRange(0).getBrowserRangeObject();m.pasteHTML(l);for(var n;(n=m.parentElement())&&goog.editor.node.isEmpty(n)&&
!goog.editor.node.isEditableContainer(n);){d=n.nodeName;if(d==goog.dom.TagName.TD||d==goog.dom.TagName.TR||d==goog.dom.TagName.TH)break;goog.dom.removeNode(n)}m.pasteHTML(c);(k=e.getElement(k))&&goog.dom.removeNode(k)}else if(goog.editor.BrowserFeature.HAS_W3C_RANGES){e.getDocument().execCommand("insertImage",!1,k);d=RegExp("<[^<]*"+k+"[^>]*>");n=this.getFieldObject().getRange().getContainerElement();n.nodeType==goog.dom.NodeType.TEXT&&(n=n.parentNode);for(;!d.test(n.innerHTML);)n=n.parentNode;if(goog.userAgent.GECKO)goog.editor.node.replaceInnerHtml(n,
n.innerHTML.replace(d,c));else{goog.editor.node.replaceInnerHtml(n,n.innerHTML.replace(d,l));for(n=k=e.getElement(k);(n=k.parentNode)&&goog.editor.node.isEmpty(n)&&!goog.editor.node.isEditableContainer(n);){d=n.nodeName;if(d==goog.dom.TagName.TD||d==goog.dom.TagName.TR||d==goog.dom.TagName.TH)break;goog.dom.insertSiblingAfter(k,n);goog.dom.removeNode(n)}goog.editor.node.replaceInnerHtml(n,n.innerHTML.replace(RegExp(l,"i"),c))}}c=e.getElement(f);e=e.getElement(h);goog.dom.Range.createFromNodes(c,0,
e,e.childNodes.length).select();goog.dom.removeNode(c);goog.dom.removeNode(e)};
goog.editor.plugins.RemoveFormatting.prototype.getHtmlText_=function(c){var d=this.getFieldDomHelper().createDom("div"),e=c.getBrowserRangeObject();if(goog.editor.BrowserFeature.HAS_W3C_RANGES)d.appendChild(e.cloneContents());else if(goog.editor.BrowserFeature.HAS_IE_RANGES){var f=c.getText(),f=f.replace(/\r\n/g,"\r"),h=f.length;c=h-goog.string.trimLeft(f).length;f=h-goog.string.trimRight(f).length;e.moveStart("character",c);e.moveEnd("character",-f);c=e.htmlText;"Formatted"==e.queryCommandValue("formatBlock")&&
(c=goog.string.newLineToBr(e.htmlText));d.innerHTML=c}return d.innerHTML};
goog.editor.plugins.RemoveFormatting.prototype.adjustRangeForTables_=function(c,d,e){var f=goog.editor.range.saveUsingNormalizedCarets(c),h=c.getStartNode(),k=c.getStartOffset(),l=c.getEndNode();c=c.getEndOffset();var m=this.getFieldDomHelper();if(d){var n=m.createTextNode("");goog.dom.insertSiblingAfter(n,d);h=n;k=0}e&&(n=m.createTextNode(""),goog.dom.insertSiblingBefore(n,e),l=n,c=0);goog.dom.Range.createFromNodes(h,k,l,c).select();return f};
goog.editor.plugins.RemoveFormatting.prototype.putCaretInCave_=function(c,d){var e=goog.dom.removeNode(c.getCaret(d));d?this.startCaretInCave_=e:this.endCaretInCave_=e};goog.editor.plugins.RemoveFormatting.prototype.restoreCaretsFromCave_=function(){var c=this.getFieldObject().getElement();this.startCaretInCave_&&(c.insertBefore(this.startCaretInCave_,c.firstChild),this.startCaretInCave_=null);this.endCaretInCave_&&(c.appendChild(this.endCaretInCave_),this.endCaretInCave_=null)};
goog.editor.plugins.RemoveFormatting.prototype.convertSelectedHtmlText_=function(c){var d=this.getFieldObject().getRange();if(!(1<d.getTextRangeCount())){if(goog.userAgent.GECKO){var e=goog.editor.range.expand(d,this.getFieldObject().getElement()),f=this.getTableAncestor_(e.getStartNode()),h=this.getTableAncestor_(e.getEndNode());if(f||h){if(f==h)return;var k=this.adjustRangeForTables_(d,f,h);f||this.putCaretInCave_(k,!0);h||this.putCaretInCave_(k,!1);d=this.getFieldObject().getRange();e=goog.editor.range.expand(d,
this.getFieldObject().getElement())}e.select();d=e}d=this.getHtmlText_(d);this.pasteHtml_(c(d));goog.userAgent.GECKO&&k&&(d=this.getFieldObject().getRange(),this.restoreCaretsFromCave_(),c=k.toAbstractRange(),goog.editor.plugins.RemoveFormatting.createRangeDelimitedByRanges_(f?c:d,h?c:d).select(),k.dispose())}};
goog.editor.plugins.RemoveFormatting.prototype.removeFormattingWorker_=function(c){var d=goog.dom.createElement("div");d.innerHTML=c;c=[];for(var d=[d.childNodes,0],e=[],f=0,h=[],k=0,l=0;0<=l;l-=2){for(var m=!1;0<k&&l<=h[k-1];)k--,m=!0;m&&goog.editor.plugins.RemoveFormatting.appendNewline_(c);for(m=!1;0<f&&l<=e[f-1];)f--,m=!0;m&&goog.editor.plugins.RemoveFormatting.appendNewline_(c);for(var m=d[l],n=d[l+1];n<m.length;){var p=m[n++],s=p.nodeName,q=this.getValueForNode(p);if(goog.isDefAndNotNull(q))c.push(q);
else{switch(s){case "#text":p=0<f?p.nodeValue:goog.string.stripNewlines(p.nodeValue);p=goog.string.htmlEscape(p);c.push(p);continue;case goog.dom.TagName.P:goog.editor.plugins.RemoveFormatting.appendNewline_(c);goog.editor.plugins.RemoveFormatting.appendNewline_(c);break;case goog.dom.TagName.BR:goog.editor.plugins.RemoveFormatting.appendNewline_(c);continue;case goog.dom.TagName.TABLE:goog.editor.plugins.RemoveFormatting.appendNewline_(c);h[k++]=l;break;case goog.dom.TagName.PRE:case "XMP":e[f++]=
l;break;case goog.dom.TagName.STYLE:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SELECT:continue;case goog.dom.TagName.A:if(p.href&&""!=p.href){c.push("<a href='");c.push(p.href);c.push("'>");c.push(this.removeFormattingWorker_(p.innerHTML));c.push("</a>");continue}else break;case goog.dom.TagName.IMG:c.push("<img src='");c.push(p.src);c.push("'");"0"==p.border&&c.push(" border='0'");c.push(">");continue;case goog.dom.TagName.TD:p.previousSibling&&c.push(" ");break;case goog.dom.TagName.TR:p.previousSibling&&
goog.editor.plugins.RemoveFormatting.appendNewline_(c);break;case goog.dom.TagName.DIV:if(q=p.parentNode,q.firstChild==p&&goog.editor.plugins.RemoveFormatting.BLOCK_RE_.test(q.tagName))break;default:goog.editor.plugins.RemoveFormatting.BLOCK_RE_.test(s)&&goog.editor.plugins.RemoveFormatting.appendNewline_(c)}p=p.childNodes;0<p.length&&(d[l++]=m,d[l++]=n,m=p,n=0)}}}return goog.string.normalizeSpaces(c.join(""))};goog.editor.plugins.RemoveFormatting.prototype.getValueForNode=function(c){return null};
goog.editor.plugins.RemoveFormatting.prototype.setRemoveFormattingFunc=function(c){this.optRemoveFormattingFunc_=c};goog.events.EventWrapper=function(){};goog.events.EventWrapper.prototype.listen=function(c,d,e,f,h){};goog.events.EventWrapper.prototype.unlisten=function(c,d,e,f,h){};goog.events.ActionEventWrapper_=function(){};goog.events.actionEventWrapper=new goog.events.ActionEventWrapper_;goog.events.ActionEventWrapper_.EVENT_TYPES_=[goog.events.EventType.CLICK,goog.userAgent.GECKO?goog.events.EventType.KEYPRESS:goog.events.EventType.KEYDOWN];
goog.events.ActionEventWrapper_.prototype.listen=function(c,d,e,f,h){var k=function(c){if(c.type==goog.events.EventType.CLICK&&c.isMouseActionButton())d.call(f,c);else if(c.keyCode==goog.events.KeyCodes.ENTER||c.keyCode==goog.events.KeyCodes.MAC_ENTER)c.type=goog.events.EventType.KEYPRESS,d.call(f,c)};k.listener_=d;k.scope_=f;h?h.listen(c,goog.events.ActionEventWrapper_.EVENT_TYPES_,k,e):goog.events.listen(c,goog.events.ActionEventWrapper_.EVENT_TYPES_,k,e)};
goog.events.ActionEventWrapper_.prototype.unlisten=function(c,d,e,f,h){for(var k,l=0;k=goog.events.ActionEventWrapper_.EVENT_TYPES_[l];l++)for(var m=goog.events.getListeners(c,k,!!e),n,p=0;n=m[p];p++)if(n.listener.listener_==d&&n.listener.scope_==f){h?h.unlisten(c,k,n.listener,e,f):goog.events.unlisten(c,k,n.listener,e,f);break}};goog.dom.ViewportSizeMonitor=function(c){goog.events.EventTarget.call(this);this.window_=c||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);
goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(c){c=c||window;var d=goog.getUid(c);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[d]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[d]||new goog.dom.ViewportSizeMonitor(c)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(c){c=goog.getUid(c||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]};
goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.listenerKey_=null;goog.dom.ViewportSizeMonitor.prototype.window_=null;goog.dom.ViewportSizeMonitor.prototype.size_=null;goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};
goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null);this.size_=this.window_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(c){c=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(c,this.size_)||(this.size_=c,this.dispatchEvent(goog.events.EventType.RESIZE))};goog.ui.editor.Bubble=function(c,d){goog.events.EventTarget.call(this);this.dom_=goog.dom.getDomHelper(c);this.eventHandler_=new goog.events.EventHandler(this);this.viewPortSizeMonitor_=new goog.dom.ViewportSizeMonitor(this.dom_.getWindow());this.panels_={};this.bubbleContainer_=this.dom_.createDom(goog.dom.TagName.DIV,{className:goog.ui.editor.Bubble.BUBBLE_CLASSNAME});goog.style.setElementShown(this.bubbleContainer_,!1);goog.dom.appendChild(c,this.bubbleContainer_);goog.style.setStyle(this.bubbleContainer_,
"zIndex",d);this.bubbleContents_=this.createBubbleDom(this.dom_,this.bubbleContainer_);this.closeBox_=this.dom_.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_closebox",innerHTML:"&nbsp;"});this.bubbleContents_.appendChild(this.closeBox_);goog.editor.style.makeUnselectable(this.bubbleContainer_,this.eventHandler_);this.popup_=new goog.ui.PopupBase(this.bubbleContainer_)};goog.inherits(goog.ui.editor.Bubble,goog.events.EventTarget);goog.ui.editor.Bubble.BUBBLE_CLASSNAME="tr_bubble";
goog.ui.editor.Bubble.prototype.createBubbleDom=function(c,d){return d};goog.ui.editor.Bubble.prototype.logger=goog.log.getLogger("goog.ui.editor.Bubble");goog.ui.editor.Bubble.prototype.disposeInternal=function(){goog.ui.editor.Bubble.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.bubbleContainer_);this.bubbleContainer_=null;this.eventHandler_.dispose();this.eventHandler_=null;this.viewPortSizeMonitor_.dispose();this.viewPortSizeMonitor_=null};
goog.ui.editor.Bubble.prototype.getContentElement=function(){return this.bubbleContents_};goog.ui.editor.Bubble.prototype.getContainerElement=function(){return this.bubbleContainer_};goog.ui.editor.Bubble.prototype.getEventHandler=function(){return this.eventHandler_};goog.ui.editor.Bubble.prototype.handleWindowResize_=function(){this.isVisible()&&this.reposition()};goog.ui.editor.Bubble.prototype.hasPanelOfType=function(c){return goog.object.some(this.panels_,function(d){return d.type==c})};
goog.ui.editor.Bubble.prototype.addPanel=function(c,d,e,f,h){var k=goog.string.createUniqueString();d=new goog.ui.editor.Bubble.Panel_(this.dom_,k,c,d,e,!h);this.panels_[k]=d;var l;e=0;for(h=this.bubbleContents_.childNodes.length-1;e<h;e++){var m=this.bubbleContents_.childNodes[e];if(this.panels_[m.id].type>c){l=m;break}}goog.dom.insertSiblingBefore(d.element,l||this.bubbleContents_.lastChild);f(d.getContentElement());goog.editor.style.makeUnselectable(d.element,this.eventHandler_);c=goog.object.getCount(this.panels_);
1==c?this.openBubble_():2==c&&goog.dom.classes.add(this.bubbleContainer_,"tr_multi_bubble");this.reposition();return k};goog.ui.editor.Bubble.prototype.removePanel=function(c){goog.dom.removeNode(this.panels_[c].element);delete this.panels_[c];c=goog.object.getCount(this.panels_);1>=c&&goog.dom.classes.remove(this.bubbleContainer_,"tr_multi_bubble");0==c?this.closeBubble_():this.reposition()};
goog.ui.editor.Bubble.prototype.openBubble_=function(){this.eventHandler_.listen(this.closeBox_,goog.events.EventType.CLICK,this.closeBubble_).listen(this.viewPortSizeMonitor_,goog.events.EventType.RESIZE,this.handleWindowResize_).listen(this.popup_,goog.ui.PopupBase.EventType.HIDE,this.handlePopupHide);this.popup_.setVisible(!0);this.reposition()};goog.ui.editor.Bubble.prototype.closeBubble_=function(){this.popup_.setVisible(!1)};
goog.ui.editor.Bubble.prototype.handlePopupHide=function(){for(var c in this.panels_)goog.dom.removeNode(this.panels_[c].element);this.panels_={};goog.dom.classes.remove(this.bubbleContainer_,"tr_multi_bubble");this.eventHandler_.removeAll();this.dispatchEvent(goog.ui.Component.EventType.HIDE)};goog.ui.editor.Bubble.prototype.isVisible=function(){return this.popup_.isVisible()};goog.ui.editor.Bubble.VERTICAL_CLEARANCE_=goog.userAgent.IE?4:2;
goog.ui.editor.Bubble.MARGIN_BOX_=new goog.math.Box(goog.ui.editor.Bubble.VERTICAL_CLEARANCE_,0,goog.ui.editor.Bubble.VERTICAL_CLEARANCE_,0);
goog.ui.editor.Bubble.prototype.reposition=function(){var c=null,d=!0,e;for(e in this.panels_)var f=this.panels_[e],c=f.targetElement,d=d&&f.preferBottomPosition;e=goog.positioning.OverflowStatus.FAILED;c=goog.style.isRightToLeft(this.bubbleContainer_)!=goog.style.isRightToLeft(c);d&&(e=this.positionAtAnchor_(c?goog.positioning.Corner.BOTTOM_END:goog.positioning.Corner.BOTTOM_START,goog.positioning.Corner.TOP_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y));e&goog.positioning.OverflowStatus.FAILED&&
(e=this.positionAtAnchor_(c?goog.positioning.Corner.TOP_END:goog.positioning.Corner.TOP_START,goog.positioning.Corner.BOTTOM_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y));e&goog.positioning.OverflowStatus.FAILED&&(e=this.positionAtAnchor_(c?goog.positioning.Corner.BOTTOM_END:goog.positioning.Corner.BOTTOM_START,goog.positioning.Corner.TOP_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y),e&goog.positioning.OverflowStatus.FAILED&&goog.log.warning(this.logger,
"reposition(): positionAtAnchor() failed with "+e))};goog.ui.editor.Bubble.prototype.positionAtAnchor_=function(c,d,e){var f=null,h;for(h in this.panels_){var k=this.panels_[h].targetElement;if(!f||goog.dom.contains(k,f))f=this.panels_[h].targetElement}return goog.positioning.positionAtAnchor(f,c,this.bubbleContainer_,d,null,goog.ui.editor.Bubble.MARGIN_BOX_,e)};
goog.ui.editor.Bubble.Panel_=function(c,d,e,f,h,k){this.type=e;this.targetElement=h;this.preferBottomPosition=k;this.element=c.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel",id:d},c.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel_title"},f+":"),c.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel_content"}))};goog.ui.editor.Bubble.Panel_.prototype.getContentElement=function(){return this.element.lastChild};goog.editor.plugins.AbstractBubblePlugin=function(){goog.editor.Plugin.call(this);this.eventRegister=new goog.events.EventHandler(this)};goog.inherits(goog.editor.plugins.AbstractBubblePlugin,goog.editor.Plugin);goog.editor.plugins.AbstractBubblePlugin.OPTION_LINK_CLASSNAME_="tr_option-link";goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_="tr_bubble_link";goog.editor.plugins.AbstractBubblePlugin.DASH_NBSP_STRING=goog.string.Unicode.NBSP+"-"+goog.string.Unicode.NBSP;
goog.editor.plugins.AbstractBubblePlugin.defaultBubbleFactory_=function(c,d){return new goog.ui.editor.Bubble(c,d)};goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_=goog.editor.plugins.AbstractBubblePlugin.defaultBubbleFactory_;goog.editor.plugins.AbstractBubblePlugin.setBubbleFactory=function(c){goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_=c};goog.editor.plugins.AbstractBubblePlugin.bubbleMap_={};goog.editor.plugins.AbstractBubblePlugin.prototype.panelId_=null;
goog.editor.plugins.AbstractBubblePlugin.prototype.keyboardNavigationEnabled_=!1;goog.editor.plugins.AbstractBubblePlugin.prototype.enableKeyboardNavigation=function(c){this.keyboardNavigationEnabled_=c};goog.editor.plugins.AbstractBubblePlugin.prototype.setBubbleParent=function(c){this.bubbleParent_=c};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleDom=function(){return this.dom_};goog.editor.plugins.AbstractBubblePlugin.prototype.getTrogClassId=goog.functions.constant("AbstractBubblePlugin");
goog.editor.plugins.AbstractBubblePlugin.prototype.getTargetElement=function(){return this.targetElement_};goog.editor.plugins.AbstractBubblePlugin.prototype.handleKeyUp=function(c){this.isVisible()&&this.handleSelectionChange();return!1};
goog.editor.plugins.AbstractBubblePlugin.prototype.handleSelectionChange=function(c,d){var e;if(c)e=c.target;else if(d)e=d;else{var f=this.getFieldObject().getRange();if(f){var h=f.getStartNode(),k=f.getEndNode(),l=f.getStartOffset(),m=f.getEndOffset();goog.userAgent.IE&&(f.isCollapsed()&&h!=k)&&(f=goog.dom.Range.createCaret(h,l));h.nodeType==goog.dom.NodeType.ELEMENT&&(h==k&&l==m-1)&&(h=h.childNodes[l],h.nodeType==goog.dom.NodeType.ELEMENT&&(e=h))}e=e||f&&f.getContainerElement()}return this.handleSelectionChangeInternal(e)};
goog.editor.plugins.AbstractBubblePlugin.prototype.handleSelectionChangeInternal=function(c){if(c&&(c=this.getBubbleTargetFromSelection(c)))return c==this.targetElement_&&this.panelId_||(this.panelId_&&this.closeBubble(),this.createBubble(c)),!1;this.panelId_&&this.closeBubble();return!1};goog.editor.plugins.AbstractBubblePlugin.prototype.disable=function(c){if(c.isUneditable()){var d=goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[c.id];d&&(d.dispose(),delete goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[c.id])}};
goog.editor.plugins.AbstractBubblePlugin.prototype.getSharedBubble_=function(){var c=this.bubbleParent_||this.getFieldObject().getAppWindow().document.body;this.dom_=goog.dom.getDomHelper(c);var d=goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[this.getFieldObject().id];d||(d=goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_.call(null,c,this.getFieldObject().getBaseZindex()),goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[this.getFieldObject().id]=d);return d};
goog.editor.plugins.AbstractBubblePlugin.prototype.createBubble=function(c){var d=this.getSharedBubble_();d.hasPanelOfType(this.getBubbleType())||(this.targetElement_=c,this.panelId_=d.addPanel(this.getBubbleType(),this.getBubbleTitle(),c,goog.bind(this.createBubbleContents,this),this.shouldPreferBubbleAboveElement()),this.eventRegister.listen(d,goog.ui.Component.EventType.HIDE,this.handlePanelClosed_),this.onShow(),this.keyboardNavigationEnabled_&&this.eventRegister.listen(d.getContentElement(),
goog.events.EventType.KEYDOWN,this.onBubbleKey_))};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleType=function(){return""};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleTitle=function(){return""};goog.editor.plugins.AbstractBubblePlugin.prototype.shouldPreferBubbleAboveElement=goog.functions.FALSE;goog.editor.plugins.AbstractBubblePlugin.prototype.registerClickHandler=function(c,d){this.registerActionHandler(c,d)};
goog.editor.plugins.AbstractBubblePlugin.prototype.registerActionHandler=function(c,d){this.eventRegister.listenWithWrapper(c,goog.events.actionEventWrapper,d)};goog.editor.plugins.AbstractBubblePlugin.prototype.closeBubble=function(){this.panelId_&&(this.getSharedBubble_().removePanel(this.panelId_),this.handlePanelClosed_())};goog.editor.plugins.AbstractBubblePlugin.prototype.onShow=goog.nullFunction;
goog.editor.plugins.AbstractBubblePlugin.prototype.handlePanelClosed_=function(){this.panelId_=this.targetElement_=null;this.eventRegister.removeAll()};
goog.editor.plugins.AbstractBubblePlugin.prototype.handleKeyDown=function(c){if(this.keyboardNavigationEnabled_&&this.isVisible()&&c.keyCode==goog.events.KeyCodes.TAB&&!c.shiftKey){var d=this.getSharedBubble_().getContentElement();if(d=goog.dom.getElementByClass(goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_,d))return d.focus(),c.preventDefault(),!0}return!1};
goog.editor.plugins.AbstractBubblePlugin.prototype.onBubbleKey_=function(c){if(this.isVisible()&&c.keyCode==goog.events.KeyCodes.TAB){var d=this.getSharedBubble_().getContentElement(),d=goog.dom.getElementsByClass(goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_,d);if(c.shiftKey?d[0]==c.target:d.length&&d[d.length-1]==c.target)this.getFieldObject().focus(),c.preventDefault()}};goog.editor.plugins.AbstractBubblePlugin.prototype.isVisible=function(){return!!this.panelId_};
goog.editor.plugins.AbstractBubblePlugin.prototype.reposition=function(){var c=this.getSharedBubble_();c&&c.reposition()};goog.editor.plugins.AbstractBubblePlugin.prototype.createLinkOption=function(c){return this.dom_.createDom(goog.dom.TagName.SPAN,{id:c,className:goog.editor.plugins.AbstractBubblePlugin.OPTION_LINK_CLASSNAME_},this.dom_.createTextNode(goog.editor.plugins.AbstractBubblePlugin.DASH_NBSP_STRING))};
goog.editor.plugins.AbstractBubblePlugin.prototype.createLink=function(c,d,e,f){c=this.createLinkHelper(c,d,!1,f);e&&this.registerActionHandler(c,e);return c};
goog.editor.plugins.AbstractBubblePlugin.prototype.createLinkHelper=function(c,d,e,f){d=this.dom_.createDom(e?goog.dom.TagName.A:goog.dom.TagName.SPAN,{className:goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_},d);this.keyboardNavigationEnabled_&&d.setAttribute("tabindex",0);d.setAttribute("role","link");this.setupLink(d,c,f);goog.editor.style.makeUnselectable(d,this.eventRegister);return d};
goog.editor.plugins.AbstractBubblePlugin.prototype.setupLink=function(c,d,e){e?e.appendChild(c):(e=this.dom_.getElement(d))&&goog.dom.replaceNode(c,e);c.id=d};goog.editor.plugins.LinkBubble=function(c){goog.editor.plugins.AbstractBubblePlugin.call(this);this.extraActions_=goog.array.toArray(arguments);this.actionSpans_=[];this.safeToOpenSchemes_=["http","https","ftp"]};goog.inherits(goog.editor.plugins.LinkBubble,goog.editor.plugins.AbstractBubblePlugin);goog.editor.plugins.LinkBubble.LINK_TEXT_ID_="tr_link-text";goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_="tr_test-link-span";goog.editor.plugins.LinkBubble.TEST_LINK_ID_="tr_test-link";
goog.editor.plugins.LinkBubble.CHANGE_LINK_SPAN_ID_="tr_change-link-span";goog.editor.plugins.LinkBubble.CHANGE_LINK_ID_="tr_change-link";goog.editor.plugins.LinkBubble.DELETE_LINK_SPAN_ID_="tr_delete-link-span";goog.editor.plugins.LinkBubble.DELETE_LINK_ID_="tr_delete-link";goog.editor.plugins.LinkBubble.LINK_DIV_ID_="tr_link-div";var MSG_LINK_BUBBLE_TEST_LINK=goog.getMsg("Go to link: "),MSG_LINK_BUBBLE_CHANGE=goog.getMsg("Change"),MSG_LINK_BUBBLE_REMOVE=goog.getMsg("Remove");
goog.editor.plugins.LinkBubble.prototype.stopReferrerLeaks_=!1;goog.editor.plugins.LinkBubble.prototype.blockOpeningUnsafeSchemes_=!0;goog.editor.plugins.LinkBubble.prototype.stopReferrerLeaks=function(){this.stopReferrerLeaks_=!0};goog.editor.plugins.LinkBubble.prototype.setBlockOpeningUnsafeSchemes=function(c){this.blockOpeningUnsafeSchemes_=c};goog.editor.plugins.LinkBubble.prototype.setSafeToOpenSchemes=function(c){this.safeToOpenSchemes_=c};
goog.editor.plugins.LinkBubble.prototype.getTrogClassId=function(){return"LinkBubble"};goog.editor.plugins.LinkBubble.prototype.isSupportedCommand=function(c){return c==goog.editor.Command.UPDATE_LINK_BUBBLE};goog.editor.plugins.LinkBubble.prototype.execCommandInternal=function(c,d){c==goog.editor.Command.UPDATE_LINK_BUBBLE&&this.updateLink_()};goog.editor.plugins.LinkBubble.prototype.updateLink_=function(){var c=this.getTargetElement();this.closeBubble();this.createBubble(c)};
goog.editor.plugins.LinkBubble.prototype.getBubbleTargetFromSelection=function(c){c=goog.dom.getAncestorByTagNameAndClass(c,goog.dom.TagName.A);if(!c){var d=this.getFieldObject().getRange();d&&d.isCollapsed()&&0==d.getStartOffset()&&(d=d.getStartNode().previousSibling)&&d.tagName==goog.dom.TagName.A&&(c=d)}return c};goog.editor.plugins.LinkBubble.prototype.setTestLinkUrlFn=function(c){this.testLinkUrlFn_=c};
goog.editor.plugins.LinkBubble.prototype.getTargetUrl=function(){return this.getTargetElement().getAttribute("href")||""};goog.editor.plugins.LinkBubble.prototype.getBubbleType=function(){return goog.dom.TagName.A};goog.editor.plugins.LinkBubble.prototype.getBubbleTitle=function(){return goog.ui.editor.messages.MSG_LINK_CAPTION};
goog.editor.plugins.LinkBubble.prototype.createBubbleContents=function(c){var d=this.getLinkToTextObj_(),e=d.valid?"black":"red",f=this.shouldOpenUrl(d.linkText);if(!goog.editor.Link.isLikelyEmailAddress(d.linkText)&&d.valid&&f){var h=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_},MSG_LINK_BUBBLE_TEST_LINK),e=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.LINK_TEXT_ID_,style:"color:"+e},""),d=goog.string.truncateMiddle(d.linkText,
48);this.createLink(goog.editor.plugins.LinkBubble.TEST_LINK_ID_,this.dom_.createTextNode(d).data,this.testLink,e)}else e=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.LINK_TEXT_ID_,style:"color:"+e},this.dom_.createTextNode(d.linkText));f=this.createLinkOption(goog.editor.plugins.LinkBubble.CHANGE_LINK_SPAN_ID_);this.createLink(goog.editor.plugins.LinkBubble.CHANGE_LINK_ID_,MSG_LINK_BUBBLE_CHANGE,this.showLinkDialog_,f);this.actionSpans_=[];for(d=0;d<this.extraActions_.length;d++){var k=
this.extraActions_[d],l=this.createLinkOption(k.spanId_);this.actionSpans_.push(l);this.createLink(k.linkId_,k.message_,function(){k.actionFn_(this.getTargetUrl())},l)}l=this.createLinkOption(goog.editor.plugins.LinkBubble.DELETE_LINK_SPAN_ID_);this.createLink(goog.editor.plugins.LinkBubble.DELETE_LINK_ID_,MSG_LINK_BUBBLE_REMOVE,this.deleteLink_,l);this.onShow();h=this.dom_.createDom(goog.dom.TagName.DIV,{id:goog.editor.plugins.LinkBubble.LINK_DIV_ID_},h||"",e,f);for(d=0;d<this.actionSpans_.length;d++)h.appendChild(this.actionSpans_[d]);
h.appendChild(l);goog.dom.appendChild(c,h)};goog.editor.plugins.LinkBubble.prototype.testLink=function(){goog.window.open(this.getTestLinkAction_(),{target:"_blank",noreferrer:this.stopReferrerLeaks_},this.getFieldObject().getAppWindow())};goog.editor.plugins.LinkBubble.prototype.isInvalidUrl=goog.functions.FALSE;
goog.editor.plugins.LinkBubble.prototype.getLinkToTextObj_=function(){var c,d=this.getTargetUrl();this.isInvalidUrl(d)?(d=goog.getMsg("invalid url"),c=!0):goog.editor.Link.isMailto(d)&&(d=d.substring(7));return{linkText:d,valid:!c}};goog.editor.plugins.LinkBubble.prototype.showLinkDialog_=function(c){c.preventDefault();this.getFieldObject().execCommand(goog.editor.Command.MODAL_LINK_EDITOR,new goog.editor.Link(this.getTargetElement(),!1));this.closeBubble()};
goog.editor.plugins.LinkBubble.prototype.deleteLink_=function(){this.getFieldObject().dispatchBeforeChange();var c=this.getTargetElement(),d=c.lastChild;goog.dom.flattenElement(c);goog.editor.range.placeCursorNextTo(d,!1);this.closeBubble();this.getFieldObject().dispatchChange();this.getFieldObject().focus()};
goog.editor.plugins.LinkBubble.prototype.onShow=function(){if(this.dom_.getElement(goog.editor.plugins.LinkBubble.LINK_DIV_ID_)){var c=this.dom_.getElement(goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_);if(c){var d=this.getTargetUrl();goog.style.setElementShown(c,!goog.editor.Link.isMailto(d))}for(c=0;c<this.extraActions_.length;c++){var d=this.extraActions_[c],e=this.dom_.getElement(d.spanId_);e&&goog.style.setElementShown(e,d.toShowFn_(this.getTargetUrl()))}}};
goog.editor.plugins.LinkBubble.prototype.getTestLinkAction_=function(){var c=this.getTargetUrl();return this.testLinkUrlFn_?this.testLinkUrlFn_(c):c};goog.editor.plugins.LinkBubble.prototype.shouldOpenUrl=function(c){return!this.blockOpeningUnsafeSchemes_||this.isSafeSchemeToOpen_(c)};goog.editor.plugins.LinkBubble.prototype.isSafeSchemeToOpen_=function(c){c=goog.uri.utils.getScheme(c)||"http";return goog.array.contains(this.safeToOpenSchemes_,c.toLowerCase())};
goog.editor.plugins.LinkBubble.Action=function(c,d,e,f,h){this.spanId_=c;this.linkId_=d;this.message_=e;this.toShowFn_=f;this.actionFn_=h};goog.dom.NodeOffset=function(c,d){goog.Disposable.call(this);this.offsetStack_=[];for(this.nameStack_=[];c&&c.nodeName!=goog.dom.TagName.BODY&&c!=d;){for(var e=0,f=c.previousSibling;f;)f=f.previousSibling,++e;this.offsetStack_.unshift(e);this.nameStack_.unshift(c.nodeName);c=c.parentNode}};goog.inherits(goog.dom.NodeOffset,goog.Disposable);goog.dom.NodeOffset.prototype.toString=function(){for(var c=[],d,e=0;d=this.nameStack_[e];e++)c.push(this.offsetStack_[e]+","+d);return c.join("\n")};
goog.dom.NodeOffset.prototype.findTargetNode=function(c){for(var d=c,e=0;c=this.nameStack_[e];++e)if(d=d.childNodes[this.offsetStack_[e]],!d||d.nodeName!=c)return null;return d};goog.dom.NodeOffset.prototype.disposeInternal=function(){delete this.offsetStack_;delete this.nameStack_};goog.editor.plugins.Blockquote=function(c,d){goog.editor.Plugin.call(this);this.requiresClassNameToSplit_=c;this.className_=d||"tr_bq"};goog.inherits(goog.editor.plugins.Blockquote,goog.editor.Plugin);goog.editor.plugins.Blockquote.SPLIT_COMMAND="+splitBlockquote";goog.editor.plugins.Blockquote.CLASS_ID="Blockquote";goog.editor.plugins.Blockquote.prototype.logger=goog.log.getLogger("goog.editor.plugins.Blockquote");goog.editor.plugins.Blockquote.prototype.getTrogClassId=function(){return goog.editor.plugins.Blockquote.CLASS_ID};
goog.editor.plugins.Blockquote.prototype.isSilentCommand=goog.functions.TRUE;goog.editor.plugins.Blockquote.isBlockquote=function(c,d,e,f){if(c.tagName!=goog.dom.TagName.BLOCKQUOTE)return!1;if(!e)return d;c=goog.dom.classes.has(c,f);return d?c:!c};goog.editor.plugins.Blockquote.prototype.isSplittableBlockquote=function(c){return c.tagName!=goog.dom.TagName.BLOCKQUOTE?!1:this.requiresClassNameToSplit_?goog.dom.classes.has(c,this.className_):!0};
goog.editor.plugins.Blockquote.prototype.isSetupBlockquote=function(c){return c.tagName==goog.dom.TagName.BLOCKQUOTE&&goog.dom.classes.has(c,this.className_)};goog.editor.plugins.Blockquote.prototype.isUnsetupBlockquote=function(c){return c.tagName==goog.dom.TagName.BLOCKQUOTE&&!this.isSetupBlockquote(c)};goog.editor.plugins.Blockquote.prototype.getBlockquoteClassName=function(){return this.className_};
goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_=function(c,d){var e=goog.editor.node.findHighestMatchingAncestor(c,function(c){return c!=d&&1==c.childNodes.length});e||(e=c);goog.dom.removeNode(e)};goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_=function(c){for(var d=0;d<c.length;++d)goog.editor.node.isEmpty(c[d],!0)&&goog.dom.removeNode(c[d])};goog.editor.plugins.Blockquote.prototype.isSupportedCommand=function(c){return c==goog.editor.plugins.Blockquote.SPLIT_COMMAND};
goog.editor.plugins.Blockquote.prototype.execCommandInternal=function(c,d){if(c==goog.editor.plugins.Blockquote.SPLIT_COMMAND&&d&&(this.className_||!this.requiresClassNameToSplit_))return goog.editor.BrowserFeature.HAS_W3C_RANGES?this.splitQuotedBlockW3C_(d):this.splitQuotedBlockIE_(d)};
goog.editor.plugins.Blockquote.prototype.splitQuotedBlockW3C_=function(c){var d=c.node,e=goog.editor.node.findTopMostEditableAncestor(d.parentNode,goog.bind(this.isSplittableBlockquote,this)),f,h,k=!1;e?d.nodeType==goog.dom.NodeType.TEXT?c.offset==d.length?(f=d.nextSibling)&&f.tagName==goog.dom.TagName.BR?(d=f,f=f.nextSibling):f=h=d.splitText(c.offset):f=d.splitText(c.offset):d.tagName==goog.dom.TagName.BR?f=d.nextSibling:k=!0:this.isSetupBlockquote(d)&&(e=d,k=!0);k&&(d=this.insertEmptyTextNodeBeforeRange_(),
f=this.insertEmptyTextNodeBeforeRange_());if(!e)return!1;f=goog.editor.node.splitDomTreeAt(d,f,e);goog.dom.insertSiblingAfter(f,e);c=this.getFieldDomHelper();d=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)||goog.dom.TagName.DIV;d=c.createElement(d);d.innerHTML="&nbsp;";e.parentNode.insertBefore(d,f);c.getWindow().getSelection().collapse(d,0);h&&goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_(h,f);goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_([e,
f]);return!0};goog.editor.plugins.Blockquote.prototype.insertEmptyTextNodeBeforeRange_=function(){var c=this.getFieldObject().getRange(),d=this.getFieldDomHelper().createTextNode("");c.insertNode(d,!0);return d};
goog.editor.plugins.Blockquote.prototype.splitQuotedBlockIE_=function(c){var d=this.getFieldDomHelper(),e=goog.editor.node.findTopMostEditableAncestor(c.parentNode,goog.bind(this.isSplittableBlockquote,this));if(!e)return!1;var f=c.cloneNode(!1);c.nextSibling&&c.nextSibling.tagName==goog.dom.TagName.BR&&(c=c.nextSibling);var h=goog.editor.node.splitDomTreeAt(c,f,e);goog.dom.insertSiblingAfter(h,e);var k=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)||goog.dom.TagName.DIV,
k=d.createElement(k);e.parentNode.insertBefore(k,h);k.innerHTML="&nbsp;";d=d.getDocument().selection.createRange();d.moveToElementText(c);d.move("character",2);d.select();k.innerHTML="";d.pasteHTML("");goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_(f,h);goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_([e,h]);return!0};goog.editor.plugins.EnterHandler=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.EnterHandler,goog.editor.Plugin);goog.editor.plugins.EnterHandler.prototype.tag=goog.dom.TagName.DIV;goog.editor.plugins.EnterHandler.prototype.getTrogClassId=function(){return"EnterHandler"};
goog.editor.plugins.EnterHandler.prototype.enable=function(c){goog.editor.plugins.EnterHandler.superClass_.enable.call(this,c);!goog.editor.BrowserFeature.SUPPORTS_OPERA_DEFAULTBLOCK_COMMAND||this.tag!=goog.dom.TagName.P&&this.tag!=goog.dom.TagName.DIV||this.getFieldDomHelper().getDocument().execCommand("opera-defaultBlock",!1,this.tag)};
goog.editor.plugins.EnterHandler.prototype.prepareContentsHtml=function(c){return!c||goog.string.isBreakingWhitespace(c)?goog.editor.BrowserFeature.COLLAPSES_EMPTY_NODES?this.getNonCollapsingBlankHtml():"":c};goog.editor.plugins.EnterHandler.prototype.getNonCollapsingBlankHtml=goog.functions.constant("<br>");
goog.editor.plugins.EnterHandler.prototype.handleBackspaceInternal=function(c,d){var e=this.getFieldObject().getElement(),f=d&&d.getStartNode();e.firstChild==f&&goog.editor.node.isEmpty(f)&&(c.preventDefault(),c.stopPropagation())};
goog.editor.plugins.EnterHandler.prototype.processParagraphTagsInternal=function(c,d){if(goog.userAgent.IE||goog.userAgent.OPERA)this.ensureBlockIeOpera(goog.dom.TagName.DIV);else if(!d&&goog.userAgent.WEBKIT){var e=this.getFieldObject().getRange();if(e&&goog.editor.plugins.EnterHandler.isDirectlyInBlockquote(e.getContainerElement())){var f=this.getFieldDomHelper(),h=f.createElement(goog.dom.TagName.BR);e.insertNode(h,!0);goog.editor.node.isBlockTag(h.parentNode)&&!goog.editor.node.skipEmptyTextNodes(h.nextSibling)&&
goog.dom.insertSiblingBefore(f.createElement(goog.dom.TagName.BR),h);goog.editor.range.placeCursorNextTo(h,!1);c.preventDefault()}}};goog.editor.plugins.EnterHandler.isDirectlyInBlockquote=function(c){for(;c;c=c.parentNode)if(goog.editor.node.isBlockTag(c))return c.tagName==goog.dom.TagName.BLOCKQUOTE;return!1};goog.editor.plugins.EnterHandler.prototype.handleDeleteGecko=function(c){this.deleteBrGecko(c)};
goog.editor.plugins.EnterHandler.prototype.deleteBrGecko=function(c){var d=this.getFieldObject().getRange();if(d.isCollapsed()){var e=d.getEndNode();if(e.nodeType==goog.dom.NodeType.ELEMENT&&(d=e.childNodes[d.getEndOffset()])&&d.tagName==goog.dom.TagName.BR){var f=goog.editor.node.getPreviousSibling(d),h=d.nextSibling;e.removeChild(d);c.preventDefault();h&&goog.editor.node.isBlockTag(h)&&(f&&f.tagName!=goog.dom.TagName.BR&&!goog.editor.node.isBlockTag(f)?goog.dom.Range.createCaret(f,goog.editor.node.getLength(f)).select():
(c=goog.editor.node.getLeftMostLeaf(h),goog.dom.Range.createCaret(c,0).select()))}}};
goog.editor.plugins.EnterHandler.prototype.handleKeyPress=function(c){if(goog.userAgent.GECKO&&this.getFieldObject().inModalMode())return!1;if(c.keyCode==goog.events.KeyCodes.BACKSPACE)this.handleBackspaceInternal(c,this.getFieldObject().getRange());else if(c.keyCode==goog.events.KeyCodes.ENTER)if(goog.userAgent.GECKO)c.shiftKey||this.handleEnterGecko_(c);else{this.getFieldObject().dispatchBeforeChange();var d=this.deleteCursorSelection_(),e=!!this.getFieldObject().execCommand(goog.editor.plugins.Blockquote.SPLIT_COMMAND,
d);e&&(c.preventDefault(),c.stopPropagation());this.releasePositionObject_(d);goog.userAgent.WEBKIT&&this.handleEnterWebkitInternal(c);this.processParagraphTagsInternal(c,e);this.getFieldObject().dispatchChange()}else goog.userAgent.GECKO&&c.keyCode==goog.events.KeyCodes.DELETE&&this.handleDeleteGecko(c);return!1};goog.editor.plugins.EnterHandler.prototype.handleKeyUp=function(c){if(goog.userAgent.GECKO&&this.getFieldObject().inModalMode())return!1;this.handleKeyUpInternal(c);return!1};
goog.editor.plugins.EnterHandler.prototype.handleKeyUpInternal=function(c){(goog.userAgent.IE||goog.userAgent.OPERA)&&c.keyCode==goog.events.KeyCodes.ENTER&&this.ensureBlockIeOpera(goog.dom.TagName.DIV,!0)};
goog.editor.plugins.EnterHandler.prototype.handleEnterGecko_=function(c){var d=this.getFieldObject().getRange(),e=!d||d.isCollapsed(),f=this.deleteCursorSelection_(),h=this.getFieldObject().execCommand(goog.editor.plugins.Blockquote.SPLIT_COMMAND,f);h&&(c.preventDefault(),c.stopPropagation());this.releasePositionObject_(f);h||this.handleEnterAtCursorGeckoInternal(c,e,d)};goog.editor.plugins.EnterHandler.prototype.handleEnterWebkitInternal=goog.nullFunction;
goog.editor.plugins.EnterHandler.prototype.handleEnterAtCursorGeckoInternal=goog.nullFunction;goog.editor.plugins.EnterHandler.DO_NOT_ENSURE_BLOCK_NODES_=goog.object.createSet(goog.dom.TagName.LI,goog.dom.TagName.DIV,goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6);goog.editor.plugins.EnterHandler.isBrElem=function(c){return goog.editor.node.isEmpty(c)&&1==c.getElementsByTagName(goog.dom.TagName.BR).length};
goog.editor.plugins.EnterHandler.prototype.ensureBlockIeOpera=function(c,d){for(var e=this.getFieldObject().getRange(),f=e.getContainer(),h=this.getFieldObject().getElement(),k;f&&f!=h;){var l=f.nodeName;if(l==c||goog.editor.plugins.EnterHandler.DO_NOT_ENSURE_BLOCK_NODES_[l]&&(!d||!goog.editor.plugins.EnterHandler.isBrElem(f))){if(goog.userAgent.OPERA&&k){l==c&&(k==f.lastChild&&goog.editor.node.isEmpty(k))&&(goog.dom.insertSiblingAfter(k,f),goog.dom.Range.createFromNodeContents(k).select());break}return}goog.userAgent.OPERA&&
(d&&l==goog.dom.TagName.P&&l!=c)&&(k=f);f=f.parentNode}if(goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher(9)){var m=!1,e=e.getBrowserRangeObject(),f=e.duplicate();f.moveEnd("character",1);f.text.length&&(m=f.parentElement(),f=f.duplicate(),f.collapse(!1),f=f.parentElement(),m=m!=f&&f!=e.parentElement())&&(e.move("character",-1),e.select())}this.getFieldObject().getEditableDomHelper().getDocument().execCommand("FormatBlock",!1,"<"+c+">");m&&(e.move("character",1),e.select())};
goog.editor.plugins.EnterHandler.prototype.deleteCursorSelection_=function(){return goog.editor.BrowserFeature.HAS_W3C_RANGES?this.deleteCursorSelectionW3C_():this.deleteCursorSelectionIE_()};goog.editor.plugins.EnterHandler.prototype.releasePositionObject_=function(c){goog.editor.BrowserFeature.HAS_W3C_RANGES||c.removeNode(!0)};
goog.editor.plugins.EnterHandler.prototype.deleteCursorSelectionIE_=function(){var c=this.getFieldDomHelper().getDocument(),d=c.selection.createRange(),e=goog.string.createUniqueString();d.pasteHTML('<span id="'+e+'"></span>');c=c.getElementById(e);c.id="";return c};
goog.editor.plugins.EnterHandler.prototype.deleteCursorSelectionW3C_=function(){var c=this.getFieldObject().getRange();if(!c.isCollapsed()){var d=!0;if(goog.userAgent.OPERA){var e=c.getStartNode(),f=c.getStartOffset();e==c.getEndNode()&&(e.lastChild&&e.lastChild.tagName==goog.dom.TagName.BR&&f==e.childNodes.length-1)&&(d=!1)}d&&goog.editor.plugins.EnterHandler.deleteW3cRange_(c)}return goog.editor.range.getDeepEndPoint(c,!0)};
goog.editor.plugins.EnterHandler.deleteW3cRange_=function(c){if(c&&!c.isCollapsed()){var d=!0,e=c.getContainerElement(),f=new goog.dom.NodeOffset(c.getStartNode(),e),h=c.getStartOffset(),k=goog.editor.plugins.EnterHandler.isInOneContainerW3c_(c),l=!k&&goog.editor.plugins.EnterHandler.isPartialEndW3c_(c);c.removeContents();(c=f.findTargetNode(e))?c=goog.dom.Range.createCaret(c,h):(c=goog.dom.Range.createCaret(e,e.childNodes.length),d=!1);c.select();k&&(k=goog.editor.style.getContainer(c.getStartNode()),
goog.editor.node.isEmpty(k,!0)&&(d="&nbsp;",goog.userAgent.OPERA&&k.tagName==goog.dom.TagName.LI&&(d="<br>"),goog.editor.node.replaceInnerHtml(k,d),goog.editor.range.selectNodeStart(k.firstChild),d=!1));l&&(l=goog.editor.style.getContainer(c.getStartNode()),k=goog.editor.node.getNextSibling(l),l&&k&&(goog.dom.append(l,k.childNodes),goog.dom.removeNode(k)));d&&(c=goog.dom.Range.createCaret(f.findTargetNode(e),h),c.select())}return c};
goog.editor.plugins.EnterHandler.isInOneContainerW3c_=function(c){var d=c.getStartNode();goog.editor.style.isContainer(d)&&(d=d.childNodes[c.getStartOffset()]||d);var d=goog.editor.style.getContainer(d),e=c.getEndNode();goog.editor.style.isContainer(e)&&(e=e.childNodes[c.getEndOffset()]||e);e=goog.editor.style.getContainer(e);return d==e};
goog.editor.plugins.EnterHandler.isPartialEndW3c_=function(c){var d=c.getEndNode();c=c.getEndOffset();var e=d;if(goog.editor.style.isContainer(e)){var f=e.childNodes[c];if(!f||f.nodeType==goog.dom.NodeType.ELEMENT&&goog.editor.style.isContainer(f))return!1}for(f=goog.editor.style.getContainer(e);f!=e;){if(goog.editor.node.getNextSibling(e))return!0;e=e.parentNode}return c!=goog.editor.node.getLength(d)};goog.editor.plugins.UndoRedoState=function(c){goog.events.EventTarget.call(this);this.asynchronous_=c};goog.inherits(goog.editor.plugins.UndoRedoState,goog.events.EventTarget);goog.editor.plugins.UndoRedoState.ACTION_COMPLETED="action_completed";goog.editor.plugins.UndoRedoState.prototype.isAsynchronous=function(){return this.asynchronous_};goog.editor.plugins.UndoRedoManager=function(){goog.events.EventTarget.call(this);this.maxUndoDepth_=100;this.undoStack_=[];this.redoStack_=[];this.pendingActions_=[]};goog.inherits(goog.editor.plugins.UndoRedoManager,goog.events.EventTarget);goog.editor.plugins.UndoRedoManager.EventType={STATE_CHANGE:"state_change",STATE_ADDED:"state_added",BEFORE_UNDO:"before_undo",BEFORE_REDO:"before_redo"};goog.editor.plugins.UndoRedoManager.prototype.inProgressActionKey_=null;
goog.editor.plugins.UndoRedoManager.prototype.setMaxUndoDepth=function(c){this.maxUndoDepth_=c};
goog.editor.plugins.UndoRedoManager.prototype.addState=function(c){if(0==this.undoStack_.length||!c.equals(this.undoStack_[this.undoStack_.length-1])){this.undoStack_.push(c);this.undoStack_.length>this.maxUndoDepth_&&this.undoStack_.shift();var d=this.redoStack_.length;this.redoStack_.length=0;this.dispatchEvent({type:goog.editor.plugins.UndoRedoManager.EventType.STATE_ADDED,state:c});(1==this.undoStack_.length||d)&&this.dispatchStateChange_()}};
goog.editor.plugins.UndoRedoManager.prototype.dispatchStateChange_=function(){this.dispatchEvent(goog.editor.plugins.UndoRedoManager.EventType.STATE_CHANGE)};goog.editor.plugins.UndoRedoManager.prototype.undo=function(){this.shiftState_(this.undoStack_,this.redoStack_)};goog.editor.plugins.UndoRedoManager.prototype.redo=function(){this.shiftState_(this.redoStack_,this.undoStack_)};goog.editor.plugins.UndoRedoManager.prototype.hasUndoState=function(){return 0<this.undoStack_.length};
goog.editor.plugins.UndoRedoManager.prototype.hasRedoState=function(){return 0<this.redoStack_.length};goog.editor.plugins.UndoRedoManager.prototype.shiftState_=function(c,d){if(c.length){var e=c.pop();d.push(e);this.addAction_({type:c==this.undoStack_?goog.editor.plugins.UndoRedoManager.EventType.BEFORE_UNDO:goog.editor.plugins.UndoRedoManager.EventType.BEFORE_REDO,func:c==this.undoStack_?e.undo:e.redo,state:e});0!=c.length&&1!=d.length||this.dispatchStateChange_()}};
goog.editor.plugins.UndoRedoManager.prototype.addAction_=function(c){this.pendingActions_.push(c);1==this.pendingActions_.length&&this.doAction_()};
goog.editor.plugins.UndoRedoManager.prototype.doAction_=function(){if(!this.inProgressActionKey_&&0!=this.pendingActions_.length){var c=this.pendingActions_.shift();this.dispatchEvent({type:c.type,state:c.state})&&(c.state.isAsynchronous()?(this.inProgressActionKey_=goog.events.listen(c.state,goog.editor.plugins.UndoRedoState.ACTION_COMPLETED,this.finishAction_,!1,this),c.func.call(c.state)):(c.func.call(c.state),this.doAction_()))}};
goog.editor.plugins.UndoRedoManager.prototype.finishAction_=function(){goog.events.unlistenByKey(this.inProgressActionKey_);this.inProgressActionKey_=null;this.doAction_()};goog.editor.plugins.UndoRedoManager.prototype.clearHistory=function(){if(0<this.undoStack_.length||0<this.redoStack_.length)this.undoStack_.length=0,this.redoStack_.length=0,this.dispatchStateChange_()};goog.editor.plugins.UndoRedoManager.prototype.undoPeek=function(){return this.undoStack_[this.undoStack_.length-1]};
goog.editor.plugins.UndoRedoManager.prototype.redoPeek=function(){return this.redoStack_[this.redoStack_.length-1]};goog.editor.plugins.UndoRedo=function(c){goog.editor.Plugin.call(this);this.setUndoRedoManager(c||new goog.editor.plugins.UndoRedoManager);this.eventHandlers_={};this.currentStates_={};this.initialFieldChange_=null;this.boundRestoreState_=goog.bind(this.restoreState,this)};goog.inherits(goog.editor.plugins.UndoRedo,goog.editor.Plugin);goog.editor.plugins.UndoRedo.prototype.logger=goog.log.getLogger("goog.editor.plugins.UndoRedo");goog.editor.plugins.UndoRedo.prototype.inProgressUndo_=null;
goog.editor.plugins.UndoRedo.COMMAND={UNDO:"+undo",REDO:"+redo"};goog.editor.plugins.UndoRedo.SUPPORTED_COMMANDS_=goog.object.transpose(goog.editor.plugins.UndoRedo.COMMAND);goog.editor.plugins.UndoRedo.prototype.setMaxUndoDepth=function(c){this.undoManager_.setMaxUndoDepth(c)};
goog.editor.plugins.UndoRedo.prototype.setUndoRedoManager=function(c){this.managerStateChangeKey_&&goog.events.unlistenByKey(this.managerStateChangeKey_);this.undoManager_=c;this.managerStateChangeKey_=goog.events.listen(this.undoManager_,goog.editor.plugins.UndoRedoManager.EventType.STATE_CHANGE,this.dispatchCommandValueChange_,!1,this)};goog.editor.plugins.UndoRedo.prototype.isSupportedCommand=function(c){return c in goog.editor.plugins.UndoRedo.SUPPORTED_COMMANDS_};
goog.editor.plugins.UndoRedo.prototype.unregisterFieldObject=function(c){this.disable(c);this.setFieldObject(null)};goog.editor.plugins.UndoRedo.prototype.getCurrentFieldObject=function(){return this.getFieldObject()};goog.editor.plugins.UndoRedo.prototype.getFieldObjectForHash=function(c){return this.getFieldObject()};goog.editor.plugins.UndoRedo.prototype.getCurrentEventTarget=function(){return this.getFieldObject()};
goog.editor.plugins.UndoRedo.prototype.enable=function(c){if(!this.isEnabled(c)){c.clearDelayedChange();var d=new goog.events.EventHandler(this);goog.editor.BrowserFeature.USE_MUTATION_EVENTS||d.listen(c,goog.editor.Field.EventType.BEFORECHANGE,this.handleBeforeChange_);d.listen(c,goog.editor.Field.EventType.DELAYEDCHANGE,this.handleDelayedChange_);d.listen(c,goog.editor.Field.EventType.BLUR,this.handleBlur_);this.eventHandlers_[c.getHashCode()]=d;this.updateCurrentState_(c)}};
goog.editor.plugins.UndoRedo.prototype.disable=function(c){c.clearDelayedChange();var d=this.eventHandlers_[c.getHashCode()];d&&(d.dispose(),delete this.eventHandlers_[c.getHashCode()]);this.currentStates_[c.getHashCode()]&&delete this.currentStates_[c.getHashCode()]};goog.editor.plugins.UndoRedo.prototype.isEnabled=function(c){return!!this.eventHandlers_[c.getHashCode()]};
goog.editor.plugins.UndoRedo.prototype.disposeInternal=function(){goog.editor.plugins.UndoRedo.superClass_.disposeInternal.call(this);for(var c in this.eventHandlers_)this.eventHandlers_[c].dispose(),delete this.eventHandlers_[c];this.setFieldObject(null);this.undoManager_&&(this.undoManager_.dispose(),delete this.undoManager_)};goog.editor.plugins.UndoRedo.prototype.getTrogClassId=function(){return"UndoRedo"};
goog.editor.plugins.UndoRedo.prototype.execCommand=function(c,d){c==goog.editor.plugins.UndoRedo.COMMAND.UNDO?this.undoManager_.undo():c==goog.editor.plugins.UndoRedo.COMMAND.REDO&&this.undoManager_.redo()};goog.editor.plugins.UndoRedo.prototype.queryCommandValue=function(c){var d=null;c==goog.editor.plugins.UndoRedo.COMMAND.UNDO?d=this.undoManager_.hasUndoState():c==goog.editor.plugins.UndoRedo.COMMAND.REDO&&(d=this.undoManager_.hasRedoState());return d};
goog.editor.plugins.UndoRedo.prototype.dispatchCommandValueChange_=function(){this.getCurrentEventTarget().dispatchEvent({type:goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,commands:[goog.editor.plugins.UndoRedo.COMMAND.REDO,goog.editor.plugins.UndoRedo.COMMAND.UNDO]})};
goog.editor.plugins.UndoRedo.prototype.restoreState=function(c,d,e){var f=this.getFieldObjectForHash(c.fieldHashCode);if(f){f.stopChangeEvents(!0,!0);try{f.dispatchBeforeChange();f.execCommand(goog.editor.Command.CLEAR_LOREM,!0);goog.editor.node.replaceInnerHtml(f.getElement(),d);e&&e.select();var h=this.getCurrentFieldObject();f.focus();h&&h.getHashCode()!=c.fieldHashCode&&h.execCommand(goog.editor.Command.UPDATE_LOREM);this.currentStates_[c.fieldHashCode].setUndoState(d,e)}catch(k){goog.log.error(this.logger,
"Error while restoring undo state",k)}finally{this.inProgressUndo_=c,f.dispatchChange(),f.dispatchSelectionChangeEvent()}}};
goog.editor.plugins.UndoRedo.prototype.handleKeyboardShortcut=function(c,d,e){if(e){var f;"z"==d?f=c.shiftKey?goog.editor.plugins.UndoRedo.COMMAND.REDO:goog.editor.plugins.UndoRedo.COMMAND.UNDO:"y"==d&&(f=goog.editor.plugins.UndoRedo.COMMAND.REDO);if(f)return(c=f==goog.editor.plugins.UndoRedo.COMMAND.UNDO?this.undoManager_.undoPeek():this.undoManager_.redoPeek())&&c.fieldHashCode?this.getCurrentFieldObject().execCommand(f):this.execCommand(f),!0}return!1};
goog.editor.plugins.UndoRedo.prototype.clearHistory=function(){this.getFieldObject().stopChangeEvents(!0,!0);this.undoManager_.clearHistory();this.getFieldObject().startChangeEvents()};goog.editor.plugins.UndoRedo.prototype.refreshCurrentState=function(c){this.isEnabled(c)&&(this.currentStates_[c.getHashCode()]&&delete this.currentStates_[c.getHashCode()],this.updateCurrentState_(c))};
goog.editor.plugins.UndoRedo.prototype.handleBeforeChange_=function(c){if(!this.inProgressUndo_){c=c.target;var d=c.getHashCode();this.initialFieldChange_!=d&&(this.initialFieldChange_=d,this.updateCurrentState_(c))}};goog.editor.plugins.UndoRedo.prototype.handleDelayedChange_=function(c){this.inProgressUndo_?(c=this.inProgressUndo_,this.inProgressUndo_=null,c.dispatchEvent(goog.editor.plugins.UndoRedoState.ACTION_COMPLETED)):this.updateCurrentState_(c.target)};
goog.editor.plugins.UndoRedo.prototype.handleBlur_=function(c){(c=c.target)&&c.clearDelayedChange()};goog.editor.plugins.UndoRedo.prototype.getCursorPosition_=function(c){c=new goog.editor.plugins.UndoRedo.CursorPosition_(c);return c.isValid()?c:null};
goog.editor.plugins.UndoRedo.prototype.updateCurrentState_=function(c){var d=c.getHashCode(),e,f;c.queryCommandValue(goog.editor.Command.USING_LOREM)?(e="",f=null):(e=c.getElement().innerHTML,f=this.getCursorPosition_(c));var h=this.currentStates_[d];if(h){if(h.undoContent_==e)return;if(""==e||""==h.undoContent_)if(c=c.getInjectableContents("",{}),e==c&&""==h.undoContent_||h.undoContent_==c&&""==e)return;h.setRedoState(e,f);this.undoManager_.addState(h)}this.currentStates_[d]=new goog.editor.plugins.UndoRedo.UndoState_(d,
e,f,this.boundRestoreState_)};goog.editor.plugins.UndoRedo.UndoState_=function(c,d,e,f){goog.editor.plugins.UndoRedoState.call(this,!0);this.fieldHashCode=c;this.restore_=f;this.setUndoState(d,e)};goog.inherits(goog.editor.plugins.UndoRedo.UndoState_,goog.editor.plugins.UndoRedoState);goog.editor.plugins.UndoRedo.UndoState_.prototype.undo=function(){this.restore_(this,this.undoContent_,this.undoCursorPosition_)};
goog.editor.plugins.UndoRedo.UndoState_.prototype.redo=function(){this.restore_(this,this.redoContent_,this.redoCursorPosition_)};goog.editor.plugins.UndoRedo.UndoState_.prototype.setUndoState=function(c,d){this.undoContent_=c;this.undoCursorPosition_=d};goog.editor.plugins.UndoRedo.UndoState_.prototype.setRedoState=function(c,d){this.redoContent_=c;this.redoCursorPosition_=d};
goog.editor.plugins.UndoRedo.UndoState_.prototype.equals=function(c){return this.fieldHashCode==c.fieldHashCode&&this.undoContent_==c.undoContent_&&this.redoContent_==c.redoContent_};goog.editor.plugins.UndoRedo.CursorPosition_=function(c){this.field_=c;var d=c.getEditableDomHelper().getWindow();c=(c=c.getRange())&&c.isRangeInDocument()&&c.getWindow()==d?c:null;goog.editor.BrowserFeature.HAS_W3C_RANGES?this.initW3C_(c):goog.editor.BrowserFeature.HAS_IE_RANGES&&this.initIE_(c)};
goog.editor.plugins.UndoRedo.CursorPosition_.prototype.initW3C_=function(c){this.isValid_=!1;if(c){var d=c.getAnchorNode(),e=c.getFocusNode();if(d&&e){var f=c.getAnchorOffset(),d=new goog.dom.NodeOffset(d,this.field_.getElement()),h=c.getFocusOffset(),e=new goog.dom.NodeOffset(e,this.field_.getElement());c.isReversed()?(this.startOffset_=e,this.startChildOffset_=h,this.endOffset_=d,this.endChildOffset_=f):(this.startOffset_=d,this.startChildOffset_=f,this.endOffset_=e,this.endChildOffset_=h);this.isValid_=
!0}}};
goog.editor.plugins.UndoRedo.CursorPosition_.prototype.initIE_=function(c){this.isValid_=!1;if(c){var d=c.getTextRange(0).getBrowserRangeObject();if(goog.dom.contains(this.field_.getElement(),d.parentElement())){c=this.field_.getEditableDomHelper().getDocument().body.createTextRange();c.moveToElementText(this.field_.getElement());var e=d.duplicate();e.collapse(!0);e.setEndPoint("StartToStart",c);this.startOffset_=goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_(e);d=d.duplicate();d.setEndPoint("StartToStart",
c);this.endOffset_=goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_(d);this.isValid_=!0}}};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.isValid=function(){return this.isValid_};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.toString=function(){return goog.editor.BrowserFeature.HAS_W3C_RANGES?"W3C:"+this.startOffset_.toString()+"\n"+this.startChildOffset_+":"+this.endOffset_.toString()+"\n"+this.endChildOffset_:"IE:"+this.startOffset_+","+this.endOffset_};
goog.editor.plugins.UndoRedo.CursorPosition_.prototype.select=function(){var c=this.getRange_(this.field_.getElement());c&&(goog.editor.BrowserFeature.HAS_IE_RANGES&&this.field_.getElement().focus(),goog.dom.Range.createFromBrowserRange(c).select())};
goog.editor.plugins.UndoRedo.CursorPosition_.prototype.getRange_=function(c){if(goog.editor.BrowserFeature.HAS_W3C_RANGES){var d=this.startOffset_.findTargetNode(c);c=this.endOffset_.findTargetNode(c);return d&&c?goog.dom.Range.createFromNodes(d,this.startChildOffset_,c,this.endChildOffset_).getBrowserRangeObject():null}d=c.ownerDocument.body.createTextRange();d.moveToElementText(c);d.collapse(!0);d.moveEnd("character",this.endOffset_);d.moveStart("character",this.startOffset_);return d};
goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_=function(c){var d=c.duplicate(),e=c.text,f=e.length;d.collapse(!0);d.moveEnd("character",f);for(var h,k=10;(h=d.compareEndPoints("EndToEnd",c))&&(f-=h,d.moveEnd("character",-h),--k,0!=k););c=0;for(d=e.indexOf("\n\r");-1!=d;)++c,d=e.indexOf("\n\r",d+1);return f+c};goog.editor.plugins.SpacesTabHandler=function(){goog.editor.plugins.AbstractTabHandler.call(this)};goog.inherits(goog.editor.plugins.SpacesTabHandler,goog.editor.plugins.AbstractTabHandler);goog.editor.plugins.SpacesTabHandler.prototype.getTrogClassId=function(){return"SpacesTabHandler"};
goog.editor.plugins.SpacesTabHandler.prototype.handleTabKey=function(c){var d=this.getFieldDomHelper(),e=this.getFieldObject().getRange();return goog.editor.range.intersectsTag(e,goog.dom.TagName.LI)?!1:(c.shiftKey||(this.getFieldObject().stopChangeEvents(!0,!0),e.isCollapsed()||(d.getDocument().execCommand("delete",!1,null),e=this.getFieldObject().getRange()),d=d.createDom("span",null,"\u00a0\u00a0 \u00a0"),d=e.insertNode(d,!1),this.getFieldObject().dispatchChange(),goog.editor.range.placeCursorNextTo(d,
!1),this.getFieldObject().dispatchSelectionChangeEvent()),c.preventDefault(),!0)};silex.view.TextEditor=function(c,d){this.element=c;silex.Helper.loadTemplateFile("templates/texteditor.html",c,function(){this.initUI();d&&d()},this)};
silex.view.TextEditor.prototype.initUI=function(){this.textField=new goog.editor.Field(goog.dom.getElementByClass("text-field",this.element));this.textField.registerPlugin(new goog.editor.plugins.BasicTextFormatter);this.textField.registerPlugin(new goog.editor.plugins.RemoveFormatting);this.textField.registerPlugin(new goog.editor.plugins.UndoRedo);this.textField.registerPlugin(new goog.editor.plugins.ListTabHandler);this.textField.registerPlugin(new goog.editor.plugins.SpacesTabHandler);this.textField.registerPlugin(new goog.editor.plugins.EnterHandler);
this.textField.registerPlugin(new goog.editor.plugins.HeaderFormatter);this.textField.registerPlugin(new goog.editor.plugins.LinkDialogPlugin);this.textField.registerPlugin(new goog.editor.plugins.LinkBubble);var c=goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton(goog.editor.Command.FONT_FACE);goog.ui.editor.ToolbarFactory.addFont(c,"Arial Black","Arial Black, Gadget, sans-serif");goog.ui.editor.ToolbarFactory.addFont(c,"Impact","Impact5, Charcoal, sans-serif");goog.ui.editor.ToolbarFactory.addFont(c,
"Lucida Console","Lucida Console, Monaco, monospace");goog.ui.editor.ToolbarFactory.addFont(c,"Lucida Sans","Lucida Sans Unicode, Lucida Grande, sans-serif");goog.ui.editor.ToolbarFactory.addFont(c,"Palatino","Palatino Linotype, Book Antiqua, Palatino, serif");goog.ui.editor.ToolbarFactory.addFont(c,"Tahoma","Tahoma, Geneva, sans-serif");var d=goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton(goog.editor.Command.FONT_SIZE);goog.ui.editor.ToolbarFactory.addFontSize(d,"1","1");goog.ui.editor.ToolbarFactory.addFontSize(d,
"2","2");goog.ui.editor.ToolbarFactory.addFontSize(d,"3","3");goog.ui.editor.ToolbarFactory.addFontSize(d,"4","4");goog.ui.editor.ToolbarFactory.addFontSize(d,"5","5");goog.ui.editor.ToolbarFactory.addFontSize(d,"6","6");goog.ui.editor.ToolbarFactory.addFontSize(d,"7","7");c=goog.ui.editor.DefaultToolbar.makeToolbar([goog.editor.Command.BOLD,goog.editor.Command.ITALIC,goog.editor.Command.UNDERLINE,goog.editor.Command.FONT_COLOR,goog.editor.Command.BACKGROUND_COLOR,c,d,goog.editor.Command.LINK,goog.editor.Command.UNDO,
goog.editor.Command.REDO,goog.editor.Command.UNORDERED_LIST,goog.editor.Command.ORDERED_LIST,goog.editor.Command.INDENT,goog.editor.Command.OUTDENT,goog.editor.Command.JUSTIFY_LEFT,goog.editor.Command.JUSTIFY_CENTER,goog.editor.Command.JUSTIFY_RIGHT,goog.editor.Command.SUBSCRIPT,goog.editor.Command.SUPERSCRIPT,goog.editor.Command.STRIKE_THROUGH,goog.editor.Command.REMOVE_FORMAT],goog.dom.getElementByClass("toolbar",this.element));new goog.ui.editor.ToolbarController(this.textField,c);goog.events.listen(this.textField,
goog.editor.Field.EventType.DELAYEDCHANGE,function(){this.contentChanged()},!1,this);this.textField.makeEditable();goog.events.listen(goog.dom.getElementByClass("close-btn",this.element),goog.events.EventType.CLICK,function(){this.closeEditor()},!1,this)};
silex.view.TextEditor.prototype.openEditor=function(c){this.textField.setHtml(!1,c);c=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(c,"display","inherit");goog.style.setStyle(this.element,"display","inherit");goog.events.listenOnce(c,goog.events.EventType.CLICK,function(c){this.closeEditor()},!1,this)};
silex.view.TextEditor.prototype.closeEditor=function(){var c=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(c,"display","none");goog.style.setStyle(this.element,"display","none")};silex.view.TextEditor.prototype.getData=function(){return this.textField.getCleanContents()};silex.view.TextEditor.prototype.contentChanged=function(){if(this.onStatus)this.onStatus({type:"changed",content:this.getData()})};silex.view.propertiesTool.PagePane=function(c,d){this.element=c;this.pageCheckboxes=[];this.pageChanged=d;this.buildUi()};
silex.view.propertiesTool.PagePane.prototype.buildUi=function(){this.linkDropdown=goog.dom.getElementByClass("link-combo-box",this.element);this.linkDropdown.onchange=goog.bind(this.onLinkChanged,this);var c=goog.dom.getElementByClass("link-input-text",this.element);this.linkInputTextField=new goog.editor.Field(c);this.linkInputTextField.makeEditable();c=goog.dom.getElementByClass("link-input-text",this.element);goog.style.setStyle(c,"display","none");goog.events.listen(this.linkInputTextField,goog.editor.Field.EventType.DELAYEDCHANGE,
this.onLinkTextChanged,!1,this)};silex.view.propertiesTool.PagePane.prototype.setComponent=function(c){this.component=c;this.redraw()};
silex.view.propertiesTool.PagePane.prototype.setPages=function(c){this.pages=c;this.pageCheckboxes&&goog.array.forEach(this.pageCheckboxes,function(c){c.checkbox.dispose()});var d=goog.dom.getElementByClass("link-combo-box",this.element);c=goog.dom.getElementByClass("link-template",this.element).innerHTML;silex.Helper.resolveTemplate(d,c,{pages:this.pages});d=goog.dom.getElementByClass("pages-container",this.element);c=goog.dom.getElementByClass("pages-selector-template",this.element).innerHTML;silex.Helper.resolveTemplate(d,
c,{pages:this.pages});this.pageCheckboxes=[];c=goog.dom.getElementByClass("pages-container",this.element);c=goog.dom.getElementsByClass("page-container",c);var e=0;goog.array.forEach(c,function(c){var d=goog.dom.getElementByClass("page-check",c);c=goog.dom.getElementByClass("page-label",c);var k=new goog.ui.Checkbox,l=this.pages[e++];k.render(d);k.setLabel(c);this.pageCheckboxes.push({checkbox:k,page:l});goog.events.listen(k,goog.ui.Component.EventType.CHANGE,function(c){this.checkPage(l,k)},!1,this)},
this);c=goog.dom.getElementByClass("show-on-all-pages-btn",this.element);goog.events.listen(c,goog.events.EventType.CLICK,function(c){this.unCheckAll()},!1,this);this.redraw()};
silex.view.propertiesTool.PagePane.prototype.onLinkChanged=function(c){"none"==this.linkDropdown.value?this.component.removeLink():"custom"==this.linkDropdown.value?(c=this.linkInputTextField.getCleanContents(),0==c.indexOf("#")&&(c=""),""==c&&(c="http://silex.io"),this.component.setLink(c)):this.component.setLink("#"+this.linkDropdown.value);this.pageChanged();this.redraw()};
silex.view.propertiesTool.PagePane.prototype.onLinkTextChanged=function(c){this.component.setLink(this.linkInputTextField.getCleanContents());this.pageChanged()};
silex.view.propertiesTool.PagePane.prototype.redraw=function(){if(this.component&&this.pageCheckboxes&&!this.isRedraw){this.isRedraw=!0;goog.array.forEach(this.pageCheckboxes,function(c){if(this.component){var e=c.page.name;c.checkbox.setEnabled(!0);c.checkbox.setChecked(goog.dom.classes.has(this.component.element,e))}else c.checkbox.setChecked(!1),c.checkbox.setEnabled(!1)},this);var c=this.component.getLink();null==c?this.linkDropdown.value="none":0==c.indexOf("#")&&silex.model.Page.getPageByName(c.substr(1))?
this.linkDropdown.value=c.substr(1):(this.linkInputTextField.setHtml(!1,c),this.linkDropdown.value="custom");c=goog.dom.getElementByClass("link-input-text",this.element);"custom"==this.linkDropdown.value?goog.style.setStyle(c,"display","inherit"):goog.style.setStyle(c,"display","none");this.isRedraw=!1}};silex.view.propertiesTool.PagePane.prototype.checkPage=function(c,d){d.isChecked()?c.addComponent(this.component):c.removeComponent(this.component);this.pageChanged();this.redraw()};
silex.view.propertiesTool.PagePane.prototype.unCheckAll=function(){goog.array.forEach(this.pages,function(c){c.removeComponent(this.component)},this);this.pageChanged();this.redraw()};silex.view.HTMLEditor=function(c,d){this.element=c;silex.Helper.loadTemplateFile("templates/htmleditor.html",c,function(){this.initUI();d&&d()},this)};
silex.view.HTMLEditor.prototype.initUI=function(){this.ace=ace.edit(goog.dom.getElementByClass("ace-editor",this.element));this.iAmSettingValue=!1;this.ace.getSession().setMode("ace/mode/html");this.ace.getSession().on("change",goog.bind(function(c){!1==this.iAmSettingValue&&(this.ace.getValue(),setTimeout(goog.bind(function(){this.contentChanged()},this),100))},this));goog.events.listen(goog.dom.getElementByClass("close-btn",this.element),goog.events.EventType.CLICK,function(){this.closeEditor()},
!1,this)};silex.view.HTMLEditor.prototype.openEditor=function(c){var d=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(d,"display","inherit");goog.style.setStyle(this.element,"display","inherit");goog.events.listenOnce(d,goog.events.EventType.CLICK,function(c){this.closeEditor()},!1,this);this.iAmSettingValue=!0;this.ace.setValue(c);this.iAmSettingValue=!1;this.ace.resize()};
silex.view.HTMLEditor.prototype.closeEditor=function(){var c=goog.dom.getElementByClass("dialogs-background");goog.style.setStyle(c,"display","none");goog.style.setStyle(this.element,"display","none")};silex.view.HTMLEditor.prototype.getData=function(){return this.ace.getValue()};silex.view.HTMLEditor.prototype.contentChanged=function(){if(this.onStatus)this.onStatus({type:"changed",content:this.getData()})};silex.view.Workspace=function(c,d,e,f,h,k,l,m){this.element=c;this.menu=d;this.stage=e;this.pageTool=f;this.propertiesTool=h;this.htmlEditor=k;this.textEditor=l;this.fileExplorer=m;this.viewport=new goog.dom.ViewportSizeMonitor;goog.events.listen(this.viewport,goog.events.EventType.RESIZE,function(c){this.invalidate()},!1,this);this.isDirty=!1;this.invalidate()};silex.view.Workspace.prototype.invalidate=function(){!1==this.isDirty&&(this.isDirty=!0,this.redraw())};
silex.view.Workspace.prototype.redraw=function(){!1==this.isDirty&&console.warn("Do not call redraw directly, use invalidate() instead");var c=this;setTimeout(function(){c.doRedraw()},400)};
silex.view.Workspace.prototype.doRedraw=function(){this.isDirty=!1;var c=this.viewport.getSize(),d=goog.style.getSize(this.pageTool.element),e=goog.style.getSize(this.propertiesTool.element),f=goog.style.getSize(this.menu.element);goog.style.setWidth(this.stage.element,c.width-d.width-e.width);d=c.height-f.height;goog.style.setHeight(this.pageTool.element,d);goog.style.setHeight(this.propertiesTool.element,d);goog.style.setHeight(this.stage.element,d);goog.style.setPosition(this.pageTool.element,
null,f.height);this.htmlEditor.element&&(d=goog.style.getSize(this.htmlEditor.element),f=(c.width-d.width)/2,d=(c.height-d.height)/2,goog.style.setPosition(this.htmlEditor.element,f,d));this.textEditor.element&&(d=goog.style.getSize(this.textEditor.element),f=(c.width-d.width)/2,d=(c.height-d.height)/2,goog.style.setPosition(this.textEditor.element,f,d));this.fileExplorer.element&&(d=goog.style.getSize(this.fileExplorer.element),f=(c.width-d.width)/2,d=(c.height-d.height)/2,goog.style.setPosition(this.fileExplorer.element,
f,d));goog.dom.classes.has(document.body,"loading-pending")&&goog.dom.classes.remove(document.body,"loading-pending")};silex.view.PropertiesTool=function(c,d){this.logger=new silex.Logger("silex.view.PropertiesTool",!0);this.element=c;this.context=silex.model.Component.CONTEXT_NORMAL;silex.Helper.loadTemplateFile("templates/propertiestool.html",c,function(){this.buildTabs();this.buildPanes();d&&d()},this)};silex.view.PropertiesTool.TAB_TITLE_NORMAL="Normal";silex.view.PropertiesTool.TAB_TITLE_HOVER="Hover";silex.view.PropertiesTool.TAB_TITLE_PRESSED="Pressed";
silex.view.PropertiesTool.prototype.buildTabs=function(){var c=goog.dom.getElementByClass("tab-bar-container",this.element),d=new goog.ui.TabBar;d.decorate(c);goog.events.listen(d,goog.ui.Component.EventType.ACTION,function(c){switch(d.getSelectedTab().getCaption()){case silex.view.PropertiesTool.TAB_TITLE_NORMAL:this.context=silex.model.Component.CONTEXT_NORMAL;break;case silex.view.PropertiesTool.TAB_TITLE_HOVER:this.context=silex.model.Component.CONTEXT_HOVER;break;case silex.view.PropertiesTool.TAB_TITLE_PRESSED:this.context=
silex.model.Component.CONTEXT_PRESSED}if(this.onStatus)this.onStatus({type:"contextChanged",context:this.context});this.setComponent(this.component)},!1,this)};
silex.view.PropertiesTool.prototype.buildPanes=function(){this.logger.info("buildPane",goog.dom.getElementByClass("background-editor",this.element),goog.dom.getElementByClass("page-editor",this.element),goog.dom.getElementByClass("property-editor",this.element));this.bgPane=new silex.view.propertiesTool.BgPane(goog.dom.getElementByClass("background-editor",this.element),goog.bind(this.styleChanged,this),goog.bind(this.selectBgImage,this));this.borderPane=new silex.view.propertiesTool.BorderPane(goog.dom.getElementByClass("border-editor",
this.element),goog.bind(this.styleChanged,this));this.propertyPane=new silex.view.propertiesTool.PropertyPane(goog.dom.getElementByClass("property-editor",this.element),goog.bind(this.propertyChanged,this),goog.bind(this.editHTML,this),goog.bind(this.editText,this),goog.bind(this.selectImage,this));this.pagePane=new silex.view.propertiesTool.PagePane(goog.dom.getElementByClass("page-editor",this.element),goog.bind(this.propertyChanged,this));this.generalStylePane=new silex.view.propertiesTool.GeneralStylePane(goog.dom.getElementByClass("general-editor",
this.element),goog.bind(this.styleChanged,this))};silex.view.PropertiesTool.prototype.selectBgImage=function(){if(this.onStatus)this.onStatus({type:"selectBgImage"})};silex.view.PropertiesTool.prototype.setBgImage=function(c){this.bgPane.setBgImage(c)};silex.view.PropertiesTool.prototype.selectImage=function(){console.log("selectImage");if(this.onStatus)this.onStatus({type:"selectImage"})};silex.view.PropertiesTool.prototype.setImage=function(c){this.propertyPane.setImage(c)};
silex.view.PropertiesTool.prototype.editHTML=function(){if(this.onStatus)this.onStatus({type:"editHTML"})};silex.view.PropertiesTool.prototype.editText=function(){if(this.onStatus)this.onStatus({type:"editText"})};silex.view.PropertiesTool.prototype.styleChanged=function(c){if(this.onStatus)this.onStatus({type:"styleChanged",style:c,context:this.context})};silex.view.PropertiesTool.prototype.propertyChanged=function(){if(this.onStatus)this.onStatus({type:"propertiesChanged",context:this.context})};
silex.view.PropertiesTool.prototype.setComponent=function(c){this.logger.fine("setComponent",c);this.component=c;this.propertyPane.setComponent(c);this.pagePane.setComponent(c);c=this.component.getStyle()||{};this.borderPane.setStyle(c);this.bgPane.setStyle(c);this.generalStylePane.setStyle(c)};silex.view.PropertiesTool.prototype.redraw=function(){this.logger.fine("redraw");this.borderPane.redraw();this.propertyPane.redraw();this.pagePane.redraw();this.generalStylePane.redraw();this.bgPane.redraw()};
silex.view.PropertiesTool.prototype.getBaseUrl=function(){return this.propertyPane.getBaseUrl()};silex.view.PropertiesTool.prototype.setBaseUrl=function(c){this.propertyPane.setBaseUrl(c)};silex.view.PropertiesTool.prototype.setPages=function(c){this.pagePane.setPages(c)};silex.Logger=function(c,d){this.id=c;this.isEnabled=null!=d?d:!0};silex.Logger.globalLevel=Number.MAX_VALUE;silex.Logger.ALL=0;silex.Logger.OFF=Number.MAX_VALUE;silex.Logger.FINE=500;silex.Logger.INFO=800;silex.Logger.WARNING=900;silex.Logger.SEVERE=1E3;silex.Logger.SHOUT=1200;silex.Logger.prototype.setLevel=function(c){silex.Logger.globalLevel=c};silex.Logger.prototype.getLevel=function(c){return silex.Logger.globalLevel};silex.Logger.prototype.setEnabled=function(c){this.isEnabled=c};
silex.Logger.prototype.getEnabled=function(){return this.isEnabled};silex.Logger.prototype.trace=function(c,d,e,f){this.isEnabled&&silex.Logger.globalLevel<=d&&(d=Error().stack.split("\n"),d="Error"==d[0]?d[3]:d[2],Array.prototype.unshift.call(e,"%c["+d.substring(d.lastIndexOf("/")+1,d.length-1)+"]",f),c.apply(console,e))};silex.Logger.prototype.fine=function(){this.trace(console.log,silex.Logger.FINE,arguments,"color: grey;")};
silex.Logger.prototype.info=function(){this.trace(console.log,silex.Logger.INFO,arguments,"color: grey;")};silex.Logger.prototype.warn=function(){this.trace(console.warn,silex.Logger.WARNING,arguments,"color: orange;")};silex.Logger.prototype.error=function(){this.trace(console.error,silex.Logger.SEVERE,arguments,"color: red;")};silex.Logger.prototype.shout=function(){this.trace(console.error,silex.Logger.SHOUT,arguments,"color: red;")};silex.model.File=function(c,d,e,f,h,k,l,m){this.workspace=c;this.menu=d;this.stage=e;this.pageTool=f;this.propertiesTool=h;this.htmlEditor=k;this.textEditor=l;this.fileExplorer=m};silex.model.File.CREATION_TEMPLATE="creation-template.html";silex.model.File.prototype.newFile=function(c){this.openFromUrl(silex.model.File.CREATION_TEMPLATE,c)};
silex.model.File.prototype.openFromUrl=function(c,d){silex.service.CloudStorage.getInstance().loadLocal(c,goog.bind(function(e){this.setUrl(c);this.setHtml(e);this.setBlob(null);d&&d()},this))};silex.model.File.prototype.saveAs=function(c){this.fileExplorer.saveAsDialog(goog.bind(function(d){this.setUrl(d.url);this.setBlob(d);this.save(c)},this),{mimetype:"text/html"});this.workspace.invalidate()};
silex.model.File.prototype.save=function(c){var d=this.getBlob();this.setBodyTag(this.getStageComponent().getHtml(d.url));this.setHeadTag(this.stage.getHead());this.setBodyStyle(this.stage.getBodyStyle());silex.service.CloudStorage.getInstance().save(d,this.getHtml(),function(){c&&c()})};
silex.model.File.prototype.open=function(c){this.fileExplorer.openDialog(goog.bind(function(c){silex.service.CloudStorage.getInstance().load(c,goog.bind(function(e){this.close();this.setUrl(c.url);this.setBlob(c);this.setHtml(e)},this))},this),["text/html","text/plain"]);this.workspace.invalidate()};silex.model.File.prototype.close=function(){this.blob=this.url=null;this.bodyTag=this.headTag="";this.setHtml("");this.stage.setBody("");this.stage.setHead("");this.stage.setBodyStyle("");this.workspace.invalidate()};
silex.model.File.prototype.getStageComponent=function(){return new silex.model.Component(this.stage.bodyElement)};silex.model.File.prototype.getBodyTag=function(){return this.bodyTag};silex.model.File.prototype.setBodyTag=function(c){this.bodyTag=c};silex.model.File.prototype.getHeadTag=function(){return this.headTag};silex.model.File.prototype.setHeadTag=function(c){this.headTag=c};silex.model.File.prototype.getUrl=function(){return this.url};
silex.model.File.prototype.setUrl=function(c){this.url=c};silex.model.File.prototype.getBlob=function(){return this.blob};silex.model.File.prototype.setBlob=function(c){(this.blob=c)?this.propertiesTool.setBaseUrl(c.url):this.propertiesTool.setBaseUrl(null)};silex.model.File.prototype.getBodyStyle=function(){return this.bodyStyle};silex.model.File.prototype.setBodyStyle=function(c){this.bodyStyle=c};
silex.model.File.prototype.setHtml=function(c){for(var d=silex.model.Page.getPages();0<d.length;)d[0].detach();var d=c.toLowerCase(),e=d.indexOf("<head>");-1==e&&(e=d.indexOf("<head "));var f=d.indexOf("</head>"),h=d.indexOf("<body>");-1==h&&(h=d.indexOf("<body "));var k=d.indexOf("</body>");-1<e&&-1<f&&(e=d.indexOf(">",e),this.headTag=c.substring(e+1,f));-1<h&&-1<k&&(e=d.indexOf(">",h),this.bodyTag=c.substring(e+1,k));c=c.substring(h,k+1);d=c.indexOf('"');f=c.indexOf('"',d+1);this.bodyStyle=c.substring(d+
1,f);this.getStageComponent().setHtml(this.bodyTag,this.getUrl());this.stage.setHead(this.headTag);this.stage.setBodyStyle(this.bodyStyle);c=this.stage.getPagesNamesFromDom();goog.array.forEach(c,function(c){c=new silex.model.Page(c,this.workspace,this.menu,this.stage,this.pageTool,this.propertiesTool,this.textEditor,this.fileExplorer);silex.model.Page.addPage(c)},this);d=silex.model.Page.getPages();this.pageTool.setPages(d);this.propertiesTool.setPages(d);this.pageTool.setSelectedIndex(0);(c=this.getTitle())&&
this.menu.setWebsiteName(c)};
silex.model.File.prototype.getHtml=function(){var c=silex.Helper.stringToStyle(this.getBodyStyle());if(c.backgroundImage){var d=c.backgroundImage.substring(c.backgroundImage.indexOf("(")+1,c.backgroundImage.indexOf(")")),e=d.indexOf("'");0<=e&&(d=d.substring(e+1,d.lastIndexOf("'")));d=silex.Helper.getRelativePath(d,this.propertiesTool.getBaseUrl());c.backgroundImage="url('"+d+"')"}c=silex.Helper.styleToString(c);d="<html>"+("<head>"+this.headTag+"</head>");d+='<body style="'+c+'">'+this.bodyTag+"</body>";
return d+="</html>"};silex.model.File.prototype.view=function(){null==this.getUrl()?window.confirm("The publication has to be saved first. Save the publication now?")&&this.save(goog.bind(function(){window.open(this.getUrl())},this)):window.open(this.getUrl())};silex.model.File.prototype.getTitle=function(){var c=this.stage.headElement.getElementsByTagName("title");return c&&0<c.length?c[0].innerHTML:null};
silex.model.File.prototype.setTitle=function(c){var d=this.stage.headElement.getElementsByTagName("title");d&&0<d.length?d[0].innerHTML=c:(d=goog.dom.createElement("title"),d.innerHTML=c,this.stage.headElement.appendChild(d));this.menu.setWebsiteName(c)};silex.service={};silex.service.CloudStorage=function(){this.filePicker=cloudExplorer};silex.service.CloudStorage.getInstance=function(){null==silex.service.CloudStorage.instance&&(silex.service.CloudStorage.instance=new silex.service.CloudStorage);return silex.service.CloudStorage.instance};silex.service.CloudStorage.prototype.save=function(c,d,e){this.filePicker.write(c,d,function(c){(new goog.async.Delay(function(){e&&e()},10,this)).start()},function(c){console.error(c)})};
silex.service.CloudStorage.prototype.load=function(c,d){this.filePicker.read(c,function(c){(new goog.async.Delay(function(){d&&d(c)},10,this)).start()},function(c){console.error(c)})};silex.service.CloudStorage.prototype.loadLocal=function(c,d){goog.net.XhrIo.send(c,function(c){var f=c.target.getResponse();(new goog.async.Delay(function(){d&&d(f)},10,this)).start()})};silex.boot=function(){var c=new silex.Logger("silex.boot",!1);c.setLevel(silex.Logger.ALL);c.info("--start boot--");var d=goog.dom.getElementByClass("silex-menu"),e=new silex.view.Menu(d,function(){c.fine("Menu created");var d=goog.dom.getElementByClass("silex-stage"),h=new silex.view.Stage(d,function(){c.fine("Stage created");var d=goog.dom.getElementByClass("silex-pagetool"),f=new silex.view.PageTool(d,function(){c.fine("PageTool created");var d=goog.dom.getElementByClass("silex-propertiestool"),
k=new silex.view.PropertiesTool(d,function(){c.fine("PropertiesTool created");var d=goog.dom.getElementByClass("silex-htmleditor"),m=new silex.view.HTMLEditor(d,function(){c.fine("HTMLEditor created");var d=goog.dom.getElementByClass("silex-texteditor"),p=new silex.view.TextEditor(d,function(){c.fine("TextEditor created");var d=goog.dom.getElementByClass("silex-fileexplorer"),q=new silex.view.FileExplorer(d,function(){c.fine("FileExplorer "+q.element);c.fine("FileExplorer created");var d=goog.dom.getElementByClass("silex-workspace"),
d=new silex.view.Workspace(d,e,h,f,k,m,p,q);c.fine("Workspace created");var v=new silex.model.File(d,e,h,f,k,m,p,q);c.fine("File created");var u=new silex.model.Selection(d,e,h,f,k,m,p,q);c.fine("Selection created");new silex.Controller(d,e,h,f,k,m,p,q,v,u);c.fine("Controller created");v.newFile(function(){});c.info("--end boot--")})})})})})})})};goog.exportSymbol("silex.boot",silex.boot);
